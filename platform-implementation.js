!function(){function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}return e}()({1:[function(e,t,r){t.exports=e("core-js/library/fn/array/from")},{"core-js/library/fn/array/from":130}],2:[function(e,t,r){t.exports=e("core-js/library/fn/array/is-array")},{"core-js/library/fn/array/is-array":131}],3:[function(e,t,r){t.exports=e("core-js/library/fn/date/now")},{"core-js/library/fn/date/now":132}],4:[function(e,t,r){t.exports=e("core-js/library/fn/get-iterator")},{"core-js/library/fn/get-iterator":133}],5:[function(e,t,r){t.exports=e("core-js/library/fn/is-iterable")},{"core-js/library/fn/is-iterable":134}],6:[function(e,t,r){t.exports=e("core-js/library/fn/json/stringify")},{"core-js/library/fn/json/stringify":135}],7:[function(e,t,r){t.exports=e("core-js/library/fn/map")},{"core-js/library/fn/map":136}],8:[function(e,t,r){t.exports=e("core-js/library/fn/number/is-nan")},{"core-js/library/fn/number/is-nan":137}],9:[function(e,t,r){t.exports=e("core-js/library/fn/number/max-safe-integer")},{"core-js/library/fn/number/max-safe-integer":138}],10:[function(e,t,r){t.exports=e("core-js/library/fn/number/min-safe-integer")},{"core-js/library/fn/number/min-safe-integer":139}],11:[function(e,t,r){t.exports=e("core-js/library/fn/object/assign")},{"core-js/library/fn/object/assign":140}],12:[function(e,t,r){t.exports=e("core-js/library/fn/object/create")},{"core-js/library/fn/object/create":141}],13:[function(e,t,r){t.exports=e("core-js/library/fn/object/define-properties")},{"core-js/library/fn/object/define-properties":142}],14:[function(e,t,r){t.exports=e("core-js/library/fn/object/define-property")},{"core-js/library/fn/object/define-property":143}],15:[function(e,t,r){t.exports=e("core-js/library/fn/object/freeze")},{"core-js/library/fn/object/freeze":144}],16:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-descriptor")},{"core-js/library/fn/object/get-own-property-descriptor":145}],17:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-names")},{"core-js/library/fn/object/get-own-property-names":146}],18:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-symbols")},{"core-js/library/fn/object/get-own-property-symbols":147}],19:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-prototype-of")},{"core-js/library/fn/object/get-prototype-of":148}],20:[function(e,t,r){t.exports=e("core-js/library/fn/object/keys")},{"core-js/library/fn/object/keys":149}],21:[function(e,t,r){t.exports=e("core-js/library/fn/object/set-prototype-of")},{"core-js/library/fn/object/set-prototype-of":150}],22:[function(e,t,r){t.exports=e("core-js/library/fn/object/values")},{"core-js/library/fn/object/values":151}],23:[function(e,t,r){t.exports=e("core-js/library/fn/parse-float")},{"core-js/library/fn/parse-float":152}],24:[function(e,t,r){t.exports=e("core-js/library/fn/parse-int")},{"core-js/library/fn/parse-int":153}],25:[function(e,t,r){t.exports=e("core-js/library/fn/promise")},{"core-js/library/fn/promise":154}],26:[function(e,t,r){t.exports=e("core-js/library/fn/reflect/get")},{"core-js/library/fn/reflect/get":155}],27:[function(e,t,r){t.exports=e("core-js/library/fn/set")},{"core-js/library/fn/set":156}],28:[function(e,t,r){t.exports=e("core-js/library/fn/symbol")},{"core-js/library/fn/symbol":157}],29:[function(e,t,r){t.exports=e("core-js/library/fn/symbol/iterator")},{"core-js/library/fn/symbol/iterator":158}],30:[function(e,t,r){t.exports=e("core-js/library/fn/weak-map")},{"core-js/library/fn/weak-map":159}],31:[function(e,t,r){t.exports=e("core-js/library/fn/weak-set")},{"core-js/library/fn/weak-set":160}],32:[function(e,t,r){function n(e){if(i(e))return e}var i=e("../core-js/array/is-array");t.exports=n},{"../core-js/array/is-array":2}],33:[function(e,t,r){function n(e){if(i(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var i=e("../core-js/array/is-array");t.exports=n},{"../core-js/array/is-array":2}],34:[function(e,t,r){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.exports=n},{}],35:[function(e,t,r){function n(e,t,r,n,i,a,s){try{var l=e[a](s),u=l.value}catch(e){return void r(e)}l.done?t(u):o.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new o(function(i,o){function a(e){n(l,i,o,a,s,"next",e)}function s(e){n(l,i,o,a,s,"throw",e)}var l=e.apply(t,r);a(void 0)})}}var o=e("../core-js/promise");t.exports=i},{"../core-js/promise":25}],36:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.exports=n},{}],37:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),o(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=e("../core-js/object/define-property");t.exports=i},{"../core-js/object/define-property":14}],38:[function(e,t,r){function n(e,t,r){return t in e?i(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=e("../core-js/object/define-property");t.exports=n},{"../core-js/object/define-property":14}],39:[function(e,t,r){function n(){return t.exports=n=i||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}var i=e("../core-js/object/assign");t.exports=n},{"../core-js/object/assign":11}],40:[function(e,t,r){function n(e,r,s){return"undefined"!=typeof Reflect&&o?t.exports=n=o:t.exports=n=function(e,t,r){var n=a(e,t);if(n){var o=i(n,t);return o.get?o.get.call(r):o.value}},n(e,r,s||e)}var i=e("../core-js/object/get-own-property-descriptor"),o=e("../core-js/reflect/get"),a=(e("./getPrototypeOf"),e("./superPropBase"));t.exports=n},{"../core-js/object/get-own-property-descriptor":16,"../core-js/reflect/get":26,"./getPrototypeOf":41,"./superPropBase":55}],41:[function(e,t,r){function n(e){return t.exports=n=o?i:function(e){return e.__proto__||i(e)},n(e)}var i=e("../core-js/object/get-prototype-of"),o=e("../core-js/object/set-prototype-of");t.exports=n},{"../core-js/object/get-prototype-of":19,"../core-js/object/set-prototype-of":21}],42:[function(e,t,r){function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=i(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}var i=e("../core-js/object/create"),o=e("./setPrototypeOf");t.exports=n},{"../core-js/object/create":12,"./setPrototypeOf":53}],43:[function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}t.exports=n},{}],44:[function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=o&&i?i(e,r):{};n.get||n.set?o(t,r,n):t[r]=e[r]}return t.default=e,t}var i=e("../core-js/object/get-own-property-descriptor"),o=e("../core-js/object/define-property");t.exports=n},{"../core-js/object/define-property":14,"../core-js/object/get-own-property-descriptor":16}],45:[function(e,t,r){function n(e){if(o(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return i(e)}var i=e("../core-js/array/from"),o=e("../core-js/is-iterable");t.exports=n},{"../core-js/array/from":1,"../core-js/is-iterable":5}],46:[function(e,t,r){function n(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var s,l=i(e);!(n=(s=l.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}var i=e("../core-js/get-iterator");t.exports=n},{"../core-js/get-iterator":4}],47:[function(e,t,r){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}t.exports=n},{}],48:[function(e,t,r){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.exports=n},{}],49:[function(e,t,r){function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=a(r);"function"==typeof o&&(n=n.concat(o(r).filter(function(e){return i(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}var i=e("../core-js/object/get-own-property-descriptor"),o=e("../core-js/object/get-own-property-symbols"),a=e("../core-js/object/keys"),s=e("./defineProperty");t.exports=n},{"../core-js/object/get-own-property-descriptor":16,"../core-js/object/get-own-property-symbols":18,"../core-js/object/keys":20,"./defineProperty":38}],50:[function(e,t,r){function n(e,t){if(null==e)return{};var r,n,a=o(e,t);if(i){var s=i(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=e("../core-js/object/get-own-property-symbols"),o=e("./objectWithoutPropertiesLoose");t.exports=n},{"../core-js/object/get-own-property-symbols":18,"./objectWithoutPropertiesLoose":51}],51:[function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o={},a=i(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var i=e("../core-js/object/keys");t.exports=n},{"../core-js/object/keys":20}],52:[function(e,t,r){function n(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?o(e):t}var i=e("../helpers/typeof"),o=e("./assertThisInitialized");t.exports=n},{"../helpers/typeof":58,"./assertThisInitialized":34}],53:[function(e,t,r){function n(e,r){return t.exports=n=i||function(e,t){return e.__proto__=t,e},n(e,r)}var i=e("../core-js/object/set-prototype-of");t.exports=n},{"../core-js/object/set-prototype-of":21}],54:[function(e,t,r){function n(e,t){return i(e)||o(e,t)||a()}var i=e("./arrayWithHoles"),o=e("./iterableToArrayLimit"),a=e("./nonIterableRest");t.exports=n},{"./arrayWithHoles":32,"./iterableToArrayLimit":46,"./nonIterableRest":47}],55:[function(e,t,r){function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}var i=e("./getPrototypeOf");t.exports=n},{"./getPrototypeOf":41}],56:[function(e,t,r){function n(e,t){return t||(t=e.slice(0)),o(i(e,{raw:{value:o(t)}}))}var i=e("../core-js/object/define-properties"),o=e("../core-js/object/freeze");t.exports=n},{"../core-js/object/define-properties":13,"../core-js/object/freeze":15}],57:[function(e,t,r){function n(e){return i(e)||o(e)||a()}var i=e("./arrayWithoutHoles"),o=e("./iterableToArray"),a=e("./nonIterableSpread");t.exports=n},{"./arrayWithoutHoles":33,"./iterableToArray":45,"./nonIterableSpread":48}],58:[function(e,t,r){function n(e){return(n="function"==typeof a&&"symbol"==typeof o?function(e){return typeof e}:function(e){return e&&"function"==typeof a&&e.constructor===a&&e!==a.prototype?"symbol":typeof e})(e)}function i(e){return"function"==typeof a&&"symbol"===n(o)?t.exports=i=function(e){return n(e)}:t.exports=i=function(e){return e&&"function"==typeof a&&e.constructor===a&&e!==a.prototype?"symbol":n(e)},i(e)}var o=e("../core-js/symbol/iterator"),a=e("../core-js/symbol");t.exports=i},{"../core-js/symbol":28,"../core-js/symbol/iterator":29}],59:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":581}],60:[function(e,t,r){function n(e){if(Array.isArray(e))return e}t.exports=n},{}],61:[function(e,t,r){arguments[4][34][0].apply(r,arguments)},{dup:34}],62:[function(e,t,r){arguments[4][36][0].apply(r,arguments)},{dup:36}],63:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}t.exports=i},{}],64:[function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.exports=n},{}],65:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},{}],66:[function(e,t,r){function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}var i=e("./setPrototypeOf");t.exports=n},{"./setPrototypeOf":73}],67:[function(e,t,r){arguments[4][43][0].apply(r,arguments)},{dup:43}],68:[function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}t.exports=n},{}],69:[function(e,t,r){function n(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}t.exports=n},{}],70:[function(e,t,r){arguments[4][47][0].apply(r,arguments)},{dup:47}],71:[function(e,t,r){function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}var i=e("./defineProperty");t.exports=n},{"./defineProperty":64}],72:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{"../helpers/typeof":75,"./assertThisInitialized":61,dup:52}],73:[function(e,t,r){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,r)}t.exports=n},{}],74:[function(e,t,r){arguments[4][54][0].apply(r,arguments)},{"./arrayWithHoles":60,"./iterableToArrayLimit":69,"./nonIterableRest":70,dup:54}],75:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(e){return n(e)}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(e)}t.exports=i},{}],76:[function(e,t,r){t.exports=function(e,t){var r="number"==typeof e,n="number"==typeof t;r&&!n?(t=e,e=0):r||n||(e=0,t=0),e|=0,t|=0;var i=t-e;if(i<0)throw new Error("array length must be positive");for(var o=new Array(i),a=0,s=e;a<i;a++,s++)o[a]=s;return o}},{}],77:[function(e,t,r){"use strict";function n(){if(l.length)throw l.shift()}function i(e){var t;t=s.length?s.pop():new o,t.task=e,a(t)}function o(){this.task=null}var a=e("./raw"),s=[],l=[],u=a.makeRequestCallFromTimer(n);t.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(l.push(e),u())}finally{this.task=null,s[s.length]=this}}},{"./raw":78}],78:[function(e,t,r){(function(e){"use strict";function r(e){a.length||(o(),s=!0),a[a.length]=e}function n(){for(;l<a.length;){var e=l;if(l+=1,a[e].call(),l>u){for(var t=0,r=a.length-l;t<r;t++)a[t]=a[t+l];a.length-=l,l=0}}a.length=0,l=0,s=!1}function i(e){return function(){function t(){clearTimeout(r),clearInterval(n),e()}var r=setTimeout(t,0),n=setInterval(t,50)}}t.exports=r;var o,a=[],s=!1,l=0,u=1024,c=void 0!==e?e:self,d=c.MutationObserver||c.WebKitMutationObserver;o="function"==typeof d?function(e){var t=1,r=new d(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}(n):i(n),r.requestFlush=o,r.makeRequestCallFromTimer=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(e,t,r){(function(r){"use strict";function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function i(e){return r.Buffer&&"function"==typeof r.Buffer.isBuffer?r.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function a(e){return!i(e)&&("function"==typeof r.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(k.isFunction(e)){if(E)return e.name;var t=e.toString(),r=t.match(C);return r&&r[1]}}function l(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(E||!k.isFunction(e))return k.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function c(e){return l(u(e.actual),128)+" "+e.operator+" "+l(u(e.expected),128)}function d(e,t,r,n,i){throw new S.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function f(e,t){e||d(e,!0,t,"==",S.ok)}function p(e,t,r,s){if(e===t)return!0;if(i(e)&&i(t))return 0===n(e,t);if(k.isDate(e)&&k.isDate(t))return e.getTime()===t.getTime();if(k.isRegExp(e)&&k.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(a(e)&&a(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;s=s||{actual:[],expected:[]};var l=s.actual.indexOf(e);return-1!==l&&l===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),m(e,t,r,s))}return r?e===t:e==t}function h(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function m(e,t,r,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(k.isPrimitive(e)||k.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=h(e),o=h(t);if(i&&!o||!i&&o)return!1;if(i)return e=x.call(e),t=x.call(t),p(e,t,r);var a,s,l=I(e),u=I(t);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;s>=0;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;s>=0;s--)if(a=l[s],!p(e[a],t[a],r,n))return!1;return!0}function b(e,t,r){p(e,t,!0)&&d(e,t,r,"notDeepStrictEqual",b)}function _(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function v(e){var t;try{e()}catch(e){t=e}return t}function g(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=v(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&d(i,r,"Missing expected exception"+n);var o="string"==typeof n,a=!e&&k.isError(i),s=!e&&i&&!r;if((a&&o&&_(i,r)||s)&&d(i,r,"Got unwanted exception"+n),e&&i&&r&&!_(i,r)||!e&&i)throw i}function y(e,t){e||d(e,!0,t,"==",y)}var w=e("object-assign"),k=e("util/"),j=Object.prototype.hasOwnProperty,x=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),S=t.exports=f,C=/\s*function\s+([^\(\s]*)\s*/;S.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=s(t),o=n.indexOf("\n"+i);if(o>=0){var a=n.indexOf("\n",o+1);n=n.substring(a+1)}this.stack=n}}},k.inherits(S.AssertionError,Error),S.fail=d,S.ok=f,S.equal=function(e,t,r){e!=t&&d(e,t,r,"==",S.equal)},S.notEqual=function(e,t,r){e==t&&d(e,t,r,"!=",S.notEqual)},S.deepEqual=function(e,t,r){p(e,t,!1)||d(e,t,r,"deepEqual",S.deepEqual)},S.deepStrictEqual=function(e,t,r){p(e,t,!0)||d(e,t,r,"deepStrictEqual",S.deepStrictEqual)},S.notDeepEqual=function(e,t,r){p(e,t,!1)&&d(e,t,r,"notDeepEqual",S.notDeepEqual)},S.notDeepStrictEqual=b,S.strictEqual=function(e,t,r){e!==t&&d(e,t,r,"===",S.strictEqual)},S.notStrictEqual=function(e,t,r){e===t&&d(e,t,r,"!==",S.notStrictEqual)},S.throws=function(e,t,r){g(!0,e,t,r)},S.doesNotThrow=function(e,t,r){g(!1,e,t,r)},S.ifError=function(e){if(e)throw e},S.strict=w(y,S,{equal:S.strictEqual,deepEqual:S.deepStrictEqual,notEqual:S.notStrictEqual,notDeepEqual:S.notDeepStrictEqual}),S.strict.strict=S.strict;var I=Object.keys||function(e){var t=[];for(var r in e)j.call(e,r)&&t.push(r);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":508,"util/":82}],80:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],81:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],82:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),l(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function l(e,t,n){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return g(i)||(i=l(e,i,n)),i}var o=u(e,t);if(o)return o;var a=Object.keys(t),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),E(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(S(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(k(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return c(t)}var _="",v=!1,y=["{","}"];if(h(t)&&(v=!0,y=["[","]"]),S(t)){_=" [Function"+(t.name?": "+t.name:"")+"]"}if(k(t)&&(_=" "+RegExp.prototype.toString.call(t)),x(t)&&(_=" "+Date.prototype.toUTCString.call(t)),E(t)&&(_=" "+c(t)),0===a.length&&(!v||0==t.length))return y[0]+_+y[1];if(n<0)return k(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return w=v?d(e,t,n,m,a):a.map(function(r){return f(e,t,n,m,r,v)}),e.seen.pop(),p(w,_,y)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return v(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)D(t,String(a))?o.push(f(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,r,n,i,!0))}),o}function f(e,t,r,n,i,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),D(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=b(r)?l(e,u.value,null):l(e,u.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function b(e){return null===e}function _(e){return null==e}function v(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return"symbol"==typeof e}function w(e){return void 0===e}function k(e){return j(e)&&"[object RegExp]"===I(e)}function j(e){return"object"==typeof e&&null!==e}function x(e){return j(e)&&"[object Date]"===I(e)}function E(e){return j(e)&&("[object Error]"===I(e)||e instanceof Error)}function S(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function I(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;r.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(M,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])b(s)||!j(s)?a+=" "+s:a+=" "+i(s);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return o};var R,L={};r.debuglog=function(e){if(w(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=t.pid;L[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else L[e]=function(){};return L[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=h,r.isBoolean=m,r.isNull=b,r.isNullOrUndefined=_,r.isNumber=v,r.isString=g,r.isSymbol=y,r.isUndefined=w,r.isRegExp=k,r.isObject=j,r.isDate=x,r.isError=E,r.isFunction=S,r.isPrimitive=C,r.isBuffer=e("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",A(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!j(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":81,_process:541,inherits:80}],83:[function(e,t,r){"use strict";function n(e){var t=new Array(2*e.length-1);t[0]=e[0];for(var r=0,n=arguments.length<=1?0:arguments.length-1;r<n;r++){var o=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];t[2*r+1]=o&&Object.prototype.hasOwnProperty.call(o,"__html")?o.__html:(0,i.default)(o),t[2*r+2]=e[r+1]}return t.join("")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash/escape"));t.exports=r.default,t.exports.default=r.default},{"lodash/escape":456}],84:[function(e,t,r){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":135}],85:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":140}],86:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":143}],87:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":149}],88:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],89:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../core-js/object/define-property"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":86}],90:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../core-js/object/assign"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},{"../core-js/object/assign":85}],91:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function i(e){var t=n(e),r=t[0],i=t[1];return 3*(r+i)/4-i}function o(e,t,r){return 3*(t+r)/4-r}function a(e){for(var t,r=n(e),i=r[0],a=r[1],s=new f(o(e,i,a)),l=0,u=a>0?i-4:i,c=0;c<u;c+=4)t=d[e.charCodeAt(c)]<<18|d[e.charCodeAt(c+1)]<<12|d[e.charCodeAt(c+2)]<<6|d[e.charCodeAt(c+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;return 2===a&&(t=d[e.charCodeAt(c)]<<2|d[e.charCodeAt(c+1)]>>4,s[l++]=255&t),1===a&&(t=d[e.charCodeAt(c)]<<10|d[e.charCodeAt(c+1)]<<4|d[e.charCodeAt(c+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t),s}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function l(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(n));return i.join("")}function u(e){for(var t,r=e.length,n=r%3,i=[],o=0,a=r-n;o<a;o+=16383)i.push(l(e,o,o+16383>a?a:o+16383));return 1===n?(t=e[r-1],i.push(c[t>>2]+c[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(c[t>>10]+c[t>>4&63]+c[t<<2&63]+"=")),i.join("")}r.byteLength=i,r.toByteArray=a,r.fromByteArray=u;for(var c=[],d=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,m=p.length;h<m;++h)c[h]=p[h],d[p.charCodeAt(h)]=h;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},{}],92:[function(e,t,r){!function(e){"use strict";function r(e){function t(e,r){var n,i,o,s,l,u,c,f,p=this;if(!(p instanceof t))return new t(e,r);if(null==r){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>V?p.c=p.e=null:e.e<P?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(s=0,l=e;l>=10;l/=10,s++);return void(s>V?p.c=p.e=null:(p.e=s,p.c=[e]))}f=String(e)}else{if(!d.test(f=String(e)))return T(p,f,u);p.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}(s=f.indexOf("."))>-1&&(f=f.replace(".","")),(l=f.search(/e/i))>0?(s<0&&(s=l),s+=+f.slice(l+1),f=f.substring(0,l)):s<0&&(s=f.length)}else{if(a(r,2,F.length,"Base"),10==r)return p=new t(e),E(p,M+p.e+1,R);if(f=String(e),u="number"==typeof e){if(0*e!=0)return T(p,f,u,r);if(p.s=1/e<0?(f=f.slice(1),-1):1,
t.DEBUG&&f.replace(/^0\.0*|\./,"").length>15)throw Error(b+e)}else p.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(n=F.slice(0,r),s=l=0,c=f.length;l<c;l++)if(n.indexOf(i=f.charAt(l))<0){if("."==i){if(l>s){s=c;continue}}else if(!o&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){o=!0,l=-1,s=0;continue}return T(p,String(e),u,r)}u=!1,f=I(f,r,10,p.s),(s=f.indexOf("."))>-1?f=f.replace(".",""):s=f.length}for(l=0;48===f.charCodeAt(l);l++);for(c=f.length;48===f.charCodeAt(--c););if(f=f.slice(l,++c)){if(c-=l,u&&t.DEBUG&&c>15&&(e>g||e!==h(e)))throw Error(b+p.s*e);if((s=s-l-1)>V)p.c=p.e=null;else if(s<P)p.c=[p.e=0];else{if(p.e=s,p.c=[],l=(s+1)%v,s<0&&(l+=v),l<c){for(l&&p.c.push(+f.slice(0,l)),c-=v;l<c;)p.c.push(+f.slice(l,l+=v));l=v-(f=f.slice(l)).length}else l-=c;for(;l--;f+="0");p.c.push(+f)}}else p.c=[p.e=0]}function c(e,r,n,o){var s,c,d,f,p;if(null==n?n=R:a(n,0,8),!e.c)return e.toString();if(s=e.c[0],d=e.e,null==r)p=i(e.c),p=1==o||2==o&&(d<=L||d>=O)?l(p,d):u(p,d,"0");else if(e=E(new t(e),r,n),c=e.e,p=i(e.c),f=p.length,1==o||2==o&&(r<=c||c<=L)){for(;f<r;p+="0",f++);p=l(p,c)}else if(r-=d,p=u(p,c,"0"),c+1>f){if(--r>0)for(p+=".";r--;p+="0");}else if((r+=c-f)>0)for(c+1==f&&(p+=".");r--;p+="0");return e.s<0&&s?"-"+p:p}function j(e,r){for(var n,i=1,o=new t(e[0]);i<e.length;i++){if(n=new t(e[i]),!n.s){o=n;break}r.call(o,n)&&(o=n)}return o}function x(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*v-1)>V?e.c=e.e=null:r<P?e.c=[e.e=0]:(e.e=r,e.c=t),e}function E(e,t,r,n){var i,o,a,s,l,u,c,d=e.c,f=y;if(d){e:{for(i=1,s=d[0];s>=10;s/=10,i++);if((o=t-i)<0)o+=v,a=t,l=d[u=0],c=l/f[i-a-1]%10|0;else if((u=p((o+1)/v))>=d.length){if(!n)break e;for(;d.length<=u;d.push(0));l=c=0,i=1,o%=v,a=o-v+1}else{for(l=s=d[u],i=1;s>=10;s/=10,i++);o%=v,a=o-v+i,c=a<0?0:l/f[i-a-1]%10|0}if(n=n||t<0||null!=d[u+1]||(a<0?l:l%f[i-a-1]),n=r<4?(c||n)&&(0==r||r==(e.s<0?3:2)):c>5||5==c&&(4==r||n||6==r&&(o>0?a>0?l/f[i-a]:0:d[u-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,n?(t-=e.e+1,d[0]=f[(v-t%v)%v],e.e=-t||0):d[0]=e.e=0,e;if(0==o?(d.length=u,s=1,u--):(d.length=u+1,s=f[v-o],d[u]=a>0?h(l/f[i-a]%f[a])*s:0),n)for(;;){if(0==u){for(o=1,a=d[0];a>=10;a/=10,o++);for(a=d[0]+=s,s=1;a>=10;a/=10,s++);o!=s&&(e.e++,d[0]==_&&(d[0]=1));break}if(d[u]+=s,d[u]!=_)break;d[u--]=0,s=1}for(o=d.length;0===d[--o];d.pop());}e.e>V?e.c=e.e=null:e.e<P&&(e.c=[e.e=0])}return e}function S(e){var t,r=e.e;return null===r?e.toString():(t=i(e.c),t=r<=L||r>=O?l(t,r):u(t,r,"0"),e.s<0?"-"+t:t)}var C,I,T,A=t.prototype={constructor:t,toString:null,valueOf:null},D=new t(1),M=20,R=4,L=-7,O=21,P=-1e7,V=1e7,N=!1,B=1,q=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz";return t.clone=r,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=t.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(m+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(r=e[t],a(r,0,k,t),M=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(r=e[t],a(r,0,8,t),R=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(r=e[t],r&&r.pop?(a(r[0],-k,0,t),a(r[1],0,k,t),L=r[0],O=r[1]):(a(r,-k,k,t),L=-(O=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)a(r[0],-k,-1,t),a(r[1],1,k,t),P=r[0],V=r[1];else{if(a(r,-k,k,t),!r)throw Error(m+t+" cannot be zero: "+r);P=-(V=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(m+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw N=!r,Error(m+"crypto unavailable");N=r}else N=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(r=e[t],a(r,0,9,t),B=r),e.hasOwnProperty(t="POW_PRECISION")&&(r=e[t],a(r,0,k,t),q=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(m+t+" not an object: "+r);U=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(m+t+" invalid: "+r);F=r}}return{DECIMAL_PLACES:M,ROUNDING_MODE:R,EXPONENTIAL_AT:[L,O],RANGE:[P,V],CRYPTO:N,MODULO_MODE:B,POW_PRECISION:q,FORMAT:U,ALPHABET:F}},t.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!t.DEBUG)return!0;var r,n,i=e.c,o=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(i)){if((1===a||-1===a)&&o>=-k&&o<=k&&o===h(o)){if(0===i[0]){if(0===o&&1===i.length)return!0;break e}if(r=(o+1)%v,r<1&&(r+=v),String(i[0]).length==r){for(r=0;r<i.length;r++)if((n=i[r])<0||n>=_||n!==h(n))break e;if(0!==n)return!0}}}else if(null===i&&null===o&&(null===a||1===a||-1===a))return!0;throw Error(m+"Invalid BigNumber: "+e)},t.maximum=t.max=function(){return j(arguments,A.lt)},t.minimum=t.min=function(){return j(arguments,A.gt)},t.random=function(){var e=9007199254740992*Math.random()&2097151?function(){return h(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(r){var n,i,o,s,l,u=0,c=[],d=new t(D);if(null==r?r=M:a(r,0,k),s=p(r/v),N)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(s*=2));u<s;)l=131072*n[u]+(n[u+1]>>>11),l>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),n[u]=i[0],n[u+1]=i[1]):(c.push(l%1e14),u+=2);u=s/2}else{if(!crypto.randomBytes)throw N=!1,Error(m+"crypto unavailable");for(n=crypto.randomBytes(s*=7);u<s;)l=281474976710656*(31&n[u])+1099511627776*n[u+1]+4294967296*n[u+2]+16777216*n[u+3]+(n[u+4]<<16)+(n[u+5]<<8)+n[u+6],l>=9e15?crypto.randomBytes(7).copy(n,u):(c.push(l%1e14),u+=7);u=s/7}if(!N)for(;u<s;)(l=e())<9e15&&(c[u++]=l%1e14);for(s=c[--u],r%=v,s&&r&&(l=y[v-r],c[u]=h(s/l)*l);0===c[u];c.pop(),u--);if(u<0)c=[o=0];else{for(o=-1;0===c[0];c.splice(0,1),o-=v);for(u=1,l=c[0];l>=10;l/=10,u++);u<v&&(o-=v-u)}return d.e=o,d.c=c,d}}(),t.sum=function(){for(var e=1,r=arguments,n=new t(r[0]);e<r.length;)n=n.plus(r[e++]);return n},I=function(){function e(e,t,r,n){for(var i,o,a=[0],s=0,l=e.length;s<l;){for(o=a.length;o--;a[o]*=t);for(a[0]+=n.indexOf(e.charAt(s++)),i=0;i<a.length;i++)a[i]>r-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/r|0,a[i]%=r)}return a.reverse()}return function(r,n,o,a,s){var l,c,d,f,p,h,m,b,_=r.indexOf("."),v=M,g=R;for(_>=0&&(f=q,q=0,r=r.replace(".",""),b=new t(n),h=b.pow(r.length-_),q=f,b.c=e(u(i(h.c),h.e,"0"),10,o,"0123456789"),b.e=b.c.length),m=e(r,n,o,s?(l=F,"0123456789"):(l="0123456789",F)),d=f=m.length;0==m[--f];m.pop());if(!m[0])return l.charAt(0);if(_<0?--d:(h.c=m,h.e=d,h.s=a,h=C(h,b,v,g,o),m=h.c,p=h.r,d=h.e),c=d+v+1,_=m[c],f=o/2,p=p||c<0||null!=m[c+1],p=g<4?(null!=_||p)&&(0==g||g==(h.s<0?3:2)):_>f||_==f&&(4==g||p||6==g&&1&m[c-1]||g==(h.s<0?8:7)),c<1||!m[0])r=p?u(l.charAt(1),-v,l.charAt(0)):l.charAt(0);else{if(m.length=c,p)for(--o;++m[--c]>o;)m[c]=0,c||(++d,m=[1].concat(m));for(f=m.length;!m[--f];);for(_=0,r="";_<=f;r+=l.charAt(m[_++]));r=u(r,d,l.charAt(0))}return r}}(),C=function(){function e(e,t,r){var n,i,o,a,s=0,l=e.length,u=t%w,c=t/w|0;for(e=e.slice();l--;)o=e[l]%w,a=e[l]/w|0,n=c*o+a*u,i=u*o+n%w*w+s,s=(i/r|0)+(n/w|0)+c*a,e[l]=i%r;return s&&(e=[s].concat(e)),e}function r(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function i(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(o,a,s,l,u){var c,d,f,p,m,b,g,y,w,k,j,x,S,C,I,T,A,D=o.s==a.s?1:-1,M=o.c,R=a.c;if(!(M&&M[0]&&R&&R[0]))return new t(o.s&&a.s&&(M?!R||M[0]!=R[0]:R)?M&&0==M[0]||!R?0*D:D/0:NaN);for(y=new t(D),w=y.c=[],d=o.e-a.e,D=s+d+1,u||(u=_,d=n(o.e/v)-n(a.e/v),D=D/v|0),f=0;R[f]==(M[f]||0);f++);if(R[f]>(M[f]||0)&&d--,D<0)w.push(1),p=!0;else{for(C=M.length,T=R.length,f=0,D+=2,m=h(u/(R[0]+1)),m>1&&(R=e(R,m,u),M=e(M,m,u),T=R.length,C=M.length),S=T,k=M.slice(0,T),j=k.length;j<T;k[j++]=0);A=R.slice(),A=[0].concat(A),I=R[0],R[1]>=u/2&&I++;do{if(m=0,(c=r(R,k,T,j))<0){if(x=k[0],T!=j&&(x=x*u+(k[1]||0)),(m=h(x/I))>1)for(m>=u&&(m=u-1),b=e(R,m,u),g=b.length,j=k.length;1==r(b,k,g,j);)m--,i(b,T<g?A:R,g,u),g=b.length,c=1;else 0==m&&(c=m=1),b=R.slice(),g=b.length;if(g<j&&(b=[0].concat(b)),i(k,b,j,u),j=k.length,-1==c)for(;r(R,k,T,j)<1;)m++,i(k,T<j?A:R,j,u),j=k.length}else 0===c&&(m++,k=[0]);w[f++]=m,k[0]?k[j++]=M[S]||0:(k=[M[S]],j=1)}while((S++<C||null!=k[0])&&D--);p=null!=k[0],w[0]||w.splice(0,1)}if(u==_){for(f=1,D=w[0];D>=10;D/=10,f++);E(y,s+(y.e=f+d*v-1)+1,l,p)}else y.e=d,y.r=+p;return y}}(),T=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,n=/^\.([^.]+)$/,i=/^-?(Infinity|NaN)$/,o=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(a,s,l,u){var c,d=l?s:s.replace(o,"");if(i.test(d))a.s=isNaN(d)?null:d<0?-1:1;else{if(!l&&(d=d.replace(e,function(e,t,r){return c="x"==(r=r.toLowerCase())?16:"b"==r?2:8,u&&u!=c?e:t}),u&&(c=u,d=d.replace(r,"$1").replace(n,"0.$1")),s!=d))return new t(d,c);if(t.DEBUG)throw Error(m+"Not a"+(u?" base "+u:"")+" number: "+s);a.s=null}a.c=a.e=null}}(),A.absoluteValue=A.abs=function(){var e=new t(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,r){return o(this,new t(e,r))},A.decimalPlaces=A.dp=function(e,r){var i,o,s,l=this;if(null!=e)return a(e,0,k),null==r?r=R:a(r,0,8),E(new t(l),e+l.e+1,r);if(!(i=l.c))return null;if(o=((s=i.length-1)-n(this.e/v))*v,s=i[s])for(;s%10==0;s/=10,o--);return o<0&&(o=0),o},A.dividedBy=A.div=function(e,r){return C(this,new t(e,r),M,R)},A.dividedToIntegerBy=A.idiv=function(e,r){return C(this,new t(e,r),0,1)},A.exponentiatedBy=A.pow=function(e,r){var n,i,o,a,l,u,c,d,f=this;if(e=new t(e),e.c&&!e.isInteger())throw Error(m+"Exponent not an integer: "+S(e));if(null!=r&&(r=new t(r)),l=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return d=new t(Math.pow(+S(f),l?2-s(e):+S(e))),r?d.mod(r):d;if(u=e.s<0,r){if(r.c?!r.c[0]:!r.s)return new t(NaN);i=!u&&f.isInteger()&&r.isInteger(),i&&(f=f.mod(r))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||l&&f.c[1]>=24e7:f.c[0]<8e13||l&&f.c[0]<=9999975e7)))return a=f.s<0&&s(e)?-0:0,f.e>-1&&(a=1/a),new t(u?1/a:a);q&&(a=p(q/v+2))}for(l?(n=new t(.5),u&&(e.s=1),c=s(e)):(o=Math.abs(+S(e)),c=o%2),d=new t(D);;){if(c){if(d=d.times(f),!d.c)break;a?d.c.length>a&&(d.c.length=a):i&&(d=d.mod(r))}if(o){if(0===(o=h(o/2)))break;c=o%2}else if(e=e.times(n),E(e,e.e+1,1),e.e>14)c=s(e);else{if(0===(o=+S(e)))break;c=o%2}f=f.times(f),a?f.c&&f.c.length>a&&(f.c.length=a):i&&(f=f.mod(r))}return i?d:(u&&(d=D.div(d)),r?d.mod(r):a?E(d,q,R,void 0):d)},A.integerValue=function(e){var r=new t(this);return null==e?e=R:a(e,0,8),E(r,r.e+1,e)},A.isEqualTo=A.eq=function(e,r){return 0===o(this,new t(e,r))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,r){return o(this,new t(e,r))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,r){return 1===(r=o(this,new t(e,r)))||0===r},A.isInteger=function(){return!!this.c&&n(this.e/v)>this.c.length-2},A.isLessThan=A.lt=function(e,r){return o(this,new t(e,r))<0},A.isLessThanOrEqualTo=A.lte=function(e,r){return-1===(r=o(this,new t(e,r)))||0===r},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,r){var i,o,a,s,l=this,u=l.s;if(e=new t(e,r),r=e.s,!u||!r)return new t(NaN);if(u!=r)return e.s=-r,l.plus(e);var c=l.e/v,d=e.e/v,f=l.c,p=e.c;if(!c||!d){if(!f||!p)return f?(e.s=-r,e):new t(p?l:NaN);if(!f[0]||!p[0])return p[0]?(e.s=-r,e):new t(f[0]?l:3==R?-0:0)}if(c=n(c),d=n(d),f=f.slice(),u=c-d){for((s=u<0)?(u=-u,a=f):(d=c,a=p),a.reverse(),r=u;r--;a.push(0));a.reverse()}else for(o=(s=(u=f.length)<(r=p.length))?u:r,u=r=0;r<o;r++)if(f[r]!=p[r]){s=f[r]<p[r];break}if(s&&(a=f,f=p,p=a,e.s=-e.s),(r=(o=p.length)-(i=f.length))>0)for(;r--;f[i++]=0);for(r=_-1;o>u;){if(f[--o]<p[o]){for(i=o;i&&!f[--i];f[i]=r);--f[i],f[o]+=_}f[o]-=p[o]}for(;0==f[0];f.splice(0,1),--d);return f[0]?x(e,f,d):(e.s=3==R?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,r){var n,i,o=this;return e=new t(e,r),!o.c||!e.s||e.c&&!e.c[0]?new t(NaN):!e.c||o.c&&!o.c[0]?new t(o):(9==B?(i=e.s,e.s=1,n=C(o,e,0,3),e.s=i,n.s*=i):n=C(o,e,0,B),e=o.minus(n.times(e)),e.c[0]||1!=B||(e.s=o.s),e)},A.multipliedBy=A.times=function(e,r){var i,o,a,s,l,u,c,d,f,p,h,m,b,g,y,k=this,j=k.c,E=(e=new t(e,r)).c;if(!(j&&E&&j[0]&&E[0]))return!k.s||!e.s||j&&!j[0]&&!E||E&&!E[0]&&!j?e.c=e.e=e.s=null:(e.s*=k.s,j&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(o=n(k.e/v)+n(e.e/v),e.s*=k.s,c=j.length,p=E.length,c<p&&(b=j,j=E,E=b,a=c,c=p,p=a),a=c+p,b=[];a--;b.push(0));for(g=_,y=w,a=p;--a>=0;){for(i=0,h=E[a]%y,m=E[a]/y|0,l=c,s=a+l;s>a;)d=j[--l]%y,f=j[l]/y|0,u=m*d+f*h,d=h*d+u%y*y+b[s]+i,i=(d/g|0)+(u/y|0)+m*f,b[s--]=d%g;b[s]=i}return i?++o:b.splice(0,1),x(e,b,o)},A.negated=function(){var e=new t(this);return e.s=-e.s||null,e},A.plus=function(e,r){var i,o=this,a=o.s;if(e=new t(e,r),r=e.s,!a||!r)return new t(NaN);if(a!=r)return e.s=-r,o.minus(e);var s=o.e/v,l=e.e/v,u=o.c,c=e.c;if(!s||!l){if(!u||!c)return new t(a/0);if(!u[0]||!c[0])return c[0]?e:new t(u[0]?o:0*a)}if(s=n(s),l=n(l),u=u.slice(),a=s-l){for(a>0?(l=s,i=c):(a=-a,i=u),i.reverse();a--;i.push(0));i.reverse()}for(a=u.length,r=c.length,a-r<0&&(i=c,c=u,u=i,r=a),a=0;r;)a=(u[--r]=u[r]+c[r]+a)/_|0,u[r]=_===u[r]?0:u[r]%_;return a&&(u=[a].concat(u),++l),x(e,u,l)},A.precision=A.sd=function(e,r){var n,i,o,s=this;if(null!=e&&e!==!!e)return a(e,1,k),null==r?r=R:a(r,0,8),E(new t(s),e,r);if(!(n=s.c))return null;if(o=n.length-1,i=o*v+1,o=n[o]){for(;o%10==0;o/=10,i--);for(o=n[0];o>=10;o/=10,i++);}return e&&s.e+1>i&&(i=s.e+1),i},A.shiftedBy=function(e){return a(e,-g,g),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,r,o,a,s,l=this,u=l.c,c=l.s,d=l.e,f=M+4,p=new t("0.5");if(1!==c||!u||!u[0])return new t(!c||c<0&&(!u||u[0])?NaN:u?l:1/0);if(c=Math.sqrt(+S(l)),0==c||c==1/0?(r=i(u),(r.length+d)%2==0&&(r+="0"),c=Math.sqrt(+r),d=n((d+1)/2)-(d<0||d%2),c==1/0?r="1e"+d:(r=c.toExponential(),r=r.slice(0,r.indexOf("e")+1)+d),o=new t(r)):o=new t(c+""),o.c[0])for(d=o.e,c=d+f,c<3&&(c=0);;)if(s=o,o=p.times(s.plus(C(l,s,f,1))),i(s.c).slice(0,c)===(r=i(o.c)).slice(0,c)){if(o.e<d&&--c,"9999"!=(r=r.slice(c-3,c+1))&&(a||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(E(o,o.e+M+2,1),e=!o.times(o).eq(l));break}if(!a&&(E(s,s.e+M+2,0),s.times(s).eq(l))){o=s;break}f+=4,c+=4,a=1}return E(o,o.e+M+1,R,e)},A.toExponential=function(e,t){return null!=e&&(a(e,0,k),e++),c(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(a(e,0,k),e=e+this.e+1),c(this,e,t)},A.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=U;else if("object"!=typeof r)throw Error(m+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,a=n.split("."),s=+r.groupSize,l=+r.secondaryGroupSize,u=r.groupSeparator||"",c=a[0],d=a[1],f=i.s<0,p=f?c.slice(1):c,h=p.length;if(l&&(o=s,s=l,l=o,h-=o),s>0&&h>0){for(o=h%s||s,c=p.substr(0,o);o<h;o+=s)c+=u+p.substr(o,s);l>0&&(c+=u+p.slice(o)),f&&(c="-"+c)}n=d?c+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):c}return(r.prefix||"")+n+(r.suffix||"")},A.toFraction=function(e){var r,n,o,a,s,l,u,c,d,f,p,h,b=this,_=b.c;if(null!=e&&(u=new t(e),!u.isInteger()&&(u.c||1!==u.s)||u.lt(D)))throw Error(m+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+S(u));if(!_)return new t(b);for(r=new t(D),d=n=new t(D),o=c=new t(D),h=i(_),s=r.e=h.length-b.e-1,r.c[0]=y[(l=s%v)<0?v+l:l],e=!e||u.comparedTo(r)>0?s>0?r:d:u,l=V,V=1/0,u=new t(h),c.c[0]=0;f=C(u,r,0,1),a=n.plus(f.times(o)),1!=a.comparedTo(e);)n=o,o=a,d=c.plus(f.times(a=d)),c=a,r=u.minus(f.times(a=r)),u=a;return a=C(e.minus(n),o,0,1),c=c.plus(a.times(d)),n=n.plus(a.times(o)),c.s=d.s=b.s,s*=2,p=C(d,o,s,R).minus(b).abs().comparedTo(C(c,n,s,R).minus(b).abs())<1?[d,o]:[c,n],V=l,p},A.toNumber=function(){return+S(this)},A.toPrecision=function(e,t){return null!=e&&a(e,1,k),c(this,e,t,2)},A.toString=function(e){var r,n=this,o=n.s,s=n.e;return null===s?o?(r="Infinity",o<0&&(r="-"+r)):r="NaN":(null==e?r=s<=L||s>=O?l(i(n.c),s):u(i(n.c),s,"0"):10===e?(n=E(new t(n),M+s+1,R),r=u(i(n.c),n.e,"0")):(a(e,2,F.length,"Base"),r=I(u(i(n.c),s,"0"),10,e,o,!0)),o<0&&n.c[0]&&(r="-"+r)),r},A.valueOf=A.toJSON=function(){return S(this)},A._isBigNumber=!0,f&&(A[Symbol.toStringTag]="BigNumber",A[Symbol.for("nodejs.util.inspect.custom")]=A.valueOf),null!=e&&t.set(e),t}function n(e){var t=0|e;return e>0||e===t?t:t-1}function i(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=v-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function o(e,t){var r,n,i=e.c,o=t.c,a=e.s,s=t.s,l=e.e,u=t.e;if(!a||!s)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-s:a;if(a!=s)return a;if(r=a<0,n=l==u,!i||!o)return n?0:!i^r?1:-1;if(!n)return l>u^r?1:-1;for(s=(l=i.length)<(u=o.length)?l:u,a=0;a<s;a++)if(i[a]!=o[a])return i[a]>o[a]^r?1:-1;return l==u?0:l>u^r?1:-1}function a(e,t,r,n){if(e<t||e>r||e!==h(e))throw Error(m+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function s(e){var t=e.c.length-1;return n(e.e/v)==t&&e.c[t]%2!=0}function l(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function u(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var c,d=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,p=Math.ceil,h=Math.floor,m="[BigNumber Error] ",b=m+"Number primitive has more than 15 significant digits: ",_=1e14,v=14,g=9007199254740991,y=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],w=1e7,k=1e9;c=r(),c.default=c.BigNumber=c,"function"==typeof define&&define.amd?define(function(){return c}):void 0!==t&&t.exports?t.exports=c:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=c)}(this)},{}],93:[function(e,t,r){(function(n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/slicedToArray")),a=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/defineProperty")),u=i(e("lodash/throttle")),c=i(e("lodash/sortBy")),d=function(){function e(t){var r=this,i=t.key,s=t.getAfromB,d=t.getBfromA,f=t.storage,p=t.saveThrottle,h=t.maxLimit,m=t.maxAge;(0,a.default)(this,e),(0,l.default)(this,"_key",void 0),(0,l.default)(this,"_getAfromB",void 0),(0,l.default)(this,"_getBfromA",void 0),(0,l.default)(this,"_storage",void 0),(0,l.default)(this,"_aToTimestamp",new Map),(0,l.default)(this,"_aToB",new Map),(0,l.default)(this,"_bToA",new Map),(0,l.default)(this,"_aToBpromise",new Map),(0,l.default)(this,"_bToApromise",new Map),(0,l.default)(this,"_saveCache",void 0),this._key=i,this._getBfromA=d,this._getAfromB=s,this._storage=f||(n.localStorage?n.localStorage:null),null==p&&(p=3e3),null==h&&(h=1e3),null==m&&(m=31536e6);var b=h,_=m;this._saveCache=(0,u.default)(function(){var e=r._storage;if(e){r._loadCache();var t=Date.now()-_,n={version:2,ids:[]};r._aToB.forEach(function(e,i){var o=r._aToTimestamp.get(i);null!=o&&o>t&&n.ids.push([i,e,o])}),n.ids.length>b&&(n.ids=(0,c.default)(n.ids,function(e){return(0,o.default)(e,3)[2]}).slice(-b)),e.setItem(r._key,JSON.stringify(n))}},p,{leading:!1}),this._loadCache()}return(0,s.default)(e,[{key:"_loadCache",value:function(){var e=this._storage;if(e)try{var t=JSON.parse(e.getItem(this._key)||"null");if(!t||2!==t.version)return;var r=!0,n=!1,i=void 0;try{for(var a,s=t.ids[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,u=(0,o.default)(l,3),c=u[0],d=u[1],f=u[2];this._aToTimestamp.set(c,f),this._aToB.set(c,d),this._bToA.set(d,c)}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}catch(e){console.error("failed to load BiMapCache from storage",e)}}},{key:"_rememberPair",value:function(e,t){this._aToTimestamp.set(e,Date.now()),this._aToB.set(e,t),this._bToA.set(t,e),this._saveCache()}},{key:"_update",value:function(e){this._aToTimestamp.set(e,Date.now()),this._saveCache()}},{key:"getBfromA",value:function(e){var t=this,r=this._aToB.get(e);if(r)return this._update(e),Promise.resolve(r);var n=this._aToBpromise.get(e);if(n)return n;var i=this._getBfromA(e);return this._aToBpromise.set(e,i),i.then(function(r){i===t._aToBpromise.get(e)&&(t._aToBpromise.delete(e),t._rememberPair(e,r))},function(){i===t._aToBpromise.get(e)&&t._aToBpromise.delete(e)}),i}},{key:"getAfromB",value:function(e){var t=this,r=this._bToA.get(e);if(r)return this._update(r),Promise.resolve(r);var n=this._bToApromise.get(e);if(n)return n;var i=this._getAfromB(e);return this._bToApromise.set(e,i),i.then(function(r){i===t._bToApromise.get(e)&&(t._bToApromise.delete(e),t._rememberPair(r,e))},function(){i===t._bToApromise.get(e)&&t._bToApromise.delete(e)}),i}},{key:"removeAfromCache",value:function(e){if(this._aToBpromise.delete(e),this._aToB.has(e)){var t=this._aToB.get(e);this._aToB.delete(e),this._bToA.delete(t),this._saveCache()}}},{key:"removeBfromCache",value:function(e){if(this._bToApromise.delete(e),this._bToA.has(e)){var t=this._bToA.get(e);this._aToB.delete(t),this._bToA.delete(e),this._saveCache()}}}]),e}();r.default=d,t.exports=r.default,t.exports.default=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/interopRequireDefault":67,"@babel/runtime/helpers/slicedToArray":74,"lodash/sortBy":492,"lodash/throttle":496}],94:[function(e,t,r){(function(t){"use strict";function n(e){if(e>$)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return r.__proto__=t.prototype,r}function t(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}return i(e,t,r)}function i(e,r,n){if("string"==typeof e)return l(e,r);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(z(e,ArrayBuffer)||e&&z(e.buffer,ArrayBuffer))return c(e,r,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return t.from(i,r,n);var o=d(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e,t,r){return o(e),e<=0?n(e):void 0!==t?"string"==typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}function s(e){return o(e),n(e<0?0:0|f(e))}function l(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i=0|h(e,r),o=n(i),a=o.write(e,r);return a!==i&&(o=o.slice(0,a)),o}function u(e){for(var t=e.length<0?0:0|f(e.length),r=n(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}function c(e,r,n){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),i.__proto__=t.prototype,i}function d(e){if(t.isBuffer(e)){var r=0|f(e.length),i=n(r);return 0===i.length?i:(e.copy(i,0,0,r),i)}return void 0!==e.length?"number"!=typeof e.length||W(e.length)?n(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}function f(e){if(e>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return 0|e}function p(e){return+e!=e&&(e=0),t.alloc(+e)}function h(e,r){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(o)return i?-1:B(e).length;r=(""+r).toLowerCase(),o=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,r,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,W(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=t.from(r,i)),t.isBuffer(r))return 0===r.length?-1:v(e,r,n,i,o);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):v(e,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}var u;if(i){var c=-1;for(u=r;u<s;u++)if(o(e,u)===o(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*a}else-1!==c&&(u-=u-c),c=-1}else for(r+l>s&&(r=s-l),u=r;u>=0;u--){for(var d=!0,f=0;f<l;f++)if(o(e,u+f)!==o(t,f)){d=!1;break}if(d)return u}return-1}function g(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(W(s))return a;e[r+a]=s}return a}function y(e,t,r,n){return H(B(t,e.length-r),e,r,n)}function w(e,t,r,n){return H(q(t),e,r,n)}function k(e,t,r,n){return w(e,t,r,n)}function j(e,t,r,n){return H(F(t),e,r,n)}function x(e,t,r,n){return H(U(t,e.length-r),e,r,n)}function E(e,t,r){return 0===t&&r===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var l,u,c,d;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128==(192&l)&&(d=(31&o)<<6|63&l)>127&&(a=d);break;case 3:l=e[i+1],u=e[i+2],128==(192&l)&&128==(192&u)&&(d=(15&o)<<12|(63&l)<<6|63&u)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&(d=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return C(n)}function C(e){var t=e.length;if(t<=J)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=J));return r}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function A(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=N(e[o]);return i}function D(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,r,n,i,o,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function O(e,t,r,n,i){return t=+t,r>>>=0,i||L(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function P(e,t,r,n,i){return t=+t,r>>>=0,i||L(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function V(e){if(e=e.split("=")[0],e=e.trim().replace(Y,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function U(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function F(e){return G.toByteArray(V(e))}function H(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!==e}var G=e("base64-js"),K=e("ieee754");r.Buffer=t,r.SlowBuffer=p,r.INSPECT_MAX_BYTES=50;var $=2147483647;r.kMaxLength=$,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,r){return i(e,t,r)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(e,t,r){return a(e,t,r)},t.allocUnsafe=function(e){return s(e)},t.allocUnsafeSlow=function(e){return s(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,r){if(z(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),z(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength)),
!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=t.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var a=e[n];if(z(a,Uint8Array)&&(a=t.from(a)),!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},t.byteLength=h,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):m.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t.prototype.compare=function(e,r,n,i,o){if(z(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var a=o-i,s=n-r,l=Math.min(a,s),u=this.slice(i,o),c=e.slice(r,n),d=0;d<l;++d)if(u[d]!==c[d]){a=u[d],s=c[d];break}return a<s?-1:s<a?1:0},t.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},t.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},t.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},t.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return y(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return k(this,e,t,r);case"base64":return j(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;t.prototype.slice=function(e,r){var n=this.length;e=~~e,r=void 0===r?n:~~r,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),r<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return i.__proto__=t.prototype,i},t.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},t.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},t.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},t.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},t.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),K.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),K.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),K.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),K.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},t.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},t.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},t.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},t.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},t.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},t.prototype.writeDoubleLE=function(e,t,r){return P(this,e,t,!0,r)},t.prototype.writeDoubleBE=function(e,t,r){return P(this,e,t,!1,r)},t.prototype.copy=function(e,r,n,i){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,i);else if(this===e&&n<r&&r<i)for(var a=o-1;a>=0;--a)e[a+r]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),r);return o},t.prototype.fill=function(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var o=e.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(e=o)}}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=r;a<n;++a)this[a]=e;else{var s=t.isBuffer(e)?e:t.from(e,i),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=s[a%l]}return this};var Y=/[^+\/0-9A-Za-z-_]/g}).call(this,e("buffer").Buffer)},{"base64-js":91,buffer:94,ieee754:292}],95:[function(e,t,r){!function(){"use strict";function e(){for(var t=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var o=typeof i;if("string"===o||"number"===o)t.push(i);else if(Array.isArray(i)&&i.length){var a=e.apply(null,i);a&&t.push(a)}else if("object"===o)for(var s in i)r.call(i,s)&&i[s]&&t.push(s)}}return t.join(" ")}var r={}.hasOwnProperty;void 0!==t&&t.exports?(e.default=e,t.exports=e):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return e}):window.classNames=e}()},{}],96:[function(e,t,r){(function(n){"use strict";function i(e,t){if(s)return s.call(e,t);var r=e;do{if((0,o.default)(r,t))return r;r=r.parentNode}while(r&&r!==n.document);return null}r.__esModule=!0,r.default=i;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("matches-selector-ng")),a=n.Element&&n.Element.prototype,s=a&&a.closest;t.exports=r.default,t.exports.default=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"matches-selector-ng":507}],97:[function(e,t,r){"use strict";t.exports=function(e,t){var r=this,n=r.constructor;return r.callbacks={},r.activeSequences=[],r.resetTimer,r.ignoreNextKeyup=!1,r.ignoreNextKeypress=!1,r.nextExpectedAction=!1,r.element=e,r.addEvents(t),n.instances.push(r),r},t.exports.prototype.bind=e("./prototype/bind"),t.exports.prototype.bindMultiple=e("./prototype/bindMultiple"),t.exports.prototype.trigger=e("./prototype/trigger"),t.exports.prototype.reset=e("./prototype/reset.js"),t.exports.prototype.stopCallback=e("./prototype/stopCallback"),t.exports.prototype.handleKey=e("./prototype/handleKey"),t.exports.prototype.addEvents=e("./prototype/addEvents"),t.exports.prototype.bindSingle=e("./prototype/bindSingle"),t.exports.prototype.getKeyInfo=e("./prototype/getKeyInfo"),t.exports.prototype.pickBestAction=e("./prototype/pickBestAction"),t.exports.prototype.getReverseMap=e("./prototype/getReverseMap"),t.exports.prototype.getMatches=e("./prototype/getMatches"),t.exports.prototype.resetSequences=e("./prototype/resetSequences"),t.exports.prototype.fireCallback=e("./prototype/fireCallback"),t.exports.prototype.bindSequence=e("./prototype/bindSequence"),t.exports.prototype.resetSequenceTimer=e("./prototype/resetSequenceTimer"),t.exports.instances=[],t.exports.reset=e("./reset"),t.exports.REVERSE_MAP=null},{"./prototype/addEvents":98,"./prototype/bind":99,"./prototype/bindMultiple":100,"./prototype/bindSequence":101,"./prototype/bindSingle":102,"./prototype/fireCallback":103,"./prototype/getKeyInfo":104,"./prototype/getMatches":105,"./prototype/getReverseMap":106,"./prototype/handleKey":107,"./prototype/pickBestAction":110,"./prototype/reset.js":111,"./prototype/resetSequenceTimer":112,"./prototype/resetSequences":113,"./prototype/stopCallback":114,"./prototype/trigger":115,"./reset":116}],98:[function(e,t,r){"use strict";t.exports=function(t){var r,n,i,o=this,a=o.element;n=e("./handleKeyEvent"),r=e("../../helpers/addEvent"),i=n.bind(o),r(a,"keypress",i,t),r(a,"keydown",i,t),r(a,"keyup",i,t)}},{"../../helpers/addEvent":117,"./handleKeyEvent":108}],99:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n=this;return e=e instanceof Array?e:[e],n.bindMultiple(e,t,r)}},{}],100:[function(e,t,r){"use strict";t.exports=function(e,t,r){for(var n=this,i=[],o=0;o<e.length;++o)i.push(n.bindSingle(e[o],t,r));return function(){for(var e=0;e<i.length;e++)i[e]()}}},{}],101:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){function o(r){var o;a.fireCallback(n,r,t),"keyup"!==i&&(o=e("../../helpers/characterFromEvent"),a.ignoreNextKeyup=o(r)),setTimeout(function(){a.resetSequences()},10)}var a=this;n.currentLevel=0;for(var s=[],l=0;l<r.length;++l){var u=l+1===r.length,c=u?o:function(e){return function(){return a.nextExpectedAction=e,++n.currentLevel,a.resetSequenceTimer(),!0}}(i||a.getKeyInfo(r[l+1]).action);s.push(a.bindSingle(r[l],c,i,t,l,n))}return function(){for(var e=0;e<s.length;e++)s[e]()}}},{"../../helpers/characterFromEvent":118}],102:[function(e,t,r){"use strict";t.exports=function(e,t,r,n,i,o){var a=this;e=e.replace(/\s+/g," ");var s,l=e.split(" ");if(l.length>1)return a.bindSequence(e,l,t,r);s=a.getKeyInfo(e,r),a.callbacks[s.key]=a.callbacks[s.key]||{sequences:[],singles:[]};var u=a.callbacks[s.key][n?"sequences":"singles"],c={callback:t,originalCallback:o||t,modifiers:s.modifiers,action:s.action,seq:n,level:i,combo:e};return u.push(c),function(){var e=u.indexOf(c);u.splice(e,1)}}},{}],103:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var o,a=this;if(a.stopCallback(r,r.target||r.srcElement,n,i))return!0;var s=t(r,n);return!1===s&&(o=e("../../helpers/preventDefault"),o(r),e("../../helpers/stopPropagation")(r)),s}},{"../../helpers/preventDefault":122,"../../helpers/stopPropagation":127}],104:[function(e,t,r){"use strict";t.exports=function(t,r){var n,i,o,a,s,l,u,c=this,d=[];for(n=e("../../helpers/keysFromString"),i=n(t),s=e("../../helpers/special-aliases"),l=e("../../helpers/shift-map"),u=e("../../helpers/isModifier"),a=0;a<i.length;++a)o=i[a],s[o]&&(o=s[o]),r&&"keypress"!==r&&l[o]&&(o=l[o],d.push("shift")),u(o)&&d.push(o);return r=c.pickBestAction(o,d,r),{key:o,modifiers:d,action:r}}},{"../../helpers/isModifier":120,"../../helpers/keysFromString":121,"../../helpers/shift-map":123,"../../helpers/special-aliases":124}],105:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,a){var s,l,u,c=this,d=[],f=n.type;if(!c.callbacks[t])return[];l=e("../../helpers/isModifier"),"keyup"===f&&l(t)&&(r=[t]);var p=c.callbacks[t].sequences.reverse().concat(c.callbacks[t].singles.reverse());for(c.callbacks[t].sequences.reverse(),c.callbacks[t].singles.reverse(),s=0;s<p.length;++s){var h=p[s];!i&&h.seq&&h.originalCallback.currentLevel!==h.level||f===h.action&&(u=e("./modifiersMatch"),("keypress"===f&&!n.metaKey&&!n.ctrlKey||u(r,h.modifiers))&&d.push(h))}return d}},{"../../helpers/isModifier":120,"./modifiersMatch":109}],106:[function(e,t,r){"use strict";t.exports=function(){var t,r=this,n=r.constructor;if(!n.REVERSE_MAP){n.REVERSE_MAP={},t=e("../../helpers/special-keys-map");for(var i in t)i>95&&i<112||t.hasOwnProperty(i)&&(n.REVERSE_MAP[t[i]]=i)}return n.REVERSE_MAP}},{"../../helpers/special-keys-map":126}],107:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i,o,a,s,l=this,u=[],c=0,d=!1;for(i=l.getMatches(t,r,n),o=0;o<i.length;++o)i[o].seq&&(c=Math.max(c,i[o].level));for(o=0;o<i.length;++o)if(i[o].seq){if(i[o].level!==c)continue;if(d=!0,u.push(i[o].originalCallback),!l.fireCallback(i[o].callback,n,i[o].combo,i[o].seq)){u=[];break}}else d||l.fireCallback(i[o].callback,n,i[o].combo);s="keypress"===n.type&&l.ignoreNextKeypress,a=e("../../helpers/isModifier"),n.type!==l.nextExpectedAction||a(t)||s||l.resetSequences(u),l.ignoreNextKeypress=d&&"keydown"===n.type}},{"../../helpers/isModifier":120}],108:[function(e,t,r){"use strict";t.exports=function(t){var r,n,i=this;"number"!=typeof t.which&&(t.which=t.keyCode),r=e("../../helpers/characterFromEvent");var o=r(t);if(o){if("keyup"===t.type&&i.ignoreNextKeyup===o)return void(i.ignoreNextKeyup=!1);n=e("../../helpers/eventModifiers"),i.handleKey(o,n(t),t)}}},{"../../helpers/characterFromEvent":118,"../../helpers/eventModifiers":119}],109:[function(e,t,r){"use strict";t.exports=function(e,t){return e.sort().join(",")===t.sort().join(",")}},{}],110:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n=this;return r||(r=n.getReverseMap()[e]?"keydown":"keypress"),"keypress"===r&&t.length&&(r="keydown"),r}},{}],111:[function(e,t,r){"use strict";t.exports=function(){var e=this;return e.callbacks={},e.directMap={},this}},{}],112:[function(e,t,r){"use strict";t.exports=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout(function(){e.resetSequences()},1e3)}},{}],113:[function(e,t,r){"use strict";t.exports=function(e){e=e||[];for(var t in this.callbacks)for(var r=this.callbacks[t].sequences,n=0;n<r.length;n++)-1===e.indexOf(r[n].originalCallback)&&(r[n].originalCallback.currentLevel=0);this.nextExpectedAction=e.length>0}},{}],114:[function(e,t,r){"use strict";t.exports=function(e,t){return!((" "+t.className+" ").indexOf(" combokeys ")>-1)&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)}},{}],115:[function(e,t,r){"use strict";t.exports=function(e,t){}},{}],116:[function(e,t,r){"use strict";t.exports=function(){this.instances.forEach(function(e){e.reset()})}},{}],117:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){if(e.addEventListener)return void e.addEventListener(t,r,n);e.attachEvent("on"+t,r)}},{}],118:[function(e,t,r){"use strict";t.exports=function(t){var r,n;if(r=e("./special-keys-map"),n=e("./special-characters-map"),"keypress"===t.type){var i=String.fromCharCode(t.which);return t.shiftKey||(i=i.toLowerCase()),i}return r[t.which]?r[t.which]:n[t.which]?n[t.which]:String.fromCharCode(t.which).toLowerCase()}},{"./special-characters-map":125,"./special-keys-map":126}],119:[function(e,t,r){"use strict";t.exports=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}},{}],120:[function(e,t,r){"use strict";t.exports=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}},{}],121:[function(e,t,r){"use strict";t.exports=function(e){return"+"===e?["+"]:e.split("+")}},{}],122:[function(e,t,r){"use strict";t.exports=function(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}},{}],123:[function(e,t,r){"use strict";t.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},{}],124:[function(e,t,r){"use strict";t.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},{}],125:[function(e,t,r){"use strict";t.exports={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},{}],126:[function(e,t,r){"use strict";t.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",187:"plus",189:"minus",224:"meta"};for(var n=1;n<20;++n)t.exports[111+n]="f"+n;for(n=0;n<=9;++n)t.exports[n+96]=n},{}],127:[function(e,t,r){"use strict";t.exports=function(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}},{}],128:[function(e,t,r){"use strict";t.exports=e("./Combokeys")},{"./Combokeys":97}],129:[function(e,t,r){"use strict";function n(e,t,r){for(var n=i(e),a=i(t),u={all:r.buffer||0,top:r.topBuffer||0,bottom:r.bottomBuffer||0,left:r.leftBuffer||0,right:r.rightBuffer||0},c=Array.isArray(r.position)?r.position:[r.position].filter(Boolean),d=Array.isArray(r.hAlign)?r.hAlign:[r.hAlign].filter(Boolean),f=Array.isArray(r.vAlign)?r.vAlign:[r.vAlign].filter(Boolean),p=c.length>0&&r.forcePosition?c:(0,l.default)(c.concat(["top","bottom","left","right"])),h=d.length>0&&r.forceHAlign?d:(0,l.default)(d.concat(["center","left","right"])),m=f.length>0&&r.forceVAlign?f:(0,l.default)(f.concat(["center","top","bottom"])),b=(0,s.default)(p.map(function(e){return"cover"===e?(0,s.default)(h.map(function(t){return m.map(function(r){return{position:e,hAlign:t,vAlign:r}})})):"top"===e||"bottom"===e?h.map(function(t){return{position:e,hAlign:t,vAlign:"center"}}):m.map(function(t){return{position:e,hAlign:"center",vAlign:t}})})),_=null,v=0;v<b.length;v++){var g=b[v],y=o(n,a,g,u),w=y.top,k=y.left;if(w-u.all-u.top>=0&&k-u.all-u.left>=0&&w+n.height+u.all+u.bottom<=window.innerHeight&&k+n.width+u.all+u.right<=window.innerWidth){_={choice:g,coord:y};break}}if(!_){var j={position:c[0]||"top",hAlign:d[0]||"center",vAlign:f[0]||"center"};_={choice:j,coord:o(n,a,j,u)}}return e.style.top="".concat(_.coord.top,"px"),e.style.left="".concat(_.coord.left,"px"),_.choice}function i(e){var t=e.getBoundingClientRect();return"width"in t||(t=Object.assign({width:t.right-t.left,height:t.bottom-t.top},t)),t}function o(e,t,r,n){var i=r.position,o=r.hAlign,a=r.vAlign,s=0,l=0;if("cover"===i){switch(o){case"center":l=Math.round((t.left+t.right-e.width)/2);break;case"left":l=Math.floor(t.left);break;case"right":l=Math.ceil(t.right-e.width);break;default:throw new Error("Should not happen")}switch(a){case"center":s=Math.round((t.top+t.bottom-e.height)/2);break;case"top":s=Math.floor(t.top);break;case"bottom":s=Math.ceil(t.bottom-e.height);break;default:throw new Error("Should not happen")}}else if("top"===i||"bottom"===i){switch(i){case"top":s=Math.floor(t.top-e.height-n.all-n.bottom);break;case"bottom":s=Math.ceil(t.bottom+n.all+n.top);break;default:throw new Error("Should not happen")}switch(o){case"center":l=Math.round((t.left+t.right-e.width)/2);break;case"left":l=Math.round(t.left);break;case"right":l=Math.round(t.right-e.width);break;default:throw new Error("Should not happen")}}else{switch(i){case"left":l=Math.floor(t.left-e.width-n.all-n.right);break;case"right":l=Math.ceil(t.right+n.all+n.left);break;default:throw new Error("Should not happen")}switch(a){case"center":s=Math.round((t.top+t.bottom-e.height)/2);break;case"top":s=Math.round(t.top);break;case"bottom":s=Math.round(t.bottom-e.height);break;default:throw new Error("Should not happen")}}return{top:s,left:l}}var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var s=a(e("lodash/flatten")),l=a(e("lodash/uniq"));t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/interopRequireDefault":67,"lodash/flatten":462,"lodash/uniq":501}],130:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":176,"../../modules/es6.array.from":247,"../../modules/es6.string.iterator":270}],131:[function(e,t,r){e("../../modules/es6.array.is-array"),t.exports=e("../../modules/_core").Array.isArray},{"../../modules/_core":176,"../../modules/es6.array.is-array":248}],132:[function(e,t,r){e("../../modules/es6.date.now"),t.exports=e("../../modules/_core").Date.now},{"../../modules/_core":176,"../../modules/es6.date.now":250}],133:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":245,"../modules/es6.string.iterator":270,"../modules/web.dom.iterable":287}],134:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":246,"../modules/es6.string.iterator":270,"../modules/web.dom.iterable":287}],135:[function(e,t,r){var n=e("../../modules/_core"),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(e){return i.stringify.apply(i,arguments)}},{"../../modules/_core":176}],136:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),e("../modules/es7.map.of"),e("../modules/es7.map.from"),t.exports=e("../modules/_core").Map},{"../modules/_core":176,"../modules/es6.map":251,"../modules/es6.object.to-string":265,"../modules/es6.string.iterator":270,"../modules/es7.map.from":274,"../modules/es7.map.of":275,"../modules/es7.map.to-json":276,"../modules/web.dom.iterable":287}],137:[function(e,t,r){e("../../modules/es6.number.is-nan"),t.exports=e("../../modules/_core").Number.isNaN},{"../../modules/_core":176,"../../modules/es6.number.is-nan":252}],138:[function(e,t,r){e("../../modules/es6.number.max-safe-integer"),t.exports=9007199254740991},{"../../modules/es6.number.max-safe-integer":253}],139:[function(e,t,r){e("../../modules/es6.number.min-safe-integer"),t.exports=-9007199254740991},{"../../modules/es6.number.min-safe-integer":254}],140:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":176,"../../modules/es6.object.assign":255}],141:[function(e,t,r){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.create(e,t)}},{"../../modules/_core":176,"../../modules/es6.object.create":256}],142:[function(e,t,r){e("../../modules/es6.object.define-properties");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.defineProperties(e,t)}},{"../../modules/_core":176,"../../modules/es6.object.define-properties":257}],143:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":176,"../../modules/es6.object.define-property":258}],144:[function(e,t,r){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/_core").Object.freeze},{"../../modules/_core":176,"../../modules/es6.object.freeze":259}],145:[function(e,t,r){e("../../modules/es6.object.get-own-property-descriptor");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},{"../../modules/_core":176,"../../modules/es6.object.get-own-property-descriptor":260}],146:[function(e,t,r){e("../../modules/es6.object.get-own-property-names");var n=e("../../modules/_core").Object;t.exports=function(e){return n.getOwnPropertyNames(e)}},{"../../modules/_core":176,"../../modules/es6.object.get-own-property-names":261}],147:[function(e,t,r){e("../../modules/es6.symbol"),t.exports=e("../../modules/_core").Object.getOwnPropertySymbols},{"../../modules/_core":176,"../../modules/es6.symbol":271}],148:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":176,"../../modules/es6.object.get-prototype-of":262}],149:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":176,"../../modules/es6.object.keys":263}],150:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":176,"../../modules/es6.object.set-prototype-of":264}],151:[function(e,t,r){e("../../modules/es7.object.values"),t.exports=e("../../modules/_core").Object.values},{"../../modules/_core":176,"../../modules/es7.object.values":277}],152:[function(e,t,r){e("../modules/es6.parse-float"),t.exports=e("../modules/_core").parseFloat},{"../modules/_core":176,"../modules/es6.parse-float":266}],153:[function(e,t,r){e("../modules/es6.parse-int"),t.exports=e("../modules/_core").parseInt},{"../modules/_core":176,"../modules/es6.parse-int":267}],154:[function(e,t,r){(function(e){t.exports=e.Promise}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],155:[function(e,t,r){e("../../modules/es6.reflect.get"),t.exports=e("../../modules/_core").Reflect.get},{"../../modules/_core":176,"../../modules/es6.reflect.get":268}],156:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),e("../modules/es7.set.of"),e("../modules/es7.set.from"),t.exports=e("../modules/_core").Set},{"../modules/_core":176,"../modules/es6.object.to-string":265,"../modules/es6.set":269,"../modules/es6.string.iterator":270,"../modules/es7.set.from":278,"../modules/es7.set.of":279,"../modules/es7.set.to-json":280,"../modules/web.dom.iterable":287}],157:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":176,"../../modules/es6.object.to-string":265,"../../modules/es6.symbol":271,"../../modules/es7.symbol.async-iterator":281,"../../modules/es7.symbol.observable":282}],158:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":242,"../../modules/es6.string.iterator":270,"../../modules/web.dom.iterable":287}],159:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/web.dom.iterable"),e("../modules/es6.weak-map"),e("../modules/es7.weak-map.of"),e("../modules/es7.weak-map.from"),t.exports=e("../modules/_core").WeakMap},{"../modules/_core":176,"../modules/es6.object.to-string":265,"../modules/es6.weak-map":272,"../modules/es7.weak-map.from":283,"../modules/es7.weak-map.of":284,"../modules/web.dom.iterable":287}],160:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/web.dom.iterable"),e("../modules/es6.weak-set"),e("../modules/es7.weak-set.of"),e("../modules/es7.weak-set.from"),t.exports=e("../modules/_core").WeakSet},{"../modules/_core":176,"../modules/es6.object.to-string":265,"../modules/es6.weak-set":273,"../modules/es7.weak-set.from":285,"../modules/es7.weak-set.of":286,"../modules/web.dom.iterable":287}],161:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],162:[function(e,t,r){t.exports=function(){}},{}],163:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],164:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":195}],
165:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":186}],166:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_to-length"),o=e("./_to-absolute-index");t.exports=function(e){return function(t,r,a){var s,l=n(t),u=i(l.length),c=o(a,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},{"./_to-absolute-index":233,"./_to-iobject":235,"./_to-length":236}],167:[function(e,t,r){var n=e("./_ctx"),i=e("./_iobject"),o=e("./_to-object"),a=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var r=1==e,l=2==e,u=3==e,c=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var m,b,_=o(t),v=i(_),g=n(s,h,3),y=a(v.length),w=0,k=r?p(t,y):l?p(t,0):void 0;y>w;w++)if((f||w in v)&&(m=v[w],b=g(m,w,_),e))if(r)k[w]=b;else if(b)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:k.push(m)}else if(c)return!1;return d?-1:u||c?c:k}}},{"./_array-species-create":169,"./_ctx":178,"./_iobject":192,"./_to-length":236,"./_to-object":237}],168:[function(e,t,r){var n=e("./_is-object"),i=e("./_is-array"),o=e("./_wks")("species");t.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":194,"./_is-object":195,"./_wks":243}],169:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":168}],170:[function(e,t,r){var n=e("./_cof"),i=e("./_wks")("toStringTag"),o="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),i))?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":171,"./_wks":243}],171:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],172:[function(e,t,r){"use strict";var n=e("./_object-dp").f,i=e("./_object-create"),o=e("./_redefine-all"),a=e("./_ctx"),s=e("./_an-instance"),l=e("./_for-of"),u=e("./_iter-define"),c=e("./_iter-step"),d=e("./_set-species"),f=e("./_descriptors"),p=e("./_meta").fastKey,h=e("./_validate-collection"),m=f?"_s":"size",b=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,u){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=n&&l(n,r,e[u],e)});return o(c.prototype,{clear:function(){for(var e=h(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=h(this,t),n=b(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[m]--}return!!n},forEach:function(e){h(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!b(h(this,t),e)}}),f&&n(c.prototype,"size",{get:function(){return h(this,t)[m]}}),c},def:function(e,t,r){var n,i,o=b(e,t);return o?o.v=r:(e._l=o={i:i=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:b,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=h(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?c(0,r.k):"values"==t?c(0,r.v):c(0,[r.k,r.v]):(e._t=void 0,c(1))},r?"entries":"values",!r,!0),d(t)}}},{"./_an-instance":163,"./_ctx":178,"./_descriptors":180,"./_for-of":186,"./_iter-define":198,"./_iter-step":200,"./_meta":203,"./_object-create":205,"./_object-dp":206,"./_redefine-all":221,"./_set-species":226,"./_validate-collection":240}],173:[function(e,t,r){var n=e("./_classof"),i=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":165,"./_classof":170}],174:[function(e,t,r){"use strict";var n=e("./_redefine-all"),i=e("./_meta").getWeak,o=e("./_an-object"),a=e("./_is-object"),s=e("./_an-instance"),l=e("./_for-of"),u=e("./_array-methods"),c=e("./_has"),d=e("./_validate-collection"),f=u(5),p=u(6),h=0,m=function(e){return e._l||(e._l=new b)},b=function(){this.a=[]},_=function(e,t){return f(e.a,function(e){return e[0]===t})};b.prototype={get:function(e){var t=_(this,e);if(t)return t[1]},has:function(e){return!!_(this,e)},set:function(e,t){var r=_(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,r,o){var u=e(function(e,n){s(e,u,t,"_i"),e._t=t,e._i=h++,e._l=void 0,void 0!=n&&l(n,r,e[o],e)});return n(u.prototype,{delete:function(e){if(!a(e))return!1;var r=i(e);return!0===r?m(d(this,t)).delete(e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!a(e))return!1;var r=i(e);return!0===r?m(d(this,t)).has(e):r&&c(r,this._i)}}),u},def:function(e,t,r){var n=i(o(t),!0);return!0===n?m(e).set(t,r):n[e._i]=r,e},ufstore:m}},{"./_an-instance":163,"./_an-object":164,"./_array-methods":167,"./_for-of":186,"./_has":188,"./_is-object":195,"./_meta":203,"./_redefine-all":221,"./_validate-collection":240}],175:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_export"),o=e("./_meta"),a=e("./_fails"),s=e("./_hide"),l=e("./_redefine-all"),u=e("./_for-of"),c=e("./_an-instance"),d=e("./_is-object"),f=e("./_set-to-string-tag"),p=e("./_object-dp").f,h=e("./_array-methods")(0),m=e("./_descriptors");t.exports=function(e,t,r,b,_,v){var g=n[e],y=g,w=_?"set":"add",k=y&&y.prototype,j={};return m&&"function"==typeof y&&(v||k.forEach&&!a(function(){(new y).entries().next()}))?(y=t(function(t,r){c(t,y,e,"_c"),t._c=new g,void 0!=r&&u(r,_,t[w],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!v||"clear"!=e)&&s(y.prototype,e,function(r,n){if(c(this,y,e),!t&&v&&!d(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i})}),v||p(y.prototype,"size",{get:function(){return this._c.size}})):(y=b.getConstructor(t,e,_,w),l(y.prototype,r),o.NEED=!0),f(y,e),j[e]=y,i(i.G+i.W+i.F,j),v||b.setStrong(y,e,_),y}},{"./_an-instance":163,"./_array-methods":167,"./_descriptors":180,"./_export":184,"./_fails":185,"./_for-of":186,"./_global":187,"./_hide":189,"./_is-object":195,"./_meta":203,"./_object-dp":206,"./_redefine-all":221,"./_set-to-string-tag":227}],176:[function(e,t,r){var n=t.exports={version:"2.6.8"};"number"==typeof __e&&(__e=n)},{}],177:[function(e,t,r){"use strict";var n=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},{"./_object-dp":206,"./_property-desc":220}],178:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":161}],179:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],180:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":185}],181:[function(e,t,r){var n=e("./_is-object"),i=e("./_global").document,o=n(i)&&n(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"./_global":187,"./_is-object":195}],182:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],183:[function(e,t,r){var n=e("./_object-keys"),i=e("./_object-gops"),o=e("./_object-pie");t.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},{"./_object-gops":211,"./_object-keys":214,"./_object-pie":215}],184:[function(e,t,r){var n=e("./_global"),i=e("./_core"),o=e("./_ctx"),a=e("./_hide"),s=e("./_has"),l=function(e,t,r){var u,c,d,f=e&l.F,p=e&l.G,h=e&l.S,m=e&l.P,b=e&l.B,_=e&l.W,v=p?i:i[t]||(i[t]={}),g=v.prototype,y=p?n:h?n[t]:(n[t]||{}).prototype;p&&(r=t);for(u in r)(c=!f&&y&&void 0!==y[u])&&s(v,u)||(d=c?y[u]:r[u],v[u]=p&&"function"!=typeof y[u]?r[u]:b&&c?o(d,n):_&&y[u]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?o(Function.call,d):d,m&&((v.virtual||(v.virtual={}))[u]=d,e&l.R&&g&&!g[u]&&a(g,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},{"./_core":176,"./_ctx":178,"./_global":187,"./_has":188,"./_hide":189}],185:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],186:[function(e,t,r){var n=e("./_ctx"),i=e("./_iter-call"),o=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),l=e("./core.get-iterator-method"),u={},c={},r=t.exports=function(e,t,r,d,f){var p,h,m,b,_=f?function(){return e}:l(e),v=n(r,d,t?2:1),g=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(o(_)){for(p=s(e.length);p>g;g++)if((b=t?v(a(h=e[g])[0],h[1]):v(e[g]))===u||b===c)return b}else for(m=_.call(e);!(h=m.next()).done;)if((b=i(m,v,h.value,t))===u||b===c)return b};r.BREAK=u,r.RETURN=c},{"./_an-object":164,"./_ctx":178,"./_is-array-iter":193,"./_iter-call":196,"./_to-length":236,"./core.get-iterator-method":244}],187:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],188:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],189:[function(e,t,r){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":180,"./_object-dp":206,"./_property-desc":220}],190:[function(e,t,r){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":187}],191:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":180,"./_dom-create":181,"./_fails":185}],192:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":171}],193:[function(e,t,r){var n=e("./_iterators"),i=e("./_wks")("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},{"./_iterators":201,"./_wks":243}],194:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":171}],195:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],196:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},{"./_an-object":164}],197:[function(e,t,r){"use strict";var n=e("./_object-create"),i=e("./_property-desc"),o=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},{"./_hide":189,"./_object-create":205,"./_property-desc":220,"./_set-to-string-tag":227,"./_wks":243}],198:[function(e,t,r){"use strict";var n=e("./_library"),i=e("./_export"),o=e("./_redefine"),a=e("./_hide"),s=e("./_iterators"),l=e("./_iter-create"),u=e("./_set-to-string-tag"),c=e("./_object-gpo"),d=e("./_wks")("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(e,t,r,h,m,b,_){l(r,t,h);var v,g,y,w=function(e){if(!f&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},k=t+" Iterator",j="values"==m,x=!1,E=e.prototype,S=E[d]||E["@@iterator"]||m&&E[m],C=S||w(m),I=m?j?w("entries"):C:void 0,T="Array"==t?E.entries||S:S;if(T&&(y=c(T.call(new e)))!==Object.prototype&&y.next&&(u(y,k,!0),n||"function"==typeof y[d]||a(y,d,p)),j&&S&&"values"!==S.name&&(x=!0,C=function(){return S.call(this)}),n&&!_||!f&&!x&&E[d]||a(E,d,C),s[t]=C,s[k]=p,m)if(v={values:j?C:w("values"),keys:b?C:w("keys"),entries:I},_)for(g in v)g in E||o(E,g,v[g]);else i(i.P+i.F*(f||x),t,v);return v}},{"./_export":184,"./_hide":189,"./_iter-create":197,"./_iterators":201,"./_library":202,"./_object-gpo":212,"./_redefine":222,"./_set-to-string-tag":227,"./_wks":243}],199:[function(e,t,r){var n=e("./_wks")("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},{"./_wks":243}],200:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],201:[function(e,t,r){t.exports={}},{}],202:[function(e,t,r){t.exports=!0},{}],203:[function(e,t,r){var n=e("./_uid")("meta"),i=e("./_is-object"),o=e("./_has"),a=e("./_object-dp").f,s=0,l=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i},f=function(e,t){if(!o(e,n)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[n].w},p=function(e){return u&&h.NEED&&l(e)&&!o(e,n)&&c(e),e},h=t.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},{"./_fails":185,"./_has":188,"./_is-object":195,"./_object-dp":206,"./_uid":239}],204:[function(e,t,r){"use strict";var n=e("./_descriptors"),i=e("./_object-keys"),o=e("./_object-gops"),a=e("./_object-pie"),s=e("./_to-object"),l=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=s(e),u=arguments.length,c=1,d=o.f,f=a.f;u>c;)for(var p,h=l(arguments[c++]),m=d?i(h).concat(d(h)):i(h),b=m.length,_=0;b>_;)p=m[_++],n&&!f.call(h,p)||(r[p]=h[p]);return r}:u},{"./_descriptors":180,"./_fails":185,"./_iobject":192,"./_object-gops":211,"./_object-keys":214,"./_object-pie":215,"./_to-object":237}],205:[function(e,t,r){var n=e("./_an-object"),i=e("./_object-dps"),o=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},l=function(){var t,r=e("./_dom-create")("iframe"),n=o.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[o[n]];return l()};t.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=l(),void 0===t?r:i(r,t)}},{"./_an-object":164,"./_dom-create":181,"./_enum-bug-keys":182,"./_html":190,"./_object-dps":207,"./_shared-key":228}],206:[function(e,t,r){var n=e("./_an-object"),i=e("./_ie8-dom-define"),o=e("./_to-primitive"),a=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":164,"./_descriptors":180,"./_ie8-dom-define":191,"./_to-primitive":238}],207:[function(e,t,r){var n=e("./_object-dp"),i=e("./_an-object"),o=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,l=0;s>l;)n.f(e,r=a[l++],t[r]);return e}},{"./_an-object":164,"./_descriptors":180,"./_object-dp":206,"./_object-keys":214}],208:[function(e,t,r){var n=e("./_object-pie"),i=e("./_property-desc"),o=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),l=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},{"./_descriptors":180,"./_has":188,"./_ie8-dom-define":191,"./_object-pie":215,"./_property-desc":220,"./_to-iobject":235,"./_to-primitive":238}],209:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_object-gopn").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};t.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(n(e))}},{"./_object-gopn":210,"./_to-iobject":235}],210:[function(e,t,r){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},{"./_enum-bug-keys":182,"./_object-keys-internal":213}],211:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],212:[function(e,t,r){var n=e("./_has"),i=e("./_to-object"),o=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":188,"./_shared-key":228,"./_to-object":237}],213:[function(e,t,r){var n=e("./_has"),i=e("./_to-iobject"),o=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=i(e),l=0,u=[];for(r in s)r!=a&&n(s,r)&&u.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~o(u,r)||u.push(r));return u}},{"./_array-includes":166,"./_has":188,"./_shared-key":228,"./_to-iobject":235}],214:[function(e,t,r){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,i)}},{"./_enum-bug-keys":182,"./_object-keys-internal":213}],215:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],216:[function(e,t,r){var n=e("./_export"),i=e("./_core"),o=e("./_fails");t.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},{"./_core":176,"./_export":184,"./_fails":185}],217:[function(e,t,r){var n=e("./_descriptors"),i=e("./_object-keys"),o=e("./_to-iobject"),a=e("./_object-pie").f;t.exports=function(e){return function(t){for(var r,s=o(t),l=i(s),u=l.length,c=0,d=[];u>c;)r=l[c++],n&&!a.call(s,r)||d.push(e?[r,s[r]]:s[r]);return d}}},{"./_descriptors":180,"./_object-keys":214,"./_object-pie":215,"./_to-iobject":235}],218:[function(e,t,r){var n=e("./_global").parseFloat,i=e("./_string-trim").trim;t.exports=1/n(e("./_string-ws")+"-0")!=-1/0?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},{"./_global":187,"./_string-trim":231,"./_string-ws":232}],219:[function(e,t,r){var n=e("./_global").parseInt,i=e("./_string-trim").trim,o=e("./_string-ws"),a=/^[-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(a.test(r)?16:10))}:n},{"./_global":187,"./_string-trim":231,"./_string-ws":232}],220:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],221:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},{"./_hide":189}],222:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":189}],223:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_a-function"),o=e("./_ctx"),a=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,l=arguments[1];return i(this),t=void 0!==l,t&&i(l),void 0==e?new this:(r=[],t?(n=0,s=o(l,arguments[2],2),a(e,!1,function(e){r.push(s(e,n++))})):a(e,!1,r.push,r),new this(r))}})}},{"./_a-function":161,"./_ctx":178,"./_export":184,"./_for-of":186}],224:[function(e,t,r){"use strict";var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":184}],225:[function(e,t,r){var n=e("./_is-object"),i=e("./_an-object"),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return o(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:o}},{"./_an-object":164,"./_ctx":178,"./_is-object":195,"./_object-gopd":208}],226:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_core"),o=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":176,"./_descriptors":180,"./_global":187,"./_object-dp":206,"./_wks":243}],227:[function(e,t,r){var n=e("./_object-dp").f,i=e("./_has"),o=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},{"./_has":188,"./_object-dp":206,"./_wks":243}],228:[function(e,t,r){var n=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return n[e]||(n[e]=i(e))}},{"./_shared":229,"./_uid":239}],229:[function(e,t,r){var n=e("./_core"),i=e("./_global"),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:e("./_library")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},{"./_core":176,"./_global":187,"./_library":202}],230:[function(e,t,r){var n=e("./_to-integer"),i=e("./_defined");t.exports=function(e){return function(t,r){var o,a,s=String(i(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},{"./_defined":179,"./_to-integer":234}],231:[function(e,t,r){var n=e("./_export"),i=e("./_defined"),o=e("./_fails"),a=e("./_string-ws"),s="["+a+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),d=function(e,t,r){var i={},s=o(function(){return!!a[e]()||l[e]()!=l}),u=i[e]=s?t(f):a[e];r&&(i[r]=u),n(n.P+n.F*s,"String",i)},f=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};t.exports=d},{"./_defined":179,"./_export":184,"./_fails":185,"./_string-ws":232}],232:[function(e,t,r){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],233:[function(e,t,r){var n=e("./_to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},{"./_to-integer":234}],234:[function(e,t,r){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},{}],235:[function(e,t,r){var n=e("./_iobject"),i=e("./_defined");t.exports=function(e){return n(i(e))}},{"./_defined":179,"./_iobject":192}],236:[function(e,t,r){var n=e("./_to-integer"),i=Math.min;t.exports=function(e){return e>0?i(n(e),9007199254740991):0}},{"./_to-integer":234}],237:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":179}],238:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":195}],239:[function(e,t,r){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},{}],240:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":195}],241:[function(e,t,r){var n=e("./_global"),i=e("./_core"),o=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":176,"./_global":187,"./_library":202,"./_object-dp":206,"./_wks-ext":242}],242:[function(e,t,r){r.f=e("./_wks")},{"./_wks":243}],243:[function(e,t,r){var n=e("./_shared")("wks"),i=e("./_uid"),o=e("./_global").Symbol,a="function"==typeof o;(t.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},{"./_global":187,"./_shared":229,"./_uid":239}],244:[function(e,t,r){var n=e("./_classof"),i=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},{"./_classof":170,"./_core":176,"./_iterators":201,"./_wks":243}],245:[function(e,t,r){var n=e("./_an-object"),i=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":164,"./_core":176,"./core.get-iterator-method":244}],246:[function(e,t,r){var n=e("./_classof"),i=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(n(t))}},{"./_classof":170,"./_core":176,"./_iterators":201,"./_wks":243}],247:[function(e,t,r){"use strict";var n=e("./_ctx"),i=e("./_export"),o=e("./_to-object"),a=e("./_iter-call"),s=e("./_is-array-iter"),l=e("./_to-length"),u=e("./_create-property"),c=e("./core.get-iterator-method");i(i.S+i.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,d,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,b=void 0!==m,_=0,v=c(f);if(b&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(t=l(f.length),r=new p(t);t>_;_++)u(r,_,b?m(f[_],_):f[_]);else for(d=v.call(f),r=new p;!(i=d.next()).done;_++)u(r,_,b?a(d,m,[i.value,_],!0):i.value);return r.length=_,r}})},{"./_create-property":177,"./_ctx":178,"./_export":184,"./_is-array-iter":193,"./_iter-call":196,"./_iter-detect":199,"./_to-length":236,"./_to-object":237,"./core.get-iterator-method":244}],248:[function(e,t,r){var n=e("./_export");n(n.S,"Array",{isArray:e("./_is-array")})},{"./_export":184,"./_is-array":194}],249:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),i=e("./_iter-step"),o=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":162,"./_iter-define":198,"./_iter-step":200,"./_iterators":201,"./_to-iobject":235}],250:[function(e,t,r){var n=e("./_export");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":184}],251:[function(e,t,r){"use strict";var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":175,"./_collection-strong":172,"./_validate-collection":240}],252:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":184}],253:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":184}],254:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":184}],255:[function(e,t,r){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":184,"./_object-assign":204}],256:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":184,"./_object-create":205}],257:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":180,"./_export":184,"./_object-dps":207}],258:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":180,"./_export":184,"./_object-dp":206}],259:[function(e,t,r){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},{"./_is-object":195,"./_meta":203,"./_object-sap":216}],260:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},{"./_object-gopd":208,"./_object-sap":216,"./_to-iobject":235}],261:[function(e,t,r){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":209,"./_object-sap":216}],262:[function(e,t,r){var n=e("./_to-object"),i=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return i(n(e))}})},{"./_object-gpo":212,"./_object-sap":216,"./_to-object":237}],263:[function(e,t,r){var n=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return i(n(e))}})},{"./_object-keys":214,"./_object-sap":216,"./_to-object":237}],264:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":184,"./_set-proto":225}],265:[function(e,t,r){},{}],266:[function(e,t,r){var n=e("./_export"),i=e("./_parse-float");n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},{"./_export":184,"./_parse-float":218}],267:[function(e,t,r){var n=e("./_export"),i=e("./_parse-int");n(n.G+n.F*(parseInt!=i),{parseInt:i})},{"./_export":184,"./_parse-int":219}],268:[function(e,t,r){function n(e,t){var r,s,c=arguments.length<3?e:arguments[2];return u(e)===c?e[t]:(r=i.f(e,t))?a(r,"value")?r.value:void 0!==r.get?r.get.call(c):void 0:l(s=o(e))?n(s,t,c):void 0}var i=e("./_object-gopd"),o=e("./_object-gpo"),a=e("./_has"),s=e("./_export"),l=e("./_is-object"),u=e("./_an-object");s(s.S,"Reflect",{get:n})},{"./_an-object":164,"./_export":184,"./_has":188,"./_is-object":195,"./_object-gopd":208,"./_object-gpo":212}],269:[function(e,t,r){"use strict";var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":175,"./_collection-strong":172,"./_validate-collection":240}],270:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":198,"./_string-at":230}],271:[function(e,t,r){"use strict"
;var n=e("./_global"),i=e("./_has"),o=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),l=e("./_meta").KEY,u=e("./_fails"),c=e("./_shared"),d=e("./_set-to-string-tag"),f=e("./_uid"),p=e("./_wks"),h=e("./_wks-ext"),m=e("./_wks-define"),b=e("./_enum-keys"),_=e("./_is-array"),v=e("./_an-object"),g=e("./_is-object"),y=e("./_to-object"),w=e("./_to-iobject"),k=e("./_to-primitive"),j=e("./_property-desc"),x=e("./_object-create"),E=e("./_object-gopn-ext"),S=e("./_object-gopd"),C=e("./_object-gops"),I=e("./_object-dp"),T=e("./_object-keys"),A=S.f,D=I.f,M=E.f,R=n.Symbol,L=n.JSON,O=L&&L.stringify,P=p("_hidden"),V=p("toPrimitive"),N={}.propertyIsEnumerable,B=c("symbol-registry"),q=c("symbols"),U=c("op-symbols"),F=Object.prototype,H="function"==typeof R&&!!C.f,z=n.QObject,W=!z||!z.prototype||!z.prototype.findChild,G=o&&u(function(){return 7!=x(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=A(F,t);n&&delete F[t],D(e,t,r),n&&e!==F&&D(F,t,n)}:D,K=function(e){var t=q[e]=x(R.prototype);return t._k=e,t},$=H&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},J=function(e,t,r){return e===F&&J(U,t,r),v(e),t=k(t,!0),v(r),i(q,t)?(r.enumerable?(i(e,P)&&e[P][t]&&(e[P][t]=!1),r=x(r,{enumerable:j(0,!1)})):(i(e,P)||D(e,P,j(1,{})),e[P][t]=!0),G(e,t,r)):D(e,t,r)},Y=function(e,t){v(e);for(var r,n=b(t=w(t)),i=0,o=n.length;o>i;)J(e,r=n[i++],t[r]);return e},Q=function(e,t){return void 0===t?x(e):Y(x(e),t)},X=function(e){var t=N.call(this,e=k(e,!0));return!(this===F&&i(q,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(q,e)||i(this,P)&&this[P][e])||t)},Z=function(e,t){if(e=w(e),t=k(t,!0),e!==F||!i(q,t)||i(U,t)){var r=A(e,t);return!r||!i(q,t)||i(e,P)&&e[P][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=M(w(e)),n=[],o=0;r.length>o;)i(q,t=r[o++])||t==P||t==l||n.push(t);return n},te=function(e){for(var t,r=e===F,n=M(r?U:w(e)),o=[],a=0;n.length>a;)!i(q,t=n[a++])||r&&!i(F,t)||o.push(q[t]);return o};H||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===F&&t.call(U,r),i(this,P)&&i(this[P],e)&&(this[P][e]=!1),G(this,e,j(1,r))};return o&&W&&G(F,e,{configurable:!0,set:t}),K(e)},s(R.prototype,"toString",function(){return this._k}),S.f=Z,I.f=J,e("./_object-gopn").f=E.f=ee,e("./_object-pie").f=X,C.f=te,o&&!e("./_library")&&s(F,"propertyIsEnumerable",X,!0),h.f=function(e){return K(p(e))}),a(a.G+a.W+a.F*!H,{Symbol:R});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;re.length>ne;)p(re[ne++]);for(var ie=T(p.store),oe=0;ie.length>oe;)m(ie[oe++]);a(a.S+a.F*!H,"Symbol",{for:function(e){return i(B,e+="")?B[e]:B[e]=R(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!H,"Object",{create:Q,defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=u(function(){C.f(1)});a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return C.f(y(e))}}),L&&a(a.S+a.F*(!H||u(function(){var e=R();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(g(t)||void 0!==e)&&!$(e))return _(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!$(t))return t}),n[1]=t,O.apply(L,n)}}),R.prototype[V]||e("./_hide")(R.prototype,V,R.prototype.valueOf),d(R,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},{"./_an-object":164,"./_descriptors":180,"./_enum-keys":183,"./_export":184,"./_fails":185,"./_global":187,"./_has":188,"./_hide":189,"./_is-array":194,"./_is-object":195,"./_library":202,"./_meta":203,"./_object-create":205,"./_object-dp":206,"./_object-gopd":208,"./_object-gopn":210,"./_object-gopn-ext":209,"./_object-gops":211,"./_object-keys":214,"./_object-pie":215,"./_property-desc":220,"./_redefine":222,"./_set-to-string-tag":227,"./_shared":229,"./_to-iobject":235,"./_to-object":237,"./_to-primitive":238,"./_uid":239,"./_wks":243,"./_wks-define":241,"./_wks-ext":242}],272:[function(e,t,r){"use strict";var n,i=e("./_global"),o=e("./_array-methods")(0),a=e("./_redefine"),s=e("./_meta"),l=e("./_object-assign"),u=e("./_collection-weak"),c=e("./_is-object"),d=e("./_validate-collection"),f=e("./_validate-collection"),p=!i.ActiveXObject&&"ActiveXObject"in i,h=s.getWeak,m=Object.isExtensible,b=u.ufstore,_=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(c(e)){var t=h(e);return!0===t?b(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(d(this,"WeakMap"),e,t)}},g=t.exports=e("./_collection")("WeakMap",_,v,u,!0,!0);f&&p&&(n=u.getConstructor(_,"WeakMap"),l(n.prototype,v),s.NEED=!0,o(["delete","has","get","set"],function(e){var t=g.prototype,r=t[e];a(t,e,function(t,i){if(c(t)&&!m(t)){this._f||(this._f=new n);var o=this._f[e](t,i);return"set"==e?this:o}return r.call(this,t,i)})}))},{"./_array-methods":167,"./_collection":175,"./_collection-weak":174,"./_global":187,"./_is-object":195,"./_meta":203,"./_object-assign":204,"./_redefine":222,"./_validate-collection":240}],273:[function(e,t,r){"use strict";var n=e("./_collection-weak"),i=e("./_validate-collection");e("./_collection")("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},{"./_collection":175,"./_collection-weak":174,"./_validate-collection":240}],274:[function(e,t,r){e("./_set-collection-from")("Map")},{"./_set-collection-from":223}],275:[function(e,t,r){e("./_set-collection-of")("Map")},{"./_set-collection-of":224}],276:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":173,"./_export":184}],277:[function(e,t,r){var n=e("./_export"),i=e("./_object-to-array")(!1);n(n.S,"Object",{values:function(e){return i(e)}})},{"./_export":184,"./_object-to-array":217}],278:[function(e,t,r){e("./_set-collection-from")("Set")},{"./_set-collection-from":223}],279:[function(e,t,r){e("./_set-collection-of")("Set")},{"./_set-collection-of":224}],280:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":173,"./_export":184}],281:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":241}],282:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":241}],283:[function(e,t,r){e("./_set-collection-from")("WeakMap")},{"./_set-collection-from":223}],284:[function(e,t,r){e("./_set-collection-of")("WeakMap")},{"./_set-collection-of":224}],285:[function(e,t,r){e("./_set-collection-from")("WeakSet")},{"./_set-collection-from":223}],286:[function(e,t,r){e("./_set-collection-of")("WeakSet")},{"./_set-collection-of":224}],287:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),i=e("./_hide"),o=e("./_iterators"),a=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=n[u],d=c&&c.prototype;d&&!d[a]&&i(d,a,u),o[u]=o.Array}},{"./_global":187,"./_hide":189,"./_iterators":201,"./_wks":243,"./es6.array.iterator":249}],288:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r,i,o){var s=(0,a.default)()||!i||"object"!==n(i)?i:!!i.capture;e.addEventListener(t,r,s,o)}function o(e,t,r,i){var o=(0,a.default)()||!i||"object"!==n(i)?i:!!i.capture;e.removeEventListener(t,r,o)}Object.defineProperty(r,"__esModule",{value:!0}),r.addEventListener=i,r.removeEventListener=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./supportsCaptureOption"))},{"./supportsCaptureOption":289}],289:[function(e,t,r){"use strict";function n(){if(null===i){var e=!1;try{var t=Object.defineProperty({},"capture",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}i=e}return i}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=null},{}],290:[function(e,t,r){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=w(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function i(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function o(e,t,r){if(t)e.call(r);else for(var n=e.length,i=b(e,n),o=0;o<n;++o)i[o].call(r)}function a(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=b(e,i),a=0;a<i;++a)o[a].call(r,n)}function s(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,a=b(e,o),s=0;s<o;++s)a[s].call(r,n,i)}function l(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var a=e.length,s=b(e,a),l=0;l<a;++l)s[l].call(r,n,i,o)}function u(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=b(e,i),a=0;a<i;++a)o[a].apply(r,n)}function c(e,t,r,n){var o,a,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if(a=e._events,a?(a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]):(a=e._events=w(null),e._eventsCount=0),s){if("function"==typeof s?s=a[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(o=i(e))&&o>0&&s.length>o){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else s=a[t]=r,++e._eventsCount;return e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=j.call(d,n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(!n)return[];var i=n[t];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?_(i):b(i,i.length):[]}function h(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function m(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function b(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function _(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function v(e){var t=function(){};return t.prototype=e,new t}function g(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r}function y(e){var t=this;return function(){return t.apply(e,arguments)}}var w=Object.create||v,k=Object.keys||g,j=Function.prototype.bind||y;t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0;var x,E=10;try{var S={};Object.defineProperty&&Object.defineProperty(S,"x",{value:0}),x=0===S.x}catch(e){x=!1}x?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(e){if("number"!=typeof e||e<0||e!==e)throw new TypeError('"defaultMaxListeners" must be a positive number');E=e}}):n.defaultMaxListeners=E,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return i(this)},n.prototype.emit=function(e){var t,r,n,i,c,d,f="error"===e;if(d=this._events)f=f&&null==d.error;else if(!f)return!1;if(f){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var p=new Error('Unhandled "error" event. ('+t+")");throw p.context=t,p}if(!(r=d[e]))return!1;var h="function"==typeof r;switch(n=arguments.length){case 1:o(r,h,this);break;case 2:a(r,h,this,arguments[1]);break;case 3:s(r,h,this,arguments[1],arguments[2]);break;case 4:l(r,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),c=1;c<n;c++)i[c-1]=arguments[c];u(r,h,this,i)}return!0},n.prototype.addListener=function(e,t){return c(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return c(this,e,t,!0)},n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,n,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=w(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():m(r,i),1===r.length&&(n[e]=r[0]),n.removeListener&&this.emit("removeListener",e,a||t)}return this},n.prototype.removeAllListeners=function(e){var t,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=w(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=w(null):delete r[e]),this;if(0===arguments.length){var i,o=k(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=w(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},n.prototype.listeners=function(e){return p(this,e,!0)},n.prototype.rawListeners=function(e){return p(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},n.prototype.listenerCount=h,n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],291:[function(e,t,r){t.exports=function(e,t){function r(e,n){return e.reduce(function(e,i){return Array.isArray(i)&&n<t?e.concat(r(i,n+1)):e.concat(i)},[])}return t="number"==typeof t?t:1/0,t?r(e,1):Array.isArray(e)?e.map(function(e){return e}):e}},{}],292:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,d=r?i-1:0,f=r?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,h=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+p]=255&a,p+=h,a/=256,u-=8);e[r+p-h]|=128*m}},{}],293:[function(e,t,r){"use strict";function n(e){return b.call(e).slice(8,-1)}function i(e){return Array.isArray(e)?_(e.constructor(e.length),e):"Map"===n(e)?new Map(e):"Set"===n(e)?new Set(e):e&&"object"==typeof e?_(Object.create(Object.getPrototypeOf(e)),e):e}function o(e,t,r){p(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",r,e),a(t[r],r)}function a(e,t){p(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function s(e,t){p(Array.isArray(e),"Expected $splice target to be an array; got %s",e),l(t.$splice)}function l(e){p(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function u(e){p("function"==typeof e,"update(): expected spec of $apply to be a function; got %s.",e)}function c(e){p(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}function d(e,t){p(t&&"object"==typeof t,"update(): $merge expects a spec of type 'object'; got %s",t),p(e&&"object"==typeof e,"update(): $merge expects a target of type 'object'; got %s",e)}function f(e,t){var r=n(e);p("Map"===r||"Set"===r,"update(): %s expects a target of type Set or Map; got %s",t,r)}Object.defineProperty(r,"__esModule",{value:!0});var p=e("invariant"),h=Object.prototype.hasOwnProperty,m=Array.prototype.splice,b=Object.prototype.toString,_=Object.assign||function(e,t){return v(t).forEach(function(r){h.call(t,r)&&(e[r]=t[r])}),e},v="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)},g=function(){function e(){this.commands=_({},y),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var r=this,o="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(o)||p(!Array.isArray(o),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),p("object"==typeof o&&null!==o,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(this.commands).join(", "));var a=e;return v(o).forEach(function(t){if(h.call(r.commands,t)){var s=e===a;a=r.commands[t](o[t],a,o,e),s&&r.isEquals(a,e)&&(a=e)}else{var l="Map"===n(e)?r.update(e.get(t),o[t]):r.update(e[t],o[t]),u="Map"===n(a)?a.get(t):a[t];r.isEquals(l,u)&&(void 0!==l||h.call(e,t))||(a===e&&(a=i(e)),"Map"===n(a)?a.set(t,l):a[t]=l)}}),a},e}();r.Context=g;var y={$push:function(e,t,r){return o(t,r,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,r){return o(t,r,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,n){return s(t,r),e.forEach(function(e){l(e),t===n&&e.length&&(t=i(n)),m.apply(t,e)}),t},$set:function(e,t,r){return c(r),e},$toggle:function(e,t){a(e,"$toggle");var r=e.length?i(t):t;return e.forEach(function(e){r[e]=!t[e]}),r},$unset:function(e,t,r,n){return a(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===n&&(t=i(n)),delete t[e])}),t},$add:function(e,t,r,o){return f(t,"$add"),a(e,"$add"),"Map"===n(t)?e.forEach(function(e){var r=e[0],n=e[1];t===o&&t.get(r)!==n&&(t=i(o)),t.set(r,n)}):e.forEach(function(e){t!==o||t.has(e)||(t=i(o)),t.add(e)}),t},$remove:function(e,t,r,n){return f(t,"$remove"),a(e,"$remove"),e.forEach(function(e){t===n&&t.has(e)&&(t=i(n)),t.delete(e)}),t},$merge:function(e,t,r,n){return d(t,e),v(e).forEach(function(r){e[r]!==t[r]&&(t===n&&(t=i(n)),t[r]=e[r])}),t},$apply:function(e,t){return u(e),e(t)}},w=new g;r.isEquals=w.update.isEquals,r.extend=w.extend,r.default=w.update,r.default.default=t.exports=_(r.default,r)},{invariant:296}],294:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=[];-1!==(r=e.indexOf(t,r+1));)n.push(r);return n}},{}],295:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{dup:80}],296:[function(e,t,r){"use strict";var n=function(e,t,r,n,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,i,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};t.exports=n},{}],297:[function(e,t,r){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}t.exports=n},{}],298:[function(e,t,r){!function(n,i){"function"==typeof define&&define.amd?define(["kefir"],i):"object"==typeof r?t.exports=i(e("kefir")):n.KefirBus=i(n.Kefir)}(this,function(e){function t(){var t=!1,n=e.pool(),i=null,o=e.stream(function(e){function r(t){e.emitEvent(t)}if(i=e,!t)return n.onAny(r),function(){i=null,n.offAny(r)};e.end()});return o.value=o.emit=function(e){return i&&i.emit(e),o},o.error=function(e){return i&&i.error(e),o},o.event=o.emitEvent=function(e){return"end"===e.type?o.end():i&&i.emitEvent(e),o},o.plug=function(e){return n.plug(e),o},o.unplug=function(e){return n.unplug(e),o},o.end=function(){return t||(t=!0,i&&i.end(),n=r),o},o.setName("bus")}var r={plug:function(){},unplug:function(){}};return t.default=t,t})},{kefir:301}],299:[function(e,t,r){"use strict";function n(e,t){return t&&t.subscribe&&t.subscribeOnNext?e.stream(function(e){var r=t.subscribe(function(t){e.emit(t)},function(t){e.error(t),e.end()},function(){e.end()});return function(){r.dispose()}}):t&&t.onAny&&t.offAny?e.stream(function(e){function r(t){switch(t.type){case"value":e.emit(t.value);break;case"error":e.error(t.value);break;case"end":e.end();break;default:console.error("Unknown type of Kefir event",t)}}return t.onAny(r),function(){t.offAny(r)}}):t&&t.subscribe&&t.onValue?e.stream(function(e){return t.subscribe(function(t){t.hasValue()?e.emit(t.value()):t.isEnd()?e.end():t.isError()?e.error(t.error):console.error("Unknown type of Bacon event",t)})}):t&&t.subscribe&&t.lift?e.stream(function(e){var r=t.subscribe(function(t){e.emit(t)},function(t){e.error(t),e.end()},function(){e.end()});return function(){r.unsubscribe()}}):e.constant(t)}t.exports=n},{}],300:[function(e,t,r){"use strict";function n(){function e(){n.stopped=!0,t&&(t.emit(null),t.end())}var t=null,r=i.stream(function(r){t=r,n.stopped&&e()}),n=r.toProperty();return n.stopped=!1,n.destroy=e,n}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=e("kefir");t.exports=r.default,t.exports.default=r.default},{kefir:301}],301:[function(e,t,r){(function(e){!function(e,n){"object"==typeof r&&void 0!==t?n(r):"function"==typeof define&&define.amd?define(["exports"],n):n(e.Kefir=e.Kefir||{})}(this,function(t){"use strict";function r(e){var t=function(){};return t.prototype=e,new t}function n(e){var t=arguments.length,r=void 0,n=void 0;for(r=1;r<t;r++)for(n in arguments[r])e[n]=arguments[r][n];return e}function i(e,t){var i=arguments.length,o=void 0;for(e.prototype=r(t.prototype),e.prototype.constructor=e,o=2;o<i;o++)n(e.prototype,arguments[o]);return e}function o(e,t){var r=void 0,n=void 0,i=void 0,o=void 0;if(0===e.length)return t;if(0===t.length)return e;for(o=0,r=new Array(e.length+t.length),n=e.length,i=0;i<n;i++,o++)r[o]=e[i];for(n=t.length,i=0;i<n;i++,o++)r[o]=t[i];return r}function a(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)if(e[n]===t)return n;return-1}function s(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)if(t(e[n]))return n;return-1}function l(e){var t=e.length,r=new Array(t),n=void 0;for(n=0;n<t;n++)r[n]=e[n];return r}function u(e,t){var r=e.length,n=void 0,i=void 0,o=void 0;if(t>=0&&t<r){if(1===r)return[];for(n=new Array(r-1),i=0,o=0;i<r;i++)i!==t&&(n[o]=e[i],o++);return n}return e}function c(e,t){var r=e.length,n=new Array(r),i=void 0;for(i=0;i<r;i++)n[i]=t(e[i]);return n}function d(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)t(e[n])}function f(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)e[n]=t}function p(e,t){return-1!==a(e,t)}function h(e,t,r){var n=Math.min(r,e.length+1),i=e.length-n+1,o=new Array(n),a=void 0;for(a=i;a<n;a++)o[a-i]=e[a];return o[n-1]=t,o}function m(e,t,r){e===ut?t(r):e===r.type&&(e===st||e===lt?t(r.value):t())}function b(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function _(){this._dispatcher=new b,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function v(){_.call(this)}function g(){_.call(this),this._currentEvent=null}function y(){return ct}function w(e){function t(e,t){var r=this;v.call(this),this._wait=e,this._intervalId=null,this._$onTick=function(){return r._onTick()},this._init(t)}return i(t,v,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){v.prototype._clear.call(this),this._$onTick=null,this._free()}},e),t}function k(e,t){return new dt(e,{x:t})}function j(e,t){return new ft(e,{x:t})}function x(e,t){return 0===t.length?y():new pt(e,{xs:t})}function E(e,t){return new ht(e,{fn:t})}function S(e){function t(t){return e._emitValue(t),e._active}function r(t){return e._emitError(t),e._active}function n(){return e._emitEnd(),e._active}function i(t){return e._emit(t.type,t.value),e._active}return{value:t,error:r,end:n,event:i,emit:t,emitEvent:i}}function C(e,t){return new mt(e,{fn:t})}function I(e){v.call(this),this._fn=e,this._unsubscribe=null}function T(e){return new I(e)}function A(e){var t=!1;return T(function(r){t||(e(function(e){r.emit(e),r.end()}),t=!0)}).setName("fromCallback")}function D(e){var t=!1;return T(function(r){t||(e(function(e,t){e?r.error(e):r.emit(t),r.end()}),t=!0)}).setName("fromNodeCallback")}function M(e,t){switch(t){case 0:return function(){return e()};case 1:return function(t){return e(t[0])};case 2:return function(t){return e(t[0],t[1])};case 3:return function(t){return e(t[0],t[1],t[2])};case 4:return function(t){return e(t[0],t[1],t[2],t[3])};default:return function(t){return e.apply(null,t)}}}function R(e,t,r){var n=r?r.length:0;if(null==t)switch(n){case 0:return e();case 1:return e(r[0]);case 2:return e(r[0],r[1]);case 3:return e(r[0],r[1],r[2]);case 4:return e(r[0],r[1],r[2],r[3]);default:return e.apply(null,r)}else switch(n){case 0:return e.call(t);default:return e.apply(t,r)}}function L(e,t,r){return T(function(n){var i=r?function(){n.emit(R(r,this,arguments))}:function(e){n.emit(e)};return e(i),function(){return t(i)}}).setName("fromSubUnsub")}function O(e,t,r){for(var n=void 0,i=void 0,o=0;o<bt.length;o++)if("function"==typeof e[bt[o][0]]&&"function"==typeof e[bt[o][1]]){n=bt[o][0],i=bt[o][1];break}if(void 0===n)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return L(function(r){return e[n](t,r)},function(r){return e[i](t,r)},r).setName("fromEvents")}function P(e){this._currentEvent={type:"value",value:e,current:!0}}function V(e){return new P(e)}function N(e){this._currentEvent={type:"error",value:e,current:!0}}function B(e){return new N(e)}function q(e,t){return function(r,n){var i=this;e.call(this),this._source=r,this._name=r._name+"."+t,this._init(n),this._$handleAny=function(e){return i._handleAny(e)}}}function U(e){return{_init:function(){},_free:function(){},_handleValue:function(e){this._emitValue(e)},_handleError:function(e){this._emitError(e)},_handleEnd:function(){this._emitEnd()},_handleAny:function(e){switch(e.type){case st:return this._handleValue(e.value);case lt:return this._handleError(e.value);case at:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){e.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function F(e,t){var r=q(v,e);return i(r,v,U(v),t),r}function H(e,t){var r=q(g,e);return i(r,g,U(g),t),r}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t&&"function"!=typeof t)throw new Error("You should call toProperty() with a function or no arguments.");return new _t(e,{fn:t})}function W(e){return new vt(e)}function G(e){var t=!1;return z(T(function(r){if(!t){var n=function(e){r.emit(e),r.end()},i=function(e){r.error(e),r.end()},o=e.then(n,i);o&&"function"==typeof o.done&&o.done(),t=!0}}),null).setName("fromPromise")}function K(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}function $(e,t){return t={exports:{}},e(t,t.exports),t.exports}function J(e){var t=e[xt]?e[xt]():e;return T(function(e){var r=t.subscribe({error:function(t){e.error(t),e.end()},next:function(t){e.emit(t)},complete:function(){e.end()}});return r.unsubscribe?function(){r.unsubscribe()}:r}).setName("fromESObservable")}function Y(e){this._observable=e.takeErrors(1)}function Q(){return new Y(this)}function X(e,t,r){for(var n in e)e.hasOwnProperty(n)&&(t.push(n),r.push(e[n]))}function Z(e){for(var t=void 0,r=0;r<e.length;r++)void 0!==e[r]&&(void 0===t||t.index<e[r].index)&&(t=e[r]);return t.error}function ee(e,t,r){var n=this;v.call(this),this._activeCount=e.length,this._sources=o(e,t),this._combinator=r,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),f(this._latestValues,ot),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var i=0;i<this._sources.length;i++)!function(e){n._$handlers.push(function(t){return n._handleAny(e,t)})}(i)}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2];if(!Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");return r=r?M(r,e.length+t.length):function(e){return e},0===e.length?y():new ee(e,t,r)}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if("object"!=typeof t||Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");var n=[],i=[],o=[];X(e,n,i),X(t,n,o);var a=function(e){for(var t={},i=e.length-1;0<=i;i--)t[n[i]]=e[i];return r?r(t):t};return 0===i.length?y():new ee(i,o,a)}function ne(e,t,r){return"function"==typeof t&&(r=t,t=void 0),Array.isArray(e)?te(e,t,r):re(e,t,r)}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At;return new(e._ofSameType(It,Tt))(e,{fn:t})}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt;return new(e._ofSameType(Mt,Rt))(e,{fn:t})}function ae(e,t){return new(e._ofSameType(Pt,Vt))(e,{n:t})}function se(e,t){return new(e._ofSameType(Bt,qt))(e,{n:t})}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;return new(e._ofSameType(Ft,Ht))(e,{fn:t})}function ue(e){return new(e._ofSameType(Gt,Kt))(e)}function ce(e,t){return new(e._ofSameType(Jt,Yt))(e,{n:t})}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:er;return new(e._ofSameType(Xt,Zt))(e,{fn:t})}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ir;return new(e._ofSameType(rr,nr))(e,{fn:t})}function pe(e,t){return[e,t]}function he(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot;return new(e._ofSameType(ar,sr))(e,{fn:t||pe,seed:r})}
function me(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot;return new lr(e,{fn:t,seed:r})}function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dr;return new cr(e,{fn:t})}function _e(e,t){return new(e._ofSameType(hr,mr))(e,{wait:t})}function ve(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.leading,i=void 0===n||n,o=r.trailing,a=void 0===o||o;return new(e._ofSameType(vr,gr))(e,{wait:t,leading:i,trailing:a})}function ge(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.immediate,i=void 0!==n&&n;return new(e._ofSameType(wr,kr))(e,{wait:t,immediate:i})}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sr;return new(e._ofSameType(xr,Er))(e,{fn:t})}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ar;return new(e._ofSameType(Ir,Tr))(e,{fn:t})}function ke(e){return new(e._ofSameType(Mr,Rr))(e)}function je(e){return new(e._ofSameType(Or,Pr))(e)}function xe(e){return new(e._ofSameType(Nr,Br))(e)}function Ee(e,t){return new(e._ofSameType(Ur,Fr))(e,{fn:t})}function Se(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new(e._ofSameType(zr,Wr))(e,{min:r,max:t})}function Ce(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.flushOnEnd,i=void 0===n||n;return new(e._ofSameType(Kr,$r))(e,{fn:t||Jr,flushOnEnd:i})}function Ie(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.flushOnEnd,i=void 0===n||n;return new(e._ofSameType(Qr,Xr))(e,{count:t,flushOnEnd:i})}function Te(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.flushOnEnd,o=void 0===i||i;return new(e._ofSameType(en,tn))(e,{wait:t,count:r,flushOnEnd:o})}function Ae(e){return{"@@transducer/step":function(t,r){return e._emitValue(r),null},"@@transducer/result":function(){return e._emitEnd(),null}}}function De(e,t){return new(e._ofSameType(nn,on))(e,{transducer:t})}function Me(e,t){return new(e._ofSameType(sn,ln))(e,{fn:t})}function Re(e,t){var r=this;v.call(this),this._buffers=c(e,function(e){return un(e)?l(e):[]}),this._sources=c(e,function(e){return un(e)?y():e}),this._combinator=t?M(t,this._sources.length):function(e){return e},this._aliveCount=0,this._$handlers=[];for(var n=0;n<this._sources.length;n++)!function(e){r._$handlers.push(function(t){return r._handleAny(e,t)})}(n)}function Le(e,t){return 0===e.length?y():new Re(e,t)}function Oe(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.queueLim,n=void 0===r?0:r,i=t.concurLim,o=void 0===i?-1:i,a=t.drop,s=void 0===a?"new":a;v.call(this),this._queueLim=n<0?-1:n,this._concurLim=o<0?-1:o,this._drop=s,this._queue=[],this._curSources=[],this._$handleSubAny=function(t){return e._handleSubAny(t)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function Pe(e){Oe.call(this),this._addAll(e),this._initialised=!0}function Ve(e){return 0===e.length?y():new Pe(e)}function Ne(e){var t=this;v.call(this),this._generator=e,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(e){return t._handleAny(e)}}function Be(e){return dn(function(t){return e.length>t&&e[t]}).setName("concat")}function qe(){Oe.call(this)}function Ue(e,t,r){var n=this;Oe.call(this,r),this._source=e,this._fn=t,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(e){return n._handleMain(e)}}function Fe(e,t){Ue.call(this,e,t)}function He(e,t){return function(r,n,i){var o=this;e.call(this),this._primary=r,this._secondary=n,this._name=r._name+"."+t,this._lastSecondary=ot,this._$handleSecondaryAny=function(e){return o._handleSecondaryAny(e)},this._$handlePrimaryAny=function(e){return o._handlePrimaryAny(e)},this._init(i)}}function ze(e){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(e){this._emitValue(e)},_handlePrimaryError:function(e){this._emitError(e)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(e){this._lastSecondary=e},_handleSecondaryError:function(e){this._emitError(e)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(e){switch(e.type){case st:return this._handlePrimaryValue(e.value);case lt:return this._handlePrimaryError(e.value);case at:return this._handlePrimaryEnd(e.value)}},_handleSecondaryAny:function(e){switch(e.type){case st:return this._handleSecondaryValue(e.value);case lt:return this._handleSecondaryError(e.value);case at:this._handleSecondaryEnd(e.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){e.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function We(e,t){var r=He(v,e);return i(r,v,ze(v),t),r}function Ge(e,t){var r=He(g,e);return i(r,g,ze(g),t),r}function Ke(e,t){return new(e._ofSameType(pn,hn))(e,t)}function $e(e,t,r){return ne([t],[e],r?function(e,t){return r(t,e)}:mn).setName(e,"sampledBy")}function Je(e,t){return new(e._ofSameType(_n,vn))(e,t)}function Ye(e,t){return new(e._ofSameType(yn,wn))(e,t)}function Qe(e,t,r){return new(e._ofSameType(jn,xn))(e,t,r)}function Xe(e,t,r){return new(e._ofSameType(Sn,Cn))(e,t,r)}function Ze(e,t){var r=Ve([ie(e,Tn),ie(t,In)]);return r=fe(r),r=z(r,In),r.setName(e,"awaiting")}function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rn;return new(e._ofSameType(Dn,Mn))(e,{fn:t})}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn;return new(e._ofSameType(On,Pn))(e,{fn:t})}function rt(e){return new(e._ofSameType(Bn,qn))(e)}function nt(){Fn=!1}function it(e){if(Fn&&console&&"function"==typeof console.warn){console.warn(e,"\nHere is an Error object for you containing the call stack:",new Error)}}var ot=["<nothing>"],at="end",st="value",lt="error",ut="any";n(b.prototype,{add:function(e,t){return this._items=o(this._items,[{type:e,fn:t}]),this._items.length},remove:function(e,t){var r=s(this._items,function(r){return r.type===e&&r.fn===t});return 0!==this._inLoop&&-1!==r&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[r])),this._items=u(this._items,r),this._items.length},addSpy:function(e){return this._spies=o(this._spies,[e]),this._spies.length},removeSpy:function(e){return this._spies=u(this._spies,this._spies.indexOf(e)),this._spies.length},dispatch:function(e){this._inLoop++;for(var t=0,r=this._spies;null!==this._spies&&t<r.length;t++)r[t](e);for(var n=0,i=this._items;n<i.length&&null!==this._items;n++)null!==this._removedItems&&p(this._removedItems,i[n])||m(i[n].type,i[n].fn,e);0===--this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),n(_.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(e){this._active!==e&&(this._active=e,e?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(e,t){switch(e){case st:return this._emitValue(t);case lt:return this._emitError(t);case at:return this._emitEnd()}},_emitValue:function(e){this._alive&&this._dispatcher.dispatch({type:st,value:e})},_emitError:function(e){this._alive&&this._dispatcher.dispatch({type:lt,value:e})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:at}),this._clear())},_on:function(e,t){return this._alive?(this._dispatcher.add(e,t),this._setActive(!0)):m(e,t,{type:at}),this},_off:function(e,t){if(this._alive){0===this._dispatcher.remove(e,t)&&this._setActive(!1)}return this},onValue:function(e){return this._on(st,e)},onError:function(e){return this._on(lt,e)},onEnd:function(e){return this._on(at,e)},onAny:function(e){return this._on(ut,e)},offValue:function(e){return this._off(st,e)},offError:function(e){return this._off(lt,e)},offEnd:function(e){return this._off(at,e)},offAny:function(e){return this._off(ut,e)},observe:function(e,t,r){var n=this,i=!1,o=e&&"function"!=typeof e?e:{value:e,error:t,end:r},a=function(e){e.type===at&&(i=!0),e.type===st&&o.value?o.value(e.value):e.type===lt&&o.error?o.error(e.value):e.type===at&&o.end&&o.end(e.value)};return this.onAny(a),{unsubscribe:function(){i||(n.offAny(a),i=!0)},get closed(){return i}}},_ofSameType:function(e,t){return e.prototype.getType()===this.getType()?e:t},setName:function(e,t){return this._name=t?e._name+"."+t:e,this},log:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=void 0,r=function(r){var n="<"+r.type+(t?":current":"")+">";r.type===at?console.log(e,n):console.log(e,n,r.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:e,handler:r})),t=!0,this.onAny(r),t=!1,this},offLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var t=s(this._logHandlers,function(t){return t.name===e});-1!==t&&(this.offAny(this._logHandlers[t].handler),this._logHandlers.splice(t,1))}return this},spy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=function(t){var r="<"+t.type+">";t.type===at?console.log(e,r):console.log(e,r,t.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:e,handler:t}),this._dispatcher.addSpy(t)),this},offSpy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var t=s(this._spyHandlers,function(t){return t.name===e});-1!==t&&(this._dispatcher.removeSpy(this._spyHandlers[t].handler),this._spyHandlers.splice(t,1))}return this}}),_.prototype.toString=function(){return"["+this._name+"]"},i(v,_,{_name:"stream",getType:function(){return"stream"}}),i(g,_,{_name:"property",_emitValue:function(e){this._alive&&(this._currentEvent={type:st,value:e},this._activating||this._dispatcher.dispatch({type:st,value:e}))},_emitError:function(e){this._alive&&(this._currentEvent={type:lt,value:e},this._activating||this._dispatcher.dispatch({type:lt,value:e}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:at}),this._clear())},_on:function(e,t){return this._alive&&(this._dispatcher.add(e,t),this._setActive(!0)),null!==this._currentEvent&&m(e,t,this._currentEvent),this._alive||m(e,t,{type:at}),this},getType:function(){return"property"}});var ct=new v;ct._emitEnd(),ct._name="never";var dt=w({_name:"later",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}}),ft=w({_name:"interval",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}}),pt=w({_name:"sequentially",_init:function(e){var t=e.xs;this._xs=l(t)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}}),ht=w({_name:"fromPoll",_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_onTick:function(){var e=this._fn;this._emitValue(e())}}),mt=w({_name:"withInterval",_init:function(e){var t=e.fn;this._fn=t,this._emitter=S(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});i(I,v,{_name:"stream",_onActivation:function(){var e=this._fn,t=e(S(this));this._unsubscribe="function"==typeof t?t:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){v.prototype._clear.call(this),this._fn=null}});var bt=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];i(P,g,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),i(N,g,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var _t=H("toProperty",{_init:function(e){var t=e.fn;this._getInitialCurrent=t},_onActivation:function(){if(null!==this._getInitialCurrent){var e=this._getInitialCurrent;this._emitValue(e())}this._source.onAny(this._$handleAny)}}),vt=F("changes",{_handleValue:function(e){this._activating||this._emitValue(e)},_handleError:function(e){this._activating||this._emitError(e)}}),gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K(),r=null;return new t(function(t,n){e.onAny(function(e){e.type===at&&null!==r?((r.type===st?t:n)(r.value),r=null):r=e})})},yt="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},wt=$(function(e,t){function r(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),kt=$(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(e){return e&&e.__esModule?e:{default:e}}(wt);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==yt?yt:e;var i=(0,n.default)(r);t.default=i}),jt=kt,xt=jt.default?jt.default:jt;n(Y.prototype,{subscribe:function(e,t,r){var n=this,i="function"==typeof e?{next:e,error:t,complete:r}:e,o=function(e){e.type===at&&(a=!0),e.type===st&&i.next?i.next(e.value):e.type===lt&&i.error?i.error(e.value):e.type===at&&i.complete&&i.complete(e.value)};this._observable.onAny(o);var a=!1;return{unsubscribe:function(){a=!0,n._observable.offAny(o)},get closed(){return a}}}}),Y.prototype[xt]=function(){return this},i(ee,v,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var e=this._activeCount;e<this._sources.length;e++)this._sources[e].onAny(this._$handlers[e]);for(var t=0;t<this._activeCount;t++)this._sources[t].onAny(this._$handlers[t]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var e=this._sources.length,t=void 0;for(t=0;t<e;t++)this._sources[t].offAny(this._$handlers[t])},_emitIfFull:function(){for(var e=!0,t=!1,r=this._latestValues.length,n=new Array(r),i=new Array(r),o=0;o<r;o++)n[o]=this._latestValues[o],i[o]=this._latestErrors[o],n[o]===ot&&(e=!1),void 0!==i[o]&&(t=!0);if(e){var a=this._combinator;this._emitValue(a(n))}t&&this._emitError(Z(i))},_handleAny:function(e,t){t.type===st||t.type===lt?(t.type===st&&(this._latestValues[e]=t.value,this._latestErrors[e]=void 0),t.type===lt&&(this._latestValues[e]=ot,this._latestErrors[e]={index:this._latestErrorIndex++,error:t.value}),e<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):e<this._activeCount&&0===--this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd())},_clear:function(){v.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var Et={empty:function(){return y()},concat:function(e,t){return e.merge(t)},of:function(e){return V(e)},map:function(e,t){return t.map(e)},bimap:function(e,t,r){return r.mapErrors(e).map(t)},ap:function(e,t){return ne([e,t],function(e,t){return e(t)})},chain:function(e,t){return t.flatMap(e)}},St=Object.freeze({Observable:Et}),Ct={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;this._emitValue(t(e))}},It=F("map",Ct),Tt=H("map",Ct),At=function(e){return e},Dt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)&&this._emitValue(e)}},Mt=F("filter",Dt),Rt=H("filter",Dt),Lt=function(e){return e},Ot={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleValue:function(e){0!==this._n&&(this._n--,this._emitValue(e),0===this._n&&this._emitEnd())}},Pt=F("take",Ot),Vt=H("take",Ot),Nt={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleError:function(e){0!==this._n&&(this._n--,this._emitError(e),0===this._n&&this._emitEnd())}},Bt=F("takeErrors",Nt),qt=H("takeErrors",Nt),Ut={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)?this._emitValue(e):this._emitEnd()}},Ft=F("takeWhile",Ut),Ht=H("takeWhile",Ut),zt=function(e){return e},Wt={_init:function(){this._lastValue=ot},_free:function(){this._lastValue=null},_handleValue:function(e){this._lastValue=e},_handleEnd:function(){this._lastValue!==ot&&this._emitValue(this._lastValue),this._emitEnd()}},Gt=F("last",Wt),Kt=H("last",Wt),$t={_init:function(e){var t=e.n;this._n=Math.max(0,t)},_handleValue:function(e){0===this._n?this._emitValue(e):this._n--}},Jt=F("skip",$t),Yt=H("skip",$t),Qt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;null===this._fn||t(e)||(this._fn=null),null===this._fn&&this._emitValue(e)}},Xt=F("skipWhile",Qt),Zt=H("skipWhile",Qt),er=function(e){return e},tr={_init:function(e){var t=e.fn;this._fn=t,this._prev=ot},_free:function(){this._fn=null,this._prev=null},_handleValue:function(e){var t=this._fn;this._prev!==ot&&t(this._prev,e)||(this._prev=e,this._emitValue(e))}},rr=F("skipDuplicates",tr),nr=H("skipDuplicates",tr),ir=function(e,t){return e===t},or={_init:function(e){var t=e.fn,r=e.seed;this._fn=t,this._prev=r},_free:function(){this._prev=null,this._fn=null},_handleValue:function(e){if(this._prev!==ot){var t=this._fn;this._emitValue(t(this._prev,e))}this._prev=e}},ar=F("diff",or),sr=H("diff",or),lr=H("scan",{_init:function(e){var t=e.fn,r=e.seed;this._fn=t,this._seed=r,r!==ot&&this._emitValue(r)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(e){var t=this._fn;null===this._currentEvent||this._currentEvent.type===lt?this._emitValue(this._seed===ot?e:t(this._seed,e)):this._emitValue(t(this._currentEvent.value,e))}}),ur={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){for(var t=this._fn,r=t(e),n=0;n<r.length;n++)this._emitValue(r[n])}},cr=F("flatten",ur),dr=function(e){return e},fr={},pr={_init:function(e){var t=this,r=e.wait;this._wait=Math.max(0,r),this._buff=[],this._$shiftBuff=function(){var e=t._buff.shift();e===fr?t._emitEnd():t._emitValue(e)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._buff.push(e),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(fr),setTimeout(this._$shiftBuff,this._wait))}},hr=F("delay",pr),mr=H("delay",pr),br=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},_r={_init:function(e){var t=this,r=e.wait,n=e.leading,i=e.trailing;this._wait=Math.max(0,r),this._leading=n,this._trailing=i,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return t._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(e){if(this._activating)this._emitValue(e);else{var t=br();0!==this._lastCallTime||this._leading||(this._lastCallTime=t);var r=this._wait-(t-this._lastCallTime);r<=0?(this._cancelTrailing(),this._lastCallTime=t,this._emitValue(e)):this._trailing&&(this._cancelTrailing(),this._trailingValue=e,this._timeoutId=setTimeout(this._$trailingCall,r))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?br():0,this._endLater&&this._emitEnd()}},vr=F("throttle",_r),gr=H("throttle",_r),yr={_init:function(e){var t=this,r=e.wait,n=e.immediate;this._wait=Math.max(0,r),this._immediate=n,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return t._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._lastAttempt=br(),this._immediate&&!this._timeoutId&&this._emitValue(e),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=e))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var e=br()-this._lastAttempt;e<this._wait&&e>=0?this._timeoutId=setTimeout(this._$later,this._wait-e):(this._timeoutId=null,this._immediate||(this._emitValue(this._laterValue),this._laterValue=null),this._endLater&&this._emitEnd())}},wr=F("debounce",yr),kr=H("debounce",yr),jr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn;this._emitError(t(e))}},xr=F("mapErrors",jr),Er=H("mapErrors",jr),Sr=function(e){return e},Cr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){(0,this._fn)(e)&&this._emitError(e)}},Ir=F("filterErrors",Cr),Tr=H("filterErrors",Cr),Ar=function(e){return e},Dr={_handleValue:function(){}},Mr=F("ignoreValues",Dr),Rr=H("ignoreValues",Dr),Lr={_handleError:function(){}},Or=F("ignoreErrors",Lr),Pr=H("ignoreErrors",Lr),Vr={_handleEnd:function(){}},Nr=F("ignoreEnd",Vr),Br=H("ignoreEnd",Vr),qr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleEnd:function(){var e=this._fn;this._emitValue(e()),this._emitEnd()}},Ur=F("beforeEnd",qr),Fr=H("beforeEnd",qr),Hr={_init:function(e){var t=e.min,r=e.max;this._max=r,this._min=t,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(e){this._buff=h(this._buff,e,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},zr=F("slidingWindow",Hr),Wr=H("slidingWindow",Hr),Gr={_init:function(e){var t=e.fn,r=e.flushOnEnd;this._fn=t,this._flushOnEnd=r,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),(0,this._fn)(e)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Kr=F("bufferWhile",Gr),$r=H("bufferWhile",Gr),Jr=function(e){return e},Yr={_init:function(e){var t=e.count,r=e.flushOnEnd;this._count=t,this._flushOnEnd=r,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Qr=F("bufferWithCount",Yr),Xr=H("bufferWithCount",Yr),Zr={_init:function(e){var t=this,r=e.wait,n=e.count,i=e.flushOnEnd;this._wait=r,this._count=n,this._flushOnEnd=i,this._intervalId=null,this._$onTick=function(){return t._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},en=F("bufferWithTimeOrCount",Zr),tn=H("bufferWithTimeOrCount",Zr),rn={_init:function(e){var t=e.transducer;this._xform=t(Ae(this))},_free:function(){this._xform=null},_handleValue:function(e){null!==this._xform["@@transducer/step"](null,e)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},nn=F("transduce",rn),on=H("transduce",rn),an={_init:function(e){var t=e.fn;this._handler=t,this._emitter=S(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(e){this._handler(this._emitter,e)}},sn=F("withHandler",an),ln=H("withHandler",an),un=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};i(Re,v,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var e=this._sources.length;this._aliveCount=e;for(var t=0;t<e&&this._active;t++)this._sources[t].onAny(this._$handlers[t])},_onDeactivation:function(){for(var e=0;e<this._sources.length;e++)this._sources[e].offAny(this._$handlers[e])},_emit:function(){for(var e=new Array(this._buffers.length),t=0;t<this._buffers.length;t++)e[t]=this._buffers[t].shift();var r=this._combinator;this._emitValue(r(e))},_isFull:function(){for(var e=0;e<this._buffers.length;e++)if(0===this._buffers[e].length)return!1;return!0},_handleAny:function(e,t){t.type===st&&(this._buffers[e].push(t.value),this._isFull()&&this._emit()),t.type===lt&&this._emitError(t.value),t.type===at&&0===--this._aliveCount&&this._emitEnd()},_clear:function(){v.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var cn=function(e){return e};i(Oe,v,{_name:"abstractPool",_add:function(e,t){t=t||cn,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(t(e)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(t(e)):"old"===this._drop&&(this._removeOldest(),this._add(e,t))},_addAll:function(e){var t=this;d(e,function(e){return t._add(e)})},_remove:function(e){-1===this._removeCur(e)&&this._removeQueue(e)},_addToQueue:function(e){this._queue=o(this._queue,[e])},_addToCur:function(e){if(this._active){if(!e._alive)return e._currentEvent&&this._emit(e._currentEvent.type,e._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));this._currentlyAdding=e,e.onAny(this._$handleSubAny),this._currentlyAdding=null,e._alive&&(this._curSources=o(this._curSources,[e]),this._active&&this._subToEnd(e))}else this._curSources=o(this._curSources,[e])},_subToEnd:function(e){var t=this,r=function(){return t._removeCur(e)};this._$endHandlers.push({obs:e,handler:r}),e.onEnd(r)},_subscribe:function(e){e.onAny(this._$handleSubAny),this._active&&this._subToEnd(e)},_unsubscribe:function(e){e.offAny(this._$handleSubAny);var t=s(this._$endHandlers,function(t){return t.obs===e});-1!==t&&(e.offEnd(this._$endHandlers[t].handler),this._$endHandlers.splice(t,1))},_handleSubAny:function(e){e.type===st?this._emitValue(e.value):e.type===lt&&this._emitError(e.value)},_removeQueue:function(e){var t=a(this._queue,e);return this._queue=u(this._queue,t),t},_removeCur:function(e){this._active&&this._unsubscribe(e);var t=a(this._curSources,e);return this._curSources=u(this._curSources,t),-1!==t&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),t},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=l(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var e=0,t=this._curSources;e<t.length&&this._active;e++)this._subscribe(t[e])},_onDeactivation:function(){for(var e=0,t=this._curSources;e<t.length;e++)this._unsubscribe(t[e]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){v.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),i(Pe,Oe,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),i(Ne,v,{_name:"repeat",_handleAny:function(e){e.type===at?(this._source=null,this._getSource()):this._emit(e.type,e.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var e=this._generator;null===this._source&&this._alive&&this._active;)this._source=e(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){v.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var dn=function(e){return new Ne(e)};i(qe,Oe,{_name:"pool",plug:function(e){return this._add(e),this},unplug:function(e){return this._remove(e),this}}),i(Ue,Oe,{_onActivation:function(){Oe.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){Oe.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(e){if(e.type===st){this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1}e.type===lt&&this._emitError(e.value),e.type===at&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){Oe.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),i(Fe,Ue,{_handleMain:function(e){if(e.type===lt){this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1}e.type===st&&this._emitValue(e.value),e.type===at&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var fn={_handlePrimaryValue:function(e){this._lastSecondary!==ot&&this._lastSecondary&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary!==ot&&this._lastSecondary||this._emitEnd()}},pn=We("filterBy",fn),hn=Ge("filterBy",fn),mn=function(e,t){return t},bn={_handlePrimaryValue:function(e){this._lastSecondary!==ot&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary===ot&&this._emitEnd()}},_n=We("skipUntilBy",bn),vn=Ge("skipUntilBy",bn),gn={_handleSecondaryValue:function(){this._emitEnd()}},yn=We("takeUntilBy",gn),wn=Ge("takeUntilBy",gn),kn={_init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flushOnEnd,r=void 0===t||t;this._buff=[],this._flushOnEnd=r},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(e){this._buff.push(e)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},jn=We("bufferBy",kn),xn=Ge("bufferBy",kn),En={_init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flushOnEnd,r=void 0===t||t,n=e.flushOnChange,i=void 0!==n&&n;this._buff=[],this._flushOnEnd=r,this._flushOnChange=i},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(e){this._buff.push(e),this._lastSecondary===ot||this._lastSecondary||this._flush()},
_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==ot&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(e){this._flushOnChange&&!e&&this._flush(),this._lastSecondary=e}},Sn=We("bufferWhileBy",En),Cn=Ge("bufferWhileBy",En),In=function(){return!1},Tn=function(){return!0},An={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn,r=t(e);r.convert?this._emitError(r.error):this._emitValue(e)}},Dn=F("valuesToErrors",An),Mn=H("valuesToErrors",An),Rn=function(e){return{convert:!0,error:e}},Ln={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn,r=t(e);r.convert?this._emitValue(r.value):this._emitError(e)}},On=F("errorsToValues",Ln),Pn=H("errorsToValues",Ln),Vn=function(e){return{convert:!0,value:e}},Nn={_handleError:function(e){this._emitError(e),this._emitEnd()}},Bn=F("endOnError",Nn),qn=H("endOnError",Nn);_.prototype.toProperty=function(e){return z(this,e)},_.prototype.changes=function(){return W(this)},_.prototype.toPromise=function(e){return gt(this,e)},_.prototype.toESObservable=Q,_.prototype[xt]=Q,_.prototype.map=function(e){return ie(this,e)},_.prototype.filter=function(e){return oe(this,e)},_.prototype.take=function(e){return ae(this,e)},_.prototype.takeErrors=function(e){return se(this,e)},_.prototype.takeWhile=function(e){return le(this,e)},_.prototype.last=function(){return ue(this)},_.prototype.skip=function(e){return ce(this,e)},_.prototype.skipWhile=function(e){return de(this,e)},_.prototype.skipDuplicates=function(e){return fe(this,e)},_.prototype.diff=function(e,t){return he(this,e,t)},_.prototype.scan=function(e,t){return me(this,e,t)},_.prototype.flatten=function(e){return be(this,e)},_.prototype.delay=function(e){return _e(this,e)},_.prototype.throttle=function(e,t){return ve(this,e,t)},_.prototype.debounce=function(e,t){return ge(this,e,t)},_.prototype.mapErrors=function(e){return ye(this,e)},_.prototype.filterErrors=function(e){return we(this,e)},_.prototype.ignoreValues=function(){return ke(this)},_.prototype.ignoreErrors=function(){return je(this)},_.prototype.ignoreEnd=function(){return xe(this)},_.prototype.beforeEnd=function(e){return Ee(this,e)},_.prototype.slidingWindow=function(e,t){return Se(this,e,t)},_.prototype.bufferWhile=function(e,t){return Ce(this,e,t)},_.prototype.bufferWithCount=function(e,t){return Ie(this,e,t)},_.prototype.bufferWithTimeOrCount=function(e,t,r){return Te(this,e,t,r)},_.prototype.transduce=function(e){return De(this,e)},_.prototype.withHandler=function(e){return Me(this,e)},_.prototype.thru=function(e){return e(this)},_.prototype.combine=function(e,t){return ne([this,e],t)},_.prototype.zip=function(e,t){return Le([this,e],t)},_.prototype.merge=function(e){return Ve([this,e])},_.prototype.concat=function(e){return Be([this,e])};var Un=function(){return new qe};_.prototype.flatMap=function(e){return new Ue(this,e).setName(this,"flatMap")},_.prototype.flatMapLatest=function(e){return new Ue(this,e,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},_.prototype.flatMapFirst=function(e){return new Ue(this,e,{concurLim:1}).setName(this,"flatMapFirst")},_.prototype.flatMapConcat=function(e){return new Ue(this,e,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},_.prototype.flatMapConcurLimit=function(e,t){return new Ue(this,e,{queueLim:-1,concurLim:t}).setName(this,"flatMapConcurLimit")},_.prototype.flatMapErrors=function(e){return new Fe(this,e).setName(this,"flatMapErrors")},_.prototype.filterBy=function(e){return Ke(this,e)},_.prototype.sampledBy=function(e,t){return $e(this,e,t)},_.prototype.skipUntilBy=function(e){return Je(this,e)},_.prototype.takeUntilBy=function(e){return Ye(this,e)},_.prototype.bufferBy=function(e,t){return Qe(this,e,t)},_.prototype.bufferWhileBy=function(e,t){return Xe(this,e,t)};var Fn=!0;_.prototype.awaiting=function(e){return it("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),Ze(this,e)},_.prototype.valuesToErrors=function(e){return it("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),et(this,e)},_.prototype.errorsToValues=function(e){return it("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),tt(this,e)},_.prototype.endOnError=function(){return it("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),rt(this)};var Hn={Observable:_,Stream:v,Property:g,never:y,later:k,interval:j,sequentially:x,fromPoll:E,withInterval:C,fromCallback:A,fromNodeCallback:D,fromEvents:O,stream:T,constant:V,constantError:B,fromPromise:G,fromESObservable:J,combine:ne,zip:Le,merge:Ve,concat:Be,Pool:qe,pool:Un,repeat:dn,staticLand:St};Hn.Kefir=Hn,t.dissableDeprecationWarnings=nt,t.Kefir=Hn,t.Observable=_,t.Stream=v,t.Property=g,t.never=y,t.later=k,t.interval=j,t.sequentially=x,t.fromPoll=E,t.withInterval=C,t.fromCallback=A,t.fromNodeCallback=D,t.fromEvents=O,t.stream=T,t.constant=V,t.constantError=B,t.fromPromise=G,t.fromESObservable=J,t.combine=ne,t.zip=Le,t.merge=Ve,t.concat=Be,t.Pool=qe,t.pool=Un,t.repeat=dn,t.staticLand=St,t.default=Hn,Object.defineProperty(t,"__esModule",{value:!0})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],302:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("asap")),l=function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"_queue",[]),(0,a.default)(this,"_isFlushing",!1),(0,a.default)(this,"_index",0)}return(0,o.default)(e,[{key:"schedule",value:function(e){var t=this;this._queue.push(function(){try{e()}catch(e){setTimeout(function(){throw e},0)}}),1===this._queue.length&&(0,s.default)(function(){t.flush()})}},{key:"flush",value:function(){if(!this._isFlushing){this._isFlushing=!0;for(var e=this._queue;this._index<e.length;){var t=this._index;if(this._index+=1,e[t].call(),this._index>1024){for(var r=0,n=e.length-this._index;r<n;r++)e[r]=e[r+this._index];e.length-=this._index,this._index=0}}e.length=0,this._index=0,this._isFlushing=!1}}}]),e}();r.default=l,t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/interopRequireDefault":67,asap:77}],303:[function(e,t,r){"use strict";function n(e,t){return new o.default({scheduler:e.getScheduler(),read:function(){var r=new Set;return e.values().forEach(function(e){t(e)&&r.add(e)}),r},listen:function(r,n){var i=new Set;return e.subscribe({start:function(){var n=new Set;e.values().forEach(function(e){t(e)&&(i.add(e),n.add(e))}),r(n)},next:function(e){e.forEach(function(e){"add"===e.type?t(e.value)&&(i.add(e.value),n.add(e.value)):"remove"===e.type&&i.has(e.value)&&(i.delete(e.value),n.remove(e.value))})},error:function(e){n.error(e)},complete:function(){n.end()}})}})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("."));t.exports=r.default,t.exports.default=r.default},{".":306,"@babel/runtime/helpers/interopRequireDefault":67}],304:[function(e,t,r){"use strict";function n(e,t){var r=!1;return new o.default({scheduler:e.getScheduler(),read:function(){if(r)throw new Error("reading inactive recursively-flatMapped stream is not supported");r=!0;var n=new Set;return e.values().forEach(function(e){t(e).values().forEach(function(e){n.add(e)})}),r=!1,n},listen:function(r,n){function i(e){e.isEnded()?e.values().forEach(function(e){n.add(e)}):e.subscribe({start:function(t){s.set(e,t),e.values().forEach(function(e){n.add(e)})},next:function(e){e.forEach(function(e){"add"===e.type?n.add(e.value):"remove"===e.type&&n.remove(e.value)})},error:function(e){n.error(e)},complete:function(){s.delete(e),o&&0===s.size&&n.end()}})}var o=!1,a=!1,s=new Map;r(new Set);var l=new Map,u=e.subscribe({start:function(){e.values().forEach(function(e){var r=t(e);l.set(e,r),i(r)}),a=!0},next:function(e){e.forEach(function(e){if("add"===e.type){var r=t(e.value);l.set(e.value,r),i(r)}else if("remove"===e.type){var o=l.get(e.value);if(!o)throw new Error("removed value not in liveset");o.values().forEach(function(e){n.remove(e)}),l.delete(e.value);var a=s.get(o);a&&(a.unsubscribe(),s.delete(o))}})},error:function(e){n.error(e)},complete:function(){o=!0,a&&0===s.size&&n.end()}});return{unsubscribe:function(){u.unsubscribe(),s.forEach(function(e){e.unsubscribe()}),l.clear(),s.clear()},pullChanges:function(){u.pullChanges(),s.forEach(function(e){e.pullChanges()})}}}})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("."));t.exports=r.default,t.exports.default=r.default},{".":306,"@babel/runtime/helpers/interopRequireDefault":67}],305:[function(e,t,r){"use strict";function n(e,t){var r=!1;return new o.default({scheduler:e.getScheduler(),read:function(){if(r)throw new Error("reading inactive recursively-flatMapped stream is not supported");r=!0;var n=new Set;return e.values().forEach(function(e){t(e).values().forEach(function(e){n.add(e)})}),r=!1,n},listen:function(r,n){function i(e){e.isEnded()?e.values().forEach(function(e){n.add(e)}):e.subscribe({start:function(t){l.set(e,t),e.values().forEach(function(e){n.add(e)})},next:function(e){s=!0,e.forEach(function(e){"add"===e.type?n.add(e.value):"remove"===e.type&&n.remove(e.value)})},error:function(e){n.error(e)},complete:function(){l.delete(e),o&&0===l.size&&n.end()}})}var o=!1,a=!1,s=!1,l=new Map;r(new Set);var u=new Map,c=e.subscribe({start:function(){e.values().forEach(function(e){var r=t(e);u.set(e,r),i(r)}),a=!0},next:function(e){s=!0,e.forEach(function(e){if("add"===e.type){var r=t(e.value);u.set(e.value,r),i(r)}else if("remove"===e.type){var o=u.get(e.value);if(!o)throw new Error("removed value not in liveset");o.values().forEach(function(e){n.remove(e)}),u.delete(e.value);var a=l.get(o);a&&(a.unsubscribe(),l.delete(o))}})},error:function(e){n.error(e)},complete:function(){o=!0,a&&0===l.size&&n.end()}}),d=!1;return{unsubscribe:function(){c.unsubscribe(),l.forEach(function(e){e.unsubscribe()}),u.clear(),l.clear()},pullChanges:function(){if(!d){d=!0;do{s=!1,c.pullChanges(),l.forEach(function(e){e.pullChanges()})}while(s);d=!1}}}}})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("."));t.exports=r.default,t.exports.default=r.default},{".":306,"@babel/runtime/helpers/interopRequireDefault":67}],306:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("./Scheduler")),l=n(e("symbol-observable")),u=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_init",void 0),(0,a.default)(this,"_scheduler",void 0),(0,a.default)(this,"_values",null),(0,a.default)(this,"_mutableValues",!1),(0,a.default)(this,"_active",null),(0,a.default)(this,"_inSubscriptionStart",!1),(0,a.default)(this,"_ended",!1),(0,a.default)(this,"_endedWithError",!1),(0,a.default)(this,"_error",null),(0,a.default)(this,"_queuedCall",!1),(0,a.default)(this,"_changeQueue",[]),(0,a.default)(this,"_observers",[]),this._init=t,this._scheduler=t.scheduler||e.defaultScheduler}return(0,o.default)(e,[{key:"_queueChange",value:function(e){var t=this;e&&this._changeQueue.push(e),this._queuedCall||(this._queuedCall=!0,this._scheduler.schedule(function(){t._queuedCall=!1;var e=t._changeQueue;t._changeQueue=[];var r,n=t._ended;n?(r=t._observers,t._observers=[]):r=t._observers.slice(),r.forEach(function(r){var i=r.observer,o=r.ignore,a=i.next;if(a)if(0===o)a.call(i,e);else{r.ignore=0;var s=e.slice(o);s.length&&a.call(i,s)}n&&(t._endedWithError?i.error&&i.error(t._error):i.complete&&i.complete())})}))}},{key:"_deactivate",value:function(){if(!this._active)throw new Error("already inactive");var e=this._active.listenHandler;this._active=null,e&&e.unsubscribe()}},{key:"values",value:function(){if(this._values){if(this._active&&!this._inSubscriptionStart){var e=this._active.listenHandler;e.pullChanges&&e.pullChanges()}return this._mutableValues&&(this._mutableValues=!1,this._values),this._values}if(this._active)throw new Error("tried to call values() on liveset during subscription before setValues was called");var t=this._init.read();return t}},{key:"isEnded",value:function(){return this._ended}},{key:"getScheduler",value:function(){return this._scheduler}},{key:"subscribe",value:function(e,t,r){var n,i=this,o=this;if(n="function"==typeof e?{next:e,error:t,complete:r}:e,this._ended){var a={closed:!1,unsubscribe:function(){a.closed=!0},pullChanges:function(){}};return n.start&&n.start(a),a.closed||(this._endedWithError?n.error&&n.error(this._error):n.complete&&n.complete()),a.closed=!0,a}var s={observer:n,ignore:this._changeQueue.length},l=!0,u=!1,c={get closed(){return!l&&o._observers.indexOf(s)<0},unsubscribe:function(){if(l)return void(u=!0);var e=i._observers.indexOf(s);e>=0&&(i._observers.splice(e,1),i._ended||0!==i._observers.length||(i._values=null,i._deactivate()))},pullChanges:function(){i._active&&i._active.listenHandler&&i._active.listenHandler.pullChanges&&i._active.listenHandler.pullChanges();var e=i._changeQueue.length,t=n.next;if(0!==e&&t){var r=i._changeQueue.slice(s.ignore);0!==r.length&&(s.ignore=e,t.call(n,r))}}};if(!this._active){var d={get closed(){return!o._active||o._active.controller!==this},add:function(e){var t=i._values;if(!t)throw new Error("setValue must be called before controller is used");i._ended||t.has(e)||(i._mutableValues||(i._values=t=new Set(t),i._mutableValues=!0),t.add(e),i._queueChange({type:"add",value:e}))},remove:function(e){var t=i._values;if(!t)throw new Error("setValue must be called before controller is used");!i._ended&&t.has(e)&&(i._mutableValues||(i._values=t=new Set(t),i._mutableValues=!0),t.delete(e),i._queueChange({type:"remove",value:e}))},error:function(e){i._ended||(i._ended=!0,i._endedWithError=!0,i._error=e,i._queueChange(),i._deactivate())},end:function(){i._ended||(i._ended=!0,i._queueChange(),i._deactivate())}},f=this._active={controller:d,listenHandler:{unsubscribe:function(){}}},p=function(){throw new Error("setValues must be called once during listen")},h=function(e){h=p,i._values=e,i._mutableValues=!1},m=this._init.listen(function(e){return h(e)},d);if(this._values||p(),"function"==typeof m)f.listenHandler={unsubscribe:m};else if(null!=m&&"function"==typeof m.unsubscribe)f.listenHandler=m;else if(null!=m)throw new TypeError("listen must return object with unsubscribe method, a function, or null");d.closed&&(this._active=f,this._deactivate())}return n.start&&(this._inSubscriptionStart=!0,n.start(c),this._inSubscriptionStart=!1),l=!1,s.ignore=this._changeQueue.length,u||this._observers.push(s),c}}],[{key:"active",value:function(t,r){var n,i=t||new Set,o=new e({scheduler:r?r.scheduler:void 0,read:function(){return i},listen:function(e,t){e(i),n=t}});return o.subscribe({}),{liveSet:o,controller:n}}},{key:"constant",value:function(t,r){var n=function(){throw new Error("Should not happen")},i=new e({scheduler:r?r.scheduler:void 0,read:n,listen:n});return i._ended=!0,i._values=t,i._mutableValues=!1,i}}]),e}();r.default=u,(0,a.default)(u,"defaultScheduler",new s.default),u.prototype[l.default]=function(){return this},t.exports=r.default,t.exports.default=r.default},{"./Scheduler":302,"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/interopRequireDefault":67,"symbol-observable":309}],307:[function(e,t,r){"use strict";function n(e,t){return new o.default({scheduler:e.getScheduler(),read:function(){throw new Error("mapWithRemoval liveset may not be read while inactive")},listen:function(r,n){var i=new Map,o=e.subscribe({start:function(){var n=new Set;e.values().forEach(function(e){var r,o=new Promise(function(e){r=e}),a=t(e,o);i.set(e,{newValue:a,resolve:r}),n.add(a)}),r(n)},next:function(e){e.forEach(function(e){if("add"===e.type){var r,o=new Promise(function(e){r=e}),a=t(e.value,o);i.set(e.value,{newValue:a,resolve:r}),n.add(a)}else if("remove"===e.type){var s=i.get(e.value);if(!s)throw new Error("removed item not in liveset");var l=s.newValue,u=s.resolve;u(),i.delete(e.value),n.remove(l)}})},error:function(e){n.error(e)},complete:function(){n.end()}});return{unsubscribe:function(){o.unsubscribe(),i.forEach(function(e){(0,e.resolve)()})},pullChanges:function(){o.pullChanges()}}}})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("."));t.exports=r.default,t.exports.default=r.default},{".":306,"@babel/runtime/helpers/interopRequireDefault":67}],308:[function(e,t,r){"use strict";function n(e){return new o.default({scheduler:e[0]?e[0].getScheduler():void 0,read:function(){var t=new Set;return e.forEach(function(e){e.values().forEach(function(e){t.add(e)})}),t},listen:function(t,r){var n=new Set,i=new Set,o=!1;return e.forEach(function(e){var t;e.subscribe({start:function(r){t=r,i.add(t),e.values().forEach(function(e){n.add(e)})},next:function(e){e.forEach(function(e){"add"===e.type?r.add(e.value):"remove"===e.type&&r.remove(e.value)})},error:function(e){r.error(e)},complete:function(){i.delete(t),o&&0===i.size&&r.end()}})}),t(n),o=!0,0===i.size&&r.end(),{unsubscribe:function(){i.forEach(function(e){e.unsubscribe()})},pullChanges:function(){i.forEach(function(e){e.pullChanges()})}}}})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("."));t.exports=r.default,t.exports.default=r.default},{".":306,"@babel/runtime/helpers/interopRequireDefault":67}],309:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i,o=e("./ponyfill.js"),a=function(e){return e&&e.__esModule?e:{default:e}}(o);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==t?t:Function("return this")();var s=(0,a.default)(i);r.default=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":310}],310:[function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],311:[function(e,t,r){"use strict";function n(e){return new o.default(function(t){function r(e){var r,n=new Promise(function(e){r=e});i.set(e,r);var o={value:e,removal:n};t.next(o)}function n(e){var t=i.get(e);if(!t)throw new Error("Resolver not found in map for value");i.delete(e),t()}var i=new Map,o=e.subscribe({start:function(t){var n=!0,i=!1,o=void 0;try{for(var a,s=e.values()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;if(t.closed)break;r(l)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}},next:function(e){e.forEach(function(e){"add"===e.type?r(e.value):"remove"===e.type&&n(e.value)})},error:function(e){t.error(e)},complete:function(){t.complete()}});return function(){o.unsubscribe(),i.forEach(function(e){e()})}})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=(i(e(".")),i(e("zen-observable")));t.exports=r.default,t.exports.default=r.default},{".":306,"@babel/runtime/helpers/interopRequireDefault":67,"zen-observable":601}],312:[function(e,t,r){"use strict";function n(e,t){function r(e,t){var r,n=!1,i=e["@@transducer/step"]([],t);return i&&i["@@transducer/reduced"]?(r=i["@@transducer/value"],n=!0):r=i,{outputValues:r,addsComplete:n}}function n(){var n=new Map,i=t(a),o=!1,s=new Set(i["@@transducer/init"]()),l=!0,u=!1,c=void 0;try{for(var d,f=e.values()[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,h=r(i,p),m=h.outputValues,b=h.addsComplete;n.set(p,m);for(var _=0,v=m.length;_<v;_++)s.add(m[_]);if(b){o=!0,i["@@transducer/result"]([]).forEach(function(e){s.add(e)});break}}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return{values:s,inputToOutputValues:n,xform:i,addsComplete:o}}return new o.default({scheduler:e.getScheduler(),read:function(){return n().values},listen:function(t,i){var o,a,s;return e.subscribe({start:function(){var e=n();t(e.values),o=e.inputToOutputValues,a=e.xform,s=e.addsComplete},next:function(e){for(var t=0,n=e.length;t<n;t++){var l=e[t];if("add"===l.type){if(!s){var u=l.value,c=r(a,u),d=c.outputValues,f=c.addsComplete;o.set(u,d);for(var p=0,h=d.length;p<h;p++)i.add(d[p]);f&&(s=!0,a["@@transducer/result"]([]).forEach(function(e){i.add(e)}))}}else if("remove"===l.type){var m=l.value,b=o.get(m);if(!b)throw new Error("value had not been added");b.forEach(function(e){i.remove(e)}),o.delete(m)}}},error:function(e){i.error(e)},complete:function(){i.end()}})}})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e(".")),a={"@@transducer/init":function(){return[]},"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":function(e){return e}};t.exports=r.default,t.exports.default=r.default},{".":306,"@babel/runtime/helpers/interopRequireDefault":67}],313:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"DataView");t.exports=o},{"./_getNative":396,"./_root":436}],314:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=e("./_hashClear"),o=e("./_hashDelete"),a=e("./_hashGet"),s=e("./_hashHas"),l=e("./_hashSet");n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=s,n.prototype.set=l,t.exports=n},{"./_hashClear":402,"./_hashDelete":403,"./_hashGet":404,"./_hashHas":405,"./_hashSet":406}],315:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=e("./_listCacheClear"),o=e("./_listCacheDelete"),a=e("./_listCacheGet"),s=e("./_listCacheHas"),l=e("./_listCacheSet");n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=s,n.prototype.set=l,t.exports=n},{"./_listCacheClear":415,"./_listCacheDelete":416,"./_listCacheGet":417,"./_listCacheHas":418,"./_listCacheSet":419}],316:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"Map");t.exports=o},{"./_getNative":396,"./_root":436}],317:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=e("./_mapCacheClear"),o=e("./_mapCacheDelete"),a=e("./_mapCacheGet"),s=e("./_mapCacheHas"),l=e("./_mapCacheSet");n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=s,n.prototype.set=l,t.exports=n},{"./_mapCacheClear":420,"./_mapCacheDelete":421,"./_mapCacheGet":422,"./_mapCacheHas":423,"./_mapCacheSet":424}],318:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"Promise");t.exports=o},{"./_getNative":396,"./_root":436}],319:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"Set");t.exports=o},{"./_getNative":396,"./_root":436}],320:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new i;++t<r;)this.add(e[t])}var i=e("./_MapCache"),o=e("./_setCacheAdd"),a=e("./_setCacheHas");n.prototype.add=n.prototype.push=o,n.prototype.has=a,t.exports=n},{"./_MapCache":317,"./_setCacheAdd":437,"./_setCacheHas":438}],321:[function(e,t,r){function n(e){var t=this.__data__=new i(e);this.size=t.size}var i=e("./_ListCache"),o=e("./_stackClear"),a=e("./_stackDelete"),s=e("./_stackGet"),l=e("./_stackHas"),u=e("./_stackSet");n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=s,n.prototype.has=l,n.prototype.set=u,t.exports=n},{"./_ListCache":315,"./_stackClear":442,"./_stackDelete":443,"./_stackGet":444,"./_stackHas":445,"./_stackSet":446}],322:[function(e,t,r){var n=e("./_root"),i=n.Symbol;t.exports=i},{"./_root":436}],323:[function(e,t,r){var n=e("./_root"),i=n.Uint8Array;t.exports=i},{"./_root":436}],324:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"WeakMap");t.exports=o},{"./_getNative":396,"./_root":436}],325:[function(e,t,r){function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}t.exports=n},{}],326:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}t.exports=n},{}],327:[function(e,t,r){function n(e,t){return!!(null==e?0:e.length)&&i(e,t,0)>-1}var i=e("./_baseIndexOf");t.exports=n},{"./_baseIndexOf":345}],328:[function(e,t,r){function n(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}t.exports=n},{}],329:[function(e,t,r){function n(e,t){var r=a(e),n=!r&&o(e),c=!r&&!n&&s(e),f=!r&&!n&&!c&&u(e),p=r||n||c||f,h=p?i(e.length,String):[],m=h.length;for(var b in e)!t&&!d.call(e,b)||p&&("length"==b||c&&("offset"==b||"parent"==b)||f&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||l(b,m))||h.push(b);return h}var i=e("./_baseTimes"),o=e("./isArguments"),a=e("./isArray"),s=e("./isBuffer"),l=e("./_isIndex"),u=e("./isTypedArray"),c=Object.prototype,d=c.hasOwnProperty;t.exports=n},{"./_baseTimes":370,"./_isIndex":408,"./isArguments":469,"./isArray":470,"./isBuffer":473,"./isTypedArray":481}],330:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}t.exports=n},{}],331:[function(e,t,r){function n(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}t.exports=n},{}],332:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}t.exports=n},{}],333:[function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(i(e[r][0],t))return r;return-1}var i=e("./eq");t.exports=n},{"./eq":455}],334:[function(e,t,r){function n(e,t,r){return e===e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}t.exports=n},{}],335:[function(e,t,r){function n(e,t,r,n){var d=-1,f=o,p=!0,h=e.length,m=[],b=t.length;if(!h)return m;r&&(t=s(t,l(r))),n?(f=a,p=!1):t.length>=c&&(f=u,p=!1,t=new i(t));e:for(;++d<h;){var _=e[d],v=null==r?_:r(_);if(_=n||0!==_?_:0,p&&v===v){for(var g=b;g--;)if(t[g]===v)continue e;m.push(_)}else f(t,v,n)||m.push(_)}return m}var i=e("./_SetCache"),o=e("./_arrayIncludes"),a=e("./_arrayIncludesWith"),s=e("./_arrayMap"),l=e("./_baseUnary"),u=e("./_cacheHas"),c=200;t.exports=n},{"./_SetCache":320,"./_arrayIncludes":327,"./_arrayIncludesWith":328,"./_arrayMap":330,"./_baseUnary":372,"./_cacheHas":376}],336:[function(e,t,r){var n=e("./_baseForOwn"),i=e("./_createBaseEach"),o=i(n);t.exports=o},{"./_baseForOwn":340,"./_createBaseEach":382}],337:[function(e,t,r){function n(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}t.exports=n},{}],338:[function(e,t,r){function n(e,t,r,a,s){var l=-1,u=e.length;for(r||(r=o),s||(s=[]);++l<u;){var c=e[l];t>0&&r(c)?t>1?n(c,t-1,r,a,s):i(s,c):a||(s[s.length]=c)}return s}var i=e("./_arrayPush"),o=e("./_isFlattenable");t.exports=n},{"./_arrayPush":331,"./_isFlattenable":407}],339:[function(e,t,r){var n=e("./_createBaseFor"),i=n();t.exports=i},{"./_createBaseFor":383}],340:[function(e,t,r){function n(e,t){return e&&i(e,t,o)}var i=e("./_baseFor"),o=e("./keys");t.exports=n},{"./_baseFor":339,"./keys":482}],341:[function(e,t,r){function n(e,t){t=i(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[o(t[r++])];return r&&r==n?e:void 0}var i=e("./_castPath"),o=e("./_toKey");t.exports=n},{"./_castPath":378,"./_toKey":449}],342:[function(e,t,r){function n(e,t,r){var n=t(e);return o(e)?n:i(n,r(e))}var i=e("./_arrayPush"),o=e("./isArray");t.exports=n},{"./_arrayPush":331,"./isArray":470}],343:[function(e,t,r){function n(e){return null==e?void 0===e?l:s:u&&u in Object(e)?o(e):a(e)}var i=e("./_Symbol"),o=e("./_getRawTag"),a=e("./_objectToString"),s="[object Null]",l="[object Undefined]",u=i?i.toStringTag:void 0;t.exports=n},{"./_Symbol":322,"./_getRawTag":397,"./_objectToString":432}],344:[function(e,t,r){function n(e,t){return null!=e&&t in Object(e)}t.exports=n},{}],345:[function(e,t,r){function n(e,t,r){return t===t?a(e,t,r):i(e,o,r)}var i=e("./_baseFindIndex"),o=e("./_baseIsNaN"),a=e("./_strictIndexOf");t.exports=n},{"./_baseFindIndex":337,"./_baseIsNaN":352,"./_strictIndexOf":447}],346:[function(e,t,r){function n(e,t,r){for(var n=r?a:o,d=e[0].length,f=e.length,p=f,h=Array(f),m=1/0,b=[];p--;){var _=e[p];p&&t&&(_=s(_,l(t))),m=c(_.length,m),h[p]=!r&&(t||d>=120&&_.length>=120)?new i(p&&_):void 0}_=e[0];var v=-1,g=h[0];e:for(;++v<d&&b.length<m;){var y=_[v],w=t?t(y):y;if(y=r||0!==y?y:0,!(g?u(g,w):n(b,w,r))){for(p=f;--p;){var k=h[p];if(!(k?u(k,w):n(e[p],w,r)))continue e}g&&g.push(w),b.push(y)}}return b}var i=e("./_SetCache"),o=e("./_arrayIncludes"),a=e("./_arrayIncludesWith"),s=e("./_arrayMap"),l=e("./_baseUnary"),u=e("./_cacheHas"),c=Math.min;t.exports=n},{"./_SetCache":320,"./_arrayIncludes":327,"./_arrayIncludesWith":328,"./_arrayMap":330,"./_baseUnary":372,"./_cacheHas":376}],347:[function(e,t,r){function n(e,t,r,n){return i(e,function(e,i,o){t(n,r(e),i,o)}),n}var i=e("./_baseForOwn");t.exports=n},{"./_baseForOwn":340}],348:[function(e,t,r){function n(e){return o(e)&&i(e)==a}var i=e("./_baseGetTag"),o=e("./isObjectLike"),a="[object Arguments]";t.exports=n},{"./_baseGetTag":343,"./isObjectLike":478}],349:[function(e,t,r){function n(e,t,r,a,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:i(e,t,r,a,n,s))}var i=e("./_baseIsEqualDeep"),o=e("./isObjectLike");t.exports=n},{"./_baseIsEqualDeep":350,"./isObjectLike":478}],350:[function(e,t,r){function n(e,t,r,n,b,v){var g=u(e),y=u(t),w=g?h:l(e),k=y?h:l(t);w=w==p?m:w,k=k==p?m:k;var j=w==m,x=k==m,E=w==k;if(E&&c(e)){if(!c(t))return!1;g=!0,j=!1}if(E&&!j)return v||(v=new i),g||d(e)?o(e,t,r,n,b,v):a(e,t,w,r,n,b,v);if(!(r&f)){var S=j&&_.call(e,"__wrapped__"),C=x&&_.call(t,"__wrapped__");if(S||C){var I=S?e.value():e,T=C?t.value():t;return v||(v=new i),b(I,T,r,n,v)}}return!!E&&(v||(v=new i),s(e,t,r,n,b,v))}var i=e("./_Stack"),o=e("./_equalArrays"),a=e("./_equalByTag"),s=e("./_equalObjects"),l=e("./_getTag"),u=e("./isArray"),c=e("./isBuffer"),d=e("./isTypedArray"),f=1,p="[object Arguments]",h="[object Array]",m="[object Object]",b=Object.prototype,_=b.hasOwnProperty;t.exports=n},{"./_Stack":321,"./_equalArrays":388,"./_equalByTag":389,"./_equalObjects":390,"./_getTag":399,"./isArray":470,"./isBuffer":473,"./isTypedArray":481}],351:[function(e,t,r){function n(e,t,r,n){var l=r.length,u=l,c=!n;if(null==e)return!u;for(e=Object(e);l--;){var d=r[l];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++l<u;){d=r[l];var f=d[0],p=e[f],h=d[1];if(c&&d[2]){if(void 0===p&&!(f in e))return!1}else{var m=new i;if(n)var b=n(p,h,f,e,t,m);if(!(void 0===b?o(h,p,a|s,n,m):b))return!1}}return!0}var i=e("./_Stack"),o=e("./_baseIsEqual"),a=1,s=2;t.exports=n},{"./_Stack":321,"./_baseIsEqual":349}],352:[function(e,t,r){function n(e){return e!==e}t.exports=n},{}],353:[function(e,t,r){function n(e){return!(!a(e)||o(e))&&(i(e)?h:u).test(s(e))}
var i=e("./isFunction"),o=e("./_isMasked"),a=e("./isObject"),s=e("./_toSource"),l=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,f=c.toString,p=d.hasOwnProperty,h=RegExp("^"+f.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"./_isMasked":412,"./_toSource":450,"./isFunction":475,"./isObject":477}],354:[function(e,t,r){function n(e){return a(e)&&o(e.length)&&!!s[i(e)]}var i=e("./_baseGetTag"),o=e("./isLength"),a=e("./isObjectLike"),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=n},{"./_baseGetTag":343,"./isLength":476,"./isObjectLike":478}],355:[function(e,t,r){function n(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?o(e[0],e[1]):i(e):l(e)}var i=e("./_baseMatches"),o=e("./_baseMatchesProperty"),a=e("./identity"),s=e("./isArray"),l=e("./property");t.exports=n},{"./_baseMatches":359,"./_baseMatchesProperty":360,"./identity":465,"./isArray":470,"./property":490}],356:[function(e,t,r){function n(e){if(!i(e))return o(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}var i=e("./_isPrototype"),o=e("./_nativeKeys"),a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_isPrototype":413,"./_nativeKeys":429}],357:[function(e,t,r){function n(e){if(!i(e))return a(e);var t=o(e),r=[];for(var n in e)("constructor"!=n||!t&&l.call(e,n))&&r.push(n);return r}var i=e("./isObject"),o=e("./_isPrototype"),a=e("./_nativeKeysIn"),s=Object.prototype,l=s.hasOwnProperty;t.exports=n},{"./_isPrototype":413,"./_nativeKeysIn":430,"./isObject":477}],358:[function(e,t,r){function n(e,t){var r=-1,n=o(e)?Array(e.length):[];return i(e,function(e,i,o){n[++r]=t(e,i,o)}),n}var i=e("./_baseEach"),o=e("./isArrayLike");t.exports=n},{"./_baseEach":336,"./isArrayLike":471}],359:[function(e,t,r){function n(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||i(r,e,t)}}var i=e("./_baseIsMatch"),o=e("./_getMatchData"),a=e("./_matchesStrictComparable");t.exports=n},{"./_baseIsMatch":351,"./_getMatchData":395,"./_matchesStrictComparable":426}],360:[function(e,t,r){function n(e,t){return s(e)&&l(t)?u(c(e),t):function(r){var n=o(r,e);return void 0===n&&n===t?a(r,e):i(t,n,d|f)}}var i=e("./_baseIsEqual"),o=e("./get"),a=e("./hasIn"),s=e("./_isKey"),l=e("./_isStrictComparable"),u=e("./_matchesStrictComparable"),c=e("./_toKey"),d=1,f=2;t.exports=n},{"./_baseIsEqual":349,"./_isKey":410,"./_isStrictComparable":414,"./_matchesStrictComparable":426,"./_toKey":449,"./get":463,"./hasIn":464}],361:[function(e,t,r){function n(e,t,r){var n=-1;t=i(t.length?t:[c],l(o));var d=a(e,function(e,r,o){return{criteria:i(t,function(t){return t(e)}),index:++n,value:e}});return s(d,function(e,t){return u(e,t,r)})}var i=e("./_arrayMap"),o=e("./_baseIteratee"),a=e("./_baseMap"),s=e("./_baseSortBy"),l=e("./_baseUnary"),u=e("./_compareMultiple"),c=e("./identity");t.exports=n},{"./_arrayMap":330,"./_baseIteratee":355,"./_baseMap":358,"./_baseSortBy":369,"./_baseUnary":372,"./_compareMultiple":380,"./identity":465}],362:[function(e,t,r){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],363:[function(e,t,r){function n(e){return function(t){return i(t,e)}}var i=e("./_baseGet");t.exports=n},{"./_baseGet":341}],364:[function(e,t,r){function n(e){return function(t){return null==e?void 0:e[t]}}t.exports=n},{}],365:[function(e,t,r){function n(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==l){var l=a;o(a)?s.call(e,a,1):i(e,a)}}return e}var i=e("./_baseUnset"),o=e("./_isIndex"),a=Array.prototype,s=a.splice;t.exports=n},{"./_baseUnset":374,"./_isIndex":408}],366:[function(e,t,r){function n(e,t){return a(o(e,t,i),e+"")}var i=e("./identity"),o=e("./_overRest"),a=e("./_setToString");t.exports=n},{"./_overRest":434,"./_setToString":440,"./identity":465}],367:[function(e,t,r){var n=e("./constant"),i=e("./_defineProperty"),o=e("./identity"),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;t.exports=a},{"./_defineProperty":387,"./constant":451,"./identity":465}],368:[function(e,t,r){function n(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}t.exports=n},{}],369:[function(e,t,r){function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}t.exports=n},{}],370:[function(e,t,r){function n(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}t.exports=n},{}],371:[function(e,t,r){function n(e){if("string"==typeof e)return e;if(a(e))return o(e,n)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}var i=e("./_Symbol"),o=e("./_arrayMap"),a=e("./isArray"),s=e("./isSymbol"),l=1/0,u=i?i.prototype:void 0,c=u?u.toString:void 0;t.exports=n},{"./_Symbol":322,"./_arrayMap":330,"./isArray":470,"./isSymbol":480}],372:[function(e,t,r){function n(e){return function(t){return e(t)}}t.exports=n},{}],373:[function(e,t,r){function n(e,t,r){var n=-1,d=o,f=e.length,p=!0,h=[],m=h;if(r)p=!1,d=a;else if(f>=c){var b=t?null:l(e);if(b)return u(b);p=!1,d=s,m=new i}else m=t?[]:h;e:for(;++n<f;){var _=e[n],v=t?t(_):_;if(_=r||0!==_?_:0,p&&v===v){for(var g=m.length;g--;)if(m[g]===v)continue e;t&&m.push(v),h.push(_)}else d(m,v,r)||(m!==h&&m.push(v),h.push(_))}return h}var i=e("./_SetCache"),o=e("./_arrayIncludes"),a=e("./_arrayIncludesWith"),s=e("./_cacheHas"),l=e("./_createSet"),u=e("./_setToArray"),c=200;t.exports=n},{"./_SetCache":320,"./_arrayIncludes":327,"./_arrayIncludesWith":328,"./_cacheHas":376,"./_createSet":386,"./_setToArray":439}],374:[function(e,t,r){function n(e,t){return t=i(t,e),null==(e=a(e,t))||delete e[s(o(t))]}var i=e("./_castPath"),o=e("./last"),a=e("./_parent"),s=e("./_toKey");t.exports=n},{"./_castPath":378,"./_parent":435,"./_toKey":449,"./last":484}],375:[function(e,t,r){function n(e,t){return i(t,function(t){return e[t]})}var i=e("./_arrayMap");t.exports=n},{"./_arrayMap":330}],376:[function(e,t,r){function n(e,t){return e.has(t)}t.exports=n},{}],377:[function(e,t,r){function n(e){return i(e)?e:[]}var i=e("./isArrayLikeObject");t.exports=n},{"./isArrayLikeObject":472}],378:[function(e,t,r){function n(e,t){return i(e)?e:o(e,t)?[e]:a(s(e))}var i=e("./isArray"),o=e("./_isKey"),a=e("./_stringToPath"),s=e("./toString");t.exports=n},{"./_isKey":410,"./_stringToPath":448,"./isArray":470,"./toString":500}],379:[function(e,t,r){function n(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e===e,a=i(e),s=void 0!==t,l=null===t,u=t===t,c=i(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||n&&s&&u||!r&&u||!o)return 1;if(!n&&!a&&!c&&e<t||c&&r&&o&&!n&&!a||l&&r&&o||!s&&o||!u)return-1}return 0}var i=e("./isSymbol");t.exports=n},{"./isSymbol":480}],380:[function(e,t,r){function n(e,t,r){for(var n=-1,o=e.criteria,a=t.criteria,s=o.length,l=r.length;++n<s;){var u=i(o[n],a[n]);if(u){if(n>=l)return u;return u*("desc"==r[n]?-1:1)}}return e.index-t.index}var i=e("./_compareAscending");t.exports=n},{"./_compareAscending":379}],381:[function(e,t,r){var n=e("./_root"),i=n["__core-js_shared__"];t.exports=i},{"./_root":436}],382:[function(e,t,r){function n(e,t){return function(r,n){if(null==r)return r;if(!i(r))return e(r,n);for(var o=r.length,a=t?o:-1,s=Object(r);(t?a--:++a<o)&&!1!==n(s[a],a,s););return r}}var i=e("./isArrayLike");t.exports=n},{"./isArrayLike":471}],383:[function(e,t,r){function n(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===r(o[l],l,o))break}return t}}t.exports=n},{}],384:[function(e,t,r){function n(e){return function(t,r,n){var s=Object(t);if(!o(t)){var l=i(r,3);t=a(t),r=function(e){return l(s[e],e,s)}}var u=e(t,r,n);return u>-1?s[l?t[u]:u]:void 0}}var i=e("./_baseIteratee"),o=e("./isArrayLike"),a=e("./keys");t.exports=n},{"./_baseIteratee":355,"./isArrayLike":471,"./keys":482}],385:[function(e,t,r){function n(e,t){return function(r,n){return i(r,e,t(n),{})}}var i=e("./_baseInverter");t.exports=n},{"./_baseInverter":347}],386:[function(e,t,r){var n=e("./_Set"),i=e("./noop"),o=e("./_setToArray"),a=n&&1/o(new n([,-0]))[1]==1/0?function(e){return new n(e)}:i;t.exports=a},{"./_Set":319,"./_setToArray":439,"./noop":487}],387:[function(e,t,r){var n=e("./_getNative"),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=i},{"./_getNative":396}],388:[function(e,t,r){function n(e,t,r,n,u,c){var d=r&s,f=e.length,p=t.length;if(f!=p&&!(d&&p>f))return!1;var h=c.get(e);if(h&&c.get(t))return h==t;var m=-1,b=!0,_=r&l?new i:void 0;for(c.set(e,t),c.set(t,e);++m<f;){var v=e[m],g=t[m];if(n)var y=d?n(g,v,m,t,e,c):n(v,g,m,e,t,c);if(void 0!==y){if(y)continue;b=!1;break}if(_){if(!o(t,function(e,t){if(!a(_,t)&&(v===e||u(v,e,r,n,c)))return _.push(t)})){b=!1;break}}else if(v!==g&&!u(v,g,r,n,c)){b=!1;break}}return c.delete(e),c.delete(t),b}var i=e("./_SetCache"),o=e("./_arraySome"),a=e("./_cacheHas"),s=1,l=2;t.exports=n},{"./_SetCache":320,"./_arraySome":332,"./_cacheHas":376}],389:[function(e,t,r){function n(e,t,r,n,i,j,E){switch(r){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!j(new o(e),new o(t)));case f:case p:case b:return a(+e,+t);case h:return e.name==t.name&&e.message==t.message;case _:case g:return e==t+"";case m:var S=l;case v:var C=n&c;if(S||(S=u),e.size!=t.size&&!C)return!1;var I=E.get(e);if(I)return I==t;n|=d,E.set(e,t);var T=s(S(e),S(t),n,i,j,E);return E.delete(e),T;case y:if(x)return x.call(e)==x.call(t)}return!1}var i=e("./_Symbol"),o=e("./_Uint8Array"),a=e("./eq"),s=e("./_equalArrays"),l=e("./_mapToArray"),u=e("./_setToArray"),c=1,d=2,f="[object Boolean]",p="[object Date]",h="[object Error]",m="[object Map]",b="[object Number]",_="[object RegExp]",v="[object Set]",g="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",k="[object DataView]",j=i?i.prototype:void 0,x=j?j.valueOf:void 0;t.exports=n},{"./_Symbol":322,"./_Uint8Array":323,"./_equalArrays":388,"./_mapToArray":425,"./_setToArray":439,"./eq":455}],390:[function(e,t,r){function n(e,t,r,n,a,l){var u=r&o,c=i(e),d=c.length;if(d!=i(t).length&&!u)return!1;for(var f=d;f--;){var p=c[f];if(!(u?p in t:s.call(t,p)))return!1}var h=l.get(e);if(h&&l.get(t))return h==t;var m=!0;l.set(e,t),l.set(t,e);for(var b=u;++f<d;){p=c[f];var _=e[p],v=t[p];if(n)var g=u?n(v,_,p,t,e,l):n(_,v,p,e,t,l);if(!(void 0===g?_===v||a(_,v,r,n,l):g)){m=!1;break}b||(b="constructor"==p)}if(m&&!b){var y=e.constructor,w=t.constructor;y!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(m=!1)}return l.delete(e),l.delete(t),m}var i=e("./_getAllKeys"),o=1,a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_getAllKeys":393}],391:[function(e,t,r){var n=e("./_basePropertyOf"),i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o=n(i);t.exports=o},{"./_basePropertyOf":364}],392:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],393:[function(e,t,r){function n(e){return i(e,a,o)}var i=e("./_baseGetAllKeys"),o=e("./_getSymbols"),a=e("./keys");t.exports=n},{"./_baseGetAllKeys":342,"./_getSymbols":398,"./keys":482}],394:[function(e,t,r){function n(e,t){var r=e.__data__;return i(t)?r["string"==typeof t?"string":"hash"]:r.map}var i=e("./_isKeyable");t.exports=n},{"./_isKeyable":411}],395:[function(e,t,r){function n(e){for(var t=o(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,i(a)]}return t}var i=e("./_isStrictComparable"),o=e("./keys");t.exports=n},{"./_isStrictComparable":414,"./keys":482}],396:[function(e,t,r){function n(e,t){var r=o(e,t);return i(r)?r:void 0}var i=e("./_baseIsNative"),o=e("./_getValue");t.exports=n},{"./_baseIsNative":353,"./_getValue":400}],397:[function(e,t,r){function n(e){var t=a.call(e,l),r=e[l];try{e[l]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[l]=r:delete e[l]),i}var i=e("./_Symbol"),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=i?i.toStringTag:void 0;t.exports=n},{"./_Symbol":322}],398:[function(e,t,r){var n=e("./_arrayFilter"),i=e("./stubArray"),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,l=s?function(e){return null==e?[]:(e=Object(e),n(s(e),function(t){return a.call(e,t)}))}:i;t.exports=l},{"./_arrayFilter":326,"./stubArray":494}],399:[function(e,t,r){var n=e("./_DataView"),i=e("./_Map"),o=e("./_Promise"),a=e("./_Set"),s=e("./_WeakMap"),l=e("./_baseGetTag"),u=e("./_toSource"),c=u(n),d=u(i),f=u(o),p=u(a),h=u(s),m=l;(n&&"[object DataView]"!=m(new n(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case c:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return t}),t.exports=m},{"./_DataView":313,"./_Map":316,"./_Promise":318,"./_Set":319,"./_WeakMap":324,"./_baseGetTag":343,"./_toSource":450}],400:[function(e,t,r){function n(e,t){return null==e?void 0:e[t]}t.exports=n},{}],401:[function(e,t,r){function n(e,t,r){t=i(t,e);for(var n=-1,c=t.length,d=!1;++n<c;){var f=u(t[n]);if(!(d=null!=e&&r(e,f)))break;e=e[f]}return d||++n!=c?d:!!(c=null==e?0:e.length)&&l(c)&&s(f,c)&&(a(e)||o(e))}var i=e("./_castPath"),o=e("./isArguments"),a=e("./isArray"),s=e("./_isIndex"),l=e("./isLength"),u=e("./_toKey");t.exports=n},{"./_castPath":378,"./_isIndex":408,"./_toKey":449,"./isArguments":469,"./isArray":470,"./isLength":476}],402:[function(e,t,r){function n(){this.__data__=i?i(null):{},this.size=0}var i=e("./_nativeCreate");t.exports=n},{"./_nativeCreate":428}],403:[function(e,t,r){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n},{}],404:[function(e,t,r){function n(e){var t=this.__data__;if(i){var r=t[e];return r===o?void 0:r}return s.call(t,e)?t[e]:void 0}var i=e("./_nativeCreate"),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_nativeCreate":428}],405:[function(e,t,r){function n(e){var t=this.__data__;return i?void 0!==t[e]:a.call(t,e)}var i=e("./_nativeCreate"),o=Object.prototype,a=o.hasOwnProperty;t.exports=n},{"./_nativeCreate":428}],406:[function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=i&&void 0===t?o:t,this}var i=e("./_nativeCreate"),o="__lodash_hash_undefined__";t.exports=n},{"./_nativeCreate":428}],407:[function(e,t,r){function n(e){return a(e)||o(e)||!!(s&&e&&e[s])}var i=e("./_Symbol"),o=e("./isArguments"),a=e("./isArray"),s=i?i.isConcatSpreadable:void 0;t.exports=n},{"./_Symbol":322,"./isArguments":469,"./isArray":470}],408:[function(e,t,r){function n(e,t){var r=typeof e;return!!(t=null==t?i:t)&&("number"==r||"symbol"!=r&&o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=n},{}],409:[function(e,t,r){function n(e,t,r){if(!s(r))return!1;var n=typeof t;return!!("number"==n?o(r)&&a(t,r.length):"string"==n&&t in r)&&i(r[t],e)}var i=e("./eq"),o=e("./isArrayLike"),a=e("./_isIndex"),s=e("./isObject");t.exports=n},{"./_isIndex":408,"./eq":455,"./isArrayLike":471,"./isObject":477}],410:[function(e,t,r){function n(e,t){if(i(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}var i=e("./isArray"),o=e("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=n},{"./isArray":470,"./isSymbol":480}],411:[function(e,t,r){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=n},{}],412:[function(e,t,r){function n(e){return!!o&&o in e}var i=e("./_coreJsData"),o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=n},{"./_coreJsData":381}],413:[function(e,t,r){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}var i=Object.prototype;t.exports=n},{}],414:[function(e,t,r){function n(e){return e===e&&!i(e)}var i=e("./isObject");t.exports=n},{"./isObject":477}],415:[function(e,t,r){function n(){this.__data__=[],this.size=0}t.exports=n},{}],416:[function(e,t,r){function n(e){var t=this.__data__,r=i(t,e);return!(r<0)&&(r==t.length-1?t.pop():a.call(t,r,1),--this.size,!0)}var i=e("./_assocIndexOf"),o=Array.prototype,a=o.splice;t.exports=n},{"./_assocIndexOf":333}],417:[function(e,t,r){function n(e){var t=this.__data__,r=i(t,e);return r<0?void 0:t[r][1]}var i=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":333}],418:[function(e,t,r){function n(e){return i(this.__data__,e)>-1}var i=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":333}],419:[function(e,t,r){function n(e,t){var r=this.__data__,n=i(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var i=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":333}],420:[function(e,t,r){function n(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=e("./_Hash"),o=e("./_ListCache"),a=e("./_Map");t.exports=n},{"./_Hash":314,"./_ListCache":315,"./_Map":316}],421:[function(e,t,r){function n(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}var i=e("./_getMapData");t.exports=n},{"./_getMapData":394}],422:[function(e,t,r){function n(e){return i(this,e).get(e)}var i=e("./_getMapData");t.exports=n},{"./_getMapData":394}],423:[function(e,t,r){function n(e){return i(this,e).has(e)}var i=e("./_getMapData");t.exports=n},{"./_getMapData":394}],424:[function(e,t,r){function n(e,t){var r=i(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var i=e("./_getMapData");t.exports=n},{"./_getMapData":394}],425:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}t.exports=n},{}],426:[function(e,t,r){function n(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}t.exports=n},{}],427:[function(e,t,r){function n(e){var t=i(e,function(e){return r.size===o&&r.clear(),e}),r=t.cache;return t}var i=e("./memoize"),o=500;t.exports=n},{"./memoize":486}],428:[function(e,t,r){var n=e("./_getNative"),i=n(Object,"create");t.exports=i},{"./_getNative":396}],429:[function(e,t,r){var n=e("./_overArg"),i=n(Object.keys,Object);t.exports=i},{"./_overArg":433}],430:[function(e,t,r){function n(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}t.exports=n},{}],431:[function(e,t,r){var n=e("./_freeGlobal"),i="object"==typeof r&&r&&!r.nodeType&&r,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&n.process,l=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=l},{"./_freeGlobal":392}],432:[function(e,t,r){function n(e){return o.call(e)}var i=Object.prototype,o=i.toString;t.exports=n},{}],433:[function(e,t,r){function n(e,t){return function(r){return e(t(r))}}t.exports=n},{}],434:[function(e,t,r){function n(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=o(n.length-t,0),l=Array(s);++a<s;)l[a]=n[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=n[a];return u[t]=r(l),i(e,this,u)}}var i=e("./_apply"),o=Math.max;t.exports=n},{"./_apply":325}],435:[function(e,t,r){function n(e,t){return t.length<2?e:i(e,o(t,0,-1))}var i=e("./_baseGet"),o=e("./_baseSlice");t.exports=n},{"./_baseGet":341,"./_baseSlice":368}],436:[function(e,t,r){var n=e("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();t.exports=o},{"./_freeGlobal":392}],437:[function(e,t,r){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";t.exports=n},{}],438:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],439:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}t.exports=n},{}],440:[function(e,t,r){var n=e("./_baseSetToString"),i=e("./_shortOut"),o=i(n);t.exports=o},{"./_baseSetToString":367,"./_shortOut":441}],441:[function(e,t,r){function n(e){var t=0,r=0;return function(){var n=a(),s=o-(n-r);if(r=n,s>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var i=800,o=16,a=Date.now;t.exports=n},{}],442:[function(e,t,r){function n(){this.__data__=new i,this.size=0}var i=e("./_ListCache");t.exports=n},{"./_ListCache":315}],443:[function(e,t,r){function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}t.exports=n},{}],444:[function(e,t,r){function n(e){return this.__data__.get(e)}t.exports=n},{}],445:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],446:[function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof i){var n=r.__data__;if(!o||n.length<s-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(n)}return r.set(e,t),this.size=r.size,this}var i=e("./_ListCache"),o=e("./_Map"),a=e("./_MapCache"),s=200;t.exports=n},{"./_ListCache":315,"./_Map":316,"./_MapCache":317}],447:[function(e,t,r){function n(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}t.exports=n},{}],448:[function(e,t,r){var n=e("./_memoizeCapped"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,r,n,i){t.push(n?i.replace(o,"$1"):r||e)}),t});t.exports=a},{"./_memoizeCapped":427}],449:[function(e,t,r){function n(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var i=e("./isSymbol"),o=1/0;t.exports=n},{"./isSymbol":480}],450:[function(e,t,r){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var i=Function.prototype,o=i.toString;t.exports=n},{}],451:[function(e,t,r){function n(e){return function(){return e}}t.exports=n},{}],452:[function(e,t,r){function n(e,t,r){function n(t){var r=v,n=g;return v=g=void 0,x=t,w=e.apply(n,r)}function c(e){return x=e,k=setTimeout(p,t),E?n(e):w}function d(e){var r=e-j,n=e-x,i=t-r;return S?u(i,y-n):i}function f(e){var r=e-j,n=e-x;return void 0===j||r>=t||r<0||S&&n>=y}function p(){var e=o();if(f(e))return h(e);k=setTimeout(p,d(e))}function h(e){return k=void 0,C&&v?n(e):(v=g=void 0,w)}function m(){void 0!==k&&clearTimeout(k),x=0,v=j=g=k=void 0}function b(){return void 0===k?w:h(o())}function _(){var e=o(),r=f(e);if(v=arguments,g=this,j=e,r){if(void 0===k)return c(j);if(S)return k=setTimeout(p,t),n(j)}return void 0===k&&(k=setTimeout(p,t)),w}var v,g,y,w,k,j,x=0,E=!1,S=!1,C=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,i(r)&&(E=!!r.leading,S="maxWait"in r,y=S?l(a(r.maxWait)||0,t):y,C="trailing"in r?!!r.trailing:C),_.cancel=m,_.flush=b,_}var i=e("./isObject"),o=e("./now"),a=e("./toNumber"),s="Expected a function",l=Math.max,u=Math.min;t.exports=n},{"./isObject":477,"./now":488,"./toNumber":499}],453:[function(e,t,r){var n=e("./_baseRest"),i=e("./eq"),o=e("./_isIterateeCall"),a=e("./keysIn"),s=Object.prototype,l=s.hasOwnProperty,u=n(function(e,t){e=Object(e);var r=-1,n=t.length,u=n>2?t[2]:void 0;for(u&&o(t[0],t[1],u)&&(n=1);++r<n;)for(var c=t[r],d=a(c),f=-1,p=d.length;++f<p;){var h=d[f],m=e[h];(void 0===m||i(m,s[h])&&!l.call(e,h))&&(e[h]=c[h])}return e});t.exports=u},{"./_baseRest":366,"./_isIterateeCall":409,"./eq":455,"./keysIn":483}],454:[function(e,t,r){var n=e("./_baseDifference"),i=e("./_baseFlatten"),o=e("./_baseRest"),a=e("./isArrayLikeObject"),s=o(function(e,t){return a(e)?n(e,i(t,1,a,!0)):[]});t.exports=s},{"./_baseDifference":335,"./_baseFlatten":338,"./_baseRest":366,"./isArrayLikeObject":472}],455:[function(e,t,r){function n(e,t){return e===t||e!==e&&t!==t}t.exports=n},{}],456:[function(e,t,r){function n(e){return e=o(e),e&&s.test(e)?e.replace(a,i):e}var i=e("./_escapeHtmlChar"),o=e("./toString"),a=/[&<>"']/g,s=RegExp(a.source);t.exports=n},{"./_escapeHtmlChar":391,"./toString":500}],457:[function(e,t,r){function n(e){return e=i(e),e&&a.test(e)?e.replace(o,"\\$&"):e}var i=e("./toString"),o=/[\\^$.*+?()[\]{}|]/g,a=RegExp(o.source);t.exports=n},{"./toString":500}],458:[function(e,t,r){var n=e("./_createFind"),i=e("./findIndex"),o=n(i);t.exports=o},{"./_createFind":384,"./findIndex":459}],459:[function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var l=null==r?0:a(r);return l<0&&(l=s(n+l,0)),i(e,o(t,3),l)}var i=e("./_baseFindIndex"),o=e("./_baseIteratee"),a=e("./toInteger"),s=Math.max;t.exports=n},{"./_baseFindIndex":337,"./_baseIteratee":355,"./toInteger":498}],460:[function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var u=n-1;return void 0!==r&&(u=a(r),u=r<0?s(n+u,0):l(u,n-1)),i(e,o(t,3),u,!0)}var i=e("./_baseFindIndex"),o=e("./_baseIteratee"),a=e("./toInteger"),s=Math.max,l=Math.min;t.exports=n},{"./_baseFindIndex":337,"./_baseIteratee":355,"./toInteger":498}],461:[function(e,t,r){function n(e,t){return i(o(e,t),1)}var i=e("./_baseFlatten"),o=e("./map");t.exports=n},{"./_baseFlatten":338,"./map":485}],462:[function(e,t,r){function n(e){return(null==e?0:e.length)?i(e,1):[]}var i=e("./_baseFlatten");t.exports=n},{"./_baseFlatten":338}],463:[function(e,t,r){function n(e,t,r){var n=null==e?void 0:i(e,t);return void 0===n?r:n}var i=e("./_baseGet");t.exports=n},{"./_baseGet":341}],464:[function(e,t,r){function n(e,t){return null!=e&&o(e,t,i)}var i=e("./_baseHasIn"),o=e("./_hasPath");t.exports=n},{"./_baseHasIn":344,"./_hasPath":401}],465:[function(e,t,r){function n(e){return e}t.exports=n},{}],466:[function(e,t,r){function n(e,t,r,n){e=o(e)?e:l(e),r=r&&!n?s(r):0;var c=e.length;return r<0&&(r=u(c+r,0)),a(e)?r<=c&&e.indexOf(t,r)>-1:!!c&&i(e,t,r)>-1}var i=e("./_baseIndexOf"),o=e("./isArrayLike"),a=e("./isString"),s=e("./toInteger"),l=e("./values"),u=Math.max;t.exports=n},{"./_baseIndexOf":345,"./isArrayLike":471,"./isString":479,"./toInteger":498,"./values":504}],467:[function(e,t,r){var n=e("./_arrayMap"),i=e("./_baseIntersection"),o=e("./_baseRest"),a=e("./_castArrayLikeObject"),s=o(function(e){var t=n(e,a);return t.length&&t[0]===e[0]?i(t):[]});t.exports=s},{"./_arrayMap":330,"./_baseIntersection":346,"./_baseRest":366,"./_castArrayLikeObject":377}],468:[function(e,t,r){var n=e("./_baseIteratee"),i=e("./_createInverter"),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=i(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=s.call(t)),a.call(e,t)?e[t].push(r):e[t]=[r]},n);t.exports=l},{"./_baseIteratee":355,"./_createInverter":385}],469:[function(e,t,r){var n=e("./_baseIsArguments"),i=e("./isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};t.exports=l},{"./_baseIsArguments":348,"./isObjectLike":478}],470:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],471:[function(e,t,r){function n(e){return null!=e&&o(e.length)&&!i(e)}var i=e("./isFunction"),o=e("./isLength");t.exports=n},{"./isFunction":475,"./isLength":476}],472:[function(e,t,r){function n(e){return o(e)&&i(e)}var i=e("./isArrayLike"),o=e("./isObjectLike");t.exports=n},{"./isArrayLike":471,"./isObjectLike":478}],473:[function(e,t,r){var n=e("./_root"),i=e("./stubFalse"),o="object"==typeof r&&r&&!r.nodeType&&r,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,l=s?n.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||i;t.exports=c},{"./_root":436,"./stubFalse":495}],474:[function(e,t,r){function n(e,t){return i(e,t)}var i=e("./_baseIsEqual");t.exports=n},{"./_baseIsEqual":349}],475:[function(e,t,r){function n(e){if(!o(e))return!1;var t=i(e);return t==s||t==l||t==a||t==u}var i=e("./_baseGetTag"),o=e("./isObject"),a="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",u="[object Proxy]";t.exports=n},{"./_baseGetTag":343,"./isObject":477}],476:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;t.exports=n},{}],477:[function(e,t,r){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=n},{}],478:[function(e,t,r){function n(e){return null!=e&&"object"==typeof e}t.exports=n},{}],479:[function(e,t,r){function n(e){return"string"==typeof e||!o(e)&&a(e)&&i(e)==s}var i=e("./_baseGetTag"),o=e("./isArray"),a=e("./isObjectLike"),s="[object String]";t.exports=n},{"./_baseGetTag":343,"./isArray":470,"./isObjectLike":478}],480:[function(e,t,r){function n(e){return"symbol"==typeof e||o(e)&&i(e)==a}var i=e("./_baseGetTag"),o=e("./isObjectLike"),a="[object Symbol]";t.exports=n},{"./_baseGetTag":343,"./isObjectLike":478}],481:[function(e,t,r){var n=e("./_baseIsTypedArray"),i=e("./_baseUnary"),o=e("./_nodeUtil"),a=o&&o.isTypedArray,s=a?i(a):n;t.exports=s},{"./_baseIsTypedArray":354,"./_baseUnary":372,"./_nodeUtil":431}],482:[function(e,t,r){function n(e){return a(e)?i(e):o(e)}var i=e("./_arrayLikeKeys"),o=e("./_baseKeys"),a=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":329,"./_baseKeys":356,"./isArrayLike":471}],483:[function(e,t,r){function n(e){return a(e)?i(e,!0):o(e)}var i=e("./_arrayLikeKeys"),o=e("./_baseKeysIn"),a=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":329,"./_baseKeysIn":357,"./isArrayLike":471}],484:[function(e,t,r){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t.exports=n},{}],485:[function(e,t,r){function n(e,t){return(s(e)?i:a)(e,o(t,3))}var i=e("./_arrayMap"),o=e("./_baseIteratee"),a=e("./_baseMap"),s=e("./isArray");t.exports=n},{"./_arrayMap":330,"./_baseIteratee":355,"./_baseMap":358,"./isArray":470}],486:[function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(n.Cache||i),r}var i=e("./_MapCache"),o="Expected a function";n.Cache=i,t.exports=n},{"./_MapCache":317}],487:[function(e,t,r){function n(){}t.exports=n},{}],488:[function(e,t,r){var n=e("./_root"),i=function(){return n.Date.now()};t.exports=i},{"./_root":436}],489:[function(e,t,r){"use strict";function n(e){if("function"!=typeof e)throw new Error("Parameter must be function");var t;return function(){if(e){var r=e;e=void 0,t=r.apply(this,arguments)}return t}}t.exports=n},{}],490:[function(e,t,r){function n(e){return a(e)?i(s(e)):o(e)}var i=e("./_baseProperty"),o=e("./_basePropertyDeep"),a=e("./_isKey"),s=e("./_toKey");t.exports=n},{"./_baseProperty":362,"./_basePropertyDeep":363,"./_isKey":410,"./_toKey":449}],491:[function(e,t,r){function n(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],s=e.length;for(t=i(t,3);++n<s;){var l=e[n];t(l,n,e)&&(r.push(l),a.push(n))}return o(e,a),r}var i=e("./_baseIteratee"),o=e("./_basePullAt");t.exports=n},{"./_baseIteratee":355,"./_basePullAt":365}],492:[function(e,t,r){var n=e("./_baseFlatten"),i=e("./_baseOrderBy"),o=e("./_baseRest"),a=e("./_isIterateeCall"),s=o(function(e,t){if(null==e)return[];var r=t.length;return r>1&&a(e,t[0],t[1])?t=[]:r>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,n(t,1),[])});t.exports=s},{"./_baseFlatten":338,"./_baseOrderBy":361,"./_baseRest":366,"./_isIterateeCall":409}],493:[function(e,t,r){function n(e,t,r){return e=s(e),r=null==r?0:i(a(r),0,e.length),t=o(t),
e.slice(r,r+t.length)==t}var i=e("./_baseClamp"),o=e("./_baseToString"),a=e("./toInteger"),s=e("./toString");t.exports=n},{"./_baseClamp":334,"./_baseToString":371,"./toInteger":498,"./toString":500}],494:[function(e,t,r){function n(){return[]}t.exports=n},{}],495:[function(e,t,r){function n(){return!1}t.exports=n},{}],496:[function(e,t,r){function n(e,t,r){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return o(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),i(e,t,{leading:n,maxWait:t,trailing:s})}var i=e("./debounce"),o=e("./isObject"),a="Expected a function";t.exports=n},{"./debounce":452,"./isObject":477}],497:[function(e,t,r){function n(e){if(!e)return 0===e?e:0;if((e=i(e))===o||e===-o){return(e<0?-1:1)*a}return e===e?e:0}var i=e("./toNumber"),o=1/0,a=1.7976931348623157e308;t.exports=n},{"./toNumber":499}],498:[function(e,t,r){function n(e){var t=i(e),r=t%1;return t===t?r?t-r:t:0}var i=e("./toFinite");t.exports=n},{"./toFinite":497}],499:[function(e,t,r){function n(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=u.test(e);return r||c.test(e)?d(e.slice(2),r?2:8):l.test(e)?a:+e}var i=e("./isObject"),o=e("./isSymbol"),a=NaN,s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;t.exports=n},{"./isObject":477,"./isSymbol":480}],500:[function(e,t,r){function n(e){return null==e?"":i(e)}var i=e("./_baseToString");t.exports=n},{"./_baseToString":371}],501:[function(e,t,r){function n(e){return e&&e.length?i(e):[]}var i=e("./_baseUniq");t.exports=n},{"./_baseUniq":373}],502:[function(e,t,r){function n(e,t){return e&&e.length?o(e,i(t,2)):[]}var i=e("./_baseIteratee"),o=e("./_baseUniq");t.exports=n},{"./_baseIteratee":355,"./_baseUniq":373}],503:[function(e,t,r){function n(e){if(!e||!e.length)return[];var t=0;return e=i(e,function(e){if(l(e))return t=u(e.length,t),!0}),s(t,function(t){return o(e,a(t))})}var i=e("./_arrayFilter"),o=e("./_arrayMap"),a=e("./_baseProperty"),s=e("./_baseTimes"),l=e("./isArrayLikeObject"),u=Math.max;t.exports=n},{"./_arrayFilter":326,"./_arrayMap":330,"./_baseProperty":362,"./_baseTimes":370,"./isArrayLikeObject":472}],504:[function(e,t,r){function n(e){return null==e?[]:i(e,o(e))}var i=e("./_baseValues"),o=e("./keys");t.exports=n},{"./_baseValues":375,"./keys":482}],505:[function(e,t,r){var n=e("./_baseRest"),i=e("./unzip"),o=n(i);t.exports=o},{"./_baseRest":366,"./unzip":503}],506:[function(e,t,r){"use strict";function n(e){return function(t){return new s(e,t)}}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),s=function(){function e(t,r){(0,o.default)(this,e),this.f=t,this.xform=r,this.i=-1}return(0,a.default)(e,[{key:"@@transducer/init",value:function(){return this.xform["@@transducer/init"]()}},{key:"@@transducer/result",value:function(e){return this.xform["@@transducer/result"](e)}},{key:"@@transducer/step",value:function(e,t){return this.i++,this.xform["@@transducer/step"](e,this.f(t,this.i))}}]),e}();t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/interopRequireDefault":67}],507:[function(e,t,r){(function(e){"use strict";function n(e,t){if(o)return o.call(e,t);var r=e.parentNode;if(r&&"function"==typeof r.querySelectorAll)for(var n=r.querySelectorAll(t),i=0;i<n.length;i++)if(n[i]===e)return!0;return!1}r.__esModule=!0,r.default=n;var i=e.Element&&e.Element.prototype,o=i&&(i.matches||i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector);t.exports=r.default,t.exports.default=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],508:[function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,l=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r)o.call(r,c)&&(l[c]=r[c]);if(i){s=i(r);for(var d=0;d<s.length;d++)a.call(r,s[d])&&(l[s[d]]=r[s[d]])}}return l}},{}],509:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e.Object.freeze||function(e){return e};r.default=n,t.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],510:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,h.default)(e.groupId)+":"+(0,h.default)(e.id)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/extends"),a=n(o),s=e("babel-runtime/core-js/object/keys"),l=n(s),u=e("babel-runtime/helpers/classCallCheck"),c=n(u),d=e("babel-runtime/helpers/createClass"),f=n(d),p=e("babel-runtime/core-js/json/stringify"),h=n(p),m=e("immutability-helper"),b=n(m),_=e("lodash/findIndex"),v=n(_),g=e("lodash/findLastIndex"),y=n(g),w=e("lodash/invertBy"),k=n(w),j=e("lodash/sortBy"),x=n(j),E=e("./freeze"),S=n(E),C=function(){function e(t){(0,c.default)(this,e),this._items=(0,S.default)([]),this._needsSort=!1,this._get=t.get,this._set=t.set,this._maxLimit=t.maxLimit||200}return(0,f.default)(e,[{key:"_read",value:function(){var e=this._get();return null==e?{order:[]}:e}},{key:"_save",value:function(e){if(e.order.length>this._maxLimit){var t=e.order.map(function(e,t){return{item:e,index:t}}),r=(0,x.default)(t,function(e){return e.item.lastUse}).slice(0,e.order.length-this._maxLimit).map(function(e){return e.index}),n=(0,x.default)(r,function(e){return-e});e=(0,b.default)(e,{order:{$splice:n.map(function(e){return[e,1]})}})}this._set(e)}},{key:"_updatePersistedDataWithItem",value:function(e){var t=this._read(),r=(0,v.default)(t.order,function(t){return t.groupId===e.groupId&&t.id===e.id});if(-1!==r&&t.order[r].orderHint!==e.orderHint&&(t=(0,b.default)(t,{order:{$splice:[[r,1]]}}),r=-1),-1!==r)t=(0,b.default)(t,{order:{$splice:[[r,1,{groupId:e.groupId,id:e.id,orderHint:e.orderHint,lastUse:Date.now()}]]}});else{var n=void 0,i=(0,y.default)(t.order,function(t){return t.groupId===e.groupId&&t.orderHint<=e.orderHint});if(-1!==i)n=i+1;else{var o=(0,v.default)(t.order,function(t){return t.groupId===e.groupId});if(-1!==o)n=o;else{var a=(0,k.default)(t.order,function(e){return e.groupId}),s=(0,l.default)(a),u=Math.floor(Math.random()*(s.length+1));n=u===s.length?t.order.length:a[s[u]][0]}}t=(0,b.default)(t,{order:{$splice:[[n,0,{groupId:e.groupId,id:e.id,orderHint:e.orderHint,lastUse:Date.now()}]]}})}return this._save(t),t}},{key:"_sortItemsIfNecessary",value:function(e){if(this._needsSort){e||(e=this._read());var t=(0,k.default)(e.order,i);this._items=(0,S.default)((0,x.default)(this._items,function(e){var r=i(e);return Object.prototype.hasOwnProperty.call(t,r)?Number(t[r][0]):0})),this._needsSort=!1}}},{key:"addItem",value:function(e){this._updatePersistedDataWithItem(e),this._needsSort=!0,this._items=this._items.concat([(0,S.default)({groupId:e.groupId,id:e.id,orderHint:e.orderHint,value:e.value})])}},{key:"updateItemValue",value:function(e,t,r){this._items=(0,S.default)(this._items.map(function(n){return n.groupId===e&&n.id===t?(0,S.default)((0,a.default)({},n,{value:r})):n}))}},{key:"updateItemValueByIndex",value:function(e,t){this._sortItemsIfNecessary(),this._items=(0,S.default)((0,b.default)(this._items,{$splice:[[e,1,(0,S.default)((0,a.default)({},this._items[e],{value:t}))]]}))}},{key:"removeItem",value:function(e,t){this._items=(0,S.default)(this._items.filter(function(r){return r.groupId!==e||r.id!==t}))}},{key:"removeItemByIndex",value:function(e){this._sortItemsIfNecessary(),this._items=(0,S.default)((0,b.default)(this._items,{$splice:[[e,1]]}))}},{key:"moveItem",value:function(e,t){var r=this._read();this._sortItemsIfNecessary(r);var n=this._items[e],i=this._items[t],o=(0,v.default)(r.order,function(e){return e.groupId===n.groupId&&e.id===n.id}),a=(0,v.default)(r.order,function(e){return e.groupId===i.groupId&&e.id===i.id});r=(0,b.default)(r,{order:{$splice:[[o,1],[a,0,r.order[o]]]}}),this._save(r),this._needsSort=!0}},{key:"getOrderedItems",value:function(){return this._sortItemsIfNecessary(),this._items}},{key:"reload",value:function(){this._needsSort=!0}}]),e}();r.default=C,t.exports=r.default},{"./freeze":509,"babel-runtime/core-js/json/stringify":84,"babel-runtime/core-js/object/keys":87,"babel-runtime/helpers/classCallCheck":88,"babel-runtime/helpers/createClass":89,"babel-runtime/helpers/extends":90,"immutability-helper":511,"lodash/findIndex":459,"lodash/findLastIndex":460,"lodash/invertBy":468,"lodash/sortBy":492}],511:[function(e,t,r){function n(e){if(Array.isArray(e))return v(e.constructor(e.length),e);if("Map"===_(e))return new Map(e);if("Set"===_(e))return new Set(e);if(e&&"object"==typeof e){var t=Object.getPrototypeOf(e);return v(Object.create(t),e)}return e}function i(){function e(r,i){"function"==typeof i&&(i={$apply:i}),Array.isArray(r)&&Array.isArray(i)||p(!Array.isArray(i),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),p("object"==typeof i&&null!==i,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(t).join(", "));var o=r;return g(i).forEach(function(a){if(h.call(t,a)){var s=r===o;o=t[a](i[a],o,i,r),s&&e.isEquals(o,r)&&(o=r)}else{var l="Map"===_(r)?e(r.get(a),i[a]):e(r[a],i[a]),u="Map"===_(o)?o.get(a):o[a];e.isEquals(l,u)&&(void 0!==l||h.call(r,a))||(o===r&&(o=n(r)),"Map"===_(o)?o.set(a,l):o[a]=l)}}),o}var t=v({},y);return e.extend=function(e,r){t[e]=r},e.isEquals=function(e,t){return e===t},e}function o(e,t,r){p(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",r,e),a(t[r],r)}function a(e,t){p(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function s(e,t){p(Array.isArray(e),"Expected $splice target to be an array; got %s",e),l(t.$splice)}function l(e){p(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function u(e){p("function"==typeof e,"update(): expected spec of $apply to be a function; got %s.",e)}function c(e){p(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}function d(e,t){p(t&&"object"==typeof t,"update(): $merge expects a spec of type 'object'; got %s",t),p(e&&"object"==typeof e,"update(): $merge expects a target of type 'object'; got %s",e)}function f(e,t){var r=_(e);p("Map"===r||"Set"===r,"update(): %s expects a target of type Set or Map; got %s",t,r)}var p=e("invariant"),h=Object.prototype.hasOwnProperty,m=Array.prototype.splice,b=Object.prototype.toString,_=function(e){return b.call(e).slice(8,-1)},v=Object.assign||function(e,t){return g(t).forEach(function(r){h.call(t,r)&&(e[r]=t[r])}),e},g="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)},y={$push:function(e,t,r){return o(t,r,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,r){return o(t,r,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,i){return s(t,r),e.forEach(function(e){l(e),t===i&&e.length&&(t=n(i)),m.apply(t,e)}),t},$set:function(e,t,r){return c(r),e},$toggle:function(e,t){a(e,"$toggle");var r=e.length?n(t):t;return e.forEach(function(e){r[e]=!t[e]}),r},$unset:function(e,t,r,i){return a(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===i&&(t=n(i)),delete t[e])}),t},$add:function(e,t,r,i){return f(t,"$add"),a(e,"$add"),"Map"===_(t)?e.forEach(function(e){var r=e[0],o=e[1];t===i&&t.get(r)!==o&&(t=n(i)),t.set(r,o)}):e.forEach(function(e){t!==i||t.has(e)||(t=n(i)),t.add(e)}),t},$remove:function(e,t,r,i){return f(t,"$remove"),a(e,"$remove"),e.forEach(function(e){t===i&&t.has(e)&&(t=n(i)),t.delete(e)}),t},$merge:function(e,t,r,i){return d(t,e),g(e).forEach(function(r){e[r]!==t[r]&&(t===i&&(t=n(i)),t[r]=e[r])}),t},$apply:function(e,t){return u(e),e(t)}},w=i();t.exports=w,t.exports.default=w,t.exports.newContext=i},{invariant:296}],512:[function(e,t,r){"use strict";function n(e){return function(t){return(0,o.default)(t,e)}}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("matches-selector-ng"));t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/interopRequireDefault":67,"matches-selector-ng":507}],513:[function(e,t,r){"use strict";function n(e,t){return t.map(function(t){if("string"==typeof t){var r=(0,u.default)(t);return function(e){return(0,d.default)(e,r)}}if(t.$or){var i=t.$or.map(function(t){return n(e,t)});return function(e){return(0,l.default)(i.map(function(t){return t(e)}))}}if(t.$watch){var f=t.$watch,p=f.attributeFilter,h=f.cond,m="function"==typeof h?h:(0,u.default)(h);return function(e){return(0,c.default)(e,p,m)}}if(t.$log){var b=t.$log,_=function(e){return console.log(b,e.el),!0};return function(e){return(0,s.default)(e,_)}}if(t.$filter){var v=t.$filter,g=function(e){var t=e.el;return v(t)};return function(e){return(0,s.default)(e,g)}}if(t.$map){var y=t.$map,w=o.default.compose(o.default.map(function(e){return{el:y(e.el),parents:e.parents}}),o.default.filter(function(e){return null!=e.el}));return function(e){return(0,a.default)(e,w)}}throw new Error("Invalid selector item: ".concat(JSON.stringify(t)))}).reduce(function(e,t){return function(r){return t(e(r))}},function(e){return e})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("transducers.js")),a=i(e("live-set/transduce")),s=i(e("live-set/filter")),l=i(e("live-set/merge")),u=i(e("./createCssFn")),c=i(e("./watchMutations")),d=i(e("./watchFilteredChildren"));t.exports=r.default,t.exports.default=r.default},{"./createCssFn":512,"./watchFilteredChildren":514,"./watchMutations":515,"@babel/runtime/helpers/interopRequireDefault":67,"live-set/filter":303,"live-set/merge":308,"live-set/transduce":312,"transducers.js":595}],514:[function(e,t,r){"use strict";function n(e,t){return new o.default({scheduler:e.getScheduler(),read:function(){throw new Error},listen:function(r,n){function i(e){function r(r){if(1===r.nodeType&&t(r)){var i={el:r,parents:e.parents};s.set(r,i),n.add(i)}}function i(e){if(1===e.nodeType){var t=s.get(e);t&&(s.delete(e),n.remove(t))}}function o(e){if(e.length>1){var t=new Set,n=[];e.forEach(function(e){for(var r=e.addedNodes,i=e.removedNodes,o=0,a=i.length;o<a;o++){1===i[o].nodeType&&t.add(i[o])}for(var s=0,l=r.length;s<l;s++){var u=r[s];1===u.nodeType&&(t.has(u)?t.delete(u):n.push(u))}}),n.forEach(r),t.forEach(i)}else e.forEach(function(e){Array.prototype.forEach.call(e.addedNodes,r),Array.prototype.forEach.call(e.removedNodes,i)})}Array.prototype.forEach.call(e.el.children,r);var l=new MutationObserver(o);l.observe(e.el,{childList:!0}),a.set(e,{observer:l,removedNode:i})}function o(e){var t=a.get(e);if(!t)throw new Error("Should not happen: Unseen ElementContext removed");t.observer.takeRecords().forEach(function(e){Array.prototype.forEach.call(e.removedNodes,t.removedNode)}),t.observer.disconnect(),Array.prototype.forEach.call(e.el.children,t.removedNode),a.delete(e)}r(new Set);var a=new Map,s=new Map,l=e.subscribe({start:function(){e.values().forEach(i)},next:function(e){e.forEach(function(e){"add"===e.type?i(e.value):"remove"===e.type&&o(e.value)})}});return{unsubscribe:function(){l.unsubscribe(),a.forEach(function(e){e.observer.disconnect()})},pullChanges:function(){l.pullChanges()}}}})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("live-set"));t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/interopRequireDefault":67,"live-set":306}],515:[function(e,t,r){"use strict";function n(e,t,r){return new o.default({scheduler:e.getScheduler(),read:function(){throw new Error},listen:function(n,i){function o(e){var n=new MutationObserver(function(t){0!==t.length&&(r(e.el)?o.passed||(o.passed=!0,i.add(e)):o.passed&&(o.passed=!1,i.remove(e)))}),o={mo:n,passed:!1};r(e.el)&&(o.passed=!0,i.add(e)),n.observe(e.el,{attributes:!0,attributeFilter:t}),s.set(e,o)}function a(e){var t=s.get(e);if(!t)throw new Error("Should not happen: Unseen ElementContext removed");t.mo.disconnect(),t.passed&&i.remove(e),s.delete(e)}n(new Set);var s=new Map,l=e.subscribe({start:function(){e.values().forEach(o)},next:function(e){e.forEach(function(e){"add"===e.type?o(e.value):"remove"===e.type&&a(e.value)})}});return{unsubscribe:function(){l.unsubscribe(),s.forEach(function(e){e.mo.disconnect()})},pullChanges:function(){l.pullChanges()}}}})}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=i(e("live-set"));t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/interopRequireDefault":67,"live-set":306}],516:[function(e,t,r){"use strict";function n(e){var t=new Map,r=[];return Object.keys(e.tags).forEach(function(n){var i=e.tags[n],o=i.ownedBy;r.push({tag:n,ownedBy:o}),t.set(n,i)}),Object.keys(e.finders).concat(e.watchers.map(function(e){return e.tag})).forEach(function(e){t.has(e)||(t.set(e,{ownedBy:[]}),r.push({tag:e}))}),{map:t,list:r}}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/defineProperty")),l=i(e("live-set")),u=i(e("live-set/merge")),c=i(e("live-set/flatMapR")),d=i(e("live-set/Scheduler")),f=e("tag-tree"),p=i(e("./watcherFinderMerger")),h=i(e("./createTransformer")),m=function(){function e(t,r){var i=this;(0,o.default)(this,e),(0,s.default)(this,"tree",void 0),(0,s.default)(this,"_scheduler",new d.default),(0,s.default)(this,"_treeController",void 0),(0,s.default)(this,"_rootMatchedSet",void 0),(0,s.default)(this,"_ecSources",void 0),(0,s.default)(this,"_logError",void 0),(0,s.default)(this,"_options",void 0),(0,s.default)(this,"_tagOptions",void 0),(0,s.default)(this,"_tagsList",void 0),(0,s.default)(this,"_subscriptions",[]);var a;if(t.nodeType===Node.DOCUMENT_NODE){if(!(a=t.documentElement))throw new Error("missing documentElement")}else a=t;this._options=r,this._logError=r.logError||function(e){setTimeout(function(){throw e},0)};var u=n(this._options),c=u.map,p=u.list;this._tagOptions=c,this._tagsList=p,this.tree=new f.TagTree({root:a,tags:p,executor:function(e){i._treeController=e}}),this._rootMatchedSet=l.default.constant(new Set([{el:this.tree.getValue(),parents:[{tag:null,node:this.tree}]}]),{scheduler:this._scheduler}),this._setupWatchersAndFinders()}return(0,a.default)(e,[{key:"_setupWatchersAndFinders",value:function(){var e=this,t=new Set;this._options.watchers.forEach(function(e){t.add(e.tag)}),this._ecSources=new Map(this._tagsList.map(function(r){function n(e){for(var t,r=e.length-1;r>=0;r--)if(null==e[r].tag||a.has(e[r].tag)){t=e[r].node;break}if(!t)throw new Error;return t}var i=r.tag,o=e._tagOptions.get(i);if(!o)throw new Error;var a=new Set(o.ownedBy||[]),s=l.default.active(null,{scheduler:e._scheduler}),u=s.liveSet,d=s.controller,f=t.has(i)?(0,c.default)(u,function(e){return e}):null,h=e._options.finders[i],m=h?(0,p.default)(e._scheduler,e.tree,i,o,f,h,e._logError):f||l.default.constant(new Set,{scheduler:e._scheduler}),b=new Map,_=new l.default({scheduler:e._scheduler,read:function(){throw new Error},listen:function(t,r){var o=new Map,a=function(t){var r=t.el,o=t.parents,a=n(o),s=e._treeController.addTaggedValue(a,i,r);return b.has(r)&&e._logError(new Error("PageParserTree(".concat(i,") watcher received element twice")),r),b.set(r,s),{el:r,parents:t.parents.concat([{tag:i,node:s}])}};return m.subscribe({start:function(){var e=new Set;m.values().forEach(function(t){var r=a(t);o.set(t,r),e.add(r)}),t(e)},next:function(t){var n=new Set;t.length>1&&t.forEach(function(e){"remove"===e.type&&n.add(e.value)}),t.forEach(function(t){if("add"===t.type){if(n.has(t.value))return;var s=a(t.value);o.set(t.value,s),r.add(s)}else if("remove"===t.type){var l=o.get(t.value);if(!l)return;o.delete(t.value),r.remove(l);var u=b.get(l.el);if(!u)throw new Error("Should not happen: received removal of unseen element");b.delete(l.el);var c=u.getParent();c&&c.ownsNode(u)&&e._treeController.removeTaggedNode(c,i,u)}})},error:function(e){r.error(e)},complete:function(){r.end()}})}});return e._subscriptions.push(_.subscribe({})),[i,{liveSet:u,controller:d,ecSet:_}]})),this._options.watchers.forEach(function(t){var r=t.sources,n=t.selectors,i=t.tag,o=r.map(function(t){if(!t)return e._rootMatchedSet;var r=e._ecSources.get(t);if(!r)throw new Error("Unknown source: "+t);return r.ecSet}),a=1===o.length?o[0]:(0,u.default)(o),s=(0,h.default)(e._scheduler,n),l=e._ecSources.get(i);if(!l)throw new Error;l.controller.add(s(a))}),this._scheduler.flush()}},{key:"_dumpWithoutEnd",value:function(){var e=this;this._subscriptions.forEach(function(e){e.unsubscribe()}),this._subscriptions.length=0,this.tree.getOwned().forEach(function(t,r){t.values().forEach(function(t){e._treeController.removeTaggedNode(e.tree,r,t)})})}},{key:"dump",value:function(){this._dumpWithoutEnd(),this._treeController.end()}},{key:"replaceOptions",value:function(e){var t="replaceOptions does not support tag changes",r=n(e),i=r.map;if(this._tagOptions.size!==i.size)throw new Error(t);this._tagOptions.forEach(function(e,r){var n=i.get(r);if(!n)throw new Error(t);var o=e.ownedBy||[],a=new Set(n.ownedBy||[]);if(o.length!==a.size)throw new Error(t);o.forEach(function(e){if(!a.has(e))throw new Error(t)})}),this._dumpWithoutEnd(),this._options=e,this._setupWatchersAndFinders()}}]),e}();r.default=m,t.exports=r.default,t.exports.default=r.default},{"./createTransformer":513,"./watcherFinderMerger":517,"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/interopRequireDefault":67,"live-set":306,"live-set/Scheduler":302,"live-set/flatMapR":305,"live-set/merge":308,"tag-tree":594}],517:[function(e,t,r){(function(n){"use strict";function i(e,t,r,n,i,s,l){return new u.default({scheduler:e,read:function(){throw new Error("Should not happen")},listen:function(u,c){var d=new Set,f=new Set,p=new Set,h=new Set,m=null;i?m=i.subscribe({start:function(){if(!i)throw new Error;var e=i.values();u(e),e.forEach(function(e){p.add(e.el),d.add(e.el),f.add(e)})},next:function(e){e.forEach(function(e){if("add"===e.type){var t=e.value.el;p.add(t),d.has(t)?l(new Error("PageParserTree(".concat(r,") watcher found element already found by finder")),t):(d.add(t),f.add(e.value),c.add(e.value))}else if("remove"===e.type){var n=e.value.el;p.delete(n),h.delete(n),f.has(e.value)&&(d.delete(n),f.delete(e.value),c.remove(e.value))}})},error:function(e){c.error(e)},complete:function(){c.end()}}):u(new Set);var b=null;if(s){var _=s.fn,v=s.interval,g=n.ownedBy||[];b=o(v,d,function(){for(var n=new Set,o=_(t.getValue()),s=0,u=o.length;s<u;s++){var b=o[s];if(n.add(b),!d.has(b)){d.add(b);var v=a(b,t,g);f.add(v),c.add(v),i&&(l(new Error("PageParserTree(".concat(r,") finder found element missed by watcher")),b),m&&m.pullChanges())}}f.forEach(function(e){var t=e.el;n.has(t)||(p.has(t)?h.has(t)||(h.add(t),l(new Error("PageParserTree(".concat(r,") watcher found element missed by finder")),t)):(f.delete(e),d.delete(t),c.remove(e),m&&m.pullChanges()))}),e.flush()})}return{unsubscribe:function(){null!=b&&b.dispose(),m&&m.unsubscribe()},pullChanges:function(){m&&m.pullChanges()}}}})}function o(e,t,r){var i=Date.now(),o=null,a=null,s=function(){a=null,r(),u()},u=function(){var r;if(null==e)r=5e3+1e3*Math.random();else if("number"==typeof e)r=e;else{if("function"!=typeof e)throw new Error("interval has wrong type: ".concat((0,l.default)(e)));r=e(t.size,Date.now()-i)}r!==1/0&&(o=setTimeout(function(){o=null,n.requestIdleCallback&&n.cancelIdleCallback?a=n.requestIdleCallback(s,{timeout:r}):s()},r))};return u(),{dispose:function(){null!=o&&clearTimeout(o),null!=a&&n.cancelIdleCallback(a)}}}function a(e,t,r){var n=null;return{el:e,get parents(){if(!n){for(var i=t.getValue(),o=[],a=e.parentElement;a;){for(var s=t.getNodesForValue(a),l=0,u=s.length;l<u;l++){var c=s[l],d=c.getTag();if(null==d||r.indexOf(d)>=0){o.push({tag:d,node:c});break}}if(a===i)break;a=a.parentElement}o.reverse(),n=o}return n}}}var s=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var l=s(e("@babel/runtime/helpers/typeof")),u=s(e("live-set"));t.exports=r.default,t.exports.default=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime/helpers/interopRequireDefault":67,"@babel/runtime/helpers/typeof":75,"live-set":306}],518:[function(e,t,r){"use strict";function n(e,t){return new Promise(function(r){setTimeout(function(){r(t)},e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],519:[function(e,t,r){(function(e){(function(){var r,n,i,o,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-a)/1e6},n=e.hrtime,r=function(){var e;return e=n(),1e9*e[0]+e[1]},o=r(),s=1e9*e.uptime(),a=o-s):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:541}],520:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./processor"),o=n(i),a=e("./selectors/attribute"),s=n(a),l=e("./selectors/className"),u=n(l),c=e("./selectors/combinator"),d=n(c),f=e("./selectors/comment"),p=n(f),h=e("./selectors/id"),m=n(h),b=e("./selectors/nesting"),_=n(b),v=e("./selectors/pseudo"),g=n(v),y=e("./selectors/root"),w=n(y),k=e("./selectors/selector"),j=n(k),x=e("./selectors/string"),E=n(x),S=e("./selectors/tag"),C=n(S),I=e("./selectors/universal"),T=n(I),A=e("./selectors/types"),D=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(A),M=function(e){return new o.default(e)};M.attribute=function(e){return new s.default(e)},M.className=function(e){return new u.default(e)},M.combinator=function(e){return new d.default(e)},M.comment=function(e){return new p.default(e)},M.id=function(e){return new m.default(e)},M.nesting=function(e){return new _.default(e)},M.pseudo=function(e){return new g.default(e)},M.root=function(e){return new w.default(e)},M.selector=function(e){return new j.default(e)},M.string=function(e){return new E.default(e)},M.tag=function(e){return new C.default(e)},M.universal=function(e){return new T.default(e)},Object.keys(D).forEach(function(e){"__esModule"!==e&&(M[e]=D[e])}),r.default=M,t.exports=r.default},{"./processor":522,"./selectors/attribute":523,"./selectors/className":524,"./selectors/combinator":525,"./selectors/comment":526,"./selectors/id":528,"./selectors/nesting":530,"./selectors/pseudo":532,"./selectors/root":533,"./selectors/selector":534,"./selectors/string":535,"./selectors/tag":536,"./selectors/types":537,"./selectors/universal":538}],521:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("flatten"),s=n(a),l=e("indexes-of"),u=n(l),c=e("uniq"),d=n(c),f=e("./selectors/root"),p=n(f),h=e("./selectors/selector"),m=n(h),b=e("./selectors/className"),_=n(b),v=e("./selectors/comment"),g=n(v),y=e("./selectors/id"),w=n(y),k=e("./selectors/tag"),j=n(k),x=e("./selectors/string"),E=n(x),S=e("./selectors/pseudo"),C=n(S),I=e("./selectors/attribute"),T=n(I),A=e("./selectors/universal"),D=n(A),M=e("./selectors/combinator"),R=n(M),L=e("./selectors/nesting"),O=n(L),P=e("./sortAscending"),V=n(P),N=e("./tokenize"),B=n(N),q=e("./selectors/types"),U=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(q),F=function(){function e(t){i(this,e),this.input=t,this.lossy=!1===t.options.lossless,this.position=0,this.root=new p.default;var r=new m.default;return this.root.append(r),this.current=r,this.lossy?this.tokens=(0,B.default)({safe:t.safe,css:t.css.trim()}):this.tokens=(0,B.default)(t),this.loop()}return e.prototype.attribute=function(){var e="",t=void 0,r=this.currToken;for(this.position++;this.position<this.tokens.length&&"]"!==this.currToken[0];)e+=this.tokens[this.position][1],this.position++;this.position!==this.tokens.length||~e.indexOf("]")||this.error("Expected a closing square bracket.");var n=e.split(/((?:[*~^$|]?=))([^]*)/),i=n[0].split(/(\|)/g),o={operator:n[1],value:n[2],source:{start:{line:r[2],column:r[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:r[4]};if(i.length>1?(""===i[0]&&(i[0]=!0),o.attribute=this.parseValue(i[2]),o.namespace=this.parseNamespace(i[0])):o.attribute=this.parseValue(n[0]),t=new T.default(o),n[2]){var a=n[2].split(/(\s+i\s*?)$/),s=a[0].trim();t.value=this.lossy?s:a[0],a[1]&&(t.insensitive=!0,this.lossy||(t.raws.insensitive=a[1])),t.quoted="'"===s[0]||'"'===s[0],t.raws.unquoted=t.quoted?s.slice(1,-1):s}this.newNode(t),this.position++},e.prototype.combinator=function(){if("|"===this.currToken[1])return this.namespace();for(var e=new R.default({value:"",source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]});this.position<this.tokens.length&&this.currToken&&("space"===this.currToken[0]||"combinator"===this.currToken[0]);)this.nextToken&&"combinator"===this.nextToken[0]?(e.spaces.before=this.parseSpace(this.currToken[1]),e.source.start.line=this.nextToken[2],e.source.start.column=this.nextToken[3],e.source.end.column=this.nextToken[3],e.source.end.line=this.nextToken[2],e.sourceIndex=this.nextToken[4]):this.prevToken&&"combinator"===this.prevToken[0]?e.spaces.after=this.parseSpace(this.currToken[1]):"combinator"===this.currToken[0]?e.value=this.currToken[1]:"space"===this.currToken[0]&&(e.value=this.parseSpace(this.currToken[1]," ")),this.position++;return this.newNode(e)},e.prototype.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;var e=new m.default;this.current.parent.append(e),
this.current=e,this.position++},e.prototype.comment=function(){var e=new g.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[4],column:this.currToken[5]}},sourceIndex:this.currToken[6]});this.newNode(e),this.position++},e.prototype.error=function(e){throw new this.input.error(e)},e.prototype.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.")},e.prototype.missingParenthesis=function(){return this.error("Expected opening parenthesis.")},e.prototype.missingSquareBracket=function(){return this.error("Expected opening square bracket.")},e.prototype.namespace=function(){var e=this.prevToken&&this.prevToken[1]||!0;return"word"===this.nextToken[0]?(this.position++,this.word(e)):"*"===this.nextToken[0]?(this.position++,this.universal(e)):void 0},e.prototype.nesting=function(){this.newNode(new O.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]})),this.position++},e.prototype.parentheses=function(){var e=this.current.last;if(e&&e.type===U.PSEUDO){var t=new m.default,r=this.current;e.append(t),this.current=t;var n=1;for(this.position++;this.position<this.tokens.length&&n;)"("===this.currToken[0]&&n++,")"===this.currToken[0]&&n--,n?this.parse():(t.parent.source.end.line=this.currToken[2],t.parent.source.end.column=this.currToken[3],this.position++);n&&this.error("Expected closing parenthesis."),this.current=r}else{var i=1;for(this.position++,e.value+="(";this.position<this.tokens.length&&i;)"("===this.currToken[0]&&i++,")"===this.currToken[0]&&i--,e.value+=this.parseParenthesisToken(this.currToken),this.position++;i&&this.error("Expected closing parenthesis.")}},e.prototype.pseudo=function(){for(var e=this,t="",r=this.currToken;this.currToken&&":"===this.currToken[0];)t+=this.currToken[1],this.position++;if(!this.currToken)return this.error("Expected pseudo-class or pseudo-element");if("word"===this.currToken[0]){var n=void 0;this.splitWord(!1,function(i,o){t+=i,n=new C.default({value:t,source:{start:{line:r[2],column:r[3]},end:{line:e.currToken[4],column:e.currToken[5]}},sourceIndex:r[4]}),e.newNode(n),o>1&&e.nextToken&&"("===e.nextToken[0]&&e.error("Misplaced parenthesis.")})}else this.error('Unexpected "'+this.currToken[0]+'" found.')},e.prototype.space=function(){var e=this.currToken;0===this.position||","===this.prevToken[0]||"("===this.prevToken[0]?(this.spaces=this.parseSpace(e[1]),this.position++):this.position===this.tokens.length-1||","===this.nextToken[0]||")"===this.nextToken[0]?(this.current.last.spaces.after=this.parseSpace(e[1]),this.position++):this.combinator()},e.prototype.string=function(){var e=this.currToken;this.newNode(new E.default({value:this.currToken[1],source:{start:{line:e[2],column:e[3]},end:{line:e[4],column:e[5]}},sourceIndex:e[6]})),this.position++},e.prototype.universal=function(e){var t=this.nextToken;if(t&&"|"===t[1])return this.position++,this.namespace();this.newNode(new D.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]}),e),this.position++},e.prototype.splitWord=function(e,t){for(var r=this,n=this.nextToken,i=this.currToken[1];n&&"word"===n[0];){this.position++;var o=this.currToken[1];if(i+=o,o.lastIndexOf("\\")===o.length-1){var a=this.nextToken;a&&"space"===a[0]&&(i+=this.parseSpace(a[1]," "),this.position++)}n=this.nextToken}var l=(0,u.default)(i,"."),c=(0,u.default)(i,"#"),f=(0,u.default)(i,"#{");f.length&&(c=c.filter(function(e){return!~f.indexOf(e)}));var p=(0,V.default)((0,d.default)((0,s.default)([[0],l,c])));p.forEach(function(n,o){var a=p[o+1]||i.length,s=i.slice(n,a);if(0===o&&t)return t.call(r,s,p.length);var u=void 0;u=~l.indexOf(n)?new _.default({value:s.slice(1),source:{start:{line:r.currToken[2],column:r.currToken[3]+n},end:{line:r.currToken[4],column:r.currToken[3]+(a-1)}},sourceIndex:r.currToken[6]+p[o]}):~c.indexOf(n)?new w.default({value:s.slice(1),source:{start:{line:r.currToken[2],column:r.currToken[3]+n},end:{line:r.currToken[4],column:r.currToken[3]+(a-1)}},sourceIndex:r.currToken[6]+p[o]}):new j.default({value:s,source:{start:{line:r.currToken[2],column:r.currToken[3]+n},end:{line:r.currToken[4],column:r.currToken[3]+(a-1)}},sourceIndex:r.currToken[6]+p[o]}),r.newNode(u,e)}),this.position++},e.prototype.word=function(e){var t=this.nextToken;return t&&"|"===t[1]?(this.position++,this.namespace()):this.splitWord(e)},e.prototype.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.root},e.prototype.parse=function(e){switch(this.currToken[0]){case"space":this.space();break;case"comment":this.comment();break;case"(":this.parentheses();break;case")":e&&this.missingParenthesis();break;case"[":this.attribute();break;case"]":this.missingSquareBracket();break;case"at-word":case"word":this.word();break;case":":this.pseudo();break;case";":this.missingBackslash();break;case",":this.comma();break;case"*":this.universal();break;case"&":this.nesting();break;case"combinator":this.combinator();break;case"string":this.string()}},e.prototype.parseNamespace=function(e){if(this.lossy&&"string"==typeof e){var t=e.trim();return!t.length||t}return e},e.prototype.parseSpace=function(e,t){return this.lossy?t||"":e},e.prototype.parseValue=function(e){return this.lossy&&e&&"string"==typeof e?e.trim():e},e.prototype.parseParenthesisToken=function(e){return this.lossy?"space"===e[0]?this.parseSpace(e[1]," "):this.parseValue(e[1]):e[1]},e.prototype.newNode=function(e,t){return t&&(e.namespace=this.parseNamespace(t)),this.spaces&&(e.spaces.before=this.spaces,this.spaces=""),this.current.append(e)},o(e,[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}]),e}();r.default=F,t.exports=r.default},{"./selectors/attribute":523,"./selectors/className":524,"./selectors/combinator":525,"./selectors/comment":526,"./selectors/id":528,"./selectors/nesting":530,"./selectors/pseudo":532,"./selectors/root":533,"./selectors/selector":534,"./selectors/string":535,"./selectors/tag":536,"./selectors/types":537,"./selectors/universal":538,"./sortAscending":539,"./tokenize":540,flatten:291,"indexes-of":294,uniq:598}],522:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./parser"),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){return n(this,e),this.func=t||function(){},this}return e.prototype.process=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new a.default({css:e,error:function(e){throw new Error(e)},options:t});return this.res=r,this.func(r),this},i(e,[{key:"result",get:function(){return String(this.res)}}]),e}();r.default=s,t.exports=r.default},{"./parser":521}],523:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.ATTRIBUTE,o.raws={},o}return o(t,e),t.prototype.toString=function(){var e=[this.spaces.before,"[",this.ns,this.attribute];return this.operator&&e.push(this.operator),this.value&&e.push(this.value),this.raws.insensitive?e.push(this.raws.insensitive):this.insensitive&&e.push(" i"),e.push("]"),e.concat(this.spaces.after).join("")},t}(s.default);r.default=u,t.exports=r.default},{"./namespace":529,"./types":537}],524:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.CLASS,o}return o(t,e),t.prototype.toString=function(){return[this.spaces.before,this.ns,String("."+this.value),this.spaces.after].join("")},t}(s.default);r.default=u,t.exports=r.default},{"./namespace":529,"./types":537}],525:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./node"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.COMBINATOR,o}return o(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./node":531,"./types":537}],526:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./node"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.COMMENT,o}return o(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./node":531,"./types":537}],527:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./node"),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=e("./types"),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),d=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.nodes||(o.nodes=[]),o}return o(t,e),t.prototype.append=function(e){return e.parent=this,this.nodes.push(e),this},t.prototype.prepend=function(e){return e.parent=this,this.nodes.unshift(e),this},t.prototype.at=function(e){return this.nodes[e]},t.prototype.index=function(e){return"number"==typeof e?e:this.nodes.indexOf(e)},t.prototype.removeChild=function(e){e=this.index(e),this.at(e).parent=void 0,this.nodes.splice(e,1);var t=void 0;for(var r in this.indexes)(t=this.indexes[r])>=e&&(this.indexes[r]=t-1);return this},t.prototype.removeAll=function(){for(var e=this.nodes,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if(r=e.next(),r.done)break;n=r.value}n.parent=void 0}return this.nodes=[],this},t.prototype.empty=function(){return this.removeAll()},t.prototype.insertAfter=function(e,t){var r=this.index(e);this.nodes.splice(r+1,0,t);var n=void 0;for(var i in this.indexes)n=this.indexes[i],r<=n&&(this.indexes[i]=n+this.nodes.length);return this},t.prototype.insertBefore=function(e,t){var r=this.index(e);this.nodes.splice(r,0,t);var n=void 0;for(var i in this.indexes)n=this.indexes[i],r<=n&&(this.indexes[i]=n+this.nodes.length);return this},t.prototype.each=function(e){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var t=this.lastEach;if(this.indexes[t]=0,this.length){for(var r=void 0,n=void 0;this.indexes[t]<this.length&&(r=this.indexes[t],!1!==(n=e(this.at(r),r)));)this.indexes[t]+=1;return delete this.indexes[t],!1!==n&&void 0}},t.prototype.walk=function(e){return this.each(function(t,r){var n=e(t,r);if(!1!==n&&t.length&&(n=t.walk(e)),!1===n)return!1})},t.prototype.walkAttributes=function(e){var t=this;return this.walk(function(r){if(r.type===c.ATTRIBUTE)return e.call(t,r)})},t.prototype.walkClasses=function(e){var t=this;return this.walk(function(r){if(r.type===c.CLASS)return e.call(t,r)})},t.prototype.walkCombinators=function(e){var t=this;return this.walk(function(r){if(r.type===c.COMBINATOR)return e.call(t,r)})},t.prototype.walkComments=function(e){var t=this;return this.walk(function(r){if(r.type===c.COMMENT)return e.call(t,r)})},t.prototype.walkIds=function(e){var t=this;return this.walk(function(r){if(r.type===c.ID)return e.call(t,r)})},t.prototype.walkNesting=function(e){var t=this;return this.walk(function(r){if(r.type===c.NESTING)return e.call(t,r)})},t.prototype.walkPseudos=function(e){var t=this;return this.walk(function(r){if(r.type===c.PSEUDO)return e.call(t,r)})},t.prototype.walkTags=function(e){var t=this;return this.walk(function(r){if(r.type===c.TAG)return e.call(t,r)})},t.prototype.walkUniversals=function(e){var t=this;return this.walk(function(r){if(r.type===c.UNIVERSAL)return e.call(t,r)})},t.prototype.split=function(e){var t=this,r=[];return this.reduce(function(n,i,o){var a=e.call(t,i);return r.push(i),a?(n.push(r),r=[]):o===t.length-1&&n.push(r),n},[])},t.prototype.map=function(e){return this.nodes.map(e)},t.prototype.reduce=function(e,t){return this.nodes.reduce(e,t)},t.prototype.every=function(e){return this.nodes.every(e)},t.prototype.some=function(e){return this.nodes.some(e)},t.prototype.filter=function(e){return this.nodes.filter(e)},t.prototype.sort=function(e){return this.nodes.sort(e)},t.prototype.toString=function(){return this.map(String).join("")},a(t,[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}]),t}(l.default);r.default=d,t.exports=r.default},{"./node":531,"./types":537}],528:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.ID,o}return o(t,e),t.prototype.toString=function(){return[this.spaces.before,this.ns,String("#"+this.value),this.spaces.after].join("")},t}(s.default);r.default=u,t.exports=r.default},{"./namespace":529,"./types":537}],529:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./node"),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return n(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.toString=function(){return[this.spaces.before,this.ns,String(this.value),this.spaces.after].join("")},a(t,[{key:"ns",get:function(){var e=this.namespace;return e?("string"==typeof e?e:"")+"|":""}}]),t}(l.default);r.default=u,t.exports=r.default},{"./node":531}],530:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./node"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.NESTING,o.value="&",o}return o(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./node":531,"./types":537}],531:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function e(t,r){if("object"!==(void 0===t?"undefined":i(t)))return t;var n=new t.constructor;for(var o in t)if(t.hasOwnProperty(o)){var a=t[o],s=void 0===a?"undefined":i(a);"parent"===o&&"object"===s?r&&(n[o]=r):a instanceof Array?n[o]=a.map(function(t){return e(t,n)}):n[o]=e(a,n)}return n},a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e);for(var r in t)this[r]=t[r];var i=t.spaces;i=void 0===i?{}:i;var o=i.before,a=void 0===o?"":o,s=i.after,l=void 0===s?"":s;this.spaces={before:a,after:l}}return e.prototype.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.prototype.replaceWith=function(){if(this.parent){for(var e in arguments)this.parent.insertBefore(this,arguments[e]);this.remove()}return this},e.prototype.next=function(){return this.parent.at(this.parent.index(this)+1)},e.prototype.prev=function(){return this.parent.at(this.parent.index(this)-1)},e.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o(this);for(var r in e)t[r]=e[r];return t},e.prototype.toString=function(){return[this.spaces.before,String(this.value),this.spaces.after].join("")},e}();r.default=a,t.exports=r.default},{}],532:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./container"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.PSEUDO,o}return o(t,e),t.prototype.toString=function(){var e=this.length?"("+this.map(String).join(",")+")":"";return[this.spaces.before,String(this.value),e,this.spaces.after].join("")},t}(s.default);r.default=u,t.exports=r.default},{"./container":527,"./types":537}],533:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./container"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.ROOT,o}return o(t,e),t.prototype.toString=function(){var e=this.reduce(function(e,t){var r=String(t);return r?e+r+",":""},"").slice(0,-1);return this.trailingComma?e+",":e},t}(s.default);r.default=u,t.exports=r.default},{"./container":527,"./types":537}],534:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./container"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.SELECTOR,o}return o(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./container":527,"./types":537}],535:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./node"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.STRING,o}return o(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./node":531,"./types":537}],536:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.TAG,o}return o(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./namespace":529,"./types":537}],537:[function(e,t,r){"use strict";r.__esModule=!0;r.TAG="tag",r.STRING="string",r.SELECTOR="selector",r.ROOT="root",r.PSEUDO="pseudo",r.NESTING="nesting",r.ID="id",r.COMMENT="comment",r.COMBINATOR="combinator",r.CLASS="class",r.ATTRIBUTE="attribute",r.UNIVERSAL="universal"},{}],538:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.type=l.UNIVERSAL,o.value="*",o}return o(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./namespace":529,"./types":537}],539:[function(e,t,r){"use strict";function n(e){return e.sort(function(e,t){return e-t})}r.__esModule=!0,r.default=n,t.exports=r.default},{}],540:[function(e,t,r){"use strict";function n(e){for(var t=[],r=e.css.valueOf(),n=void 0,T=void 0,A=void 0,D=void 0,M=void 0,R=void 0,L=void 0,O=void 0,P=void 0,V=void 0,N=void 0,B=r.length,q=-1,U=1,F=0,H=function(t,n){if(!e.safe)throw e.error("Unclosed "+t,U,F-q,F);r+=n,T=r.length-1};F<B;){switch(n=r.charCodeAt(F),n===l&&(q=F,U+=1),n){case l:case u:case d:case f:case c:T=F;do{T+=1,(n=r.charCodeAt(T))===l&&(q=T,U+=1)}while(n===u||n===l||n===d||n===f||n===c);t.push(["space",r.slice(F,T),U,F-q,F]),F=T-1;break;case p:case h:case m:case b:T=F;do{T+=1,n=r.charCodeAt(T)}while(n===p||n===h||n===m||n===b);t.push(["combinator",r.slice(F,T),U,F-q,F]),F=T-1;break;case j:t.push(["*","*",U,F-q,F]);break;case E:t.push(["&","&",U,F-q,F]);break;case _:t.push([",",",",U,F-q,F]);break;case y:t.push(["[","[",U,F-q,F]);break;case w:t.push(["]","]",U,F-q,F]);break;case x:t.push([":",":",U,F-q,F]);break;case k:t.push([";",";",U,F-q,F]);break;case v:t.push(["(","(",U,F-q,F]);break;case g:t.push([")",")",U,F-q,F]);break;case i:case o:A=n===i?"'":'"',T=F;do{for(V=!1,T=r.indexOf(A,T+1),-1===T&&H("quote",A),N=T;r.charCodeAt(N-1)===a;)N-=1,V=!V}while(V);t.push(["string",r.slice(F,T+1),U,F-q,U,T-q,F]),F=T;break;case S:C.lastIndex=F+1,C.test(r),T=0===C.lastIndex?r.length-1:C.lastIndex-2,t.push(["at-word",r.slice(F,T+1),U,F-q,U,T-q,F]),F=T;break;case a:for(T=F,L=!0;r.charCodeAt(T+1)===a;)T+=1,L=!L;n=r.charCodeAt(T+1),L&&n!==s&&n!==u&&n!==l&&n!==d&&n!==f&&n!==c&&(T+=1),t.push(["word",r.slice(F,T+1),U,F-q,U,T-q,F]),F=T;break;default:n===s&&r.charCodeAt(F+1)===j?(T=r.indexOf("*/",F+2)+1,0===T&&H("comment","*/"),R=r.slice(F,T+1),D=R.split("\n"),M=D.length-1,M>0?(O=U+M,P=T-D[M].length):(O=U,P=q),t.push(["comment",R,U,F-q,O,T-P,F]),q=P,U=O,F=T):(I.lastIndex=F+1,I.test(r),T=0===I.lastIndex?r.length-1:I.lastIndex-2,t.push(["word",r.slice(F,T+1),U,F-q,U,T-q,F]),F=T)}F++}return t}r.__esModule=!0,r.default=n;var i=39,o=34,a=92,s=47,l=10,u=32,c=12,d=9,f=13,p=43,h=62,m=126,b=124,_=44,v=40,g=41,y=91,w=93,k=59,j=42,x=58,E=38,S=64,C=/[ \n\t\r\{\(\)'"\\;\/]/g,I=/[ \n\t\r\(\)\*:;@!&'"\+\|~>,\[\]\\]|\/(?=\*)/g;t.exports=r.default},{}],541:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){b&&h&&(b=!1,h.length?m=h.concat(m):_=-1,m.length&&l())}function l(){if(!b){var e=o(s);b=!0;for(var t=m.length;t;){for(h=m,m=[];++_<t;)h&&h[_].run();_=-1,t=m.length}h=null,b=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var d,f,p=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var h,m=[],b=!1,_=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new u(e,t)),1!==m.length||b||o(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],542:[function(e,t,r){"use strict";function n(e,t,r,n,i){}n.resetWarningCache=function(){},t.exports=n},{"./lib/ReactPropTypesSecret":546}],543:[function(e,t,r){"use strict";function n(){}function i(){}var o=e("./lib/ReactPropTypesSecret");i.resetWarningCache=n,t.exports=function(){function e(e,t,r,n,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:n};return r.PropTypes=r,r}},{"./lib/ReactPropTypesSecret":546}],544:[function(e,t,r){"use strict";function n(){return null}
var i=e("react-is"),o=e("object-assign"),a=e("./lib/ReactPropTypesSecret"),s=e("./checkPropTypes"),l=Function.call.bind(Object.prototype.hasOwnProperty),u=function(){};t.exports=function(e,t){function r(e){var t=e&&(C&&e[C]||e[I]);if("function"==typeof t)return t}function c(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function d(e){this.message=e,this.stack=""}function f(e){function r(r,n,i,o,s,l,u){if(o=o||T,l=l||i,u!==a){if(t){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}return null==n[i]?r?new d(null===n[i]?"The "+s+" `"+l+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+s+" `"+l+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(n,i,o,s,l)}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function p(e){function t(t,r,n,i,o,a){var s=t[r];if(j(s)!==e)return new d("Invalid "+i+" `"+o+"` of type `"+x(s)+"` supplied to `"+n+"`, expected `"+e+"`.");return null}return f(t)}function h(e){function t(t,r,n,i,o){if("function"!=typeof e)return new d("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var s=t[r];if(!Array.isArray(s)){return new d("Invalid "+i+" `"+o+"` of type `"+j(s)+"` supplied to `"+n+"`, expected an array.")}for(var l=0;l<s.length;l++){var u=e(s,l,n,i,o+"["+l+"]",a);if(u instanceof Error)return u}return null}return f(t)}function m(e){function t(t,r,n,i,o){if(!(t[r]instanceof e)){var a=e.name||T;return new d("Invalid "+i+" `"+o+"` of type `"+S(t[r])+"` supplied to `"+n+"`, expected instance of `"+a+"`.")}return null}return f(t)}function b(e){function t(t,r,n,i,o){for(var a=t[r],s=0;s<e.length;s++)if(c(a,e[s]))return null;var l=JSON.stringify(e,function(e,t){return"symbol"===x(t)?String(t):t});return new d("Invalid "+i+" `"+o+"` of value `"+String(a)+"` supplied to `"+n+"`, expected one of "+l+".")}return Array.isArray(e)?f(t):n}function _(e){function t(t,r,n,i,o){if("function"!=typeof e)return new d("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var s=t[r],u=j(s);if("object"!==u)return new d("Invalid "+i+" `"+o+"` of type `"+u+"` supplied to `"+n+"`, expected an object.");for(var c in s)if(l(s,c)){var f=e(s,c,n,i,o+"."+c,a);if(f instanceof Error)return f}return null}return f(t)}function v(e){function t(t,r,n,i,o){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,r,n,i,o,a))return null}return new d("Invalid "+i+" `"+o+"` supplied to `"+n+"`.")}if(!Array.isArray(e))return n;for(var r=0;r<e.length;r++){var i=e[r];if("function"!=typeof i)return u("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+E(i)+" at index "+r+"."),n}return f(t)}function g(e){function t(t,r,n,i,o){var s=t[r],l=j(s);if("object"!==l)return new d("Invalid "+i+" `"+o+"` of type `"+l+"` supplied to `"+n+"`, expected `object`.");for(var u in e){var c=e[u];if(c){var f=c(s,u,n,i,o+"."+u,a);if(f)return f}}return null}return f(t)}function y(e){function t(t,r,n,i,s){var l=t[r],u=j(l);if("object"!==u)return new d("Invalid "+i+" `"+s+"` of type `"+u+"` supplied to `"+n+"`, expected `object`.");var c=o({},t[r],e);for(var f in c){var p=e[f];if(!p)return new d("Invalid "+i+" `"+s+"` key `"+f+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(t[r],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var h=p(l,f,n,i,s+"."+f,a);if(h)return h}return null}return f(t)}function w(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(w);if(null===t||e(t))return!0;var n=r(t);if(!n)return!1;var i,o=n.call(t);if(n!==t.entries){for(;!(i=o.next()).done;)if(!w(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!w(a[1]))return!1}return!0;default:return!1}}function k(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function j(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":k(t,e)?"symbol":t}function x(e){if(void 0===e||null===e)return""+e;var t=j(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function E(e){var t=x(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function S(e){return e.constructor&&e.constructor.name?e.constructor.name:T}var C="function"==typeof Symbol&&Symbol.iterator,I="@@iterator",T="<<anonymous>>",A={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return f(n)}(),arrayOf:h,element:function(){function t(t,r,n,i,o){var a=t[r];if(!e(a)){return new d("Invalid "+i+" `"+o+"` of type `"+j(a)+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}return f(t)}(),elementType:function(){function e(e,t,r,n,o){var a=e[t];if(!i.isValidElementType(a)){return new d("Invalid "+n+" `"+o+"` of type `"+j(a)+"` supplied to `"+r+"`, expected a single ReactElement type.")}return null}return f(e)}(),instanceOf:m,node:function(){function e(e,t,r,n,i){return w(e[t])?null:new d("Invalid "+n+" `"+i+"` supplied to `"+r+"`, expected a ReactNode.")}return f(e)}(),objectOf:_,oneOf:b,oneOfType:v,shape:g,exact:y};return d.prototype=Error.prototype,A.checkPropTypes=s,A.resetWarningCache=s.resetWarningCache,A.PropTypes=A,A}},{"./checkPropTypes":542,"./lib/ReactPropTypesSecret":546,"object-assign":508,"react-is":561}],545:[function(e,t,r){t.exports=e("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":543,"./factoryWithTypeCheckers":544,"react-is":561}],546:[function(e,t,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],547:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var d,f,p,h,m=e[c].replace(s,"%20"),b=m.indexOf(r);b>=0?(d=m.substr(0,b),f=m.substr(b+1)):(d=m,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),n(a,p)?i(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],548:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(i(a))+r;return o(e[a])?n(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],549:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":547,"./encode":548}],550:[function(e,t,r){(function(r){for(var n=e("performance-now"),i="undefined"==typeof window?r:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],l=i["cancel"+a]||i["cancelRequest"+a],u=0;!s&&u<o.length;u++)s=i[o[u]+"Request"+a],l=i[o[u]+"Cancel"+a]||i[o[u]+"CancelRequest"+a];if(!s||!l){var c=0,d=0,f=[];s=function(e){if(0===f.length){var t=n(),r=Math.max(0,1e3/60-(t-c));c=r+t,setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}},Math.round(r))}return f.push({handle:++d,callback:e,cancelled:!1}),d},l=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}t.exports=function(e){return s.call(i,e)},t.exports.cancel=function(){l.apply(i,arguments)},t.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":519}],551:[function(e,t,r){"use strict"},{"object-assign":508,"prop-types/checkPropTypes":542,react:580,scheduler:587,"scheduler/tracing":588}],552:[function(e,t,r){"use strict";function n(e,t,r,n,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,i,o,a,s],u=0;e=Error(t.replace(/%s/g,function(){return l[u++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function i(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)r+="&args[]="+encodeURIComponent(arguments[i+1]);n(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}function o(e,t,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(e){this.onError(e)}}function a(e,t,r,n,i,a,s,l,u){ui=!1,ci=null,o.apply(pi,arguments)}function s(e,t,r,n,o,s,l,u,c){if(a.apply(this,arguments),ui){if(ui){var d=ci;ui=!1,ci=null}else i("198"),d=void 0;di||(di=!0,fi=d)}}function l(){if(hi)for(var e in mi){var t=mi[e],r=hi.indexOf(e);if(-1<r||i("96",e),!bi[r]){t.extractEvents||i("97",e),bi[r]=t,r=t.eventTypes;for(var n in r){var o=void 0,a=r[n],s=t,l=n;_i.hasOwnProperty(l)&&i("99",l),_i[l]=a;var c=a.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&u(c[o],s,l);o=!0}else a.registrationName?(u(a.registrationName,s,l),o=!0):o=!1;o||i("98",n,e)}}}}function u(e,t,r){vi[e]&&i("100",e),vi[e]=t,gi[e]=t.eventTypes[r].dependencies}function c(e,t,r){var n=e.type||"unknown-event";e.currentTarget=ki(r),s(n,t,void 0,e),e.currentTarget=null}function d(e,t){return null==t&&i("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function f(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}function p(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)c(e,t[n],r[n]);else t&&c(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function h(e,t){var r=e.stateNode;if(!r)return null;var n=yi(r);if(!n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(n=!n.disabled)||(e=e.type,n=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}return e?null:(r&&"function"!=typeof r&&i("231",t,typeof r),r)}function m(e){if(null!==e&&(ji=d(ji,e)),e=ji,ji=null,e&&(f(e,p),ji&&i("95"),di))throw e=fi,di=!1,fi=null,e}function b(e){if(e[Si])return e[Si];for(;!e[Si];){if(!e.parentNode)return null;e=e.parentNode}return e=e[Si],5===e.tag||6===e.tag?e:null}function _(e){return e=e[Si],!e||5!==e.tag&&6!==e.tag?null:e}function v(e){if(5===e.tag||6===e.tag)return e.stateNode;i("33")}function g(e){return e[Ci]||null}function y(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function w(e,t,r){(t=h(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=d(r._dispatchListeners,t),r._dispatchInstances=d(r._dispatchInstances,e))}function k(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=y(t);for(t=r.length;0<t--;)w(r[t],"captured",e);for(t=0;t<r.length;t++)w(r[t],"bubbled",e)}}function j(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=h(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=d(r._dispatchListeners,t),r._dispatchInstances=d(r._dispatchInstances,e))}function x(e){e&&e.dispatchConfig.registrationName&&j(e._targetInst,null,e)}function E(e){f(e,k)}function S(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}function C(e){if(Ai[e])return Ai[e];if(!Ti[e])return e;var t,r=Ti[e];for(t in r)if(r.hasOwnProperty(t)&&t in Di)return Ai[e]=r[t];return e}function I(){if(Bi)return Bi;var e,t,r=Ni,n=r.length,i="value"in Vi?Vi.value:Vi.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return Bi=i.slice(e,1<t?1-t:void 0)}function T(){return!0}function A(){return!1}function D(e,t,r,n){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(r):"target"===i?this.target=n:this[i]=r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?T:A,this.isPropagationStopped=A,this}function M(e,t,r,n){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,r,n),i}return new this(e,t,r,n)}function R(e){e instanceof this||i("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function L(e){e.eventPool=[],e.getPooled=M,e.release=R}function O(e,t){switch(e){case"keyup":return-1!==Fi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function P(e){return e=e.detail,"object"==typeof e&&"data"in e?e.data:null}function V(e,t){switch(e){case"compositionend":return P(t);case"keypress":return 32!==t.which?null:(Ji=!0,Ki);case"textInput":return e=t.data,e===Ki&&Ji?null:e;default:return null}}function N(e,t){if(Yi)return"compositionend"===e||!Hi&&O(e,t)?(e=I(),Bi=Ni=Vi=null,Yi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gi&&"ko"!==t.locale?null:t.data;default:return null}}function B(e){if(e=wi(e)){"function"!=typeof Xi&&i("280");var t=yi(e.stateNode);Xi(e.stateNode,e.type,t)}}function q(e){Zi?eo?eo.push(e):eo=[e]:Zi=e}function U(){if(Zi){var e=Zi,t=eo;if(eo=Zi=null,B(e),t)for(e=0;e<t.length;e++)B(t[e])}}function F(e,t){return e(t)}function H(e,t,r){return e(t,r)}function z(){}function W(e,t){if(to)return e(t);to=!0;try{return F(e,t)}finally{to=!1,(null!==Zi||null!==eo)&&(z(),U())}}function G(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ro[e.type]:"textarea"===t}function K(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function $(e){if(!Ii)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"==typeof t[e]),t}function J(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){var t=J(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Q(e){e._valueTracker||(e._valueTracker=Y(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=J(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Z(e){return null===e||"object"!=typeof e?null:(e=go&&e[go]||e["@@iterator"],"function"==typeof e?e:null)}function ee(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ho:return"ConcurrentMode";case lo:return"Fragment";case so:return"Portal";case co:return"Profiler";case uo:return"StrictMode";case bo:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case po:return"Context.Consumer";case fo:return"Context.Provider";case mo:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case _o:return ee(e.type);case vo:if(e=1===e._status?e._result:null)return ee(e)}return null}function te(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,i=e._debugSource,o=ee(e.type);r=null,n&&(r=ee(n.type)),n=o,o="",i?o=" (at "+i.fileName.replace(io,"")+":"+i.lineNumber+")":r&&(o=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+o}t+=r,e=e.return}while(e);return t}function re(e){return!!wo.call(jo,e)||!wo.call(ko,e)&&(yo.test(e)?jo[e]=!0:(ko[e]=!0,!1))}function ne(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function ie(e,t,r,n){if(null===t||void 0===t||ne(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function oe(e,t,r,n,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t}function ae(e){return e[1].toUpperCase()}function se(e,t,r,n){var i=xo.hasOwnProperty(t)?xo[t]:null;(null!==i?0===i.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(ie(t,r,i,n)&&(r=null),n||null===i?re(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(i=i.type,r=3===i||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}function le(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ue(e,t){var r=t.checked;return si({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function ce(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=le(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function de(e,t){null!=(t=t.checked)&&se(e,"checked",t,!1)}function fe(e,t){de(e,t);var r=le(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?he(e,t.type,r):t.hasOwnProperty("defaultValue")&&he(e,t.type,le(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function pe(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,""!==r&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function he(e,t,r){"number"===t&&e.ownerDocument.activeElement===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function me(e,t,r){return e=D.getPooled(So.change,e,t,r),e.type="change",q(r),E(e),e}function be(e){m(e)}function _e(e){if(X(v(e)))return e}function ve(e,t){if("change"===e)return t}function ge(){Co&&(Co.detachEvent("onpropertychange",ye),Io=Co=null)}function ye(e){"value"===e.propertyName&&_e(Io)&&(e=me(Io,e,K(e)),W(be,e))}function we(e,t,r){"focus"===e?(ge(),Co=t,Io=r,Co.attachEvent("onpropertychange",ye)):"blur"===e&&ge()}function ke(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return _e(Io)}function je(e,t){if("click"===e)return _e(t)}function xe(e,t){if("input"===e||"change"===e)return _e(t)}function Ee(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mo[e])&&!!t[e]}function Se(){return Ee}function Ce(e,t){return e===t&&(0!==e||1/e==1/t)||e!==e&&t!==t}function Ie(e,t){if(Ce(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!Uo.call(t,r[n])||!Ce(e[r[n]],t[r[n]]))return!1;return!0}function Te(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!=(2&t.effectTag))return 1}return 3===t.tag?2:3}function Ae(e){2!==Te(e)&&i("188")}function De(e){var t=e.alternate;if(!t)return t=Te(e),3===t&&i("188"),1===t?null:e;for(var r=e,n=t;;){var o=r.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===r)return Ae(o),e;if(s===n)return Ae(o),t;s=s.sibling}i("188")}if(r.return!==n.return)r=o,n=a;else{s=!1;for(var l=o.child;l;){if(l===r){s=!0,r=o,n=a;break}if(l===n){s=!0,n=o,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=o;break}if(l===n){s=!0,n=a,r=o;break}l=l.sibling}s||i("189")}}r.alternate!==n&&i("190")}return 3!==r.tag&&i("188"),r.stateNode.current===r?e:t}function Me(e){if(!(e=De(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Re(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Le(e,t){var r=e[0];e=e[1];var n="on"+(e[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r],isInteractive:t},Zo[e]=t,ea[r]=t}function Oe(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n;for(n=r;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(r),r=b(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var i=K(e.nativeEvent);n=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<bi.length;s++){var l=bi[s];l&&(l=l.extractEvents(n,t,o,i))&&(a=d(a,l))}m(a)}}function Pe(e,t){if(!t)return null;var r=(ra(e)?Ne:Be).bind(null,e);t.addEventListener(e,r,!1)}function Ve(e,t){if(!t)return null;var r=(ra(e)?Ne:Be).bind(null,e);t.addEventListener(e,r,!0)}function Ne(e,t){H(Be,e,t)}function Be(e,t){if(ia){var r=K(t);if(r=b(r),null===r||"number"!=typeof r.tag||2===Te(r)||(r=null),na.length){var n=na.pop();n.topLevelType=e,n.nativeEvent=t,n.targetInst=r,e=n}else e={topLevelType:e,nativeEvent:t,targetInst:r,ancestors:[]};try{W(Oe,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>na.length&&na.push(e)}}}function qe(e){return Object.prototype.hasOwnProperty.call(e,sa)||(e[sa]=aa++,oa[e[sa]]={}),oa[e[sa]]}function Ue(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Fe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function He(e,t){var r=Fe(e);e=0;for(var n;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fe(r)}}function ze(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ze(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function We(){for(var e=window,t=Ue();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;e=t.contentWindow,t=Ue(e.document)}return t}function Ge(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Ke(){var e=We();if(Ge(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&0!==r.rangeCount){t=r.anchorNode;var n=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,a=-1,s=-1,l=0,u=0,c=e,d=null;t:for(;;){for(var f;c!==t||0!==n&&3!==c.nodeType||(a=o+n),c!==i||0!==r&&3!==c.nodeType||(s=o+r),3===c.nodeType&&(o+=c.nodeValue.length),null!==(f=c.firstChild);)d=c,c=f;for(;;){if(c===e)break t;if(d===t&&++l===n&&(a=o),d===i&&++u===r&&(s=o),null!==(f=c.nextSibling))break;c=d,d=c.parentNode}c=f}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}function $e(e){var t=We(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ze(r.ownerDocument.documentElement,r)){if(null!==n&&Ge(r))if(t=n.start,e=n.end,void 0===e&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=He(r,o);var a=He(r,n);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}function Je(e,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return pa||null==ca||ca!==Ue(r)?null:(r=ca,"selectionStart"in r&&Ge(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fa&&Ie(fa,r)?null:(fa=r,e=D.getPooled(ua.select,da,e,t),e.type="select",e.target=ca,E(e),e))}function Ye(e){var t="";return ai.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}function Qe(e,t){return e=si({children:void 0},t),(t=Ye(t.children))&&(e.children=t),e}function Xe(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+le(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ze(e,t){return null!=t.dangerouslySetInnerHTML&&i("91"),si({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function et(e,t){var r=t.value;null==r&&(r=t.defaultValue,t=t.children,null!=t&&(null!=r&&i("92"),Array.isArray(t)&&(1>=t.length||i("93"),t=t[0]),r=t),null==r&&(r="")),e._wrapperState={initialValue:le(r)}}function tt(e,t){var r=le(t.value),n=le(t.defaultValue);null!=r&&(r=""+r,r!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function rt(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function nt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?nt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function ot(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}function at(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||va.hasOwnProperty(e)&&va[e]?(""+t).trim():t+"px"}function st(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=at(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}function lt(e,t){t&&(ya[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&i("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&i("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||i("61")),null!=t.style&&"object"!=typeof t.style&&i("62",""))}function ut(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ct(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var r=qe(e);t=gi[t];for(var n=0;n<t.length;n++){var i=t[n];if(!r.hasOwnProperty(i)||!r[i]){switch(i){case"scroll":Ve("scroll",e);break;case"focus":case"blur":Ve("focus",e),Ve("blur",e),r.blur=!0,r.focus=!0;break;case"cancel":case"close":$(i)&&Ve(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===Pi.indexOf(i)&&Pe(i,e)}r[i]=!0}}}function dt(){}function ft(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function pt(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function ht(e,t,r,n,i){e[Ci]=i,"input"===r&&"radio"===i.type&&null!=i.name&&de(e,i),ut(r,n),n=ut(r,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?st(e,s):"dangerouslySetInnerHTML"===a?_a(e,s):"children"===a?ot(e,s):se(e,a,s,n)}switch(r){case"input":fe(e,i);break;case"textarea":tt(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,r=i.value,null!=r?Xe(e,!!i.multiple,r,!1):t!==!!i.multiple&&(null!=i.defaultValue?Xe(e,!!i.multiple,i.defaultValue,!0):Xe(e,!!i.multiple,i.multiple?[]:"",!1))}}function mt(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function bt(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function _t(e){0>Ia||(e.current=Ca[Ia],Ca[Ia]=null,Ia--)}function vt(e,t){Ia++,Ca[Ia]=e.current,e.current=t}function gt(e,t){var r=e.type.contextTypes;if(!r)return Ta;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function yt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function wt(e){_t(Da,e),_t(Aa,e)}function kt(e){_t(Da,e),_t(Aa,e)}function jt(e,t,r){Aa.current!==Ta&&i("168"),vt(Aa,t,e),vt(Da,r,e)}function xt(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;n=n.getChildContext();for(var o in n)o in e||i("108",ee(t)||"Unknown",o);return si({},r,n)}function Et(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Ta,Ma=Aa.current,vt(Aa,t,e),vt(Da,Da.current,e),!0}function St(e,t,r){var n=e.stateNode;n||i("169"),r?(t=xt(e,t,Ma),n.__reactInternalMemoizedMergedChildContext=t,_t(Da,e),_t(Aa,e),vt(Aa,t,e)):_t(Da,e),vt(Da,r,e)}function Ct(e){return function(t){try{return e(t)}catch(e){}}}function It(e){
if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);Ra=Ct(function(e){return t.onCommitFiberRoot(r,e)}),La=Ct(function(e){return t.onCommitFiberUnmount(r,e)})}catch(e){}return!0}function Tt(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function At(e,t,r,n){return new Tt(e,t,r,n)}function Dt(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mt(e){if("function"==typeof e)return Dt(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===mo)return 11;if(e===_o)return 14}return 2}function Rt(e,t){var r=e.alternate;return null===r?(r=At(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.contextDependencies=e.contextDependencies,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lt(e,t,r,n,o,a){var s=2;if(n=e,"function"==typeof e)Dt(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case lo:return Ot(r.children,o,a,t);case ho:return Pt(r,3|o,a,t);case uo:return Pt(r,2|o,a,t);case co:return e=At(12,r,t,4|o),e.elementType=co,e.type=co,e.expirationTime=a,e;case bo:return e=At(13,r,t,o),e.elementType=bo,e.type=bo,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case fo:s=10;break e;case po:s=9;break e;case mo:s=11;break e;case _o:s=14;break e;case vo:s=16,n=null;break e}i("130",null==e?e:typeof e,"")}return t=At(s,r,t,o),t.elementType=e,t.type=n,t.expirationTime=a,t}function Ot(e,t,r,n){return e=At(7,e,n,t),e.expirationTime=r,e}function Pt(e,t,r,n){return e=At(8,e,n,t),t=0==(1&t)?uo:ho,e.elementType=t,e.type=t,e.expirationTime=r,e}function Vt(e,t,r){return e=At(6,e,null,t),e.expirationTime=r,e}function Nt(e,t,r){return t=At(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bt(e,t){e.didError=!1;var r=e.earliestPendingTime;0===r?e.earliestPendingTime=e.latestPendingTime=t:r<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),Ht(t,e)}function qt(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var r=e.latestPendingTime;0!==r&&(r>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),r=e.earliestSuspendedTime,0===r?Bt(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Bt(e,t)):t>r&&Bt(e,t)}Ht(0,e)}function Ut(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var r=e.earliestPendingTime,n=e.latestPendingTime;r===t?e.earliestPendingTime=n===t?e.latestPendingTime=0:n:n===t&&(e.latestPendingTime=r),r=e.earliestSuspendedTime,n=e.latestSuspendedTime,0===r?e.earliestSuspendedTime=e.latestSuspendedTime=t:r<t?e.earliestSuspendedTime=t:n>t&&(e.latestSuspendedTime=t),Ht(t,e)}function Ft(e,t){var r=e.earliestPendingTime;return e=e.earliestSuspendedTime,r>t&&(t=r),e>t&&(t=e),t}function Ht(e,t){var r=t.earliestSuspendedTime,n=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;i=0!==i?i:o,0===i&&(0===e||n<e)&&(i=n),e=i,0!==e&&r>e&&(e=r),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function zt(e,t){if(e&&e.defaultProps){t=si({},t),e=e.defaultProps;for(var r in e)void 0===t[r]&&(t[r]=e[r])}return t}function Wt(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,t=e._ctor,t=t(),t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}function Gt(e,t,r,n){t=e.memoizedState,r=r(n,t),r=null===r||void 0===r?t:si({},t,r),e.memoizedState=r,null!==(n=e.updateQueue)&&0===e.expirationTime&&(n.baseState=r)}function Kt(e,t,r,n,i,o,a){return e=e.stateNode,"function"==typeof e.shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Ie(r,n)||!Ie(i,o))}function $t(e,t,r){var n=!1,i=Ta,o=t.contextType;return"object"==typeof o&&null!==o?o=qr(o):(i=yt(t)?Ma:Aa.current,n=t.contextTypes,o=(n=null!==n&&void 0!==n)?gt(e,i):Ta),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Pa,e.stateNode=t,t._reactInternalFiber=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Jt(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Pa.enqueueReplaceState(t,t.state,null)}function Yt(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Oa;var o=t.contextType;"object"==typeof o&&null!==o?i.context=qr(o):(o=yt(t)?Ma:Aa.current,i.context=gt(e,o)),o=e.updateQueue,null!==o&&(Jr(e,o,r,i,n),i.state=e.memoizedState),o=t.getDerivedStateFromProps,"function"==typeof o&&(Gt(e,t,o,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Pa.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(Jr(e,o,r,i,n),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}function Qt(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){r=r._owner;var n=void 0;r&&(1!==r.tag&&i("309"),n=r.stateNode),n||i("147",e);var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=n.refs;t===Oa&&(t=n.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}"string"!=typeof e&&i("284"),r._owner||i("290",e)}return e}function Xt(e,t){"textarea"!==e.type&&i("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Zt(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.effectTag=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,r){return e=Rt(e,t,r),e.index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index,n<r?(t.effectTag=2,r):n):(t.effectTag=2,r):r}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,r,n){return null===t||6!==t.tag?(t=Vt(r,e.mode,n),t.return=e,t):(t=o(t,r,n),t.return=e,t)}function u(e,t,r,n){return null!==t&&t.elementType===r.type?(n=o(t,r.props,n),n.ref=Qt(e,t,r),n.return=e,n):(n=Lt(r.type,r.key,r.props,null,e.mode,n),n.ref=Qt(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?(t=Nt(r,e.mode,n),t.return=e,t):(t=o(t,r.children||[],n),t.return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?(t=Ot(r,e.mode,n,i),t.return=e,t):(t=o(t,r,n),t.return=e,t)}function f(e,t,r){if("string"==typeof t||"number"==typeof t)return t=Vt(""+t,e.mode,r),t.return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ao:return r=Lt(t.type,t.key,t.props,null,e.mode,r),r.ref=Qt(e,null,t),r.return=e,r;case so:return t=Nt(t,e.mode,r),t.return=e,t}if(Va(t)||Z(t))return t=Ot(t,e.mode,r,null),t.return=e,t;Xt(e,t)}return null}function p(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==i?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ao:return r.key===i?r.type===lo?d(e,t,r.props.children,n,i):u(e,t,r,n):null;case so:return r.key===i?c(e,t,r,n):null}if(Va(r)||Z(r))return null!==i?null:d(e,t,r,n,null);Xt(e,r)}return null}function h(e,t,r,n,i){if("string"==typeof n||"number"==typeof n)return e=e.get(r)||null,l(t,e,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ao:return e=e.get(null===n.key?r:n.key)||null,n.type===lo?d(t,e,n.props.children,i,n.key):u(t,e,n,i);case so:return e=e.get(null===n.key?r:n.key)||null,c(t,e,n,i)}if(Va(n)||Z(n))return e=e.get(r)||null,d(t,e,n,i,null);Xt(t,n)}return null}function m(i,o,s,l){for(var u=null,c=null,d=o,m=o=0,b=null;null!==d&&m<s.length;m++){d.index>m?(b=d,d=null):b=d.sibling;var _=p(i,d,s[m],l);if(null===_){null===d&&(d=b);break}e&&d&&null===_.alternate&&t(i,d),o=a(_,o,m),null===c?u=_:c.sibling=_,c=_,d=b}if(m===s.length)return r(i,d),u;if(null===d){for(;m<s.length;m++)(d=f(i,s[m],l))&&(o=a(d,o,m),null===c?u=d:c.sibling=d,c=d);return u}for(d=n(i,d);m<s.length;m++)(b=h(d,i,m,s[m],l))&&(e&&null!==b.alternate&&d.delete(null===b.key?m:b.key),o=a(b,o,m),null===c?u=b:c.sibling=b,c=b);return e&&d.forEach(function(e){return t(i,e)}),u}function b(o,s,l,u){var c=Z(l);"function"!=typeof c&&i("150"),null==(l=c.call(l))&&i("151");for(var d=c=null,m=s,b=s=0,_=null,v=l.next();null!==m&&!v.done;b++,v=l.next()){m.index>b?(_=m,m=null):_=m.sibling;var g=p(o,m,v.value,u);if(null===g){m||(m=_);break}e&&m&&null===g.alternate&&t(o,m),s=a(g,s,b),null===d?c=g:d.sibling=g,d=g,m=_}if(v.done)return r(o,m),c;if(null===m){for(;!v.done;b++,v=l.next())null!==(v=f(o,v.value,u))&&(s=a(v,s,b),null===d?c=v:d.sibling=v,d=v);return c}for(m=n(o,m);!v.done;b++,v=l.next())null!==(v=h(m,o,b,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?b:v.key),s=a(v,s,b),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(o,e)}),c}return function(e,n,a,l){var u="object"==typeof a&&null!==a&&a.type===lo&&null===a.key;u&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case ao:e:{for(c=a.key,u=n;null!==u;){if(u.key===c){if(7===u.tag?a.type===lo:u.elementType===a.type){r(e,u.sibling),n=o(u,a.type===lo?a.props.children:a.props,l),n.ref=Qt(e,u,a),n.return=e,e=n;break e}r(e,u);break}t(e,u),u=u.sibling}a.type===lo?(n=Ot(a.props.children,e.mode,l,a.key),n.return=e,e=n):(l=Lt(a.type,a.key,a.props,null,e.mode,l),l.ref=Qt(e,n,a),l.return=e,e=l)}return s(e);case so:e:{for(u=a.key;null!==n;){if(n.key===u){if(4===n.tag&&n.stateNode.containerInfo===a.containerInfo&&n.stateNode.implementation===a.implementation){r(e,n.sibling),n=o(n,a.children||[],l),n.return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}n=Nt(a,e.mode,l),n.return=e,e=n}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==n&&6===n.tag?(r(e,n.sibling),n=o(n,a,l),n.return=e,e=n):(r(e,n),n=Vt(a,e.mode,l),n.return=e,e=n),s(e);if(Va(a))return m(e,n,a,l);if(Z(a))return b(e,n,a,l);if(c&&Xt(e,a),void 0===a&&!u)switch(e.tag){case 1:case 0:l=e.type,i("152",l.displayName||l.name||"Component")}return r(e,n)}}function er(e){return e===qa&&i("174"),e}function tr(e,t){vt(Ha,t,e),vt(Fa,e,e),vt(Ua,qa,e);var r=t.nodeType;switch(r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:it(null,"");break;default:r=8===r?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=it(t,r)}_t(Ua,e),vt(Ua,t,e)}function rr(e){_t(Ua,e),_t(Fa,e),_t(Ha,e)}function nr(e){er(Ha.current);var t=er(Ua.current),r=it(t,e.type);t!==r&&(vt(Fa,e,e),vt(Ua,r,e))}function ir(e){Fa.current===e&&(_t(Ua,e),_t(Fa,e))}function or(){i("321")}function ar(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ce(e[r],t[r]))return!1;return!0}function sr(e,t,r,n,o,a){if(Za=a,es=t,rs=null!==e?e.memoizedState:null,Xa.current=null===rs?ps:hs,t=r(n,o),us){do{us=!1,ds+=1,rs=null!==e?e.memoizedState:null,os=ns,ss=is=ts=null,Xa.current=hs,t=r(n,o)}while(us);cs=null,ds=0}return Xa.current=fs,e=es,e.memoizedState=ns,e.expirationTime=as,e.updateQueue=ss,e.effectTag|=ls,e=null!==ts&&null!==ts.next,Za=0,os=is=ns=rs=ts=es=null,as=0,ss=null,ls=0,e&&i("300"),t}function lr(){Xa.current=fs,Za=0,os=is=ns=rs=ts=es=null,as=0,ss=null,ls=0,us=!1,cs=null,ds=0}function ur(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===is?ns=is=e:is=is.next=e,is}function cr(){if(null!==os)is=os,os=is.next,ts=rs,rs=null!==ts?ts.next:null;else{null===rs&&i("310"),ts=rs;var e={memoizedState:ts.memoizedState,baseState:ts.baseState,queue:ts.queue,baseUpdate:ts.baseUpdate,next:null};is=null===is?ns=e:is.next=e,rs=ts.next}return is}function dr(e,t){return"function"==typeof t?t(e):t}function fr(e){var t=cr(),r=t.queue;if(null===r&&i("311"),r.lastRenderedReducer=e,0<ds){var n=r.dispatch;if(null!==cs){var o=cs.get(r);if(void 0!==o){cs.delete(r);var a=t.memoizedState;do{a=e(a,o.action),o=o.next}while(null!==o);return Ce(a,t.memoizedState)||(gs=!0),t.memoizedState=a,t.baseUpdate===r.last&&(t.baseState=a),r.lastRenderedState=a,[a,n]}}return[t.memoizedState,n]}n=r.last;var s=t.baseUpdate;if(a=t.baseState,null!==s?(null!==n&&(n.next=null),n=s.next):n=null!==n?n.next:null,null!==n){var l=o=null,u=n,c=!1;do{var d=u.expirationTime;d<Za?(c||(c=!0,l=s,o=a),d>as&&(as=d)):a=u.eagerReducer===e?u.eagerState:e(a,u.action),s=u,u=u.next}while(null!==u&&u!==n);c||(l=s,o=a),Ce(a,t.memoizedState)||(gs=!0),t.memoizedState=a,t.baseUpdate=l,t.baseState=o,r.lastRenderedState=a}return[t.memoizedState,r.dispatch]}function pr(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===ss?(ss={lastEffect:null},ss.lastEffect=e.next=e):(t=ss.lastEffect,null===t?ss.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,ss.lastEffect=e)),e}function hr(e,t,r,n){var i=ur();ls|=e,i.memoizedState=pr(t,r,void 0,void 0===n?null:n)}function mr(e,t,r,n){var i=cr();n=void 0===n?null:n;var o=void 0;if(null!==ts){var a=ts.memoizedState;if(o=a.destroy,null!==n&&ar(n,a.deps))return void pr(za,r,o,n)}ls|=e,i.memoizedState=pr(t,r,o,n)}function br(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _r(){}function vr(e,t,r){25>ds||i("301");var n=e.alternate;if(e===es||null!==n&&n===es)if(us=!0,e={expirationTime:Za,action:r,eagerReducer:null,eagerState:null,next:null},null===cs&&(cs=new Map),void 0===(r=cs.get(t)))cs.set(t,e);else{for(t=r;null!==t.next;)t=t.next;t.next=e}else{vn();var o=On();o=xn(o,e);var a={expirationTime:o,action:r,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)a.next=a;else{var l=s.next;null!==l&&(a.next=l),s.next=a}if(t.last=a,0===e.expirationTime&&(null===n||0===n.expirationTime)&&null!==(n=t.lastRenderedReducer))try{var u=t.lastRenderedState,c=n(u,r);if(a.eagerReducer=n,a.eagerState=c,Ce(c,u))return}catch(e){}In(e,o)}}function gr(e,t){var r=At(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function yr(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function wr(e){if(_s){var t=bs;if(t){var r=t;if(!yr(e,t)){if(!(t=mt(r))||!yr(e,t))return e.effectTag|=2,_s=!1,void(ms=e);gr(ms,r)}ms=e,bs=bt(t)}else e.effectTag|=2,_s=!1,ms=e}}function kr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;ms=e}function jr(e){if(e!==ms)return!1;if(!_s)return kr(e),_s=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!pt(t,e.memoizedProps))for(t=bs;t;)gr(e,t),t=mt(t);return kr(e),bs=ms?mt(e.stateNode):null,!0}function xr(){bs=ms=null,_s=!1}function Er(e,t,r,n){t.child=null===e?Ba(t,null,r,n):Na(t,e.child,r,n)}function Sr(e,t,r,n,i){r=r.render;var o=t.ref;return Br(t,i),n=sr(e,t,r,n,o,i),null===e||gs?(t.effectTag|=1,Er(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Or(e,t,i))}function Cr(e,t,r,n,i,o){if(null===e){var a=r.type;return"function"!=typeof a||Dt(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?(e=Lt(r.type,null,n,null,t.mode,o),e.ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ir(e,t,a,n,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,r=r.compare,(r=null!==r?r:Ie)(i,n)&&e.ref===t.ref)?Or(e,t,o):(t.effectTag|=1,e=Rt(a,n,o),e.ref=t.ref,e.return=t,t.child=e)}function Ir(e,t,r,n,i,o){return null!==e&&Ie(e.memoizedProps,n)&&e.ref===t.ref&&(gs=!1,i<o)?Or(e,t,o):Ar(e,t,r,n,o)}function Tr(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.effectTag|=128)}function Ar(e,t,r,n,i){var o=yt(r)?Ma:Aa.current;return o=gt(t,o),Br(t,i),r=sr(e,t,r,n,o,i),null===e||gs?(t.effectTag|=1,Er(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Or(e,t,i))}function Dr(e,t,r,n,i){if(yt(r)){var o=!0;Et(t)}else o=!1;if(Br(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),$t(t,r,n,i),Yt(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=r.contextType;"object"==typeof u&&null!==u?u=qr(u):(u=yt(r)?Ma:Aa.current,u=gt(t,u));var c=r.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||l!==u)&&Jt(t,a,n,u),Is=!1;var f=t.memoizedState;l=a.state=f;var p=t.updateQueue;null!==p&&(Jr(t,p,n,a,i),l=t.memoizedState),s!==n||f!==l||Da.current||Is?("function"==typeof c&&(Gt(t,r,c,n),l=t.memoizedState),(s=Is||Kt(t,r,s,n,f,l,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),n=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:zt(t.type,s),l=a.context,u=r.contextType,"object"==typeof u&&null!==u?u=qr(u):(u=yt(r)?Ma:Aa.current,u=gt(t,u)),c=r.getDerivedStateFromProps,(d="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||l!==u)&&Jt(t,a,n,u),Is=!1,l=t.memoizedState,f=a.state=l,p=t.updateQueue,null!==p&&(Jr(t,p,n,a,i),f=t.memoizedState),s!==n||l!==f||Da.current||Is?("function"==typeof c&&(Gt(t,r,c,n),f=t.memoizedState),(c=Is||Kt(t,r,s,n,l,f,u))?(d||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,u)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=u,n=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return Mr(e,t,r,n,o,i)}function Mr(e,t,r,n,i,o){Tr(e,t);var a=0!=(64&t.effectTag);if(!n&&!a)return i&&St(t,r,!1),Or(e,t,o);n=t.stateNode,vs.current=t;var s=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&a?(t.child=Na(t,e.child,null,o),t.child=Na(t,null,s,o)):Er(e,t,s,o),t.memoizedState=n.state,i&&St(t,r,!0),t.child}function Rr(e){var t=e.stateNode;t.pendingContext?jt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jt(e,t.context,!1),tr(e,t.containerInfo)}function Lr(e,t,r){var n=t.mode,i=t.pendingProps,o=t.memoizedState;if(0==(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var s=i.fallback;e=Ot(null,n,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),n=Ot(s,n,r,null),e.sibling=n,r=e,r.return=n.return=t}else r=n=Ba(t,null,i.children,r);else null!==e.memoizedState?(n=e.child,s=n.sibling,a?(r=i.fallback,i=Rt(n,n.pendingProps,0),0==(1&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==n.child&&(i.child=a),n=i.sibling=Rt(s,r,s.expirationTime),r=i,i.childExpirationTime=0,r.return=n.return=t):r=n=Na(t,n.child,i.children,r)):(s=e.child,a?(a=i.fallback,i=Ot(null,n,0,null),i.child=s,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),n=i.sibling=Ot(a,n,r,null),n.effectTag|=2,r=i,i.childExpirationTime=0,r.return=n.return=t):n=r=Na(t,s,i.children,r)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=r,n}function Or(e,t,r){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<r)return null;if(null!==e&&t.child!==e.child&&i("153"),null!==t.child){for(e=t.child,r=Rt(e,e.pendingProps,e.expirationTime),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,r=r.sibling=Rt(e,e.pendingProps,e.expirationTime),r.return=t;r.sibling=null}return t.child}function Pr(e,t,r){var n=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Da.current)gs=!0;else if(n<r){switch(gs=!1,t.tag){case 3:Rr(t),xr();break;case 5:nr(t);break;case 1:yt(t.type)&&Et(t);break;case 4:tr(t,t.stateNode.containerInfo);break;case 10:Vr(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=r?Lr(e,t,r):(t=Or(e,t,r),null!==t?t.sibling:null)}return Or(e,t,r)}}else gs=!1;switch(t.expirationTime=0,t.tag){case 2:n=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var o=gt(t,Aa.current);if(Br(t,r),o=sr(null,t,n,e,o,r),t.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,lr(),yt(n)){var a=!0;Et(t)}else a=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var s=n.getDerivedStateFromProps;"function"==typeof s&&Gt(t,n,s,e),o.updater=Pa,t.stateNode=o,o._reactInternalFiber=t,Yt(t,n,e,r),t=Mr(null,t,n,!0,a,r)}else t.tag=0,Er(null,t,o,r),t=t.child;return t;case 16:switch(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),a=t.pendingProps,e=Wt(o),t.type=e,o=t.tag=Mt(e),a=zt(e,a),s=void 0,o){case 0:s=Ar(null,t,e,a,r);break;case 1:s=Dr(null,t,e,a,r);break;case 11:s=Sr(null,t,e,a,r);break;case 14:s=Cr(null,t,e,zt(e.type,a),n,r);break;default:i("306",e,"")}return s;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:zt(n,o),Ar(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:zt(n,o),Dr(e,t,n,o,r);case 3:return Rr(t),n=t.updateQueue,null===n&&i("282"),o=t.memoizedState,o=null!==o?o.element:null,Jr(t,n,t.pendingProps,null,r),n=t.memoizedState.element,n===o?(xr(),t=Or(e,t,r)):(o=t.stateNode,(o=(null===e||null===e.child)&&o.hydrate)&&(bs=bt(t.stateNode.containerInfo),ms=t,o=_s=!0),o?(t.effectTag|=2,t.child=Ba(t,null,n,r)):(Er(e,t,n,r),xr()),t=t.child),t;case 5:return nr(t),null===e&&wr(t),n=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,pt(n,o)?s=null:null!==a&&pt(n,a)&&(t.effectTag|=16),Tr(e,t),1!==r&&1&t.mode&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Er(e,t,s,r),t=t.child),t;case 6:return null===e&&wr(t),null;case 13:return Lr(e,t,r);case 4:return tr(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Na(t,null,n,r):Er(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:zt(n,o),Sr(e,t,n,o,r);case 7:return Er(e,t,t.pendingProps,r),t.child;case 8:case 12:return Er(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,Vr(t,a),null!==s){var l=s.value;if(0===(a=Ce(l,a)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(l,a):1073741823))){if(s.children===o.children&&!Da.current){t=Or(e,t,r);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.contextDependencies;if(null!==u){s=l.child;for(var c=u.first;null!==c;){if(c.context===n&&0!=(c.observedBits&a)){1===l.tag&&(c=Hr(r),c.tag=Ss,Wr(l,c)),l.expirationTime<r&&(l.expirationTime=r),c=l.alternate,null!==c&&c.expirationTime<r&&(c.expirationTime=r),c=r;for(var d=l.return;null!==d;){var f=d.alternate;if(d.childExpirationTime<c)d.childExpirationTime=c,null!==f&&f.childExpirationTime<c&&(f.childExpirationTime=c);else{if(!(null!==f&&f.childExpirationTime<c))break;f.childExpirationTime=c}d=d.return}u.expirationTime<r&&(u.expirationTime=r);break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}Er(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,a=t.pendingProps,n=a.children,Br(t,r),o=qr(o,a.unstable_observedBits),n=n(o),t.effectTag|=1,Er(e,t,n,r),t.child;case 14:return o=t.type,a=zt(o,t.pendingProps),a=zt(o.type,a),Cr(e,t,o,a,n,r);case 15:return Ir(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:zt(n,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,yt(n)?(e=!0,Et(t)):e=!1,Br(t,r),$t(t,n,o,r),Yt(t,n,o,r),Mr(null,t,n,!0,e,r)}i("156")}function Vr(e,t){var r=e.type._context;vt(ys,r._currentValue,e),r._currentValue=t}function Nr(e){var t=ys.current;_t(ys,e),e.type._context._currentValue=t}function Br(e,t){ws=e,js=ks=null;var r=e.contextDependencies;null!==r&&r.expirationTime>=t&&(gs=!0),e.contextDependencies=null}function qr(e,t){return js!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(js=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ks?(null===ws&&i("308"),ks=t,ws.contextDependencies={first:t,expirationTime:0}):ks=ks.next=t),e._currentValue}function Ur(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Fr(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Hr(e){return{expirationTime:e,tag:xs,payload:null,callback:null,next:null,nextEffect:null}}function zr(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Wr(e,t){var r=e.alternate;if(null===r){var n=e.updateQueue,i=null;null===n&&(n=e.updateQueue=Ur(e.memoizedState))}else n=e.updateQueue,i=r.updateQueue,null===n?null===i?(n=e.updateQueue=Ur(e.memoizedState),i=r.updateQueue=Ur(r.memoizedState)):n=e.updateQueue=Fr(i):null===i&&(i=r.updateQueue=Fr(n));null===i||n===i?zr(n,t):null===n.lastUpdate||null===i.lastUpdate?(zr(n,t),zr(i,t)):(zr(n,t),i.lastUpdate=t)}function Gr(e,t){var r=e.updateQueue;r=null===r?e.updateQueue=Ur(e.memoizedState):Kr(e,r),null===r.lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=t:(r.lastCapturedUpdate.next=t,r.lastCapturedUpdate=t)}function Kr(e,t){var r=e.alternate;return null!==r&&t===r.updateQueue&&(t=e.updateQueue=Fr(t)),t}function $r(e,t,r,n,i,o){switch(r.tag){case Es:return e=r.payload,"function"==typeof e?e.call(o,n,i):e;case Cs:e.effectTag=-2049&e.effectTag|64;case xs:if(e=r.payload,null===(i="function"==typeof e?e.call(o,n,i):e)||void 0===i)break;return si({},n,i);case Ss:Is=!0}return n}function Jr(e,t,r,n,i){Is=!1,t=Kr(e,t);for(var o=t.baseState,a=null,s=0,l=t.firstUpdate,u=o;null!==l;){var c=l.expirationTime;c<i?(null===a&&(a=l,o=u),s<c&&(s=c)):(u=$r(e,t,l,u,r,n),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(c=null,l=t.firstCapturedUpdate;null!==l;){var d=l.expirationTime;d<i?(null===c&&(c=l,null===a&&(o=u)),s<d&&(s=d)):(u=$r(e,t,l,u,r,n),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===c&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=u}function Yr(e,t,r){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Qr(t.firstEffect,r),t.firstEffect=t.lastEffect=null,Qr(t.firstCapturedEffect,r),t.firstCapturedEffect=t.lastCapturedEffect=null}function Qr(e,t){for(;null!==e;){var r=e.callback;if(null!==r){e.callback=null;var n=t;"function"!=typeof r&&i("191",r),r.call(n)}e=e.nextEffect}}function Xr(e,t){return{value:e,source:t,stack:te(t)}}function Zr(e){e.effectTag|=4}function en(e,t){var r=t.source,n=t.stack;null===n&&null!==r&&(n=te(r)),null!==r&&ee(r.type),t=t.value,null!==e&&1===e.tag&&ee(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function tn(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){jn(e,t)}else t.current=null}function rn(e,t,r){if(r=r.updateQueue,null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{if((n.tag&e)!==za){var i=n.destroy;n.destroy=void 0,void 0!==i&&i()}(n.tag&t)!==za&&(i=n.create,n.destroy=i()),n=n.next}while(n!==r)}}function nn(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)n.style.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,n.style.display=at("display",i)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else{if(13===r.tag&&null!==r.memoizedState){n=r.child.sibling,n.return=r,r=n;continue}if(null!==r.child){r.child.return=r,r=r.child;continue}}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function on(e){switch("function"==typeof La&&La(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var r=t=t.next;do{var n=r.destroy;if(void 0!==n){var i=e;try{n()}catch(e){jn(i,e)}}r=r.next}while(r!==t)}break;case 1:if(tn(e),t=e.stateNode,"function"==typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){jn(e,t)}break;case 5:tn(e);break;case 4:ln(e)}}function an(e){return 5===e.tag||3===e.tag||4===e.tag}function sn(e){e:{for(var t=e.return;null!==t;){if(an(t)){var r=t;break e}t=t.return}i("160"),r=void 0}var n=t=void 0;switch(r.tag){case 5:t=r.stateNode,n=!1;break;case 3:case 4:t=r.stateNode.containerInfo,n=!0;break;default:i("161")}16&r.effectTag&&(ot(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||an(r.return)){r=null
;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.effectTag)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.effectTag)){r=r.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(r)if(n){var a=t,s=o.stateNode,l=r;8===a.nodeType?a.parentNode.insertBefore(s,l):a.insertBefore(s,l)}else t.insertBefore(o.stateNode,r);else n?(s=t,l=o.stateNode,8===s.nodeType?(a=s.parentNode,a.insertBefore(l,s)):(a=s,a.appendChild(l)),null!==(s=s._reactRootContainer)&&void 0!==s||null!==a.onclick||(a.onclick=dt)):t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function ln(e){for(var t=e,r=!1,n=void 0,o=void 0;;){if(!r){r=t.return;e:for(;;){switch(null===r&&i("160"),r.tag){case 5:n=r.stateNode,o=!1;break e;case 3:case 4:n=r.stateNode.containerInfo,o=!0;break e}r=r.return}r=!0}if(5===t.tag||6===t.tag){e:for(var a=t,s=a;;)if(on(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o?(a=n,s=t.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){n=t.stateNode.containerInfo,o=!0,t.child.return=t,t=t.child;continue}}else if(on(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(r=!1)}t.sibling.return=t.return,t=t.sibling}}function un(e,t){switch(t.tag){case 0:case 11:case 14:case 15:rn(Ga,Ka,t);break;case 1:break;case 5:var r=t.stateNode;if(null!=r){var n=t.memoizedProps;e=null!==e?e.memoizedProps:n;var o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&ht(r,a,o,e,n,t)}break;case 6:null===t.stateNode&&i("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(r=t.memoizedState,n=void 0,e=t,null===r?n=!1:(n=!0,e=t.child,0===r.timedOutAt&&(r.timedOutAt=On())),null!==e&&nn(e,n),null!==(r=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new Rs),r.forEach(function(e){var r=Sn.bind(null,t,e);s.has(e)||(s.add(e),e.then(r,r))})}break;case 17:break;default:i("163")}}function cn(e,t,r){r=Hr(r),r.tag=Cs,r.payload={element:null};var n=t.value;return r.callback=function(){zn(n),en(e,t)},r}function dn(e,t,r){r=Hr(r),r.tag=Cs;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Js?Js=new Set([this]):Js.add(this));var r=t.value,i=t.stack;en(e,t),this.componentDidCatch(r,{componentStack:null!==i?i:""})}),r}function fn(e){switch(e.tag){case 1:yt(e.type)&&wt(e);var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return rr(e),kt(e),t=e.effectTag,0!=(64&t)&&i("285"),e.effectTag=-2049&t|64,e;case 5:return ir(e),null;case 13:return t=e.effectTag,2048&t?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return rr(e),null;case 10:return Nr(e),null;default:return null}}function pn(){if(null!==Bs)for(var e=Bs.return;null!==e;){var t=e;switch(t.tag){case 1:var r=t.type.childContextTypes;null!==r&&void 0!==r&&wt(t);break;case 3:rr(t),kt(t);break;case 5:ir(t);break;case 4:rr(t);break;case 10:Nr(t)}e=e.return}qs=null,Us=0,Fs=-1,Hs=!1,Bs=null}function hn(){for(;null!==zs;){var e=zs.effectTag;if(16&e&&ot(zs.stateNode,""),128&e){var t=zs.alternate;null!==t&&null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null)}switch(14&e){case 2:sn(zs),zs.effectTag&=-3;break;case 6:sn(zs),zs.effectTag&=-3,un(zs.alternate,zs);break;case 4:un(zs.alternate,zs);break;case 8:e=zs,ln(e),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}zs=zs.nextEffect}}function mn(){for(;null!==zs;){if(256&zs.effectTag)e:{var e=zs.alternate,t=zs;switch(t.tag){case 0:case 11:case 15:rn(Wa,za,t);break e;case 1:if(256&t.effectTag&&null!==e){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:zt(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:i("163")}}zs=zs.nextEffect}}function bn(e,t){for(;null!==zs;){var r=zs.effectTag;if(36&r){var n=zs.alternate,o=zs,a=t;switch(o.tag){case 0:case 11:case 15:rn($a,Ja,o);break;case 1:var s=o.stateNode;if(4&o.effectTag)if(null===n)s.componentDidMount();else{var l=o.elementType===o.type?n.memoizedProps:zt(o.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}n=o.updateQueue,null!==n&&Yr(o,n,s,a);break;case 3:if(null!==(n=o.updateQueue)){if(s=null,null!==o.child)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}Yr(o,n,s,a)}break;case 5:a=o.stateNode,null===n&&4&o.effectTag&&ft(o.type,o.memoizedProps)&&a.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:i("163")}}128&r&&null!==(o=zs.ref)&&(a=zs.stateNode,"function"==typeof o?o(a):o.current=a),512&r&&(Gs=e),zs=zs.nextEffect}}function _n(e,t){$s=Ks=Gs=null;var r=el;el=!0;do{if(512&t.effectTag){var n=!1,i=void 0;try{var o=t;rn(Qa,za,o),rn(za,Ya,o)}catch(e){n=!0,i=e}n&&jn(t,i)}t=t.nextEffect}while(null!==t);el=r,r=e.expirationTime,0!==r&&Pn(e,r),al||el||qn(1073741823,!1)}function vn(){null!==Ks&&Sa(Ks),null!==$s&&$s()}function gn(e,t){Ws=Ns=!0,e.current===t&&i("177");var r=e.pendingCommitExpirationTime;0===r&&i("261"),e.pendingCommitExpirationTime=0;var n=t.expirationTime,o=t.childExpirationTime;for(qt(e,o>n?o:n),Ps.current=null,n=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,n=t.firstEffect):n=t:n=t.firstEffect,wa=ia,ka=Ke(),ia=!1,zs=n;null!==zs;){o=!1;var a=void 0;try{mn()}catch(e){o=!0,a=e}o&&(null===zs&&i("178"),jn(zs,a),null!==zs&&(zs=zs.nextEffect))}for(zs=n;null!==zs;){o=!1,a=void 0;try{hn()}catch(e){o=!0,a=e}o&&(null===zs&&i("178"),jn(zs,a),null!==zs&&(zs=zs.nextEffect))}for($e(ka),ka=null,ia=!!wa,wa=null,e.current=t,zs=n;null!==zs;){o=!1,a=void 0;try{bn(e,r)}catch(e){o=!0,a=e}o&&(null===zs&&i("178"),jn(zs,a),null!==zs&&(zs=zs.nextEffect))}if(null!==n&&null!==Gs){var s=_n.bind(null,e,n);Ks=li.unstable_runWithPriority(li.unstable_NormalPriority,function(){return Ea(s)}),$s=s}Ns=Ws=!1,"function"==typeof Ra&&Ra(t.stateNode),r=t.expirationTime,t=t.childExpirationTime,t=t>r?t:r,0===t&&(Js=null),Ln(e,t)}function yn(e){for(;;){var t=e.alternate,r=e.return,n=e.sibling;if(0==(1024&e.effectTag)){Bs=e;e:{var o=t;t=e;var a=Us,s=t.pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:yt(t.type)&&wt(t);break;case 3:rr(t),kt(t),s=t.stateNode,s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==o&&null!==o.child||(jr(t),t.effectTag&=-3),As(t);break;case 5:ir(t);var l=er(Ha.current);if(a=t.type,null!==o&&null!=t.stateNode)Ds(o,t,a,s,l),o.ref!==t.ref&&(t.effectTag|=128);else if(s){var u=er(Ua.current);if(jr(t)){s=t,o=s.stateNode;var c=s.type,d=s.memoizedProps,f=l;switch(o[Si]=s,o[Ci]=d,a=void 0,l=c){case"iframe":case"object":Pe("load",o);break;case"video":case"audio":for(c=0;c<Pi.length;c++)Pe(Pi[c],o);break;case"source":Pe("error",o);break;case"img":case"image":case"link":Pe("error",o),Pe("load",o);break;case"form":Pe("reset",o),Pe("submit",o);break;case"details":Pe("toggle",o);break;case"input":ce(o,d),Pe("invalid",o),ct(f,"onChange");break;case"select":o._wrapperState={wasMultiple:!!d.multiple},Pe("invalid",o),ct(f,"onChange");break;case"textarea":et(o,d),Pe("invalid",o),ct(f,"onChange")}lt(l,d),c=null;for(a in d)d.hasOwnProperty(a)&&(u=d[a],"children"===a?"string"==typeof u?o.textContent!==u&&(c=["children",u]):"number"==typeof u&&o.textContent!==""+u&&(c=["children",""+u]):vi.hasOwnProperty(a)&&null!=u&&ct(f,a));switch(l){case"input":Q(o),pe(o,d,!0);break;case"textarea":Q(o),rt(o,d);break;case"select":case"option":break;default:"function"==typeof d.onClick&&(o.onclick=dt)}a=c,s.updateQueue=a,s=null!==a,s&&Zr(t)}else{d=t,f=a,o=s,c=9===l.nodeType?l:l.ownerDocument,u===ma.html&&(u=nt(f)),u===ma.html?"script"===f?(o=c.createElement("div"),o.innerHTML="<script><\/script>",c=o.removeChild(o.firstChild)):"string"==typeof o.is?c=c.createElement(f,{is:o.is}):(c=c.createElement(f),"select"===f&&(f=c,o.multiple?f.multiple=!0:o.size&&(f.size=o.size))):c=c.createElementNS(u,f),o=c,o[Si]=d,o[Ci]=s,Ts(o,t,!1,!1),f=o,c=a,d=s;var p=l,h=ut(c,d);switch(c){case"iframe":case"object":Pe("load",f),l=d;break;case"video":case"audio":for(l=0;l<Pi.length;l++)Pe(Pi[l],f);l=d;break;case"source":Pe("error",f),l=d;break;case"img":case"image":case"link":Pe("error",f),Pe("load",f),l=d;break;case"form":Pe("reset",f),Pe("submit",f),l=d;break;case"details":Pe("toggle",f),l=d;break;case"input":ce(f,d),l=ue(f,d),Pe("invalid",f),ct(p,"onChange");break;case"option":l=Qe(f,d);break;case"select":f._wrapperState={wasMultiple:!!d.multiple},l=si({},d,{value:void 0}),Pe("invalid",f),ct(p,"onChange");break;case"textarea":et(f,d),l=Ze(f,d),Pe("invalid",f),ct(p,"onChange");break;default:l=d}lt(c,l),u=void 0;var m=c,b=f,_=l;for(u in _)if(_.hasOwnProperty(u)){var v=_[u];"style"===u?st(b,v):"dangerouslySetInnerHTML"===u?null!=(v=v?v.__html:void 0)&&_a(b,v):"children"===u?"string"==typeof v?("textarea"!==m||""!==v)&&ot(b,v):"number"==typeof v&&ot(b,""+v):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(vi.hasOwnProperty(u)?null!=v&&ct(p,u):null!=v&&se(b,u,v,h))}switch(c){case"input":Q(f),pe(f,d,!1);break;case"textarea":Q(f),rt(f,d);break;case"option":null!=d.value&&f.setAttribute("value",""+le(d.value));break;case"select":l=f,l.multiple=!!d.multiple,f=d.value,null!=f?Xe(l,!!d.multiple,f,!1):null!=d.defaultValue&&Xe(l,!!d.multiple,d.defaultValue,!0);break;default:"function"==typeof l.onClick&&(f.onclick=dt)}(s=ft(a,s))&&Zr(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&i("166");break;case 6:o&&null!=t.stateNode?Ms(o,t,o.memoizedProps,s):("string"!=typeof s&&(null===t.stateNode&&i("166")),o=er(Ha.current),er(Ua.current),jr(t)?(s=t,a=s.stateNode,o=s.memoizedProps,a[Si]=s,(s=a.nodeValue!==o)&&Zr(t)):(a=t,s=(9===o.nodeType?o:o.ownerDocument).createTextNode(s),s[Si]=t,a.stateNode=s));break;case 11:break;case 13:if(s=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=a,Bs=t;break e}s=null!==s,a=null!==o&&null!==o.memoizedState,null!==o&&!s&&a&&null!==(o=o.child.sibling)&&(l=t.firstEffect,null!==l?(t.firstEffect=o,o.nextEffect=l):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8),(s||a)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:rr(t),As(t);break;case 10:Nr(t);break;case 9:case 14:break;case 17:yt(t.type)&&wt(t);break;case 18:break;default:i("156")}Bs=null}if(t=e,1===Us||1!==t.childExpirationTime){for(s=0,a=t.child;null!==a;)o=a.expirationTime,l=a.childExpirationTime,o>s&&(s=o),l>s&&(s=l),a=a.sibling;t.childExpirationTime=s}if(null!==Bs)return Bs;null!==r&&0==(1024&r.effectTag)&&(null===r.firstEffect&&(r.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==r.lastEffect&&(r.lastEffect.nextEffect=e.firstEffect),r.lastEffect=e.lastEffect),1<e.effectTag&&(null!==r.lastEffect?r.lastEffect.nextEffect=e:r.firstEffect=e,r.lastEffect=e))}else{if(null!==(e=fn(e,Us)))return e.effectTag&=1023,e;null!==r&&(r.firstEffect=r.lastEffect=null,r.effectTag|=1024)}if(null!==n)return n;if(null===r)break;e=r}return null}function wn(e){var t=Pr(e.alternate,e,Us);return e.memoizedProps=e.pendingProps,null===t&&(t=yn(e)),Ps.current=null,t}function kn(e,t){Ns&&i("243"),vn(),Ns=!0;var r=Os.current;Os.current=fs;var n=e.nextExpirationTimeToWorkOn;n===Us&&e===qs&&null!==Bs||(pn(),qs=e,Us=n,Bs=Rt(qs.current,null,Us),e.pendingCommitExpirationTime=0);for(var o=!1;;){try{if(t)for(;null!==Bs&&!Nn();)Bs=wn(Bs);else for(;null!==Bs;)Bs=wn(Bs)}catch(t){if(js=ks=ws=null,lr(),null===Bs)o=!0,zn(t);else{null===Bs&&i("271");var a=Bs,s=a.return;if(null!==s){e:{var l=e,u=s,c=a,d=t;if(s=Us,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==d&&"object"==typeof d&&"function"==typeof d.then){var f=d;d=u;var p=-1,h=-1;do{if(13===d.tag){var m=d.alternate;if(null!==m&&null!==(m=m.memoizedState)){h=10*(1073741822-m.timedOutAt);break}m=d.pendingProps.maxDuration,"number"==typeof m&&(0>=m?p=0:(-1===p||m<p)&&(p=m))}d=d.return}while(null!==d);d=u;do{if((m=13===d.tag)&&(m=void 0!==d.memoizedProps.fallback&&null===d.memoizedState),m){if(u=d.updateQueue,null===u?(u=new Set,u.add(f),d.updateQueue=u):u.add(f),0==(1&d.mode)){d.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:(s=Hr(1073741823),s.tag=Ss,Wr(c,s))),c.expirationTime=1073741823;break e}c=l,u=s;var b=c.pingCache;null===b?(b=c.pingCache=new Ls,m=new Set,b.set(f,m)):void 0===(m=b.get(f))&&(m=new Set,b.set(f,m)),m.has(u)||(m.add(u),c=En.bind(null,c,f,u),f.then(c,c)),-1===p?l=1073741823:(-1===h&&(h=10*(1073741822-Ft(l,s))-5e3),l=h+p),0<=l&&Fs<l&&(Fs=l),d.effectTag|=2048,d.expirationTime=s;break e}d=d.return}while(null!==d);d=Error((ee(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+te(c))}Hs=!0,d=Xr(d,c),l=u;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=s,s=cn(l,d,s),Gr(l,s);break e;case 1:if(p=d,h=l.type,c=l.stateNode,0==(64&l.effectTag)&&("function"==typeof h.getDerivedStateFromError||null!==c&&"function"==typeof c.componentDidCatch&&(null===Js||!Js.has(c)))){l.effectTag|=2048,l.expirationTime=s,s=dn(l,p,s),Gr(l,s);break e}}l=l.return}while(null!==l)}Bs=yn(a);continue}o=!0,zn(t)}}break}if(Ns=!1,Os.current=r,js=ks=ws=null,lr(),o)qs=null,e.finishedWork=null;else if(null!==Bs)e.finishedWork=null;else{if(r=e.current.alternate,null===r&&i("281"),qs=null,Hs){if(o=e.latestPendingTime,a=e.latestSuspendedTime,s=e.latestPingedTime,0!==o&&o<n||0!==a&&a<n||0!==s&&s<n)return Ut(e,n),void Mn(e,r,n,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,n=e.nextExpirationTimeToWorkOn=n,t=e.expirationTime=1073741823,void Mn(e,r,n,t,-1)}t&&-1!==Fs?(Ut(e,n),t=10*(1073741822-Ft(e,n)),t<Fs&&(Fs=t),t=10*(1073741822-On()),t=Fs-t,Mn(e,r,n,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=n,e.finishedWork=r)}}function jn(e,t){for(var r=e.return;null!==r;){switch(r.tag){case 1:var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Js||!Js.has(n)))return e=Xr(t,e),e=dn(r,e,1073741823),Wr(r,e),void In(r,1073741823);break;case 3:return e=Xr(t,e),e=cn(r,e,1073741823),Wr(r,e),void In(r,1073741823)}r=r.return}3===e.tag&&(r=Xr(t,e),r=cn(e,r,1073741823),Wr(e,r),In(e,1073741823))}function xn(e,t){var r=li.unstable_getCurrentPriorityLevel(),n=void 0;if(0==(1&t.mode))n=1073741823;else if(Ns&&!Ws)n=Us;else{switch(r){case li.unstable_ImmediatePriority:n=1073741823;break;case li.unstable_UserBlockingPriority:n=1073741822-10*(1+((1073741822-e+15)/10|0));break;case li.unstable_NormalPriority:n=1073741822-25*(1+((1073741822-e+500)/25|0));break;case li.unstable_LowPriority:case li.unstable_IdlePriority:n=1;break;default:i("313")}null!==qs&&n===Us&&--n}return r===li.unstable_UserBlockingPriority&&(0===nl||n<nl)&&(nl=n),n}function En(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),null!==qs&&Us===r?qs=null:(t=e.earliestSuspendedTime,n=e.latestSuspendedTime,0!==t&&r<=t&&r>=n&&(e.didError=!1,t=e.latestPingedTime,(0===t||t>r)&&(e.latestPingedTime=r),Ht(r,e),0!==(r=e.expirationTime)&&Pn(e,r)))}function Sn(e,t){var r=e.stateNode;null!==r&&r.delete(t),t=On(),t=xn(t,e),null!==(e=Cn(e,t))&&(Bt(e,t),0!==(t=e.expirationTime)&&Pn(e,t))}function Cn(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,i=null;if(null===n&&3===e.tag)i=e.stateNode;else for(;null!==n;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t),null===n.return&&3===n.tag){i=n.stateNode;break}n=n.return}return i}function In(e,t){null!==(e=Cn(e,t))&&(!Ns&&0!==Us&&t>Us&&pn(),Bt(e,t),Ns&&!Ws&&qs===e||Pn(e,e.expirationTime),pl>fl&&(pl=0,i("185")))}function Tn(e,t,r,n,i){return li.unstable_runWithPriority(li.unstable_ImmediatePriority,function(){return e(t,r,n,i)})}function An(){cl=1073741822-((li.unstable_now()-ul)/10|0)}function Dn(e,t){if(0!==Xs){if(t<Xs)return;null!==Zs&&li.unstable_cancelCallback(Zs)}Xs=t,e=li.unstable_now()-ul,Zs=li.unstable_scheduleCallback(Bn,{timeout:10*(1073741822-t)-e})}function Mn(e,t,r,n,i){e.expirationTime=n,0!==i||Nn()?0<i&&(e.timeoutHandle=ja(Rn.bind(null,e,t,r),i)):(e.pendingCommitExpirationTime=r,e.finishedWork=t)}function Rn(e,t,r){e.pendingCommitExpirationTime=r,e.finishedWork=t,An(),dl=cl,Un(e,r)}function Ln(e,t){e.expirationTime=t,e.finishedWork=null}function On(){return el?dl:(Vn(),0!==rl&&1!==rl||(An(),dl=cl),dl)}function Pn(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===Qs?(Ys=Qs=e,e.nextScheduledRoot=e):(Qs=Qs.nextScheduledRoot=e,Qs.nextScheduledRoot=Ys)):t>e.expirationTime&&(e.expirationTime=t),el||(al?sl&&(tl=e,rl=1073741823,Fn(e,1073741823,!1)):1073741823===t?qn(1073741823,!1):Dn(e,t))}function Vn(){var e=0,t=null;if(null!==Qs)for(var r=Qs,n=Ys;null!==n;){var o=n.expirationTime;if(0===o){if((null===r||null===Qs)&&i("244"),n===n.nextScheduledRoot){Ys=Qs=n.nextScheduledRoot=null;break}if(n===Ys)Ys=o=n.nextScheduledRoot,Qs.nextScheduledRoot=o,n.nextScheduledRoot=null;else{if(n===Qs){Qs=r,Qs.nextScheduledRoot=Ys,n.nextScheduledRoot=null;break}r.nextScheduledRoot=n.nextScheduledRoot,n.nextScheduledRoot=null}n=r.nextScheduledRoot}else{if(o>e&&(e=o,t=n),n===Qs)break;if(1073741823===e)break;r=n,n=n.nextScheduledRoot}}tl=t,rl=e}function Nn(){return!!ml||!!li.unstable_shouldYield()&&(ml=!0)}function Bn(){try{if(!Nn()&&null!==Ys){An();var e=Ys;do{var t=e.expirationTime;0!==t&&cl<=t&&(e.nextExpirationTimeToWorkOn=cl),e=e.nextScheduledRoot}while(e!==Ys)}qn(0,!0)}finally{ml=!1}}function qn(e,t){if(Vn(),t)for(An(),dl=cl;null!==tl&&0!==rl&&e<=rl&&!(ml&&cl>rl);)Fn(tl,rl,cl>rl),Vn(),An(),dl=cl;else for(;null!==tl&&0!==rl&&e<=rl;)Fn(tl,rl,!1),Vn();if(t&&(Xs=0,Zs=null),0!==rl&&Dn(tl,rl),pl=0,hl=null,null!==ll)for(e=ll,ll=null,t=0;t<e.length;t++){var r=e[t];try{r._onComplete()}catch(e){il||(il=!0,ol=e)}}if(il)throw e=ol,ol=null,il=!1,e}function Un(e,t){el&&i("253"),tl=e,rl=t,Fn(e,t,!1),qn(1073741823,!1)}function Fn(e,t,r){if(el&&i("245"),el=!0,r){var n=e.finishedWork;null!==n?Hn(e,n,t):(e.finishedWork=null,n=e.timeoutHandle,-1!==n&&(e.timeoutHandle=-1,xa(n)),kn(e,r),null!==(n=e.finishedWork)&&(Nn()?e.finishedWork=n:Hn(e,n,t)))}else n=e.finishedWork,null!==n?Hn(e,n,t):(e.finishedWork=null,n=e.timeoutHandle,-1!==n&&(e.timeoutHandle=-1,xa(n)),kn(e,r),null!==(n=e.finishedWork)&&Hn(e,n,t));el=!1}function Hn(e,t,r){var n=e.firstBatch;if(null!==n&&n._expirationTime>=r&&(null===ll?ll=[n]:ll.push(n),n._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===hl?pl++:(hl=e,pl=0),li.unstable_runWithPriority(li.unstable_ImmediatePriority,function(){gn(e,t)})}function zn(e){null===tl&&i("246"),tl.expirationTime=0,il||(il=!0,ol=e)}function Wn(e,t){var r=al;al=!0;try{return e(t)}finally{(al=r)||el||qn(1073741823,!1)}}function Gn(e,t){if(al&&!sl){sl=!0;try{return e(t)}finally{sl=!1}}return e(t)}function Kn(e,t,r){al||el||0===nl||(qn(nl,!1),nl=0);var n=al;al=!0;try{return li.unstable_runWithPriority(li.unstable_UserBlockingPriority,function(){return e(t,r)})}finally{(al=n)||el||qn(1073741823,!1)}}function $n(e,t,r,n,o){var a=t.current;e:if(r){r=r._reactInternalFiber;t:{2===Te(r)&&1===r.tag||i("170");var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(yt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);i("171"),s=void 0}if(1===r.tag){var l=r.type;if(yt(l)){r=xt(r,l,s);break e}}r=s}else r=Ta;return null===t.context?t.context=r:t.pendingContext=r,t=o,o=Hr(n),o.payload={element:e},t=void 0===t?null:t,null!==t&&(o.callback=t),vn(),Wr(a,o),In(a,n),n}function Jn(e,t,r,n){var i=t.current;return i=xn(On(),i),$n(e,t,r,i,n)}function Yn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Qn(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:so,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Xn(e){var t=1073741822-25*(1+((1073741822-On()+500)/25|0));t>=Vs&&(t=Vs-1),this._expirationTime=Vs=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Zn(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ei(e,t,r){t=At(3,null,null,t?3:0),e={current:t,containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:r,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function ti(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ri(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new ei(e,!1,t)}function ni(e,t,r,n,i){var o=r._reactRootContainer;if(o){if("function"==typeof i){var a=i;i=function(){var e=Yn(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=r._reactRootContainer=ri(r,n),"function"==typeof i){var s=i;i=function(){var e=Yn(o._internalRoot);s.call(e)}}Gn(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Yn(o._internalRoot)}function ii(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return ti(t)||i("200"),Qn(e,t,null,r)}function oi(e,t){return ti(e)||i("299","unstable_createRoot"),new ei(e,!0,null!=t&&!0===t.hydrate)}var ai=e("react"),si=e("object-assign"),li=e("scheduler");ai||i("227");var ui=!1,ci=null,di=!1,fi=null,pi={onError:function(e){ui=!0,ci=e}},hi=null,mi={},bi=[],_i={},vi={},gi={},yi=null,wi=null,ki=null,ji=null,xi={injectEventPluginOrder:function(e){hi&&i("101"),hi=Array.prototype.slice.call(e),l()},injectEventPluginsByName:function(e){var t,r=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];mi.hasOwnProperty(t)&&mi[t]===n||(mi[t]&&i("102",t),mi[t]=n,r=!0)}r&&l()}},Ei=Math.random().toString(36).slice(2),Si="__reactInternalInstance$"+Ei,Ci="__reactEventHandlers$"+Ei,Ii=!("undefined"==typeof window||!window.document||!window.document.createElement),Ti={animationend:S("Animation","AnimationEnd"),animationiteration:S("Animation","AnimationIteration"),animationstart:S("Animation","AnimationStart"),transitionend:S("Transition","TransitionEnd")},Ai={},Di={};Ii&&(Di=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);var Mi=C("animationend"),Ri=C("animationiteration"),Li=C("animationstart"),Oi=C("transitionend"),Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vi=null,Ni=null,Bi=null;si(D.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=T)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=T)},persist:function(){this.isPersistent=T},isPersistent:A,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=A,this._dispatchInstances=this._dispatchListeners=null}}),D.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},D.extend=function(e){function t(){}function r(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var i=new t;return si(i,r.prototype),r.prototype=i,r.prototype.constructor=r,r.Interface=si({},n.Interface,e),r.extend=n.extend,L(r),r},L(D);var qi=D.extend({data:null}),Ui=D.extend({data:null}),Fi=[9,13,27,32],Hi=Ii&&"CompositionEvent"in window,zi=null;Ii&&"documentMode"in document&&(zi=document.documentMode);var Wi=Ii&&"TextEvent"in window&&!zi,Gi=Ii&&(!Hi||zi&&8<zi&&11>=zi),Ki=String.fromCharCode(32),$i={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ji=!1,Yi=!1,Qi={eventTypes:$i,extractEvents:function(e,t,r,n){var i=void 0,o=void 0;if(Hi)e:{switch(e){case"compositionstart":i=$i.compositionStart;break e;case"compositionend":i=$i.compositionEnd;break e;case"compositionupdate":i=$i.compositionUpdate;break e}i=void 0}else Yi?O(e,r)&&(i=$i.compositionEnd):"keydown"===e&&229===r.keyCode&&(i=$i.compositionStart);return i?(Gi&&"ko"!==r.locale&&(Yi||i!==$i.compositionStart?i===$i.compositionEnd&&Yi&&(o=I()):(Vi=n,Ni="value"in Vi?Vi.value:Vi.textContent,Yi=!0)),i=qi.getPooled(i,t,r,n),o?i.data=o:null!==(o=P(r))&&(i.data=o),E(i),o=i):o=null,(e=Wi?V(e,r):N(e,r))?(t=Ui.getPooled($i.beforeInput,t,r,n),t.data=e,E(t)):t=null,null===o?t:null===t?o:[o,t]}},Xi=null,Zi=null,eo=null,to=!1,ro={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},no=ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;no.hasOwnProperty("ReactCurrentDispatcher")||(no.ReactCurrentDispatcher={current:null});var io=/^(.*)[\\\/]/,oo="function"==typeof Symbol&&Symbol.for,ao=oo?Symbol.for("react.element"):60103,so=oo?Symbol.for("react.portal"):60106,lo=oo?Symbol.for("react.fragment"):60107,uo=oo?Symbol.for("react.strict_mode"):60108,co=oo?Symbol.for("react.profiler"):60114,fo=oo?Symbol.for("react.provider"):60109,po=oo?Symbol.for("react.context"):60110,ho=oo?Symbol.for("react.concurrent_mode"):60111,mo=oo?Symbol.for("react.forward_ref"):60112,bo=oo?Symbol.for("react.suspense"):60113,_o=oo?Symbol.for("react.memo"):60115,vo=oo?Symbol.for("react.lazy"):60116,go="function"==typeof Symbol&&Symbol.iterator,yo=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wo=Object.prototype.hasOwnProperty,ko={},jo={},xo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xo[e]=new oe(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xo[t]=new oe(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){xo[e]=new oe(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xo[e]=new oe(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xo[e]=new oe(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){xo[e]=new oe(e,3,!0,e,null)}),["capture","download"].forEach(function(e){xo[e]=new oe(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){xo[e]=new oe(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){xo[e]=new oe(e,5,!1,e.toLowerCase(),null)});var Eo=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Eo,ae);xo[t]=new oe(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Eo,ae);xo[t]=new oe(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Eo,ae);xo[t]=new oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){xo[e]=new oe(e,1,!1,e.toLowerCase(),null)});var So={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Co=null,Io=null,To=!1;Ii&&(To=$("input")&&(!document.documentMode||9<document.documentMode));var Ao={eventTypes:So,_isInputEventSupported:To,extractEvents:function(e,t,r,n){var i=t?v(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=ve:G(i)?To?o=xe:(o=ke,a=we):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=je),o&&(o=o(e,t)))return me(o,r,n);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&he(i,"number",i.value)}},Do=D.extend({view:null,detail:null}),Mo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Ro=0,Lo=0,Oo=!1,Po=!1,Vo=Do.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Se,button:null,buttons:null,
relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ro;return Ro=e.screenX,Oo?"mousemove"===e.type?e.screenX-t:0:(Oo=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Lo;return Lo=e.screenY,Po?"mousemove"===e.type?e.screenY-t:0:(Po=!0,0)}}),No=Vo.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Bo={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},qo={eventTypes:Bo,extractEvents:function(e,t,r,n){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(r.relatedTarget||r.fromElement)||!o&&!i)return null;if(i=n.window===n?n:(i=n.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=r.relatedTarget||r.toElement)?b(t):null):o=null,o===t)return null;var a=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===e||"mouseover"===e?(a=Vo,s=Bo.mouseLeave,l=Bo.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=No,s=Bo.pointerLeave,l=Bo.pointerEnter,u="pointer");var c=null==o?i:v(o);if(i=null==t?i:v(t),e=a.getPooled(s,o,r,n),e.type=u+"leave",e.target=c,e.relatedTarget=i,r=a.getPooled(l,t,r,n),r.type=u+"enter",r.target=i,r.relatedTarget=c,n=t,o&&n)e:{for(t=o,i=n,u=0,a=t;a;a=y(a))u++;for(a=0,l=i;l;l=y(l))a++;for(;0<u-a;)t=y(t),u--;for(;0<a-u;)i=y(i),a--;for(;u--;){if(t===i||t===i.alternate)break e;t=y(t),i=y(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(u=o.alternate)||u!==i);)t.push(o),o=y(o);for(o=[];n&&n!==i&&(null===(u=n.alternate)||u!==i);)o.push(n),n=y(n);for(n=0;n<t.length;n++)j(t[n],"bubbled",e);for(n=o.length;0<n--;)j(o[n],"captured",r);return[e,r]}},Uo=Object.prototype.hasOwnProperty,Fo=D.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Ho=D.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zo=Do.extend({relatedTarget:null}),Wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Go={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ko=Do.extend({key:function(e){if(e.key){var t=Wo[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Re(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Go[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Se,charCode:function(e){return"keypress"===e.type?Re(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Re(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),$o=Vo.extend({dataTransfer:null}),Jo=Do.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Se}),Yo=D.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Qo=Vo.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Xo=[["abort","abort"],[Mi,"animationEnd"],[Ri,"animationIteration"],[Li,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[Oi,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Zo={},ea={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){Le(e,!0)}),Xo.forEach(function(e){Le(e,!1)});var ta={eventTypes:Zo,isInteractiveTopLevelEventType:function(e){return void 0!==(e=ea[e])&&!0===e.isInteractive},extractEvents:function(e,t,r,n){var i=ea[e];if(!i)return null;switch(e){case"keypress":if(0===Re(r))return null;case"keydown":case"keyup":e=Ko;break;case"blur":case"focus":e=zo;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=$o;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Jo;break;case Mi:case Ri:case Li:e=Fo;break;case Oi:e=Yo;break;case"scroll":e=Do;break;case"wheel":e=Qo;break;case"copy":case"cut":case"paste":e=Ho;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=No;break;default:e=D}return t=e.getPooled(i,t,r,n),E(t),t}},ra=ta.isInteractiveTopLevelEventType,na=[],ia=!0,oa={},aa=0,sa="_reactListenersID"+(""+Math.random()).slice(2),la=Ii&&"documentMode"in document&&11>=document.documentMode,ua={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ca=null,da=null,fa=null,pa=!1,ha={eventTypes:ua,extractEvents:function(e,t,r,n){var i,o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;if(!(i=!o)){e:{o=qe(o),i=gi.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?v(t):window,e){case"focus":(G(o)||"true"===o.contentEditable)&&(ca=o,da=t,fa=null);break;case"blur":fa=da=ca=null;break;case"mousedown":pa=!0;break;case"contextmenu":case"mouseup":case"dragend":return pa=!1,Je(r,n);case"selectionchange":if(la)break;case"keydown":case"keyup":return Je(r,n)}return null}};xi.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),yi=g,wi=_,ki=v,xi.injectEventPluginsByName({SimpleEventPlugin:ta,EnterLeaveEventPlugin:qo,ChangeEventPlugin:Ao,SelectEventPlugin:ha,BeforeInputEventPlugin:Qi});var ma={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},ba=void 0,_a=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r)})}:e}(function(e,t){if(e.namespaceURI!==ma.svg||"innerHTML"in e)e.innerHTML=t;else{for(ba=ba||document.createElement("div"),ba.innerHTML="<svg>"+t+"</svg>",t=ba.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),va={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ga=["Webkit","ms","Moz","O"];Object.keys(va).forEach(function(e){ga.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),va[t]=va[e]})});var ya=si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),wa=null,ka=null,ja="function"==typeof setTimeout?setTimeout:void 0,xa="function"==typeof clearTimeout?clearTimeout:void 0,Ea=li.unstable_scheduleCallback,Sa=li.unstable_cancelCallback;new Set;var Ca=[],Ia=-1,Ta={},Aa={current:Ta},Da={current:!1},Ma=Ta,Ra=null,La=null,Oa=(new ai.Component).refs,Pa={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Te(e)},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=On();n=xn(n,e);var i=Hr(n);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),vn(),Wr(e,i),In(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=On();n=xn(n,e);var i=Hr(n);i.tag=Es,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),vn(),Wr(e,i),In(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=On();r=xn(r,e);var n=Hr(r);n.tag=Ss,void 0!==t&&null!==t&&(n.callback=t),vn(),Wr(e,n),In(e,r)}},Va=Array.isArray,Na=Zt(!0),Ba=Zt(!1),qa={},Ua={current:qa},Fa={current:qa},Ha={current:qa},za=0,Wa=2,Ga=4,Ka=8,$a=16,Ja=32,Ya=64,Qa=128,Xa=no.ReactCurrentDispatcher,Za=0,es=null,ts=null,rs=null,ns=null,is=null,os=null,as=0,ss=null,ls=0,us=!1,cs=null,ds=0,fs={readContext:qr,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or},ps={readContext:qr,useCallback:function(e,t){return ur().memoizedState=[e,void 0===t?null:t],e},useContext:qr,useEffect:function(e,t){return hr(516,Qa|Ya,e,t)},useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,hr(4,Ga|Ja,br.bind(null,t,e),r)},useLayoutEffect:function(e,t){return hr(4,Ga|Ja,e,t)},useMemo:function(e,t){var r=ur();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ur();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=vr.bind(null,es,e),[n.memoizedState,e]},useRef:function(e){var t=ur();return e={current:e},t.memoizedState=e},useState:function(e){var t=ur();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={last:null,dispatch:null,lastRenderedReducer:dr,lastRenderedState:e},e=e.dispatch=vr.bind(null,es,e),[t.memoizedState,e]},useDebugValue:_r},hs={readContext:qr,useCallback:function(e,t){var r=cr();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ar(t,n[1])?n[0]:(r.memoizedState=[e,t],e)},useContext:qr,useEffect:function(e,t){return mr(516,Qa|Ya,e,t)},useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,mr(4,Ga|Ja,br.bind(null,t,e),r)},useLayoutEffect:function(e,t){return mr(4,Ga|Ja,e,t)},useMemo:function(e,t){var r=cr();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ar(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)},useReducer:fr,useRef:function(){return cr().memoizedState},useState:function(e){return fr(dr)},useDebugValue:_r},ms=null,bs=null,_s=!1,vs=no.ReactCurrentOwner,gs=!1,ys={current:null},ws=null,ks=null,js=null,xs=0,Es=1,Ss=2,Cs=3,Is=!1,Ts=void 0,As=void 0,Ds=void 0,Ms=void 0;Ts=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},As=function(){},Ds=function(e,t,r,n,i){var o=e.memoizedProps;if(o!==n){var a=t.stateNode;switch(er(Ua.current),e=null,r){case"input":o=ue(a,o),n=ue(a,n),e=[];break;case"option":o=Qe(a,o),n=Qe(a,n),e=[];break;case"select":o=si({},o,{value:void 0}),n=si({},n,{value:void 0}),e=[];break;case"textarea":o=Ze(a,o),n=Ze(a,n),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof n.onClick&&(a.onclick=dt)}lt(r,n),a=r=void 0;var s=null;for(r in o)if(!n.hasOwnProperty(r)&&o.hasOwnProperty(r)&&null!=o[r])if("style"===r){var l=o[r];for(a in l)l.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(vi.hasOwnProperty(r)?e||(e=[]):(e=e||[]).push(r,null));for(r in n){var u=n[r];if(l=null!=o?o[r]:void 0,n.hasOwnProperty(r)&&u!==l&&(null!=u||null!=l))if("style"===r)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(s||(s={}),s[a]=u[a])}else s||(e||(e=[]),e.push(r,s)),s=u;else"dangerouslySetInnerHTML"===r?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(e=e||[]).push(r,""+u)):"children"===r?l===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(r,""+u):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(vi.hasOwnProperty(r)?(null!=u&&ct(i,r),e||l===u||(e=[])):(e=e||[]).push(r,u))}s&&(e=e||[]).push("style",s),i=e,(t.updateQueue=i)&&Zr(t)}},Ms=function(e,t,r,n){r!==n&&Zr(t)};var Rs="function"==typeof WeakSet?WeakSet:Set,Ls="function"==typeof WeakMap?WeakMap:Map,Os=no.ReactCurrentDispatcher,Ps=no.ReactCurrentOwner,Vs=1073741822,Ns=!1,Bs=null,qs=null,Us=0,Fs=-1,Hs=!1,zs=null,Ws=!1,Gs=null,Ks=null,$s=null,Js=null,Ys=null,Qs=null,Xs=0,Zs=void 0,el=!1,tl=null,rl=0,nl=0,il=!1,ol=null,al=!1,sl=!1,ll=null,ul=li.unstable_now(),cl=1073741822-(ul/10|0),dl=cl,fl=50,pl=0,hl=null,ml=!1;Xi=function(e,t,r){switch(t){case"input":if(fe(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=g(n);o||i("90"),X(n),fe(n,o)}}}break;case"textarea":tt(e,r);break;case"select":null!=(t=r.value)&&Xe(e,!!r.multiple,t,!1)}},Xn.prototype.render=function(e){this._defer||i("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,r=this._expirationTime,n=new Zn;return $n(e,t,null,r,n._onCommit),n},Xn.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Xn.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||i("251"),this._hasChildren){var r=this._expirationTime;if(t!==this){this._hasChildren&&(r=this._expirationTime=t._expirationTime,this.render(this._children));for(var n=null,o=t;o!==this;)n=o,o=o._next;null===n&&i("251"),n._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Un(e,r),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Xn.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Zn.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Zn.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var r=e[t];"function"!=typeof r&&i("191",r),r()}}},ei.prototype.render=function(e,t){var r=this._internalRoot,n=new Zn;return t=void 0===t?null:t,null!==t&&n.then(t),Jn(e,r,null,n._onCommit),n},ei.prototype.unmount=function(e){var t=this._internalRoot,r=new Zn;return e=void 0===e?null:e,null!==e&&r.then(e),Jn(null,t,null,r._onCommit),r},ei.prototype.legacy_renderSubtreeIntoContainer=function(e,t,r){var n=this._internalRoot,i=new Zn;return r=void 0===r?null:r,null!==r&&i.then(r),Jn(t,n,e,i._onCommit),i},ei.prototype.createBatch=function(){var e=new Xn(this),t=e._expirationTime,r=this._internalRoot,n=r.firstBatch;if(null===n)r.firstBatch=e,e._next=null;else{for(r=null;null!==n&&n._expirationTime>=t;)r=n,n=n._next;e._next=n,null!==r&&(r._next=e)}return e},F=Wn,H=Kn,z=function(){el||0===nl||(qn(nl,!1),nl=0)};var bl={createPortal:ii,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?i("188"):i("268",Object.keys(e))),e=Me(t),e=null===e?null:e.stateNode},hydrate:function(e,t,r){return ti(t)||i("200"),ni(null,e,t,!0,r)},render:function(e,t,r){return ti(t)||i("200"),ni(null,e,t,!1,r)},unstable_renderSubtreeIntoContainer:function(e,t,r,n){return ti(r)||i("200"),(null==e||void 0===e._reactInternalFiber)&&i("38"),ni(e,t,r,!1,n)},unmountComponentAtNode:function(e){return ti(e)||i("40"),!!e._reactRootContainer&&(Gn(function(){ni(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return ii.apply(void 0,arguments)},unstable_batchedUpdates:Wn,unstable_interactiveUpdates:Kn,flushSync:function(e,t){el&&i("187");var r=al;al=!0;try{return Tn(e,t)}finally{al=r,qn(1073741823,!1)}},unstable_createRoot:oi,unstable_flushControlled:function(e){var t=al;al=!0;try{Tn(e)}finally{(al=t)||el||qn(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[_,v,g,xi.injectEventPluginsByName,_i,E,function(e){f(e,x)},q,U,Be,m]}};!function(e){var t=e.findFiberByHostInstance;It(si({},e,{overrideProps:null,currentDispatcherRef:no.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Me(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:b,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var _l={default:bl},vl=_l&&bl||_l;t.exports=vl.default||vl},{"object-assign":508,react:580,scheduler:587}],553:[function(e,t,r){"use strict";function n(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=e("./cjs/react-dom.production.min.js")},{"./cjs/react-dom.development.js":551,"./cjs/react-dom.production.min.js":552}],554:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("@babel/runtime/helpers/defineProperty")),d=n(e("react")),f=n(e("./TemplateContainer")),p=function(e){function t(){var e,r;(0,i.default)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return r=(0,a.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(o))),(0,c.default)((0,u.default)((0,u.default)(r)),"_templateContainer",void 0),(0,c.default)((0,u.default)((0,u.default)(r)),"_templateContainerSetter",function(e){e&&(r._templateContainer=e)}),(0,c.default)((0,u.default)((0,u.default)(r)),"_el",void 0),(0,c.default)((0,u.default)((0,u.default)(r)),"_elSetter",function(e){e&&(r._el=e)}),(0,c.default)((0,u.default)((0,u.default)(r)),"_dragHandleProps",r.props.makeDragHandleProps(function(){return r.props.y})),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"getDOMNode",value:function(){return this._el}},{key:"getTemplate",value:function(){return this._templateContainer.getTemplate()}},{key:"shouldComponentUpdate",value:function(e){return this.props.anySelected!==e.anySelected||this.props.itemSelected!==e.itemSelected||this.props.item!==e.item||this.props.template!==e.template||this.props.y!==e.y||this.props.height!==e.height||this.props.zIndex!==e.zIndex||this.props.commonProps!==e.commonProps}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.y,n=e.padding,i=e.itemSelected,o=e.anySelected,a=e.height,s=e.zIndex,l=e.template,u=e.commonProps;return d.default.createElement("div",{ref:this._elSetter,style:{position:null==r?"relative":"absolute",boxSizing:"border-box",left:"0px",right:"0px",top:null==r?"0px":"".concat(r,"px"),marginBottom:"".concat(n,"px"),height:null==r?"auto":"".concat(o*(a.drag-a.natural)+a.natural,"px"),zIndex:s}},d.default.createElement(f.default,{ref:this._templateContainerSetter,item:t,template:l,itemSelected:i,anySelected:o,dragHandleProps:this._dragHandleProps,commonProps:u}))}}]),t}(d.default.Component);r.default=p,t.exports=r.default,t.exports.default=r.default},{"./TemplateContainer":556,"@babel/runtime/helpers/assertThisInitialized":61,"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/getPrototypeOf":65,"@babel/runtime/helpers/inherits":66,"@babel/runtime/helpers/interopRequireDefault":67,"@babel/runtime/helpers/possibleConstructorReturn":72,react:580}],555:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),u=n(e("react")),c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(){this.props.cb()}},{key:"render",value:function(){return null}}]),t}(u.default.Component);r.default=c,t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/getPrototypeOf":65,"@babel/runtime/helpers/inherits":66,"@babel/runtime/helpers/interopRequireDefault":67,"@babel/runtime/helpers/possibleConstructorReturn":72,react:580}],556:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("@babel/runtime/helpers/defineProperty")),d=n(e("react")),f=function(e){function t(){var e,r;(0,i.default)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return r=(0,a.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(o))),(0,c.default)((0,u.default)((0,u.default)(r)),"_template",void 0),(0,c.default)((0,u.default)((0,u.default)(r)),"_templateSetter",function(e){e&&(r._template=e)}),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.anySelected!==e.anySelected||this.props.itemSelected!==e.itemSelected||this.props.item!==e.item||this.props.template!==e.template||this.props.commonProps!==e.commonProps}},{key:"getTemplate",value:function(){return this._template}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.itemSelected,n=e.anySelected,i=e.dragHandleProps,o=e.commonProps,a=this.props.template;return d.default.createElement(a,{ref:this._templateSetter,item:t,itemSelected:r,anySelected:n,dragHandleProps:i,commonProps:o})}}]),t}(d.default.Component);r.default=f,t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/assertThisInitialized":61,"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/getPrototypeOf":65,"@babel/runtime/helpers/inherits":66,"@babel/runtime/helpers/interopRequireDefault":67,"@babel/runtime/helpers/possibleConstructorReturn":72,react:580}],557:[function(e,t,r){"use strict";function n(e,t,r){return Math.round(t-t/r*e)}var i=e("@babel/runtime/helpers/interopRequireWildcard"),o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime/helpers/objectSpread")),s=o(e("@babel/runtime/helpers/classCallCheck")),l=o(e("@babel/runtime/helpers/createClass")),u=o(e("@babel/runtime/helpers/possibleConstructorReturn")),c=o(e("@babel/runtime/helpers/getPrototypeOf")),d=o(e("@babel/runtime/helpers/inherits")),f=o(e("@babel/runtime/helpers/assertThisInitialized")),p=o(e("@babel/runtime/helpers/defineProperty")),h=i(e("react")),m=o(e("prop-types")),b=e("react-motion"),_=o(e("immutability-helper")),v=o(e("react-multi-ref")),g=o(e("./OnUpdate")),y=o(e("./MoveContainer")),w={natural:200,drag:30},k=function(e){function t(e){var r;return(0,s.default)(this,t),r=(0,u.default)(this,(0,c.default)(t).call(this,e)),(0,p.default)((0,f.default)((0,f.default)(r)),"_itemRefs",new v.default),(0,p.default)((0,f.default)((0,f.default)(r)),"_autoScrollerTimer",void 0),(0,p.default)((0,f.default)((0,f.default)(r)),"_listRef",h.createRef()),(0,p.default)((0,f.default)((0,f.default)(r)),"_handleTouchMove",function(e){e.preventDefault(),r._handleMouseMove(e.touches[0])}),(0,p.default)((0,f.default)((0,f.default)(r)),"_handleMouseMove",function(e){var t=e.pageY,i=e.clientY,o=r.props,s=o.list,l=o.autoScrollMaxSpeed,u=o.autoScrollRegionSize,c=r.state,d=c.dragging,f=c.lastDrag;if(d&&f){var p=r._getContainer(),h=r._getDragVisualIndex(),m=r._getKeyFn();if(clearInterval(r._autoScrollerTimer),0!==h&&h!==s.length-1){var b=0,_=p&&p!==document.body&&p.getBoundingClientRect?p.getBoundingClientRect():{top:0,bottom:1/0},v=Math.max(0,_.top),g=i-v;if(g>0&&g<u)b=-1*n(g,l,u);else{var y=Math.min(window.innerHeight,_.bottom),w=y-i;w>0&&w<u&&(b=n(w,l,u))}0!==b&&(r._scrollContainer(b),r._autoScrollerTimer=setTimeout(function(){r._handleMouseMove({pageY:t+(p===document.body?b:0),clientY:i})},16))}var k=p&&p!==document.body?p.scrollTop:0,j=t-f.mouseOffset+k;if(r.props.constrainDrag){var x=r._getVisualListDuringDrag();j=Math.max(j,r._getDistanceFromTopDuringDrag(f,m(x[0]),x)),j=Math.min(j,r._getDistanceFromTopDuringDrag(f,m(x[x.length-1]),x))}r.setState({lastDrag:(0,a.default)({},f,{mouseY:j})})}}),(0,p.default)((0,f.default)((0,f.default)(r)),"_handleMouseUp",function(){clearInterval(r._autoScrollerTimer),window.removeEventListener("mouseup",r._handleMouseUp),window.removeEventListener("touchend",r._handleMouseUp),window.removeEventListener("touchmove",r._handleTouchMove),window.removeEventListener("mousemove",r._handleMouseMove),document.documentElement&&(document.documentElement.style.cursor=""),r._lastScrollDelta=0;var e=r.props,t=e.list,n=e.onMoveEnd,i=r.state,o=i.dragging,a=i.lastDrag;if(o&&a&&n){var s=r._getDragListIndex(),l=r._getDragVisualIndex();if(s!==l){n(r._getVisualListDuringDrag(),t[s],s,l)}r.setState({dragging:!1})}}),(0,p.default)((0,f.default)((0,f.default)(r)),"_lastScrollDelta",0),r.state={useAbsolutePositioning:!1,dragging:!1,lastDrag:null,heights:null},r}return(0,d.default)(t,e),(0,l.default)(t,[{key:"getItemInstance",value:function(e){var t=this._itemRefs.map.get(e);if(!t)throw new Error("key not found");return t.getTemplate()}},{key:"componentWillUnmount",value:function(){this._handleMouseUp()}},{key:"_handleTouchStart",value:function(e,t,r){r.stopPropagation(),this._handleStartDrag(e,t,r.touches[0].pageY)}},{key:"_handleMouseDown",value:function(e,t,r){r.preventDefault(),this._handleStartDrag(e,t,r.pageY)}},{key:"_handleStartDrag",value:function(e,t,r){var n=this;document.documentElement&&(document.documentElement.style.cursor="move"),window.addEventListener("mouseup",this._handleMouseUp),window.addEventListener("touchend",this._handleMouseUp),window.addEventListener("touchmove",this._handleTouchMove),window.addEventListener("mousemove",this._handleMouseMove);var i=this._listRef.current;if(!i)throw new Error("Should not happen");i.contains&&document.activeElement&&i.contains(document.activeElement)&&document.activeElement.blur();var o=this._getKeyFn(),a=null;if(null==this.state.heights){var s=Object.create(null);this.props.list.forEach(function(e){var t=o(e),r=n._itemRefs.map.get(t),i=r?r.getDOMNode().firstElementChild:null,a=r?r.getTemplate():null,l=i instanceof HTMLElement?i.offsetHeight:w.natural,u=a&&"function"==typeof a.getDragHeight&&a.getDragHeight()||l;s[t]={natural:l,drag:u}}),a=s}var l=function(){var i=n.props.list.map(o).indexOf(e),a=null==t?n._getDistance(0,i,!1):t,s=n._getContainer(),l=s&&s!==document.body?s.scrollTop:0;n.setState({useAbsolutePositioning:!0,dragging:!0,lastDrag:{itemKey:e,startY:a,mouseY:a,mouseOffset:r-a+l}})};a?this.setState({heights:a},l):l()}},{key:"_scrollContainer",value:function(e){var t=this._getContainer();t&&(window.scrollBy&&t===document.body?window.scrollBy(0,e):t.scrollTop+=e)}},{key:"_adjustScrollAtEnd",value:function(e){var t=Math.round(e-this._lastScrollDelta);this._scrollContainer(t),this._lastScrollDelta+=t}},{key:"_getDragListIndex",value:function(){var e=this.props.list,r=this.state.lastDrag;if(!r)throw new Error("No drag happened");var n=this._getKeyFn();return t._getIndexOfItemWithKey(n,e,r.itemKey)}},{key:"_getDragVisualIndex",value:function(){var e=this.props,t=e.list,r=e.padding,n=this.state,i=n.dragging,o=n.lastDrag;if(!i||!o)throw new Error("Should not happen");var a=this._getDragListIndex(),s=o.mouseY,l=o.startY,u=s-l,c=u>0?1:u<0?-1:0,d=a;if(0!==c)for(var f=this._getKeyFn(),p=Math.abs(u),h=a+c;h<t.length&&h>=0;h+=c){var m=this._getItemHeight(f(t[h])).drag;if(p<m/2+r)break;p-=m+r,d=h}return d}},{key:"_getVisualListDuringDrag",value:function(){var e=this.props.list,t=this.state,r=t.dragging,n=t.lastDrag;if(!r||!n)throw new Error("Should not happen: _getVisualListDuringDrag called outside of drag");var i=this._getDragListIndex(),o=this._getDragVisualIndex();return(0,_.default)(e,{$splice:[[i,1],[o,0,e[i]]]})}},{key:"_getItemHeight",value:function(e){return null!=this.state.heights&&e in this.state.heights?this.state.heights[e]:w}},{key:"_getDistance",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props.list;if(t<e)return-this._getDistance(t,e,r,n);for(var i=this.props.padding,o=this._getKeyFn(),a=0,s=e;s<t;s++){var l=this._getItemHeight(o(n[s]));a+=(r?l.drag:l.natural)+i}return a}},{key:"_getDistanceFromTopDuringDrag",value:function(e,r,n){var i=this._getKeyFn(),o=t._getIndexOfItemWithKey(i,n,r),a=this._getDragListIndex(),s=t._getIndexOfItemWithKey(i,n,e.itemKey),l=0;if(s<a){var u=this._getItemHeight(e.itemKey),c=this._getItemHeight(i(n[a]));l=u.drag-c.drag}return e.startY+l+this._getDistance(a,o,!0,n)}},{
key:"_getContainer",value:function(){var e=this.props.container;return e?e():null}},{key:"_getKeyFn",value:function(){return t._getKeyFn(this.props.itemKey)}},{key:"render",value:function(){var e=this,t=this.props,r=t.list,n=t.springConfig,i=t.container,o=t.padding,s=t.template,l=t.unsetZIndex,u=t.commonProps,c=this.state,d=c.dragging,f=c.lastDrag,p=c.useAbsolutePositioning,m=this._getKeyFn(),_=(0,b.spring)(d?1:0,n),v=d?this._getVisualListDuringDrag():r,w=r.map(function(t,i){var c=m(t),g=d&&f&&f.itemKey===c?{itemSelected:(0,b.spring)(1,n),y:f.mouseY}:{itemSelected:(0,b.spring)(0,n),y:(p?b.spring:function(e,t){return e})(d&&f?e._getDistanceFromTopDuringDrag(f,c,v):e._getDistance(0,i,!1),n)},w=(0,a.default)({anySelected:_},g),k=function(t){return{onMouseDown:function(r){return e._handleMouseDown(c,t(),r)},onTouchStart:function(r){return e._handleTouchStart(c,t(),r)}}},j=e._getItemHeight(c);return h.createElement(b.Motion,{style:w,key:c,children:function(n){var a=n.itemSelected,d=n.anySelected,m=n.y;return h.createElement(y.default,{ref:e._itemRefs.ref(c),y:p?m:null,template:s,padding:o,item:t,itemSelected:a,anySelected:d,height:j,zIndex:l&&!p?"auto":f&&f.itemKey===c?r.length:i,makeDragHandleProps:k,commonProps:u})}})}),k=0;if(!d&&f&&p){var j=this._getDragListIndex();k=(0,b.spring)(this._getDistance(0,j,!1)-f.mouseY,n)}var x=0,E=0;return r.length&&(E=o,p&&(x=this._getDistance(0,r.length,!1)-o)),h.createElement("div",{style:{position:"relative"},ref:this._listRef},h.createElement(b.Motion,{style:{adjustScroll:k,anySelected:_},onRest:function(){d||e.setState({heights:null,useAbsolutePositioning:!1})},children:function(t){var r=t.adjustScroll;return h.createElement("div",{style:{display:p?"block":"none",height:"".concat(x,"px"),marginBottom:"".concat(E,"px")}},i&&h.createElement(g.default,{cb:function(){!d&&f&&p&&e._adjustScrollAtEnd(r)}}))}}),w)}}],[{key:"getDerivedStateFromProps",value:function(e,r){var n=e.list,i=r.lastDrag;if(i){var o=t._getKeyFn(e.itemKey);try{t._getIndexOfItemWithKey(o,n,i.itemKey)}catch(e){return{dragging:!1,lastDrag:null}}}return null}},{key:"_getIndexOfItemWithKey",value:function(e,t,r){for(var n=0,i=t.length;n<i;n++)if(e(t[n])===r)return n;throw new Error("Failed to find drag index")}},{key:"_getKeyFn",value:function(e){return"function"==typeof e?e:function(t){return t[e]}}}]),t}(h.Component);r.default=k,(0,p.default)(k,"propTypes",{itemKey:m.default.oneOfType([m.default.string,m.default.func]).isRequired,template:m.default.func,list:m.default.array.isRequired,onMoveEnd:m.default.func,container:m.default.func,springConfig:m.default.object,constrainDrag:m.default.bool,padding:m.default.number,unsetZIndex:m.default.bool,autoScrollMaxSpeed:m.default.number.isRequired,autoScrollRegionSize:m.default.number.isRequired,commonProps:m.default.object}),(0,p.default)(k,"defaultProps",{springConfig:{stiffness:300,damping:50},padding:10,unsetZIndex:!1,constrainDrag:!1,autoScrollMaxSpeed:15,autoScrollRegionSize:30}),t.exports=r.default,t.exports.default=r.default},{"./MoveContainer":554,"./OnUpdate":555,"@babel/runtime/helpers/assertThisInitialized":61,"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/getPrototypeOf":65,"@babel/runtime/helpers/inherits":66,"@babel/runtime/helpers/interopRequireDefault":67,"@babel/runtime/helpers/interopRequireWildcard":68,"@babel/runtime/helpers/objectSpread":71,"@babel/runtime/helpers/possibleConstructorReturn":72,"immutability-helper":558,"prop-types":545,react:580,"react-motion":568,"react-multi-ref":575}],558:[function(e,t,r){arguments[4][511][0].apply(r,arguments)},{dup:511,invariant:296}],559:[function(e,t,r){(function(e){"use strict";"production"!==e.env.NODE_ENV&&function(){function e(e){return"string"==typeof e||"function"==typeof e||e===g||e===E||e===w||e===y||e===C||"object"==typeof e&&null!==e&&(e.$$typeof===T||e.$$typeof===I||e.$$typeof===k||e.$$typeof===j||e.$$typeof===S)}function t(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case _:var r=e.type;switch(r){case x:case E:case g:case w:case y:case C:return r;default:var n=r&&r.$$typeof;switch(n){case j:case S:case k:return n;default:return t}}case T:case I:case v:return t}}}function n(e){return G||(G=!0,M(!1,"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),i(e)||t(e)===x}function i(e){return t(e)===E}function o(e){return t(e)===j}function a(e){return t(e)===k}function s(e){return"object"==typeof e&&null!==e&&e.$$typeof===_}function l(e){return t(e)===S}function u(e){return t(e)===g}function c(e){return t(e)===T}function d(e){return t(e)===I}function f(e){return t(e)===v}function p(e){return t(e)===w}function h(e){return t(e)===y}function m(e){return t(e)===C}Object.defineProperty(r,"__esModule",{value:!0});var b="function"==typeof Symbol&&Symbol.for,_=b?Symbol.for("react.element"):60103,v=b?Symbol.for("react.portal"):60106,g=b?Symbol.for("react.fragment"):60107,y=b?Symbol.for("react.strict_mode"):60108,w=b?Symbol.for("react.profiler"):60114,k=b?Symbol.for("react.provider"):60109,j=b?Symbol.for("react.context"):60110,x=b?Symbol.for("react.async_mode"):60111,E=b?Symbol.for("react.concurrent_mode"):60111,S=b?Symbol.for("react.forward_ref"):60112,C=b?Symbol.for("react.suspense"):60113,I=b?Symbol.for("react.memo"):60115,T=b?Symbol.for("react.lazy"):60116,A=function(){},D=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=0,o="Warning: "+e.replace(/%s/g,function(){return r[i++]});"undefined"!=typeof console&&console.warn(o);try{throw new Error(o)}catch(e){}};A=function(e,t){if(void 0===t)throw new Error("`lowPriorityWarning(condition, format, ...args)` requires a warning message argument");if(!e){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];D.apply(void 0,[t].concat(n))}};var M=A,R=x,L=E,O=j,P=k,V=_,N=S,B=g,q=T,U=I,F=v,H=w,z=y,W=C,G=!1;r.typeOf=t,r.AsyncMode=R,r.ConcurrentMode=L,r.ContextConsumer=O,r.ContextProvider=P,r.Element=V,r.ForwardRef=N,r.Fragment=B,r.Lazy=q,r.Memo=U,r.Portal=F,r.Profiler=H,r.StrictMode=z,r.Suspense=W,r.isValidElementType=e,r.isAsyncMode=n,r.isConcurrentMode=i,r.isContextConsumer=o,r.isContextProvider=a,r.isElement=s,r.isForwardRef=l,r.isFragment=u,r.isLazy=c,r.isMemo=d,r.isPortal=f,r.isProfiler=p,r.isStrictMode=h,r.isSuspense=m}()}).call(this,e("_process"))},{_process:541}],560:[function(e,t,r){"use strict";function n(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case p:case h:case l:case c:case u:case b:return e;default:switch(e=e&&e.$$typeof){case f:case m:case d:return e;default:return t}}case v:case _:case s:return t}}}function i(e){return n(e)===h}Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&Symbol.for,a=o?Symbol.for("react.element"):60103,s=o?Symbol.for("react.portal"):60106,l=o?Symbol.for("react.fragment"):60107,u=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,d=o?Symbol.for("react.provider"):60109,f=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.async_mode"):60111,h=o?Symbol.for("react.concurrent_mode"):60111,m=o?Symbol.for("react.forward_ref"):60112,b=o?Symbol.for("react.suspense"):60113,_=o?Symbol.for("react.memo"):60115,v=o?Symbol.for("react.lazy"):60116;r.typeOf=n,r.AsyncMode=p,r.ConcurrentMode=h,r.ContextConsumer=f,r.ContextProvider=d,r.Element=a,r.ForwardRef=m,r.Fragment=l,r.Lazy=v,r.Memo=_,r.Portal=s,r.Profiler=c,r.StrictMode=u,r.Suspense=b,r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===l||e===h||e===c||e===u||e===b||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===_||e.$$typeof===d||e.$$typeof===f||e.$$typeof===m)},r.isAsyncMode=function(e){return i(e)||n(e)===p},r.isConcurrentMode=i,r.isContextConsumer=function(e){return n(e)===f},r.isContextProvider=function(e){return n(e)===d},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},r.isForwardRef=function(e){return n(e)===m},r.isFragment=function(e){return n(e)===l},r.isLazy=function(e){return n(e)===v},r.isMemo=function(e){return n(e)===_},r.isPortal=function(e){return n(e)===s},r.isProfiler=function(e){return n(e)===c},r.isStrictMode=function(e){return n(e)===u},r.isSuspense=function(e){return n(e)===b}},{}],561:[function(e,t,r){(function(r){"use strict";"production"===r.env.NODE_ENV?t.exports=e("./cjs/react-is.production.min.js"):t.exports=e("./cjs/react-is.development.js")}).call(this,e("_process"))},{"./cjs/react-is.development.js":559,"./cjs/react-is.production.min.js":560,_process:541}],562:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./mapToZero"),u=n(l),c=e("./stripStyle"),d=n(c),f=e("./stepper"),p=n(f),h=e("performance-now"),m=n(h),b=e("raf"),_=n(b),v=e("./shouldStopAnimation"),g=n(v),y=e("react"),w=n(y),k=e("prop-types"),j=n(k),x=1e3/60,E=function(e){function t(r){var n=this;i(this,t),e.call(this,r),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(e){var t=!1,r=n.state,i=r.currentStyle,o=r.currentVelocity,s=r.lastIdealStyle,l=r.lastIdealVelocity;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c=e[u];"number"==typeof c&&(t||(t=!0,i=a({},i),o=a({},o),s=a({},s),l=a({},l)),i[u]=c,o[u]=0,s[u]=c,l[u]=0)}t&&n.setState({currentStyle:i,currentVelocity:o,lastIdealStyle:s,lastIdealVelocity:l})},this.startAnimationIfNecessary=function(){n.animationID=_.default(function(e){var t=n.props.style;if(g.default(n.state.currentStyle,t,n.state.currentVelocity))return n.wasAnimating&&n.props.onRest&&n.props.onRest(),n.animationID=null,n.wasAnimating=!1,void(n.accumulatedTime=0);n.wasAnimating=!0;var r=e||m.default(),i=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+i,n.accumulatedTime>10*x&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();var o=(n.accumulatedTime-Math.floor(n.accumulatedTime/x)*x)/x,a=Math.floor(n.accumulatedTime/x),s={},l={},u={},c={};for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var f=t[d];if("number"==typeof f)u[d]=f,c[d]=0,s[d]=f,l[d]=0;else{for(var h=n.state.lastIdealStyle[d],b=n.state.lastIdealVelocity[d],_=0;_<a;_++){var v=p.default(x/1e3,h,b,f.val,f.stiffness,f.damping,f.precision);h=v[0],b=v[1]}var y=p.default(x/1e3,h,b,f.val,f.stiffness,f.damping,f.precision),w=y[0],k=y[1];u[d]=h+(w-h)*o,c[d]=b+(k-b)*o,s[d]=h,l[d]=b}}n.animationID=null,n.accumulatedTime-=a*x,n.setState({currentStyle:u,currentVelocity:c,lastIdealStyle:s,lastIdealVelocity:l}),n.unreadPropStyle=null,n.startAnimationIfNecessary()})},this.state=this.defaultState()}return o(t,e),s(t,null,[{key:"propTypes",value:{defaultStyle:j.default.objectOf(j.default.number),style:j.default.objectOf(j.default.oneOfType([j.default.number,j.default.object])).isRequired,children:j.default.func.isRequired,onRest:j.default.func},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyle,r=e.style,n=t||d.default(r),i=u.default(n);return{currentStyle:n,currentVelocity:i,lastIdealStyle:n,lastIdealVelocity:i}},t.prototype.componentDidMount=function(){this.prevTime=m.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=m.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(_.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyle);return e&&w.default.Children.only(e)},t}(w.default.Component);r.default=E,t.exports=r.default},{"./mapToZero":565,"./shouldStopAnimation":570,"./stepper":572,"./stripStyle":573,"performance-now":574,"prop-types":545,raf:550,react:580}],563:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r){for(var n=0;n<e.length;n++)if(!y.default(e[n],t[n],r[n]))return!1;return!0}r.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./mapToZero"),c=n(u),d=e("./stripStyle"),f=n(d),p=e("./stepper"),h=n(p),m=e("performance-now"),b=n(m),_=e("raf"),v=n(_),g=e("./shouldStopAnimation"),y=n(g),w=e("react"),k=n(w),j=e("prop-types"),x=n(j),E=1e3/60,S=function(e){function t(r){var n=this;i(this,t),e.call(this,r),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=n.state,r=t.currentStyles,i=t.currentVelocities,o=t.lastIdealStyles,a=t.lastIdealVelocities,l=!1,u=0;u<e.length;u++){var c=e[u],d=!1;for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var p=c[f];"number"==typeof p&&(d||(d=!0,l=!0,r[u]=s({},r[u]),i[u]=s({},i[u]),o[u]=s({},o[u]),a[u]=s({},a[u])),r[u][f]=p,i[u][f]=0,o[u][f]=p,a[u][f]=0)}}l&&n.setState({currentStyles:r,currentVelocities:i,lastIdealStyles:o,lastIdealVelocities:a})},this.startAnimationIfNecessary=function(){n.animationID=v.default(function(e){var t=n.props.styles(n.state.lastIdealStyles);if(a(n.state.currentStyles,t,n.state.currentVelocities))return n.animationID=null,void(n.accumulatedTime=0);var r=e||b.default(),i=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+i,n.accumulatedTime>10*E&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var o=(n.accumulatedTime-Math.floor(n.accumulatedTime/E)*E)/E,s=Math.floor(n.accumulatedTime/E),l=[],u=[],c=[],d=[],f=0;f<t.length;f++){var p=t[f],m={},_={},v={},g={};for(var y in p)if(Object.prototype.hasOwnProperty.call(p,y)){var w=p[y];if("number"==typeof w)m[y]=w,_[y]=0,v[y]=w,g[y]=0;else{for(var k=n.state.lastIdealStyles[f][y],j=n.state.lastIdealVelocities[f][y],x=0;x<s;x++){var S=h.default(E/1e3,k,j,w.val,w.stiffness,w.damping,w.precision);k=S[0],j=S[1]}var C=h.default(E/1e3,k,j,w.val,w.stiffness,w.damping,w.precision),I=C[0],T=C[1];m[y]=k+(I-k)*o,_[y]=j+(T-j)*o,v[y]=k,g[y]=j}}c[f]=m,d[f]=_,l[f]=v,u[f]=g}n.animationID=null,n.accumulatedTime-=s*E,n.setState({currentStyles:c,currentVelocities:d,lastIdealStyles:l,lastIdealVelocities:u}),n.unreadPropStyles=null,n.startAnimationIfNecessary()})},this.state=this.defaultState()}return o(t,e),l(t,null,[{key:"propTypes",value:{defaultStyles:x.default.arrayOf(x.default.objectOf(x.default.number)),styles:x.default.func.isRequired,children:x.default.func.isRequired},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,r=e.styles,n=t||r().map(f.default),i=n.map(function(e){return c.default(e)});return{currentStyles:n,currentVelocities:i,lastIdealStyles:n,lastIdealVelocities:i}},t.prototype.componentDidMount=function(){this.prevTime=b.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=b.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(v.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyles);return e&&k.default.Children.only(e)},t}(k.default.Component);r.default=S,t.exports=r.default},{"./mapToZero":565,"./shouldStopAnimation":570,"./stepper":572,"./stripStyle":573,"performance-now":574,"prop-types":545,raf:550,react:580}],564:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r){var n=t;return null==n?e.map(function(e,t){return{key:e.key,data:e.data,style:r[t]}}):e.map(function(e,t){for(var i=0;i<n.length;i++)if(n[i].key===e.key)return{key:n[i].key,data:n[i].data,style:r[t]};return{key:e.key,data:e.data,style:r[t]}})}function s(e,t,r,n){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(n[i].key!==t[i].key)return!1;for(var i=0;i<n.length;i++)if(!x.default(e[i],t[i].style,r[i]))return!1;return!0}function l(e,t,r,n,i,o,a,s,l){for(var u=v.default(n,i,function(e,n){var i=t(n);return null==i?(r({key:n.key,data:n.data}),null):x.default(o[e],i,a[e])?(r({key:n.key,data:n.data}),null):{key:n.key,data:n.data,style:i}}),c=[],d=[],p=[],h=[],m=0;m<u.length;m++){for(var b=u[m],_=null,g=0;g<n.length;g++)if(n[g].key===b.key){_=g;break}if(null==_){var y=e(b);c[m]=y,p[m]=y;var w=f.default(b.style);d[m]=w,h[m]=w}else c[m]=o[_],p[m]=s[_],d[m]=a[_],h[m]=l[_]}return[u,c,d,p,h]}r.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=e("./mapToZero"),f=n(d),p=e("./stripStyle"),h=n(p),m=e("./stepper"),b=n(m),_=e("./mergeDiff"),v=n(_),g=e("performance-now"),y=n(g),w=e("raf"),k=n(w),j=e("./shouldStopAnimation"),x=n(j),E=e("react"),S=n(E),C=e("prop-types"),I=n(C),T=1e3/60,A=function(e){function t(r){var n=this;i(this,t),e.call(this,r),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=l(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,e,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=0;c<e.length;c++){var d=e[c].style,f=!1;for(var p in d)if(Object.prototype.hasOwnProperty.call(d,p)){var h=d[p];"number"==typeof h&&(f||(f=!0,i[c]=u({},i[c]),o[c]=u({},o[c]),a[c]=u({},a[c]),s[c]=u({},s[c]),r[c]={key:r[c].key,data:r[c].data,style:u({},r[c].style)}),i[c][p]=h,o[c][p]=0,a[c][p]=h,s[c][p]=0,r[c].style[p]=h)}}n.setState({currentStyles:i,currentVelocities:o,mergedPropsStyles:r,lastIdealStyles:a,lastIdealVelocities:s})},this.startAnimationIfNecessary=function(){n.unmounting||(n.animationID=k.default(function(e){if(!n.unmounting){var t=n.props.styles,r="function"==typeof t?t(a(n.state.mergedPropsStyles,n.unreadPropStyles,n.state.lastIdealStyles)):t;if(s(n.state.currentStyles,r,n.state.currentVelocities,n.state.mergedPropsStyles))return n.animationID=null,void(n.accumulatedTime=0);var i=e||y.default(),o=i-n.prevTime;if(n.prevTime=i,n.accumulatedTime=n.accumulatedTime+o,n.accumulatedTime>10*T&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var u=(n.accumulatedTime-Math.floor(n.accumulatedTime/T)*T)/T,c=Math.floor(n.accumulatedTime/T),d=l(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,r,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),f=d[0],p=d[1],h=d[2],m=d[3],_=d[4],v=0;v<f.length;v++){var g=f[v].style,w={},k={},j={},x={};for(var E in g)if(Object.prototype.hasOwnProperty.call(g,E)){var S=g[E];if("number"==typeof S)w[E]=S,k[E]=0,j[E]=S,x[E]=0;else{for(var C=m[v][E],I=_[v][E],A=0;A<c;A++){var D=b.default(T/1e3,C,I,S.val,S.stiffness,S.damping,S.precision);C=D[0],I=D[1]}var M=b.default(T/1e3,C,I,S.val,S.stiffness,S.damping,S.precision),R=M[0],L=M[1];w[E]=C+(R-C)*u,k[E]=I+(L-I)*u,j[E]=C,x[E]=I}}m[v]=j,_[v]=x,p[v]=w,h[v]=k}n.animationID=null,n.accumulatedTime-=c*T,n.setState({currentStyles:p,currentVelocities:h,lastIdealStyles:m,lastIdealVelocities:_,mergedPropsStyles:f}),n.unreadPropStyles=null,n.startAnimationIfNecessary()}}))},this.state=this.defaultState()}return o(t,e),c(t,null,[{key:"propTypes",value:{defaultStyles:I.default.arrayOf(I.default.shape({key:I.default.string.isRequired,data:I.default.any,style:I.default.objectOf(I.default.number).isRequired})),styles:I.default.oneOfType([I.default.func,I.default.arrayOf(I.default.shape({key:I.default.string.isRequired,data:I.default.any,style:I.default.objectOf(I.default.oneOfType([I.default.number,I.default.object])).isRequired}))]).isRequired,children:I.default.func.isRequired,willEnter:I.default.func,willLeave:I.default.func,didLeave:I.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(e){return h.default(e.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,r=e.styles,n=e.willEnter,i=e.willLeave,o=e.didLeave,a="function"==typeof r?r(t):r,s=void 0;s=null==t?a:t.map(function(e){for(var t=0;t<a.length;t++)if(a[t].key===e.key)return a[t];return e});var u=null==t?a.map(function(e){return h.default(e.style)}):t.map(function(e){return h.default(e.style)}),c=null==t?a.map(function(e){return f.default(e.style)}):t.map(function(e){return f.default(e.style)}),d=l(n,i,o,s,a,u,c,u,c),p=d[0];return{currentStyles:d[1],currentVelocities:d[2],lastIdealStyles:d[3],lastIdealVelocities:d[4],mergedPropsStyles:p}},t.prototype.componentDidMount=function(){this.prevTime=y.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(a(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=y.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(k.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=a(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&S.default.Children.only(t)},t}(S.default.Component);r.default=A,t.exports=r.default},{"./mapToZero":565,"./mergeDiff":566,"./shouldStopAnimation":570,"./stepper":572,"./stripStyle":573,"performance-now":574,"prop-types":545,raf:550,react:580}],565:[function(e,t,r){"use strict";function n(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=0);return t}r.__esModule=!0,r.default=n,t.exports=r.default},{}],566:[function(e,t,r){"use strict";function n(e,t,r){for(var n={},i=0;i<e.length;i++)n[e[i].key]=i;for(var o={},i=0;i<t.length;i++)o[t[i].key]=i;for(var a=[],i=0;i<t.length;i++)a[i]=t[i];for(var i=0;i<e.length;i++)if(!Object.prototype.hasOwnProperty.call(o,e[i].key)){var s=r(i,e[i]);null!=s&&a.push(s)}return a.sort(function(e,r){var i=o[e.key],a=o[r.key],s=n[e.key],l=n[r.key];if(null!=i&&null!=a)return o[e.key]-o[r.key];if(null!=s&&null!=l)return n[e.key]-n[r.key];if(null!=i){for(var u=0;u<t.length;u++){var c=t[u].key;if(Object.prototype.hasOwnProperty.call(n,c)){if(i<o[c]&&l>n[c])return-1;if(i>o[c]&&l<n[c])return 1}}return 1}for(var u=0;u<t.length;u++){var c=t[u].key;if(Object.prototype.hasOwnProperty.call(n,c)){if(a<o[c]&&s>n[c])return 1;if(a>o[c]&&s<n[c])return-1}}return-1})}r.__esModule=!0,r.default=n,t.exports=r.default},{}],567:[function(e,t,r){"use strict";r.__esModule=!0,r.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},t.exports=r.default},{}],568:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e.default:e}r.__esModule=!0;var i=e("./Motion");r.Motion=n(i);var o=e("./StaggeredMotion");r.StaggeredMotion=n(o);var a=e("./TransitionMotion");r.TransitionMotion=n(a);var s=e("./spring");r.spring=n(s);var l=e("./presets");r.presets=n(l);var u=e("./stripStyle");r.stripStyle=n(u);var c=e("./reorderKeys");r.reorderKeys=n(c)},{"./Motion":562,"./StaggeredMotion":563,"./TransitionMotion":564,"./presets":567,"./reorderKeys":569,"./spring":571,"./stripStyle":573}],569:[function(e,t,r){(function(e){"use strict";function n(){"development"===e.env.NODE_ENV&&(i||(i=!0,console.error("`reorderKeys` has been removed, since it is no longer needed for TransitionMotion's new styles array API.")))}r.__esModule=!0,r.default=n;var i=!1;t.exports=r.default}).call(this,e("_process"))},{_process:541}],570:[function(e,t,r){"use strict";function n(e,t,r){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(0!==r[n])return!1;var i="number"==typeof t[n]?t[n]:t[n].val;if(e[n]!==i)return!1}return!0}r.__esModule=!0,r.default=n,t.exports=r.default},{}],571:[function(e,t,r){"use strict";function n(e,t){return i({},s,t,{val:e})}r.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.default=n;var o=e("./presets"),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=i({},a.default.noWobble,{precision:.01});t.exports=r.default},{"./presets":567}],572:[function(e,t,r){"use strict";function n(e,t,r,n,o,a,s){var l=-o*(t-n),u=-a*r,c=l+u,d=r+c*e,f=t+d*e;return Math.abs(d)<s&&Math.abs(f-n)<s?(i[0]=n,i[1]=0,i):(i[0]=f,i[1]=d,i)}r.__esModule=!0,r.default=n;var i=[0,0];t.exports=r.default},{}],573:[function(e,t,r){"use strict";function n(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]="number"==typeof e[r]?e[r]:e[r].val);return t}r.__esModule=!0,r.default=n,t.exports=r.default},{}],574:[function(e,t,r){(function(e){(function(){var r,n,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-i)/1e6},n=e.hrtime,r=function(){var e;return e=n(),1e9*e[0]+e[1]},i=r()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:541}],575:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/defineProperty")),s=function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"map",new Map),(0,a.default)(this,"_refFns",new Map)}return(0,o.default)(e,[{key:"ref",value:function(e){var t=this,r=this._refFns.get(e);return r||(r=function(r){null==r?(t._refFns.delete(e),t.map.delete(e)):t.map.set(e,r)},this._refFns.set(e,r)),r}}]),e}();r.default=s},{"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/interopRequireDefault":67}],576:[function(e,t,r){"use strict";function n(e){var t=/(\d+(?:\.\d+)?|\.\d+)(m?s)\b/i.exec(e);if(!t)throw new Error("Could not parse time from transition value");return Number(t[1])*(1===t[2].length?1e3:1)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],577:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/assertThisInitialized")),c=i(e("@babel/runtime/helpers/inherits")),d=i(e("@babel/runtime/helpers/defineProperty")),f=n(e("react")),p=i(e("prop-types")),h=i(e("./getTransitionTimeMs")),m=function(e){function t(e){var r;return(0,o.default)(this,t),r=(0,s.default)(this,(0,l.default)(t).call(this,e)),(0,d.default)((0,u.default)(r),"_removeTransitionEndListener",function(){}),(0,d.default)((0,u.default)(r),"_main",f.createRef()),(0,d.default)((0,u.default)(r),"_inner",f.createRef()),(0,d.default)((0,u.default)(r),"_onNextTransitionEnd",function(e,t){r._removeTransitionEndListener();var n,i=function(){r._removeTransitionEndListener(),t()};r._removeTransitionEndListener=function(){r._removeTransitionEndListener=function(){},clearTimeout(n),e.removeEventListener("transitionend",i)},e.addEventListener("transitionend",i);var o=1.1*(0,h.default)(r.props.heightTransition)+500;n=setTimeout(i,o)}),r.state={renderInner:e.expanded||t._visibleWhenClosed(e),closing:!1,fullyClosed:!e.expanded,height:e.expanded?"auto":e.collapsedHeight},r}return(0,c.default)(t,e),(0,a.default)(t,[{key:"componentWillUnmount",value:function(){this._removeTransitionEndListener()}},{key:"componentDidUpdate",value:function(e,t){var r=this;if(!e.expanded&&this.props.expanded){this._removeTransitionEndListener();var n=this._main.current,i=this._inner.current;if(!n||!i)throw new Error("Should not happen");var o="".concat(i.clientHeight,"px");this.setState({height:o}),this._onNextTransitionEnd(n,function(){r.setState({height:"auto"},function(){r.props.onChangeEnd&&r.props.onChangeEnd()})})}else if(e.expanded&&!this.props.expanded){if(this._removeTransitionEndListener(),!this._inner.current)throw new Error("Should not happen");this.setState({height:"".concat(this._inner.current.clientHeight,"px")},function(){var e=r._main.current;if(!e)throw new Error("Should not happen");e.clientHeight,r.setState({height:r.props.collapsedHeight,closing:!0}),r._onNextTransitionEnd(e,function(){r.setState({closing:!1,fullyClosed:!0}),r.props.onChangeEnd&&r.props.onChangeEnd()})})}}},{key:"render",value:function(){var e=t._visibleWhenClosed(this.props),r=this.props.allowOverflowWhenOpen,n=this.state,i=n.height,o=n.fullyClosed,a=n.renderInner,s=a?f.createElement("div",{ref:this._inner,style:{overflow:r&&"auto"===i?"visible":"hidden"}},this.props.children):null;return f.createElement("div",{ref:this._main,
className:this.props.className,style:{height:i,overflow:r&&"auto"===i?"visible":"hidden",display:o&&!e?"none":null,transition:"height ".concat(this.props.heightTransition)}},s)}}],[{key:"_visibleWhenClosed",value:function(e){return e.eagerRender||0!==parseFloat(e.collapsedHeight)}},{key:"getDerivedStateFromProps",value:function(e,r){return e.expanded&&(r.closing||r.fullyClosed)?{closing:!1,fullyClosed:!1,renderInner:!0}:e.expanded||!r.closing&&!r.fullyClosed||r.height===e.collapsedHeight?null:{height:e.collapsedHeight,renderInner:r.renderInner||t._visibleWhenClosed(e)}}}]),t}(f.Component);r.default=m,(0,d.default)(m,"propTypes",{expanded:p.default.bool.isRequired,onChangeEnd:p.default.func,collapsedHeight:p.default.string,heightTransition:p.default.string,className:p.default.string,allowOverflowWhenOpen:p.default.bool,eagerRender:p.default.bool}),(0,d.default)(m,"defaultProps",{collapsedHeight:"0",heightTransition:".25s ease",className:"",allowOverflowWhenOpen:!1,eagerRender:!1})},{"./getTransitionTimeMs":576,"@babel/runtime/helpers/assertThisInitialized":61,"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/getPrototypeOf":65,"@babel/runtime/helpers/inherits":66,"@babel/runtime/helpers/interopRequireDefault":67,"@babel/runtime/helpers/interopRequireWildcard":68,"@babel/runtime/helpers/possibleConstructorReturn":72,"prop-types":545,react:580}],578:[function(e,t,r){"use strict"},{"object-assign":508,"prop-types/checkPropTypes":542}],579:[function(e,t,r){"use strict";function n(e,t,r,n,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,i,o,a,s],u=0;e=Error(t.replace(/%s/g,function(){return l[u++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function i(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)r+="&args[]="+encodeURIComponent(arguments[i+1]);n(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}function o(e,t,r){this.props=e,this.context=t,this.refs=V,this.updater=r||P}function a(){}function s(e,t,r){this.props=e,this.context=t,this.refs=V,this.updater=r||P}function l(e,t,r){var n=void 0,i={},o=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)U.call(t,n)&&!F.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===i[n]&&(i[n]=s[n]);return{$$typeof:j,type:e,key:o,ref:a,props:i,_owner:q.current}}function u(e,t){return{$$typeof:j,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c(e){return"object"==typeof e&&null!==e&&e.$$typeof===j}function d(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function f(e,t,r,n){if(z.length){var i=z.pop();return i.result=e,i.keyPrefix=t,i.func=r,i.context=n,i.count=0,i}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function p(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>z.length&&z.push(e)}function h(e,t,r,n){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case j:case x:a=!0}}if(a)return r(n,e,""===t?"."+b(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var l=t+b(o,s);a+=h(o,l,r,n)}else if(null===e||"object"!=typeof e?l=null:(l=O&&e[O]||e["@@iterator"],l="function"==typeof l?l:null),"function"==typeof l)for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=t+b(o,s++),a+=h(o,l,r,n);else"object"===o&&(r=""+e,i("31","[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return a}function m(e,t,r){return null==e?0:h(e,"",t,r)}function b(e,t){return"object"==typeof e&&null!==e&&null!=e.key?d(e.key):t.toString(36)}function _(e,t){e.func.call(e.context,t,e.count++)}function v(e,t,r){var n=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?g(e,n,r,function(e){return e}):null!=e&&(c(e)&&(e=u(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(H,"$&/")+"/")+r)),n.push(e))}function g(e,t,r,n,i){var o="";null!=r&&(o=(""+r).replace(H,"$&/")+"/"),t=f(t,o,n,i),m(e,v,t),p(t)}function y(){var e=B.current;return null===e&&i("321"),e}var w=e("object-assign"),k="function"==typeof Symbol&&Symbol.for,j=k?Symbol.for("react.element"):60103,x=k?Symbol.for("react.portal"):60106,E=k?Symbol.for("react.fragment"):60107,S=k?Symbol.for("react.strict_mode"):60108,C=k?Symbol.for("react.profiler"):60114,I=k?Symbol.for("react.provider"):60109,T=k?Symbol.for("react.context"):60110,A=k?Symbol.for("react.concurrent_mode"):60111,D=k?Symbol.for("react.forward_ref"):60112,M=k?Symbol.for("react.suspense"):60113,R=k?Symbol.for("react.memo"):60115,L=k?Symbol.for("react.lazy"):60116,O="function"==typeof Symbol&&Symbol.iterator,P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V={};o.prototype.isReactComponent={},o.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&i("85"),this.updater.enqueueSetState(this,e,t,"setState")},o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=o.prototype;var N=s.prototype=new a;N.constructor=s,w(N,o.prototype),N.isPureReactComponent=!0;var B={current:null},q={current:null},U=Object.prototype.hasOwnProperty,F={key:!0,ref:!0,__self:!0,__source:!0},H=/\/+/g,z=[],W={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return g(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;t=f(null,null,t,r),m(e,_,t),p(t)},count:function(e){return m(e,function(){return null},null)},toArray:function(e){var t=[];return g(e,t,null,function(e){return e}),t},only:function(e){return c(e)||i("143"),e}},createRef:function(){return{current:null}},Component:o,PureComponent:s,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:T,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:I,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:D,render:e}},lazy:function(e){return{$$typeof:L,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:R,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return y().useCallback(e,t)},useContext:function(e,t){return y().useContext(e,t)},useEffect:function(e,t){return y().useEffect(e,t)},useImperativeHandle:function(e,t,r){return y().useImperativeHandle(e,t,r)},useDebugValue:function(){},useLayoutEffect:function(e,t){return y().useLayoutEffect(e,t)},useMemo:function(e,t){return y().useMemo(e,t)},useReducer:function(e,t,r){return y().useReducer(e,t,r)},useRef:function(e){return y().useRef(e)},useState:function(e){return y().useState(e)},Fragment:E,StrictMode:S,Suspense:M,createElement:l,cloneElement:function(e,t,r){(null===e||void 0===e)&&i("267",e);var n=void 0,o=w({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,l=q.current),void 0!==t.key&&(a=""+t.key);var u=void 0;e.type&&e.type.defaultProps&&(u=e.type.defaultProps);for(n in t)U.call(t,n)&&!F.hasOwnProperty(n)&&(o[n]=void 0===t[n]&&void 0!==u?u[n]:t[n])}if(1===(n=arguments.length-2))o.children=r;else if(1<n){u=Array(n);for(var c=0;c<n;c++)u[c]=arguments[c+2];o.children=u}return{$$typeof:j,type:e.type,key:a,ref:s,props:o,_owner:l}},createFactory:function(e){var t=l.bind(null,e);return t.type=e,t},isValidElement:c,version:"16.8.6",unstable_ConcurrentMode:A,unstable_Profiler:C,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:B,ReactCurrentOwner:q,assign:w}},G={default:W},K=G&&W||G;t.exports=K.default||K},{"object-assign":508}],580:[function(e,t,r){"use strict";t.exports=e("./cjs/react.production.min.js")},{"./cjs/react.development.js":578,"./cjs/react.production.min.js":579}],581:[function(e,t,r){!function(e){"use strict";function t(e,t,r,i){var o=t&&t.prototype instanceof n?t:n,a=Object.create(o.prototype),s=new f(i||[]);return a._invoke=l(e,r,s),a}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function n(){}function i(){}function o(){}function a(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(n,i,o,a){var s=r(e[n],e,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&_.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(u).then(function(e){l.value=e,o(l)},function(e){return t("throw",e,o,a)})}a(s.arg)}function n(e,r){function n(){return new Promise(function(n,i){t(e,r,n,i)})}return i=i?i.then(n,n):n()}var i;this._invoke=n}function l(e,t,n){var i=k;return function(o,a){if(i===x)throw new Error("Generator is already running");if(i===E){if("throw"===o)throw a;return h()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var l=u(s,n);if(l){if(l===S)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===k)throw i=E,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=x;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?E:j,c.arg===S)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=E,n.method="throw",n.arg=c.arg)}}}function u(e,t){var n=e.iterator[t.method];if(n===m){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=m,u(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=m),t.delegate=null,S):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(c,this),this.reset(!0)}function p(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(_.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=m,t.done=!0,t};return n.next=n}}return{next:h}}function h(){return{value:m,done:!0}}var m,b=Object.prototype,_=b.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},g=v.iterator||"@@iterator",y=v.asyncIterator||"@@asyncIterator",w=v.toStringTag||"@@toStringTag";e.wrap=t;var k="suspendedStart",j="suspendedYield",x="executing",E="completed",S={},C={};C[g]=function(){return this};var I=Object.getPrototypeOf,T=I&&I(I(p([])));T&&T!==b&&_.call(T,g)&&(C=T);var A=o.prototype=n.prototype=Object.create(C);i.prototype=A.constructor=o,o.constructor=i,o[w]=i.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},a(s.prototype),s.prototype[y]=function(){return this},e.AsyncIterator=s,e.async=function(r,n,i,o){var a=new s(t(r,n,i,o));return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},a(A),A[w]="Generator",A[g]=function(){return this},A.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=p,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&_.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=m),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=_.call(i,"catchLoc"),s=_.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&_.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=m),S}}}("object"==typeof t?t.exports:{})},{}],582:[function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return a(e,t,r)}var o=e("buffer"),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(n(o,r),r.Buffer=i),n(a,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:94}],583:[function(e,t,r){"use strict"},{}],584:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=0;r.__interactionsRef=null,r.__subscriberRef=null,r.unstable_clear=function(e){return e()},r.unstable_getCurrent=function(){return null},r.unstable_getThreadID=function(){return++n},r.unstable_trace=function(e,t,r){return r()},r.unstable_wrap=function(e){return e},r.unstable_subscribe=function(){},r.unstable_unsubscribe=function(){}},{}],585:[function(e,t,r){(function(e){"use strict"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],586:[function(e,t,r){(function(e){"use strict";function t(){if(!h){var e=u.expirationTime;m?j():m=!0,k(o,e)}}function n(){var e=u,r=u.next;if(u===r)u=null;else{var n=u.previous;u=n.next=r,r.previous=n}e.next=e.previous=null,n=e.callback,r=e.expirationTime,e=e.priorityLevel;var i=d,o=p;d=e,p=r;try{var a=n()}finally{d=i,p=o}if("function"==typeof a)if(a={callback:a,priorityLevel:e,expirationTime:r,next:null,previous:null},null===u)u=a.next=a.previous=a;else{n=null,e=u;do{if(e.expirationTime>=r){n=e;break}e=e.next}while(e!==u);null===n?n=u:n===u&&(u=a,t()),r=n.previous,r.next=n.previous=a,a.next=n,a.previous=r}}function i(){if(-1===f&&null!==u&&1===u.priorityLevel){h=!0;try{do{n()}while(null!==u&&1===u.priorityLevel)}finally{h=!1,null!==u?t():m=!1}}}function o(e){h=!0;var o=c;c=e;try{if(e)for(;null!==u;){var a=r.unstable_now();if(!(u.expirationTime<=a))break;do{n()}while(null!==u&&u.expirationTime<=a)}else if(null!==u)do{n()}while(null!==u&&!x())}finally{h=!1,c=o,null!==u?t():m=!1,i()}}function a(e){s=g(function(t){v(l),e(t)}),l=_(function(){y(s),e(r.unstable_now())},100)}Object.defineProperty(r,"__esModule",{value:!0});var s,l,u=null,c=!1,d=3,f=-1,p=-1,h=!1,m=!1,b=Date,_="function"==typeof setTimeout?setTimeout:void 0,v="function"==typeof clearTimeout?clearTimeout:void 0,g="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,y="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;if("object"==typeof performance&&"function"==typeof performance.now){var w=performance;r.unstable_now=function(){return w.now()}}else r.unstable_now=function(){return b.now()};var k,j,x,E=null;if("undefined"!=typeof window?E=window:void 0!==e&&(E=e),E&&E._schedMock){var S=E._schedMock;k=S[0],j=S[1],x=S[2],r.unstable_now=S[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var C=null,I=function(e){if(null!==C)try{C(e)}finally{C=null}};k=function(e){null!==C?setTimeout(k,0,e):(C=e,setTimeout(I,0,!1))},j=function(){C=null},x=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof g&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var T=null,A=!1,D=-1,M=!1,R=!1,L=0,O=33,P=33;x=function(){return L<=r.unstable_now()};var V=new MessageChannel,N=V.port2;V.port1.onmessage=function(){A=!1;var e=T,t=D;T=null,D=-1;var n=r.unstable_now(),i=!1;if(0>=L-n){if(!(-1!==t&&t<=n))return M||(M=!0,a(B)),T=e,void(D=t);i=!0}if(null!==e){R=!0;try{e(i)}finally{R=!1}}};var B=function(e){if(null!==T){a(B);var t=e-L+P;t<P&&O<P?(8>t&&(t=8),P=t<O?O:t):O=t,L=e+P,A||(A=!0,N.postMessage(void 0))}else M=!1};k=function(e,t){T=e,D=t,R||0>t?N.postMessage(void 0):M||(M=!0,a(B))},j=function(){T=null,A=!1,D=-1}}r.unstable_ImmediatePriority=1,r.unstable_UserBlockingPriority=2,r.unstable_NormalPriority=3,r.unstable_IdlePriority=5,r.unstable_LowPriority=4,r.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d,o=f;d=e,f=r.unstable_now();try{return t()}finally{d=n,f=o,i()}},r.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d,o=f;d=t,f=r.unstable_now();try{return e()}finally{d=n,f=o,i()}},r.unstable_scheduleCallback=function(e,n){var i=-1!==f?f:r.unstable_now();if("object"==typeof n&&null!==n&&"number"==typeof n.timeout)n=i+n.timeout;else switch(d){case 1:n=i+-1;break;case 2:n=i+250;break;case 5:n=i+1073741823;break;case 4:n=i+1e4;break;default:n=i+5e3}if(e={callback:e,priorityLevel:d,expirationTime:n,next:null,previous:null},null===u)u=e.next=e.previous=e,t();else{i=null;var o=u;do{if(o.expirationTime>n){i=o;break}o=o.next}while(o!==u);null===i?i=u:i===u&&(u=e,t()),n=i.previous,n.next=i.previous=e,e.next=i,e.previous=n}return e},r.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)u=null;else{e===u&&(u=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},r.unstable_wrapCallback=function(e){var t=d;return function(){var n=d,o=f;d=t,f=r.unstable_now();try{return e.apply(this,arguments)}finally{d=n,f=o,i()}}},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_shouldYield=function(){return!c&&(null!==u&&u.expirationTime<p||x())},r.unstable_continueExecution=function(){null!==u&&t()},r.unstable_pauseExecution=function(){},r.unstable_getFirstCallbackNode=function(){return u}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],587:[function(e,t,r){"use strict";t.exports=e("./cjs/scheduler.production.min.js")},{"./cjs/scheduler.development.js":585,"./cjs/scheduler.production.min.js":586}],588:[function(e,t,r){"use strict";t.exports=e("./cjs/scheduler-tracing.production.min.js")},{"./cjs/scheduler-tracing.development.js":583,"./cjs/scheduler-tracing.production.min.js":584}],589:[function(e,t,r){function n(e,t){this._block=i.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}var i=e("safe-buffer").Buffer;n.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=i.from(e,t));for(var r=this._block,n=this._blockSize,o=e.length,a=this._len,s=0;s<o;){for(var l=a%n,u=Math.min(o-s,n-l),c=0;c<u;c++)r[l+c]=e[s+c];a+=u,s+=u,a%n==0&&this._update(r)}return this._len+=o,this},n.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=n},{"safe-buffer":582}],590:[function(e,t,r){function n(){this.init(),this._w=f,u.call(this,64,56)}function i(e){return e<<1|e>>>31}function o(e){return e<<5|e>>>27}function a(e){return e<<30|e>>>2}function s(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}var l=e("inherits"),u=e("./hash"),c=e("safe-buffer").Buffer,d=[1518500249,1859775393,-1894007588,-899497514],f=new Array(80);l(n,u),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},n.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,l=0|this._c,u=0|this._d,c=0|this._e,f=0;f<16;++f)t[f]=e.readInt32BE(4*f);for(;f<80;++f)t[f]=i(t[f-3]^t[f-8]^t[f-14]^t[f-16]);for(var p=0;p<80;++p){var h=~~(p/20),m=o(r)+s(h,n,l,u)+c+t[p]+d[h]|0;c=u,u=l,l=a(n),n=r,r=m}this._a=r+this._a|0,this._b=n+this._b|0,this._c=l+this._c|0,this._d=u+this._d|0,this._e=c+this._e|0},n.prototype._hash=function(){var e=c.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=n},{"./hash":589,inherits:295,"safe-buffer":582}],591:[function(e,t,r){function n(){this.init(),this._w=h,d.call(this,64,56)}function i(e,t,r){return r^e&(t^r)}function o(e,t,r){return e&t|r&(e|t)}function a(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function s(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function l(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function u(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}var c=e("inherits"),d=e("./hash"),f=e("safe-buffer").Buffer,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=new Array(64);c(n,d),n.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},n.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,c=0|this._c,d=0|this._d,f=0|this._e,h=0|this._f,m=0|this._g,b=0|this._h,_=0;_<16;++_)t[_]=e.readInt32BE(4*_);for(;_<64;++_)t[_]=u(t[_-2])+t[_-7]+l(t[_-15])+t[_-16]|0;for(var v=0;v<64;++v){var g=b+s(f)+i(f,h,m)+p[v]+t[v]|0,y=a(r)+o(r,n,c)|0;b=m,m=h,h=f,f=d+g|0,d=c,c=n,n=r,r=g+y|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=f+this._e|0,this._f=h+this._f|0,this._g=m+this._g|0,this._h=b+this._h|0},n.prototype._hash=function(){var e=f.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=n},{"./hash":589,inherits:295,"safe-buffer":582}],592:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("@babel/runtime/helpers/defineProperty")),d=n(e("live-set")),f=n(e("./TagTreeNode")),p=Object.freeze([]),h=function(e){function t(e){var r;(0,i.default)(this,t);var n;if(r=(0,a.default)(this,(0,s.default)(t).call(this,{value:e.root,parent:null,ownedTags:new Set(e.tags.map(function(e){return e.tag})),executor:function(e){n=e}})),(0,c.default)((0,u.default)((0,u.default)(r)),"_nodeControllers",new Map),(0,c.default)((0,u.default)((0,u.default)(r)),"_lookupTable",void 0),(0,c.default)((0,u.default)((0,u.default)(r)),"_allByTag",void 0),!n)throw new Error;r._nodeControllers.set((0,u.default)((0,u.default)(r)),n),r._lookupTable=new Map([[e.root,[(0,u.default)((0,u.default)(r))]]]),r._allByTag=new Map,e.tags.forEach(function(e){var t=e.tag,n=d.default.active(),i=n.liveSet,o=n.controller;if(r._allByTag.has(t))throw new Error("Tag specified twice: "+t);r._allByTag.set(t,{ownedTags:new Set,liveSet:i,controller:o})}),e.tags.forEach(function(e){var t=e.tag,n=e.ownedBy;n&&n.forEach(function(e){var n=r._allByTag.get(e);if(!n)throw new Error("unknown ownedBy value for ".concat(t,": ").concat(e));n.ownedTags.add(t)})});var o={tree:(0,u.default)((0,u.default)(r)),addTaggedValue:function(e,t,n){var i=r._allByTag.get(t);if(!i)throw new Error("unknown tag: ".concat(t));var o,a=new f.default({value:n,parent:e,ownedTags:i.ownedTags,executor:function(e){o=e}});if(!o)throw new Error;r._nodeControllers.set(a,o),i.controller.add(a);var s=r._lookupTable.get(n);s?s.push(a):r._lookupTable.set(n,[a]);var l=r._nodeControllers.get(e);if(!l)throw new Error("parent is not part of TagTree");return l.addOwnedNode(t,a),a},removeTaggedNode:function(e,t,n){var i=r._allByTag.get(t);if(!i)throw new Error("unknown tag: ".concat(t));var a=r._nodeControllers.get(e);if(!a)throw new Error("parent is not part of TagTree");var s=n.getValue(),l=r._lookupTable.get(s);if(!l)throw new Error("node was missing from lookup table before removal");if(l.length>1){var u=l.indexOf(n);if(u<0)throw new Error("node was missing from list in lookup table before removal");l.splice(u,1)}else r._lookupTable.delete(s);n.getOwned().forEach(function(e,t){e.values().forEach(function(e){o.removeTaggedNode(n,t,e)})}),i.controller.remove(n),a.removeOwnedNode(t,n),r._nodeControllers.delete(n)},end:function(){r._nodeControllers.forEach(function(e){e.end()}),r._allByTag.forEach(function(e){e.controller.end()})}};return e.executor(o),e.executor=function(){},r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"getNodesForValue",value:function(e){var t=this._lookupTable.get(e);return t?Object.freeze(t.slice()):p}},{key:"getAllByTag",value:function(e){var t=this._allByTag.get(e);if(!t)throw new Error("tag does not exist in TagTree: ".concat(e));return t.liveSet}},{key:"getAll",value:function(){var e=new Map;return this._allByTag.forEach(function(t,r){var n=t.liveSet;e.set(r,n)}),e}}]),t}(f.default);r.default=h,t.exports=r.default,t.exports.default=r.default},{"./TagTreeNode":593,"@babel/runtime/helpers/assertThisInitialized":61,"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/getPrototypeOf":65,"@babel/runtime/helpers/inherits":66,"@babel/runtime/helpers/interopRequireDefault":67,"@babel/runtime/helpers/possibleConstructorReturn":72,"live-set":306}],593:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("live-set")),l=function(){function e(t){var r=this;(0,i.default)(this,e),(0,a.default)(this,"_init",void 0),(0,a.default)(this,"_ownedNodes",new Map),(0,a.default)(this,"_ownedByTag",new Map),this._init=t,this._init.executor({node:this,addOwnedNode:function(e,t){r._ownedNodes.set(t,e);var n=r._ownedByTag.get(e);n||(n=r._createTagEntry(),r._ownedByTag.set(e,n)),n.controller.add(t)},removeOwnedNode:function(e,t){r._ownedNodes.delete(t);var n=r._ownedByTag.get(e);if(!n)throw new Error("tag not owned");n.controller.remove(t)},end:function(){r._ownedByTag.forEach(function(e){e.controller.end()})}}),this._init.executor=function(){}}return(0,o.default)(e,[{key:"_createTagEntry",value:function(){return s.default.active()}},{key:"getValue",value:function(){return this._init.value}},{key:"getParent",value:function(){return this._init.parent||null}},{key:"getOwnedByTag",value:function(e){var t=this._ownedByTag.get(e);if(!t){if(!this._init.ownedTags.has(e))throw new Error("tag not owned: ".concat(e));t=this._createTagEntry(),this._ownedByTag.set(e,t)}return t.liveSet}},{key:"getOwned",value:function(){var e=new Map;return this._ownedByTag.forEach(function(t,r){var n=t.liveSet;e.set(r,n)}),e}},{key:"getTag",value:function(){var e=this._init.parent;return e?e.getTagOfOwnedNode(this):null}},{key:"ownsNode",value:function(e){return this._ownedNodes.has(e)}},{key:"getTagOfOwnedNode",value:function(e){var t=this._ownedNodes.get(e);if(null==t)throw new Error("node not owned");return t}}]),e}();r.default=l,t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/classCallCheck":62,"@babel/runtime/helpers/createClass":63,"@babel/runtime/helpers/defineProperty":64,"@babel/runtime/helpers/interopRequireDefault":67,"live-set":306}],594:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"TagTree",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"TagTreeNode",{enumerable:!0,get:function(){return o.default}});var i=n(e("./TagTree")),o=n(e("./TagTreeNode"))},{"./TagTree":592,"./TagTreeNode":593,"@babel/runtime/helpers/interopRequireDefault":67}],595:[function(e,t,r){function n(e,t){throw new Error("don't know how to "+e+" collection: "+t)}function i(e,t){return"iterator"===t?e[ce.iterator]||e.next:e[ce[t]]}function o(e,t){return e[ce[t]]}function a(e){var t=o(e,"iterator");return t?t.call(e):e.next?e:fe(e)?new s(e):c(e)?new l(e):void 0}function s(e){this.arr=e,this.index=0}function l(e){this.obj=e,this.keys=Object.keys(e),this.index=0}function u(e){return"function"==typeof e}function c(e){
return e instanceof Object&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}function d(e){return"number"==typeof e}function f(e){this["@@transducer/reduced"]=!0,this["@@transducer/value"]=e}function p(e){return e instanceof f||e&&e["@@transducer/reduced"]}function h(e){return e["@@transducer/value"]}function m(e){return p(e)?e:new f(e)}function b(e){return p(e)?h(e):e}function _(e,t,r){if(fe(e)){for(var o=r,s=-1,l=e.length;++s<l;)if(o=t["@@transducer/step"](o,e[s]),p(o)){o=h(o);break}return t["@@transducer/result"](o)}if(c(e)||i(e,"iterator")){for(var o=r,u=a(e),d=u.next();!d.done;){if(o=t["@@transducer/step"](o,d.value),p(o)){o=h(o);break}d=u.next()}return t["@@transducer/result"](o)}n("iterate",e)}function v(e,t,r,n){return t=t(r),void 0===n&&(n=t["@@transducer/init"]()),_(e,t,n)}function g(){var e=Array.prototype.slice.call(arguments);return function(t){for(var r=t,n=e.length-1;n>=0;n--)r=e[n](r);return r}}function y(e){var t={};return t["@@transducer/init"]=function(){throw new Error("init value unavailable")},t["@@transducer/result"]=function(e){return e},t["@@transducer/step"]=e,t}function w(e,t,r){if(r=null!=r?r:1,!t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};default:return e.bind(t)}}function k(e,t,r){var n=-1,i=e.length,o=Array(i);for(t=w(t,r,2);++n<i;)o[n]=t(e[n],n);return o}function j(e,t,r){var n=e.length,i=[];t=w(t,r,2);for(var o=0;o<n;o++)t(e[o],o)&&i.push(e[o]);return i}function x(e,t){this.xform=t,this.f=e}function E(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?fe(e)?k(e,t,r):ie(e,E(t)):function(e){return new x(t,e)}}function S(e,t){this.xform=t,this.f=e}function C(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?fe(e)?j(e,t,r):ie(e,C(t)):function(e){return new S(t,e)}}function I(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),C(e,function(e){return!t(e)})}function T(e){return C(e,function(e){return null!=e})}function A(e){this.xform=e,this.last=void 0}function D(e){return e?ie(e,D()):function(e){return new A(e)}}function M(e,t){this.xform=t,this.f=e}function R(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?ie(e,R(t)):function(e){return new M(t,e)}}function L(e,t){this.n=e,this.i=0,this.xform=t}function O(e,t){return d(e)&&(t=e,e=null),e?ie(e,O(t)):function(e){return new L(t,e)}}function P(e,t){this.n=e,this.i=0,this.xform=t}function V(e,t){return d(e)&&(t=e,e=null),e?ie(e,V(t)):function(e){return new P(t,e)}}function N(e,t){this.xform=t,this.f=e,this.dropping=!0}function B(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?ie(e,B(t)):function(e){return new N(t,e)}}function q(e,t){this.n=e,this.i=0,this.xform=t,this.part=new Array(e)}function U(e,t){return d(e)&&(t=e,e=null),e?ie(e,U(t)):function(e){return new q(t,e)}}function F(e,t){this.f=e,this.xform=t,this.part=[],this.last=pe}function H(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?ie(e,H(t)):function(e){return new F(t,e)}}function z(e,t){this.sep=e,this.xform=t,this.started=!1}function W(e,t){return 1===arguments.length?(t=e,function(e){return new z(t,e)}):ie(e,W(t))}function G(e,t){this.xform=t,this.n=e}function K(e,t){return 1===arguments.length?(t=e,function(e){return new G(t,e)}):ie(e,K(t))}function $(e,t){this.xform=t,this.n=e,this.i=-1}function J(e,t){return 1===arguments.length?(t=e,function(e){return new $(t,e)}):ie(e,J(t))}function Y(e){this.xform=e}function Q(e){return new Y(e)}function X(e,t){return e=w(e,t),g(E(e),Q)}function Z(e,t){return e.push(t),e}function ee(e,t){if(fe(t)&&2===t.length)e[t[0]]=t[1];else for(var r=Object.keys(t),n=r.length,i=0;i<n;i++)e[r[i]]=t[r[i]];return e}function te(e,t){return t?v(e,t,he,[]):_(e,he,[])}function re(e,t){return t?v(e,t,me,{}):_(e,me,{})}function ne(e,t){return t?new se(t,e):a(e)}function ie(e,t){if(fe(e))return v(e,t,he,[]);if(c(e))return v(e,t,me,{});if(e["@@transducer/step"]){var r;return r=e["@@transducer/init"]?e["@@transducer/init"]():new e.constructor,v(e,t,e,r)}if(i(e,"iterator"))return new se(t,e);n("sequence",e)}function oe(e,t,r){return fe(e)?v(r,t,he,e):c(e)?v(r,t,me,e):e["@@transducer/step"]?v(r,t,e,e):void n("into",e)}function ae(e,t){this.xform=e(be),this.iter=t}function se(e,t){this.iter=a(t),this.items=[],this.stepper=new ae(e,a(t))}function le(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=r;return t}var ue="undefined"!=typeof Symbol,ce={iterator:ue?Symbol.iterator:"@@iterator"};s.prototype.next=function(){return this.index<this.arr.length?{value:this.arr[this.index++],done:!1}:{done:!0}},l.prototype.next=function(){if(this.index<this.keys.length){var e=this.keys[this.index++];return{value:[e,this.obj[e]],done:!1}}return{done:!0}};var de=Object.prototype.toString,fe="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"==de.call(e)};x.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},x.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},x.prototype["@@transducer/step"]=function(e,t){return this.xform["@@transducer/step"](e,this.f(t))},S.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},S.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},S.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):e},A.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},A.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},A.prototype["@@transducer/step"]=function(e,t){return t!==this.last?(this.last=t,this.xform["@@transducer/step"](e,t)):e},M.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},M.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},M.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):new f(e)},L.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},L.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},L.prototype["@@transducer/step"]=function(e,t){return this.i<this.n&&(e=this.xform["@@transducer/step"](e,t),this.i+1>=this.n&&(e=m(e))),this.i++,e},P.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},P.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},P.prototype["@@transducer/step"]=function(e,t){return this.i++<this.n?e:this.xform["@@transducer/step"](e,t)},N.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},N.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},N.prototype["@@transducer/step"]=function(e,t){if(this.dropping){if(this.f(t))return e;this.dropping=!1}return this.xform["@@transducer/step"](e,t)},q.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},q.prototype["@@transducer/result"]=function(e){return this.i>0?b(this.xform["@@transducer/step"](e,this.part.slice(0,this.i))):this.xform["@@transducer/result"](e)},q.prototype["@@transducer/step"]=function(e,t){if(this.part[this.i]=t,this.i+=1,this.i===this.n){var r=this.part.slice(0,this.n);return this.part=new Array(this.n),this.i=0,this.xform["@@transducer/step"](e,r)}return e};var pe={};F.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},F.prototype["@@transducer/result"]=function(e){var t=this.part.length;return t>0?b(this.xform["@@transducer/step"](e,this.part.slice(0,t))):this.xform["@@transducer/result"](e)},F.prototype["@@transducer/step"]=function(e,t){var r=this.f(t);return r===this.last||this.last===pe?this.part.push(t):(e=this.xform["@@transducer/step"](e,this.part),this.part=[t]),this.last=r,e},z.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},z.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},z.prototype["@@transducer/step"]=function(e,t){if(this.started){var r=this.xform["@@transducer/step"](e,this.sep);return p(r)?r:this.xform["@@transducer/step"](r,t)}return this.started=!0,this.xform["@@transducer/step"](e,t)},G.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},G.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},G.prototype["@@transducer/step"]=function(e,t){for(var r=this.n,n=e,i=0;i<r&&(n=this.xform["@@transducer/step"](n,t),!p(n));i++);return n},$.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},$.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},$.prototype["@@transducer/step"]=function(e,t){return this.i+=1,this.i%this.n==0?this.xform["@@transducer/step"](e,t):e},Y.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},Y.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},Y.prototype["@@transducer/step"]=function(e,t){var r=this.xform,n={};return n["@@transducer/init"]=function(){return r["@@transducer/init"]()},n["@@transducer/result"]=function(e){return e},n["@@transducer/step"]=function(e,t){var n=r["@@transducer/step"](e,t);return p(n)?h(n):n},_(t,n,e)};var he={};he["@@transducer/init"]=function(){return[]},he["@@transducer/result"]=function(e){return e},he["@@transducer/step"]=Z;var me={};me["@@transducer/init"]=function(){return{}},me["@@transducer/result"]=function(e){return e},me["@@transducer/step"]=ee;var be={};be["@@transducer/result"]=function(e){return p(e)?h(e):e},be["@@transducer/step"]=function(e,t){return e.items.push(t),e.rest},ae.prototype["@@transducer/step"]=function(e){for(var t=e.items.length;e.items.length===t;){var r=this.iter.next();if(r.done||p(r.value)){this.xform["@@transducer/result"](this);break}this.xform["@@transducer/step"](e,r.value)}},se.prototype[ce.iterator]=function(){return this},se.prototype.next=function(){return this["@@transducer/step"](),this.items.length?{value:this.items.pop(),done:!1}:{done:!0}},se.prototype["@@transducer/step"]=function(){this.items.length||this.stepper["@@transducer/step"](this)},t.exports={reduce:_,transformer:y,Reduced:f,isReduced:p,iterator:a,push:Z,merge:ee,transduce:v,seq:ie,toArray:te,toObj:re,toIter:ne,into:oe,compose:g,map:E,filter:C,remove:I,cat:Q,mapcat:X,keep:T,dedupe:D,take:O,takeWhile:R,takeNth:J,drop:V,dropWhile:B,partition:U,partitionBy:H,interpose:W,repeat:K,range:le,LazyTransformer:se}},{}],596:[function(e,t,r){"use strict";function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=(0,i.defonce)(e,function(){var e,t=o.stream(function(t){e=t}),r=t.toProperty();if(r.onValue(function(){}),!e)throw new Error("Should not happen, emitter was not set");var n=e;return{property:r,emit:function(e){n.emit(e)}}},"--udkefir-"+r);return n.emit(t),n.property}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=e("ud"),o=e("kefir");t.exports=r.default,t.exports.default=r.default},{kefir:301,ud:597}],597:[function(e,t,r){"use strict";function n(e){e.hot&&e.hot.accept()}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n(e);var i=v.get(e);if(i||(i=new h.default,v.set(e,i)),i.has(r))throw new Error("ud functions can only be used once per module with a given key");i.add(r);var o=!1,a=void 0;return e.hot&&(e.hot.data&&e.hot.data.__ud__&&Object.prototype.hasOwnProperty.call(e.hot.data.__ud__,r)&&(a=e.hot.data.__ud__[r],o=!0),e.hot.dispose(function(e){e.__ud__||(e.__ud__={}),e.__ud__[r]=a})),o||(a=t()),a}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=i(e,function(){return t},"--defobj-"+r);return n!==t&&a(n,t),n}function a(e,t){(0,p.default)(e).filter(function(e){return!Object.prototype.hasOwnProperty.call(t,e)}).forEach(function(t){delete e[t]});var r=(0,p.default)(t);return(0,f.default)(e,_(r,r.map(function(e){return(0,d.default)(t,e)}).filter(Boolean).map(function(e){return{value:e.value,enumerable:e.enumerable,writable:!0,configurable:!0}}))),e}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=i(e,function(){if(!e.hot)return{fn:null,wrapper:t};var r={fn:null,wrapper:null},n=b(t.length).map(function(e){return"a"+e}).join(",");return r.wrapper=new Function("shared","\n      'use strict';\n      return function ".concat(t.name,"__ud_wrapper(").concat(n,") {\n        if (new.target) {\n          return Reflect.construct(shared.fn, arguments, new.target);\n        } else {\n          return shared.fn.apply(this, arguments);\n        }\n      };\n      "))(r),t.prototype?(r.wrapper.prototype=(0,c.default)(t.prototype),r.wrapper.prototype.constructor=r.wrapper):r.wrapper.prototype=t.prototype,r},"--defn-shared-"+r);return n.fn=t,e.hot&&(t.prototype&&n.wrapper.prototype&&(0,u.default)(n.wrapper.prototype)!==t.prototype&&Object.setPrototypeOf(n.wrapper.prototype,t.prototype),Object.setPrototypeOf(n.wrapper,t)),n.wrapper}var l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.markReloadable=n,r.defonce=i,r.defobj=o,r.defn=s;var u=l(e("@babel/runtime-corejs2/core-js/object/get-prototype-of")),c=l(e("@babel/runtime-corejs2/core-js/object/create")),d=l(e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor")),f=l(e("@babel/runtime-corejs2/core-js/object/define-properties")),p=l(e("@babel/runtime-corejs2/core-js/object/get-own-property-names")),h=l(e("@babel/runtime-corejs2/core-js/set")),m=l(e("@babel/runtime-corejs2/core-js/weak-map")),b=e("array-range"),_=e("zip-object"),v=new m.default},{"@babel/runtime-corejs2/core-js/object/create":12,"@babel/runtime-corejs2/core-js/object/define-properties":13,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":16,"@babel/runtime-corejs2/core-js/object/get-own-property-names":17,"@babel/runtime-corejs2/core-js/object/get-prototype-of":19,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"array-range":76,"zip-object":603}],598:[function(e,t,r){"use strict";function n(e,t){for(var r=1,n=e.length,i=e[0],o=e[0],a=1;a<n;++a)if(o=i,i=e[a],t(i,o)){if(a===r){r++;continue}e[r++]=i}return e.length=r,e}function i(e){for(var t=1,r=e.length,n=e[0],i=e[0],o=1;o<r;++o,i=n)if(i=n,(n=e[o])!==i){if(o===t){t++;continue}e[t++]=n}return e.length=t,e}function o(e,t,r){return 0===e.length?e:t?(r||e.sort(t),n(e,t)):(r||e.sort(),i(e))}t.exports=o},{}],599:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{dup:81}],600:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),l(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function l(e,t,n){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return g(i)||(i=l(e,i,n)),i}var o=u(e,t);if(o)return o;var a=Object.keys(t),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),E(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(S(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(k(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return c(t)}var _="",v=!1,y=["{","}"];if(h(t)&&(v=!0,y=["[","]"]),S(t)){_=" [Function"+(t.name?": "+t.name:"")+"]"}if(k(t)&&(_=" "+RegExp.prototype.toString.call(t)),x(t)&&(_=" "+Date.prototype.toUTCString.call(t)),E(t)&&(_=" "+c(t)),0===a.length&&(!v||0==t.length))return y[0]+_+y[1];if(n<0)return k(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return w=v?d(e,t,n,m,a):a.map(function(r){return f(e,t,n,m,r,v)}),e.seen.pop(),p(w,_,y)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return v(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)D(t,String(a))?o.push(f(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,r,n,i,!0))}),o}function f(e,t,r,n,i,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),D(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=b(r)?l(e,u.value,null):l(e,u.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function b(e){return null===e}function _(e){return null==e}function v(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return"symbol"==typeof e}function w(e){return void 0===e}function k(e){return j(e)&&"[object RegExp]"===I(e)}function j(e){return"object"==typeof e&&null!==e}function x(e){return j(e)&&"[object Date]"===I(e)}function E(e){return j(e)&&("[object Error]"===I(e)||e instanceof Error)}function S(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function I(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;r.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(M,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])b(s)||!j(s)?a+=" "+s:a+=" "+i(s);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return o};var R,L={};r.debuglog=function(e){if(w(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=t.pid;L[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else L[e]=function(){};return L[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=h,r.isBoolean=m,r.isNull=b,r.isNullOrUndefined=_,r.isNumber=v,r.isString=g,r.isSymbol=y,r.isUndefined=w,r.isRegExp=k,r.isObject=j,r.isDate=x,r.isError=E,r.isFunction=S,r.isPrimitive=C,r.isBuffer=e("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",A(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!j(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":599,_process:541,inherits:295}],601:[function(e,t,r){t.exports=e("./lib/Observable.js").Observable},{"./lib/Observable.js":602}],602:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var r=e[t];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function o(e){var t=e.constructor;return void 0!==t&&null===(t=t[y])&&(t=void 0),void 0!==t?t:j}function a(e){return e instanceof j}function s(e){s.log?s.log(e):setTimeout(function(){throw e})}function l(e){Promise.resolve().then(function(){try{e()}catch(e){s(e)}})}function u(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var r=i(t,"unsubscribe");r&&r.call(t)}}catch(e){s(e)}}function c(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function d(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var r=0;r<t.length&&(f(e,t[r].type,t[r].value),"closed"!==e._state);++r);}}function f(e,t,r){e._state="running";var n=e._observer;try{var o=i(n,t);switch(t){case"next":o&&o.call(n,r);break;case"error":if(c(e),!o)throw r;o.call(n,r);break;case"complete":c(e),o&&o.call(n)}}catch(e){s(e)}"closed"===e._state?u(e):"running"===e._state&&(e._state="ready")}function p(e,t,r){if("closed"!==e._state)return"buffering"===e._state?void e._queue.push({type:t,value:r}):"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:r}],void l(function(){return d(e)})):void f(e,t,r)}Object.defineProperty(r,"__esModule",{value:!0});var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),m=function(){return"function"==typeof Symbol},b=function(e){return m()&&Boolean(Symbol[e])},_=function(e){return b(e)?Symbol[e]:"@@"+e};m()&&!b("observable")&&(Symbol.observable=Symbol("observable"));var v=_("iterator"),g=_("observable"),y=_("species"),w=function(){function e(t,r){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new k(this);try{this._cleanup=r.call(void 0,i)}catch(e){i.error(e)}"initializing"===this._state&&(this._state="ready")}return h(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(c(this),u(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),k=function(){function e(t){n(this,e),this._subscription=t}return h(e,[{key:"next",value:function(e){p(this._subscription,"next",e)}},{key:"error",value:function(e){p(this._subscription,"error",e)}},{key:"complete",value:function(){p(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),j=r.Observable=function(){function e(t){if(n(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return h(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new w(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise(function(r,n){function i(){o.unsubscribe(),r()}if("function"!=typeof e)return void n(new TypeError(e+" is not a function"));var o=t.subscribe({next:function(t){try{e(t,i)}catch(e){n(e),o.unsubscribe()}},error:n,complete:r})})}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(o(this))(function(r){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})})}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(o(this))(function(r){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})})}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=o(this),n=arguments.length>1,i=!1,a=arguments[1],s=a;return new r(function(r){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||n)try{s=e(s,t)}catch(e){return r.error(e)}else s=t},error:function(e){r.error(e)},complete:function(){if(!i&&!n)return r.error(new TypeError("Cannot reduce an empty sequence"));r.next(s),r.complete()}})})}},{key:"concat",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=o(this);return new i(function(t){function n(e){o=e.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){a===r.length?(o=void 0,t.complete()):n(i.from(r[a++]))}})}var o=void 0,a=0;return n(e),function(){o&&(o.unsubscribe(),o=void 0)}})}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=o(this);return new r(function(n){function i(){a.closed&&0===o.length&&n.complete()}var o=[],a=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return n.error(e)}var a=r.from(t).subscribe({next:function(e){n.next(e)},error:function(e){n.error(e)},complete:function(){var e=o.indexOf(a);e>=0&&o.splice(e,1),i()}});o.push(a)},error:function(e){n.error(e)},complete:function(){i()}});return function(){o.forEach(function(e){return e.unsubscribe()}),a.unsubscribe()}})}},{key:g,value:function(){return this}}],[{key:"from",value:function(t){var r="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var n=i(t,g);if(n){var o=n.call(t);if(Object(o)!==o)throw new TypeError(o+" is not an object");return a(o)&&o.constructor===r?o:new r(function(e){return o.subscribe(e)})}if(b("iterator")&&(n=i(t,v)))return new r(function(e){l(function(){if(!e.closed){var r=!0,i=!1,o=void 0;try{for(var a,s=n.call(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(e.next(l),e.closed)return}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}e.complete()}})});if(Array.isArray(t))return new r(function(e){l(function(){if(!e.closed){for(var r=0;r<t.length;++r)if(e.next(t[r]),e.closed)return;e.complete()}})});throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new("function"==typeof this?this:e)(function(e){l(function(){if(!e.closed){for(var t=0;t<r.length;++t)if(e.next(r[t]),e.closed)return;e.complete()}})})}},{key:y,get:function(){return this}}]),e}();m()&&Object.defineProperty(j,Symbol("extensions"),{value:{symbol:g,hostReportError:s},configurable:!0})},{}],603:[function(e,t,r){var n=function(e,t){1==arguments.length&&(t=e[1],e=e[0]);var r={},n=0;for(n;n<e.length;n+=1)r[e[n]]=t[n];return r};t.exports=n},{}],604:[function(e,t,r){"use strict";function n(e){if(!e||"string"!=typeof e.url)throw new Error("URL must be given");return new l.default(function(t,r){var n=e.method?e.method:"GET",o=e.url,l=null;e.data&&(l="string"==typeof e.data?e.data:u.default.stringify(e.data),"GET"!==n&&"HEAD"!==n||(o+=(/\?/.test(o)?"&":"?")+l,l=null));var c=null!=e.canRetry?e.canRetry:"GET"===n||"HEAD"===n,f=o.match(/(?:(?:[a-z]+:)?\/\/)?([^\/]*)\//);if(!f)throw new Error("Failed to match url");var m=f[1];if(Object.prototype.hasOwnProperty.call(h,m))return void r(new Error("Server at ".concat(o," has told us to stop connecting")));e.cachebust&&(o=(0,d.default)(o));var b=new XMLHttpRequest;if((0,s.default)(b,e.xhrFields),b.onerror=function(n){if((e.retryNum||0)<p&&(502===b.status||(0===b.status||b.status>=500)&&c))return void t(i(e));var a=(0,s.default)(new Error("Failed to load ".concat(o)),{event:n,xhr:b,status:b.status});490==b.status&&(h[m]=!0),r(a)},b.onload=function(e){200===b.status?t({xhr:b,text:b.responseText}):b.onerror(e)},b.open(n,o,!0),e.headers){var _=e.headers;(0,a.default)(_).forEach(function(e){var t=_[e];b.setRequestHeader(e,t)})}b.send(l)})}function i(e){var t=(e.retryNum||0)+1,r=Math.min(1e3*Math.pow(2,t),f);return(0,c.default)(r).then(function(){return n((0,s.default)({},e,{retryNum:t}))})}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/core-js/object/keys")),s=o(e("@babel/runtime-corejs2/core-js/object/assign")),l=o(e("@babel/runtime-corejs2/core-js/promise")),u=o(e("querystring")),c=o(e("pdelay")),d=o(e("./cachebust-url")),f=64e3,p=5,h={}},{"./cachebust-url":605,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,pdelay:518,querystring:549}],605:[function(e,t,r){"use strict";function n(e){return a.test(e)?e.replace(a,"$1_="+s++):e+(/\?/.test(e)?"&":"?")+"_="+s++}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/date/now")),a=/([?&])_=[^&]*/,s=(0,o.default)()+Math.floor(Math.random()*Math.pow(2,32))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],606:[function(e,t,r){"use strict";function n(e){return e.replace(/(^|>)([^<]+)/g,function(e,t,r){return t+(r.trim().length?"...":"")}).replace(/\s([^\s=]+)\s*=\s*"[^"]+"/g,function(e,t){return a.has(t)?e:" ".concat(t,'="..."')})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n,r.ATTRIBUTE_WHITELIST=void 0;var o=i(e("@babel/runtime-corejs2/core-js/set")),a=new o.default(["class","rel","target","type","tabindex","id","style","role","contenteditable","aria-expanded","aria-hidden","aria-disabled","aria-haspopup","aria-labelledby","aria-busy","aria-multiselectable","data-action-data","data-item-id","data-msg-id","data-map-id","g_editable","jsnamespace","jsaction"]);r.ATTRIBUTE_WHITELIST=a},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],607:[function(e,t,r){"use strict";function n(){var e=(0,u.default)(["","</",">"]);return n=function(){return e},e}function i(){var e=(0,u.default)(["<","",">",""]);return i=function(){return e},e}function o(){var e=(0,u.default)([" ",'="','"']);return o=function(){return e},e}function a(e){for(var t=[],r=[],a=e,s=0;a;){var l=(0,c.default)(a.attributes).map(function(e){var t=e.name,r=e.value;return(0,d.default)(o(),t,f.ATTRIBUTE_WHITELIST.has(t)?r:"...")}).join(""),u=s,p=a.children.length-1-s,h=e!==a&&u?"[".concat(u,"]"):"",m=e!==a&&p?"[".concat(p,"]"):"";t.push((0,
d.default)(i(),a.nodeName.toLowerCase(),{__html:l},h)),r.push((0,d.default)(n(),m,a.nodeName.toLowerCase())),a.parentElement&&(s=(0,c.default)(a.parentElement.children).indexOf(a)),a=a.parentElement}return t.reverse().join("")+(0,f.default)(e.innerHTML)+r.join("")}var s=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=a;var u=l(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),c=l(e("@babel/runtime-corejs2/core-js/array/from")),d=l(e("auto-html")),f=s(e("./censorHTMLstring"))},{"./censorHTMLstring":606,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"auto-html":83}],608:[function(e,t,r){"use strict";function n(){var e=void 0,t=void 0,r=new o.default(function(r,n){e=r,t=n});return{resolve:e,reject:t,promise:r}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],609:[function(e,t,r){"use strict";function n(e,t){for(var r=e.parentElement;r;){if(t(r))return r;r=r.parentElement}return null}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],610:[function(e,t,r){(function(t){"use strict";function n(){var e=t.chrome;return e&&e.extension&&e.extension.getURL?e.extension.getURL(""):null}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime-corejs2/core-js/object/define-property":14}],611:[function(e,t,r){"use strict";e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t){var r=e.get(t);if(void 0===r)throw new Error("Key not found in map");return r},i=n;r.default=i},{"@babel/runtime-corejs2/core-js/object/define-property":14}],612:[function(e,t,r){"use strict";function n(){var e="undefined"!=typeof document&&document.documentElement.getAttribute("data-inboxsdk-session-id");if("string"==typeof e)return e;var t=(0,o.default)()+"-"+Math.random();return"undefined"!=typeof document&&document.documentElement.setAttribute("data-inboxsdk-session-id",t),t}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/date/now"))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],613:[function(e,t,r){"use strict";function n(){return(""+new Error("Stack saver").stack).replace(/^([^\n]*\n){2}/,"")}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],614:[function(e,t,r){"use strict";function n(e){var t=document.createElement("div");return t.innerHTML=e.replace(/<[^>]*>?/g,""),t.textContent}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],615:[function(e,t,r){"use strict";function n(e){return e.offsetWidth>0||e.offsetHeight>0}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],616:[function(e,t,r){(function(t){"use strict";function n(e,t,r){if("undefined"==typeof document)throw e;try{var n;if(i(e))return;o(e),e instanceof Error||(console.warn("First parameter to Logger.error was not an error object:",e),e=new Error("Logger.error called with non-error: "+e),o(e));var s=r.appIds,l=r.implVersion,f=r.isUsingSyncAPI,p=r.isUsingMaterialGmailUI,b=r.userEmailHash,v=r.loaderVersion||_.BUILD_VERSION,y=!!r.sentByApp,k={};for(var j in e)if(Object.prototype.hasOwnProperty.call(e,j))try{var x=e[j];(0,d.default)(x),k[j]=x}catch(e){}(0,c.default)(k).length>0&&(t={errorProperties:k,details:t});var E=(0,h.default)(),S=["Error logged:",e];e&&e.stack&&S.push("\n\nOriginal error stack:\n"+e.stack),S.push("\n\nError logged from:\n"+E),t&&S.push("\n\nError details:",t),S.push("\n\nExtension App Ids:",(0,d.default)(s,null,2)),S.push("\nSent by App:",y),S.push("\nSession Id:",g),S.push("\nExtension Id:",(0,m.default)()),S.push("\nInboxSDK Loader Version:",v),S.push("\nInboxSDK Implementation Version:",l),S.push("\nIs Using Sync API:",f),S.push("\nIs Using Material Gmail UI:",p),(n=console).error.apply(n,S);var C={message:e&&e.message||e,stack:e&&e.stack,loggedFrom:E,details:t,appIds:s,sentByApp:y,sessionId:g,emailHash:b,extensionId:(0,m.default)(),loaderVersion:v,implementationVersion:l,isUsingSyncAPI:f,isUsingMaterialGmailUI:p,origin:document.location.origin,timestamp:1e3*(0,u.default)()};w(C),"true"===document.documentElement.getAttribute("inboxsdk-emit-error-event")&&document.documentElement.dispatchEvent(new CustomEvent("inboxSDKerror",{bubbles:!1,cancelable:!1,detail:{message:e&&e.message||e,stack:e&&e.stack,loggedFrom:E,details:t,sentByApp:y}}))}catch(n){a(n,[e,t,r])}}function i(e){return!!(0,v.default)(e)&&y.has(e)}function o(e){(0,v.default)(e)&&y.add(e)}function a(e,t){console.error("ERROR REPORTING ERROR",e),console.error("ORIGINAL ERROR",t)}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var l=s(e("@babel/runtime-corejs2/core-js/object/define-property")),u=s(e("@babel/runtime-corejs2/core-js/date/now")),c=s(e("@babel/runtime-corejs2/core-js/object/keys")),d=s(e("@babel/runtime-corejs2/core-js/json/stringify")),f=s(e("./ajax")),p=s(e("./rate-limit")),h=s(e("./get-stack-trace")),m=s(e("./get-extension-id")),b=s(e("./get-session-id")),_=e("./version"),v=s(e("lodash/isObject")),g=(0,b.default)(),y=function(){return!t.__inboxsdk_extensionSeenErrors&&t.WeakMap&&(0,l.default)(t,"__inboxsdk_extensionSeenErrors",{value:new t.WeakMap}),{has:function(e){if(t.__inboxsdk_extensionSeenErrors)return t.__inboxsdk_extensionSeenErrors.has(e);try{return!!e.__inboxsdk_extensionHasSeenError}catch(e){return console.error(e),!1}},add:function(e){if(t.__inboxsdk_extensionSeenErrors&&t.__inboxsdk_extensionSeenErrors.set)t.__inboxsdk_extensionSeenErrors.set(e,!0);else if(t.__inboxsdk_extensionSeenErrors&&t.__inboxsdk_extensionSeenErrors.add)t.__inboxsdk_extensionSeenErrors.add(e);else try{(0,l.default)(e,"__inboxsdk_extensionHasSeenError",{value:!0})}catch(e){console.error(e)}}}}(),w=(0,p.default)(function(e){try{(0,f.default)({url:"https://www.inboxsdk.com/api/v2/errors",method:"POST",headers:{"Content-Type":"application/json"},data:(0,d.default)(e)}).catch(function(t){a(t,[e])})}catch(t){a(t,[e])}},6e4,10)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax":604,"./get-extension-id":610,"./get-session-id":612,"./get-stack-trace":613,"./rate-limit":618,"./version":619,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/isObject":477}],617:[function(e,t,r){"use strict";function n(e,t,r){function n(){u.shift()(),u.length?i():c=!1}function i(){c=!0;var e=s();e>0?setTimeout(n,e):n()}function s(){var e=(0,a.default)(),n=e-t;return l=l.filter(function(e){return e>n}),l.length>=r?l[0]-n:-1}var l=[],u=[],c=!1;return function(){for(var t=this,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var d,f=new o.default(function(r,i){d=function(){l.push((0,a.default)());try{r(e.apply(t,n))}catch(e){i(e)}}});if(!d)throw new Error("Should not happen");return u.push(d),c||i(),f}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/promise")),a=i(e("@babel/runtime-corejs2/core-js/date/now"))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],618:[function(e,t,r){"use strict";function n(e,t,r){var n=[];return function(){var i=(0,o.default)();if(n=n.filter(function(e){return e>i-t}),n.length>=r)throw new Error("Function rate limit exceeded");n.push(i);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return e.apply(this,s)}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/date/now"))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],619:[function(e,t,r){"use strict";e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.BUILD_VERSION=void 0;r.BUILD_VERSION="0.7.25-1564178918976-baa7c44b89c39543",t.hot&&t.hot.accept()},{"@babel/runtime-corejs2/core-js/object/define-property":14}],620:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/freeze")),o=(0,i.default)({NAVIGATION:"NAVIGATION",LINK:"LINK",GROUPER:"GROUPER",MANAGE:"MANAGE"}),a=o;r.default=a},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],621:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.ROUTE_TYPES=r.NATIVE_LIST_ROUTE_IDS=r.NATIVE_ROUTE_IDS=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/freeze")),o=(0,i.default)({INBOX:"inbox/:page",ALL_MAIL:"all/:page",SENT:"sent/:page",STARRED:"starred/:page",DRAFTS:"drafts/:page",SNOOZED:"snoozed/:page",DONE:"done",REMINDERS:"reminders",LABEL:"label/:labelName/:page",TRASH:"trash/:page",SPAM:"spam/:page",IMPORTANT:"imp/:page",SEARCH:"search/:query/:page",THREAD:"inbox/:threadID",CHATS:"chats/:page",CHAT:"chats/:chatID",CONTACTS:"contacts/:page",CONTACT:"contacts/:contactID",SETTINGS:"settings/:section",ANY_LIST:"*"});r.NATIVE_ROUTE_IDS=o;var a=(0,i.default)({INBOX:o.INBOX,ALL_MAIL:o.ALL_MAIL,SENT:o.SENT,STARRED:o.STARRED,DRAFTS:o.DRAFTS,SNOOZED:o.SNOOZED,DONE:o.DONE,REMINDERS:o.REMINDERS,LABEL:o.LABEL,TRASH:o.TRASH,SPAM:o.SPAM,IMPORTANT:o.IMPORTANT,SEARCH:o.SEARCH,ANY_LIST:o.ANY_LIST});r.NATIVE_LIST_ROUTE_IDS=a;var s=(0,i.default)({LIST:"LIST",THREAD:"THREAD",SETTINGS:"SETTINGS",CHAT:"CHAT",CUSTOM:"CUSTOM",UNKNOWN:"UNKNOWN"});r.ROUTE_TYPES=s},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],622:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.SECTION_NAMES=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/freeze")),o=(0,i.default)({INBOX_STATE:"INBOX_STATE",METADATA_STATE:"METADATA_STATE",OTHER:"OTHER"});r.SECTION_NAMES=o},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],623:[function(e,t,r){"use strict";function n(){if(!document.getElementById("inboxsdk__style")){var e=document.createElement("style");if(e.id="inboxsdk__style",s.onValue(function(t){e.textContent=(0,a.default)(t)}),!document.head)throw new Error("missing head");document.head.appendChild(e)}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("ud-kefir")),a=i(e("../../lib/rewriteCssWithIdMap")),s=(0,
o.default)(t,"/* suggestions */\n\n.inboxsdk__suggestions_separator_before {\n  padding-bottom: 2px !important;\n}\n\n.inboxsdk__suggestions_separator_after {\n  border-top: 1px solid #e5e5e5;\n  padding-top: 2px !important;\n}\n\n/* buttons */\n\ndiv.T-I.inboxsdk__button {\n  -webkit-user-select: none;\n  min-width: 27px;\n}\n\n.inboxsdk__no_bg {\n  background: none;\n}\n\n.inboxsdk__button.inboxsdk__button_disabled {\n  opacity: 0.55;\n}\n\n.inboxsdk__button_icon + .inboxsdk__button_text {\n  margin-left: 5px;\n}\n\n.inboxsdk__button_icon {\n  display: inline-block;\n}\n\n.inboxsdk__button_iconImg {\n  height: 20px;\n  width: 20px;\n  vertical-align: middle;\n  margin-top: -2px;\n  user-drag: none;\n  -moz-user-select: none;\n  -webkit-user-drag: none;\n}\n\n.inboxsdk__button_green_inactive {\n  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);\n  background-color: #53a93f;\n  background-image: -webkit-linear-gradient(top, transparent, transparent);\n  background-image: linear-gradient(top, transparent, transparent);\n  border: 1px solid transparent;\n  color: #fff;\n  text-shadow: none;\n}\n\n.inboxsdk__button_green_hover {\n  -webkit-box-shadow: inset 0 -1px 0 #4c8534;\n  box-shadow: inset 0 -1px 0 #4c8534;\n  background-color: #65b045;\n  background-image: -webkit-linear-gradient(top, transparent, transparent);\n  background-image: linear-gradient(top, transparent, transparent);\n  border: 1px solid transparent;\n  border-bottom: 1px solid #4c8534;\n  text-shadow: none;\n}\n\n.inboxsdk__button_green_active {\n  -webkit-box-shadow: inset 0 1px 0 #2f6124;\n  box-shadow: inset 0 1px 0 #2f6124;\n  background: #3e802f;\n  border: 1px solid transparent;\n  border-top: 1px solid #2f6124;\n  color: #fff;\n  text-shadow: none;\n}\n\n.inboxsdk__menu {\n  min-width: 1em;\n  min-height: 1em;\n  padding: 0px;\n  overflow: visible;\n  max-height: none;\n\n  /* Copied from Gmail's .J-M class */\n  z-index: 7;\n  cursor: default;\n  font-size: 13px;\n  margin: 0;\n  outline: none;\n}\n\n.inboxsdk__menu > .inboxsdk__menuContent {\n  padding: 0;\n  box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),\n    0 3px 14px 2px rgba(0, 0, 0, 0.12), 0 5px 5px -3px rgba(0, 0, 0, 0.2);\n  transition: opacity 0.218s;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  background: #fff;\n  outline: none;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__menu > .inboxsdk__menuContent {\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n.f4.J-N-JX.inboxsdk__message_more_icon {\n  margin-top: -1px;\n  width: 16px;\n  height: 16px;\n}\n\nbody.inboxsdk__gmailv1css .J-N .f4.J-N-JX.inboxsdk__message_more_icon {\n  margin-left: 3px;\n}\n\nbody.inboxsdk__gmailv1css\n  .J-N:not(.J-N-JT)\n  .f4.J-N-JX.inboxsdk__message_more_icon {\n  margin-top: 0;\n}\n\nbody:not(.inboxsdk__gmailv1css) .f4.J-N-JX.inboxsdk__message_more_icon {\n  margin-top: 1px;\n}\n\n/* end */\n\n/* compose buttons */\n\n/* fix compose mole position when sidebar is open */\n/*\nsteps to repro:\n1. open compose mole\n2. open non-native sidebar\n3. mole overlaps sidebar\n*/\nbody:not(.inboxsdk__gmailv1css)\n  .dw\n  .nH\n  > .no\n  .nH.nn:last-child[style='width: 320px;'] {\n  width: 376px !important;\n}\n\n/* fix native button wrapping */\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__compose .a8X {\n  overflow: visible;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__compose .a8X > .bAK {\n  flex-wrap: nowrap;\n}\n\n/* in material Gmail reduce padding between buttons  */\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_narrow_buttons\n  .gU:not(:first-child) {\n  padding-left: 5px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_narrow_buttons\n  .inboxsdk__compose_actionToolbar {\n  padding-left: 10px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_narrow_buttons\n  .wG:not(:first-child) {\n  margin-left: 15px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_narrow_buttons\n  .inboxsdk__compose_actionToolbar\n  div.inboxsdk__composeButton:last-child {\n  margin-right: 0px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_narrow_buttons\n  .inboxsdk__compose_actionToolbar\n  div.inboxsdk__composeButton\n  + div.inboxsdk__composeButton {\n  margin-left: 3px;\n}\n\n/* end narrow */\n\n/* mimic button styling */\n.inboxsdk__composeButton,\n.inboxsdk__compose_sendButton {\n  height: 20px;\n  width: 20px;\n  padding: 4px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  vertical-align: middle;\n  outline: none;\n  position: relative;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__composeButton {\n  border-radius: 2px;\n  border-width: 1px;\n  border-style: solid;\n  border-color: rgb(245, 245, 245);\n  height: 19px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__composeButton:hover {\n  border-color: #dcdcdc;\n  background-color: #f8f8f8;\n  background-image: linear-gradient(top, #f8f8f8, #f1f1f1);\n}\n\n.inboxsdk__composeButton + .inboxsdk__composeButton {\n  margin-left: 4px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__composeButton + .inboxsdk__composeButton {\n  margin-left: 4px;\n}\n\n.inboxsdk__composeButton .inboxsdk__button_icon {\n  opacity: 0.55;\n}\n\n.inboxsdk__composeButton:hover .inboxsdk__button_icon,\n.inboxsdk__composeButton:focus .inboxsdk__button_icon,\n.inboxsdk__composeButton.inboxsdk__composeButton_active .inboxsdk__button_icon {\n  opacity: 1;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__composeButton::before {\n  content: '';\n  display: block;\n  opacity: 0;\n  position: absolute;\n  transition-duration: 0.15s;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  background: none;\n  box-sizing: border-box;\n  transform: scale(0);\n  transition-property: transform, opacity;\n  border-radius: 4px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__composeButton:hover::before {\n  background-color: rgba(32, 33, 36, 0.059);\n  border: none;\n  box-shadow: none;\n  opacity: 1;\n  transform: scale(1);\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__composeButton:focus::before,\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__composeButton.inboxsdk__composeButton_active::before {\n  background-color: rgba(32, 33, 36, 0.122);\n  border: none;\n  box-shadow: none;\n  opacity: 1;\n  transform: scale(1);\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__compose_actionToolbar\n  .inboxsdk__composeButton:last-child {\n  margin-right: 2px;\n}\n\n.inboxsdk__compose_actionToolbar\n  .inboxsdk__compose_groupedActionToolbar\n  div.inboxsdk__composeButton:last-child {\n  margin-right: 0px;\n}\n\n.inboxsdk__compose_sendButton {\n  background-color: #1a73e8;\n  color: white;\n  height: 24px;\n  width: auto;\n  padding-left: 3px;\n  padding-right: 3px;\n  border-radius: 4px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__compose_sendButton {\n  padding: 6px 4px;\n  margin-left: 2px;\n}\n\n.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {\n  height: 20px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_inlineReply\n  .inboxsdk__compose_sendButton {\n  height: 24px;\n}\n\n.inboxsdk__compose_sendButton:focus,\n.inboxsdk__compose_sendButton.inboxsdk__composeButton_active {\n  background-color: #5094ed;\n  box-shadow: 0 1px 1px 0 rgba(66, 133, 244, 0.3),\n    0 1px 3px 1px rgba(66, 133, 244, 0.15);\n  border: none;\n}\n\n.T-I ~ .inboxsdk__compose_sendButton {\n  margin-left: -6px;\n}\n\nbody.inboxsdk__gmailv1css .T-I + .inboxsdk__compose_sendButton {\n  margin-left: 0px;\n  height: 15px;\n  box-shadow: none;\n  background-color: #4d90fe;\n  background-image: -webkit-linear-gradient(top, #4d90fe, #4787ed);\n  background-image: linear-gradient(top, #4d90fe, #4787ed);\n  border: 1px solid #3079ed;\n  border-radius: 2px;\n}\n\nbody.inboxsdk__gmailv1css .T-I + .inboxsdk__compose_sendButton:focus {\n  -webkit-box-shadow: inset 0 0 0 1px #fff;\n  box-shadow: inset 0 0 0 1px #fff;\n  border: 1px solid #fff;\n  border: rgba(0, 0, 0, 0) solid 1px;\n  outline: rgba(0, 0, 0, 0) 0;\n}\n\n.inboxsdk__compose_actionToolbar {\n  white-space: nowrap;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__compose_actionToolbar {\n  padding-left: 6px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__compose_actionToolbar {\n  padding: 0px 0px 0px 5px;\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon {\n  height: 20px;\n  width: 20px;\n  display: inline-flex;\n  user-select: none;\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg {\n  height: 17px;\n  width: 17px;\n  display: inline-flex;\n  margin: auto;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__compose_actionToolbar\n  .inboxsdk__composeButton:focus {\n  border: 1px solid #4d90fe;\n  outline: none;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__compose_actionToolbar\n  .inboxsdk__composeButton.inboxsdk__composeButton_active {\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n  background-color: #eee;\n  background-image: linear-gradient(top, #eee, #e0e0e0);\n}\n\n.inboxsdk__compose_actionToolbar + .gU:not(.inboxsdk__compose_separator) {\n  padding-left: 8px;\n}\n\n/* grouped action toolbar */\n.inboxsdk__compose_groupedActionToolbar_visible .aDg .aDh {\n  overflow-y: visible;\n}\n\n.inboxsdk__compose_groupedActionToolbar {\n  position: absolute;\n  bottom: 44px;\n  margin: 3px;\n  z-index: 10;\n  left: 0px;\n  border-radius: 2px;\n  box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12),\n    0 2px 4px -1px rgba(0, 0, 0, 0.2);\n  padding: 5px 15px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__compose_groupedActionToolbar {\n  margin-bottom: 7px;\n  padding: 4px 5px;\n  background: white;\n  left: -3px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_inlineReply\n  .inboxsdk__compose_groupedActionToolbar {\n  left: 14px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_groupedActionToolbar\n  .inboxsdk__composeButton:first-child {\n  margin-left: 0px;\n  margin-right: 0px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__composeButton.inboxsdk__compose_groupedActionButton {\n  margin-right: 0px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_groupedActionToolbar\n  .inboxsdk__composeButton {\n  padding: 4px;\n}\n\n/*\nthere's an element that gets a height of 40px when the gmail formatting toolbar\nis visible. This rule makes that same element get the 40px height when\nthe actionToolbar is visible\n*/\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_groupedActionToolbar_visible\n  .bA3 {\n  height: 40px;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__compose_groupedActionToolbar\n  .inboxsdk__composeButton {\n  padding: 2px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__compose_groupedActionToolbar {\n  background: #f5f5f5;\n  box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.1);\n  border: 1px solid #cfcfcf;\n  padding: 4px !important;\n}\n\n.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {\n  z-index: 1;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__compose_groupedActionToolbar\n  div.inboxsdk__button {\n  margin-right: 0px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__compose_groupedActionToolbar_arrow {\n  position: absolute;\n  background: url('https://ssl.gstatic.com/ui/v1/icons/mail/down_pointer.png')\n    no-repeat;\n  width: 17px;\n  height: 18px;\n  bottom: -16px;\n  margin-left: 4px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__compose_groupedActionToolbar_arrow {\n  display: none;\n}\n\n/* end grouped action toolbar */\n\n.inboxsdk__compose_customSendContainer {\n  display: inline-block;\n  position: relative;\n  outline: 0;\n  height: 29px;\n  margin: 6px 0;\n  padding: 0;\n  line-height: 29px;\n  vertical-align: middle;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__compose_customSendContainer {\n  height: 36px;\n  line-height: 36px;\n}\n\n.inboxsdk__compose_customTitleBarColor > img.Hl,\n.inboxsdk__compose_customTitleBarColor > img.Hq,\n.inboxsdk__compose_customTitleBarColor > img.Ha {\n  background-color: transparent !important;\n}\n\n.inboxsdk__compose_hasCustomTitleBarText,\n.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {\n  align-items: center;\n}\n\n.inboxsdk__compose_hasCustomTitleBarText > tbody {\n  width: 100%;\n}\n\n.inboxsdk__compose_nativeTitleBarText {\n  display: none !important;\n}\n\n.inboxsdk__compose_customTitleBarText {\n  width: calc(100% - 80px);\n}\n\n.inboxsdk__compose_hasCustomTitleBarText td.Hm {\n  margin-right: 10px;\n  margin-left: auto;\n}\n\n.inboxsdk__compose_statusBarPrependContainer {\n  border-top: 1px solid #cfcfcf;\n}\n\n.inboxsdk__compose_statusBarPrependContainer + table td.gU {\n  border-top: none;\n}\n\n/* end */\n\n/* appid warning gmail specific parts */\n\ninput.inboxsdk__x_close_button {\n  background-color: transparent;\n  background-image: url(https://www.streak.com/build/images/circle_border_x.png);\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center center;\n  height: 20px;\n  width: 20px;\n  border: none;\n  display: inline-block;\n  vertical-align: middle;\n  cursor: pointer;\n\n  float: right;\n  margin: 5px;\n}\n\n/* thread rows */\n\n.inboxsdk__gmail_label.inboxsdk__label_has_icon .au {\n  display: inline-block;\n  margin-left: 14px;\n}\n\n.inboxsdk__thread_row_label .inboxsdk__button_icon,\n.inboxsdk__thread_row_label .inboxsdk__button_iconImg {\n  height: 11px;\n  width: 11px;\n}\n\n.inboxsdk__thread_row_label .inboxsdk__button_icon {\n  display: inline-block;\n  margin-top: 3px;\n  margin-left: 4px;\n  position: absolute;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__thread_row_label .inboxsdk__button_icon {\n  margin-top: 2px;\n}\n\n.inboxsdk__thread_row_button {\n  outline: 0;\n  height: 20px;\n  width: 20px;\n  padding: 0px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__thread_row_custom_date_container {\n  max-width: inherit;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__thread_row_button\n  .inboxsdk__button_iconImg {\n  height: 20px;\n  width: 20px;\n  margin-top: 0px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__thread_row_button {\n  position: relative;\n  padding: 0 5px;\n  top: -2px;\n  height: 15px;\n  width: 15px;\n}\n\n.inboxsdk__gmail_action {\n  float: right;\n  position: relative;\n  background-color: grey;\n  border: 1px solid black;\n  margin-left: 1em;\n  cursor: default;\n  padding: 0 6px;\n  background-image: -webkit-linear-gradient(top, #e9e9e9, #e6e6e6);\n  background-image: linear-gradient(top, #e9e9e9, #e6e6e6);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-color: #ccc;\n  color: #444;\n  height: 17px;\n  line-height: 17px;\n  min-width: 56px;\n  border-radius: 2px;\n  font-size: 11px;\n  font-weight: bold;\n  text-align: center;\n  white-space: nowrap;\n  padding-right: 18px;\n}\n\n.inboxsdk__gmail_action:focus {\n  border: 1px solid #4d90fe;\n  outline: none;\n}\n\n.inboxsdk__gmail_action:active {\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n.inboxsdk__gmail_action:hover {\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);\n  background-color: #ededed;\n  background-image: -webkit-linear-gradient(top, #ededed, #eaeaea);\n  background-image: linear-gradient(top, #ededed, #eaeaea);\n  border-color: #b8b8b8;\n}\n\n.inboxsdk__gmail_action::after {\n  content: '';\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  margin-left: 5px;\n  background: no-repeat\n    url(https://ssl.gstatic.com/mail/sprites/smartmail-561acb673be75c1d374881a95997fce4.png) -67px -100px;\n  width: 7px;\n  height: 7px;\n  opacity: 0.55;\n}\n\n.inboxsdk__thread_row_custom_date {\n  margin-left: 2px;\n}\n\nspan.inboxsdk__thread_row_custom_date\n  + span:not(.inboxsdk__thread_row_custom_date) {\n  display: none;\n}\n\nspan.inboxsdk__thread_row_custom_draft_label + div.yW {\n  display: none;\n}\n\n.inboxsdk__thread_row_attachment_iconWrapper,\n.inboxsdk__thread_row_attachment_icon {\n  margin-left: 3px;\n  width: 16px;\n  height: 16px;\n}\n\n.inboxsdk__thread_row_attachment_iconWrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: max-content;\n}\n\n/* .zA td.apU.xy refers to the <td/> element that houses the favorite star in thread row view.\n The <span> element is what inboxSDK will render threadRowButtons as when Gmail hover actions are disabled.\n The following rules fix the issue where threadRowButtons were spilling over into the thread row email text.\n */\nbody:not(.inboxsdk__gmailv1css) .zA td.apU.xY {\n  width: initial;\n}\n\nbody:not(.inboxsdk__gmailv1css) .zA td.apU.xY span.inboxsdk__thread_row_button {\n  margin: 0 10px;\n  opacity: 0.16;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .zA.aqw\n  td.apU.xY\n  span.inboxsdk__thread_row_button {\n  opacity: 0.54;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .zA.aqw\n  td.apU.xY\n  span.inboxsdk__thread_row_button:hover {\n  opacity: 1;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .zA\n  td.apU.xY\n  span.inboxsdk__thread_row_button::before {\n  /* Google adds in a pseduo ::before element to span elems with the T-KT class applied.\n  Explicity setting this width and height to zero as remove weird positioning that results */\n  width: 0px;\n  height: 0px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__thread_row_attachment_icon {\n  vertical-align: middle;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__thread_row_attachment_icons_present {\n  max-width: inherit;\n}\n\n/* narrow vertical preview pane */\nbody:not(.inboxsdk__gmailv1css)\n  .Zs\n  .inboxsdk__thread_row_attachment_icons_present {\n  flex-grow: 0;\n}\n\nbody:not(.inboxsdk__gmailv1css) .Zs .inboxsdk__thread_row_label {\n  order: 1;\n}\n\nbody:not(.inboxsdk__gmailv1css) .Zs .inboxsdk__thread_row_icon_wrapper {\n  order: 1;\n  margin-left: 3px;\n  margin-right: 0px;\n}\n/* end narrow vertical preview pane */\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__thread_row_icon_wrapper,\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__thread_row_icon_wrapper\n  .inboxsdk__button_icon,\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__thread_row_icon_wrapper\n  .inboxsdk__button_iconImg {\n  height: 18px;\n  width: 18px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .zA:hover .inboxsdk__thread_row_icon_wrapper {\n  align-self: flex-start;\n  margin-top: 1px;\n}\n\n.inboxsdk__thread_row_icon_wrapper {\n  width: 25px;\n  margin-right: 3px;\n  align-self: center;\n  height: 20px;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__thread_row_icon_wrapper\n  .inboxsdk__button_icon,\nbody.inboxsdk__gmailv1css\n  .inboxsdk__thread_row_icon_wrapper\n  .inboxsdk__button_iconImg {\n  height: 20px;\n  width: 20px;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  vertical-align: top;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__thread_row_icon_wrapper {\n  height: 0px;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__thread_row_icon_wrapper\n  .inboxsdk__button_icon {\n  height: 24px;\n  width: 24px;\n  margin-top: -12px;\n  position: absolute;\n  top: 50%;\n  overflow: hidden;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__thread_row_icon_wrapper\n  .inboxsdk__button_icon\n  .zA.apw {\n  margin-top: -15px;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__thread_row_icon_wrapper\n  .inboxsdk__button_iconImg {\n  height: 24px;\n  width: 24px;\n  vertical-align: middle;\n}\n\n.inboxsdk__thread_row_image_added\n  .y6\n  .inboxsdk__thread_row_icon_wrapper\n  ~ span[id] {\n  margin-left: 3px;\n}\n\n.inboxsdk__thread_row_image_added .a4W,\n.inboxsdk__thread_row_image_added .apA,\n.inboxsdk__thread_row_image_added .apx {\n  position: relative;\n}\n\n/* end thread rows */\n[inboxsdk__message_added_attachment_icon] td.gH > span:first-child > img,\n[inboxsdk__message_added_attachment_icon]\n  td.gH\n  div.gK\n  > span:first-child\n  > img {\n  margin-right: 3px;\n  margin-left: 3px;\n  margin-top: 0px;\n}\n\n[inboxsdk__message_added_attachment_icon]\n  td.gH\n  > span:first-child\n  > *:last-child,\n[inboxsdk__message_added_attachment_icon]\n  td.gH\n  div.gK\n  > span:first-child\n  > *:last-child {\n  margin-right: 6px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__message_attachment_icon {\n  margin-top: -3px;\n}\n\n.inboxsdk__message_attachment_iconWrapper,\n.inboxsdk__message_attachment_icon {\n  width: 21px;\n  height: 21px;\n  position: relative;\n}\n\n.inboxsdk__message_attachment_iconWrapper {\n  margin: auto 3px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  vertical-align: top;\n}\n\n.inboxsdk__message_attachment_tooltipWrapper {\n  position: absolute;\n  top: 19px;\n  z-index: 10;\n}\n\n/* Work around issue where clicking \"Remove formatting\" in Compose causes this\n * element to become taller and shift the toolbar down. */\n.gU .aWQ {\n  max-height: 3px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .aQw .inboxsdk__button_icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 28px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .aQw .inboxsdk__button_iconImg {\n  height: 18px;\n  width: 18px;\n}\n\n.aQw .inboxsdk__button_iconImg {\n  margin-top: 2px;\n}\n\n.aZi .asa .inboxsdk__button_iconImg {\n  display: inline-block;\n  vertical-align: middle;\n  margin-top: -3px;\n}\n\n/* Message view attachments toolbar */\n.aZi .aZj .asa .inboxsdk__button_iconImg {\n  margin: 0;\n}\n\nbody .dw {\n  /* Fixes issue where a tall compose window opened over a custom view could be\n   * overlapped by Gmail's top bar. Also fixes issue where mole widgets are\n   * only visible while a compose window is open.\n   */\n  z-index: 6 !important;\n}\n\n.inboxsdk__compose_outerSidebar_wrapper {\n  position: absolute;\n  left: -401px;\n  top: 0px;\n  background: white;\n  width: 400px;\n  bottom: 0px;\n  border-left: 1px solid silver;\n  box-shadow: -2px 0px 1px #e6e6e6;\n  display: block;\n}\n\n.inboxsdk__outerSidebarActive .aSt .inboxsdk__compose_outerSidebar_wrapper {\n  border-left: 0;\n  box-shadow: none;\n  left: -400px;\n}\n\n.inboxsdk__outerSidebarActive .aSs > div {\n  width: 50% !important;\n  margin-left: 30%;\n}\n\n.inboxsdk__compose_outerSidebar_header {\n  background: #404040;\n  font-size: 80%;\n  padding: 10px 10px 11px 10px;\n  color: white;\n  border-bottom: 1px solid #c4c4c4;\n}\n\n.inboxsdk__compose_outerSidebar_body {\n  position: absolute;\n  width: 100%;\n  bottom: 43px;\n  top: 36px;\n  left: -1px;\n  overflow: auto;\n}\n\n.inboxsdk__compose_outerSidebar_footer {\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  border-top: 1px solid rgb(206, 206, 206);\n  display: block;\n}\n\n.inboxsdk__compose_innerSidebarActive form,\n.inboxsdk__compose_innerSidebarActive .GQ {\n  padding-right: 200px;\n}\n\ndiv.inboxsdk__compose_statusbar {\n  border: 0;\n  height: 40px;\n  margin: 0;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__compose_statusbar {\n  background: none;\n  position: relative;\n}\n\n/* only include padding when in thread inline view */\nbody:not(.inboxsdk__gmailv1css) .HM .I5 .inboxsdk__compose_statusbar {\n  padding: 0 16px 16px 16px;\n}\n\nbody:not(.inboxsdk__gmailv1css) table + .inboxsdk__compose_statusbar {\n  margin-top: -8px;\n}\n\n.inboxsdk__compose_statusbarActive .aoI {\n  height: auto !important;\n}\n\n.inboxsdk__compose_statusbarActive .aDl {\n  z-index: unset;\n}\n\n/* compose size fixing */\n.inboxsdk__compose .qz {\n  max-height: inherit !important;\n}\n\n/* aDi is initially position: fixed, which messes things up, so we make static */\n.inboxsdk__size_fixer .aDj.aDi {\n  position: static !important;\n}\n\n.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .HM .I5 {\n  padding-bottom: var(--inboxsdk-total-added-statusbar-height, 0px);\n}\n/* Extend the message foreground outline downwards to contain our added status bars */\n.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj::before {\n  height: calc(100% + var(--inboxsdk-total-added-statusbar-height, 0px));\n}\n/* When we have a status bar added and the reply status is in position absolute or fixed mode (.aDi),\nuse a background color on the element containing our added status bars so the message background outline\nisn't visible behind it. */\n.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive\n  .aDj.aDi\n  > .aDh {\n  background-color: white;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__recipient_row {\n  display: flex;\n}\n\n.inboxsdk__compose_notice {\n  background-color: #f5f5f5;\n  border-radius: 4px;\n  margin: 10px;\n  padding: 10px 16px;\n}\n\n.inboxsdk__recipient_row td.ok {\n  height: 20px;\n  padding: 0px !important;\n}\n\n.inboxsdk__recipient_row td.az3 {\n  padding: 0px 3px 0px 3px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__recipient_row td.ok {\n  height: 23px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__recipient_row td.az3 {\n  padding: 0px 3px 3px 3px;\n}\n\n.inboxsdk__compose_forceRecipientsOpen .fX.aXjCH {\n  display: block !important;\n}\n\n.inboxsdk__compose_hideRecipientArea .fX.aXjCH,\n.inboxsdk__compose_hideRecipientArea .aoD.hl,\n.inboxsdk__compose_forceRecipientsOpen .aoD.hl,\n.inboxsdk__compose_forceRecipientRowHidden {\n  display: none !important;\n}\n\n/* toolbar visibility */\n\n[data-thread-toolbar='true'] [data-rowlist-toolbar='true'] {\n  display: none !important;\n}\n\n[data-toolbar-expanded='true'] [data-toolbar-expanded='false'] {\n  display: none !important;\n}\n\n[data-toolbar-expanded='false'] [data-toolbar-expanded='true'] {\n  display: none !important;\n}\n\n[data-toolbar-icononly='true'] .inboxsdk__button_text {\n  display: none !important;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  [data-toolbar-icononly='false']\n  .inboxsdk__button_text {\n  color: #5f6368;\n}\n\nbody:not(.inboxsdk__gmailv1css) [data-toolbar-icononly='false'] .asa:before {\n  border-radius: 4px;\n  border: none !important;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  [data-toolbar-icononly='false']\n  .inboxsdk__button {\n  align-items: center;\n  border: none;\n  display: inline-flex;\n  justify-content: center;\n  outline: none;\n  position: relative;\n  z-index: 0;\n  -webkit-font-smoothing: antialiased;\n  font-family: 'Google Sans', Roboto, RobotoDraft, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  letter-spacing: 0.15px;\n  background: none;\n  box-sizing: border-box;\n  color: #5f6368;\n  cursor: pointer;\n  font-weight: 500;\n  outline: none;\n  padding: 0 8px;\n}\n\n.inboxsdk__menuItem img,\n.inboxsdk__menuItem .inboxsdk__icon {\n  height: 16px;\n  width: 16px;\n  margin-top: -1px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__menuItem.J-N .J-N-JX {\n  margin-left: 3px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__menuItem.J-N:not(.J-N-JT) .J-N-JX {\n  margin-top: 0;\n}\n\n/* end */\n\n/* modal */\n\n.inboxsdk__modal_overlay {\n  right: 0px;\n  bottom: 0px;\n}\n\n.inboxsdk__modal_fullscreen {\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  bottom: 0px;\n  right: 0px;\n  z-index: 503;\n  display: flex;\n  display: -webkit-flex;\n  justify-content: center;\n  -webkit-justify-content: center;\n  align-items: center;\n  -webkit-align-items: center;\n  padding: 110px 50px 50px 50px;\n}\n\n.inboxsdk__modal_content {\n  margin-top: 30px;\n  margin-bottom: 30px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons\n  .inboxsdk__modal_content {\n  margin-bottom: 0px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons:not(.inboxsdk__modal_hideBottom)\n  .inboxsdk__modal_content {\n  margin-bottom: 0px;\n  padding-bottom: 24px;\n}\n\n.inboxsdk__modal_close {\n  outline: none;\n  cursor: pointer;\n}\n\n.inboxsdk__modal_fullscreen .inboxsdk__modal_container {\n  position: relative;\n  margin-top: -60px;\n  width: auto;\n  overflow: hidden;\n}\n\n.inboxsdk__modal_fullscreen .inboxsdk__modal_container .inboxsdk__modal_toprow {\n  margin-right: 16px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_close {\n  display: none;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_container {\n  padding-top: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_content {\n  margin-top: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .Kj-JD-K7 {\n  margin: 0px;\n  display: none;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides\n  .inboxsdk__modal_container,\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_content {\n  padding-left: 0px;\n  padding-right: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom\n  .inboxsdk__modal_content {\n  margin-bottom: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom\n  .inboxsdk__modal_container {\n  padding-bottom: 0px;\n}\n\n.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width {\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__modal_toprow--constrain-title-width > span[role='heading'] {\n  -webkit-flex: 1;\n  flex: 1;\n  width: 0;\n}\n\n/* end modal */\n\n/* mole */\n\n/* Fix issue where Compose toolbar can become disconnected when moles or\n * drawers are in use */\n.inboxsdk__drawers_in_use .aDi,\n.inboxsdk__moles_in_use .aDi {\n  left: auto !important;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__drawers_in_use .aDi,\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__moles_in_use .aDi {\n  position: static;\n}\n\n/* Make it so the compose/mole layer doesn't wrap, so we don't have to do a lot\n * of fancy logic to hide moles ourselves when things get too crowded. */\n.inboxsdk__moles_in_use .nH > .nH > .no {\n  white-space: nowrap;\n}\n.inboxsdk__moles_in_use .nH > .nH > .no > * {\n  white-space: initial;\n}\n.inboxsdk__moles_in_use .nH > .nH > .no > .nn {\n  display: inline-block;\n  float: none;\n}\n\n.inboxsdk__mole_view {\n  position: relative;\n  max-width: 564px;\n  height: 100vh;\n  vertical-align: top;\n  display: inline-flex;\n  display: -webkit-inline-flex;\n  align-items: flex-end;\n  -webkit-align-items: flex-end;\n}\n\n.inboxsdk__mole_view_inner {\n  visibility: visible;\n  box-sizing: border-box;\n  margin-right: 5px;\n  box-shadow: rgba(0, 0, 0, 0.2) 0 2px 6px;\n  min-width: 260px;\n  min-height: 36px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__mole_view_inner {\n  min-height: 40px;\n}\n\n.inboxsdk__mole_view_titlebar {\n  position: absolute;\n  left: 0;\n  right: 5px;\n  color: white;\n  font-size: 12.8px;\n  background: #404040;\n  box-sizing: border-box;\n  height: 36px;\n  padding-top: 7px;\n  padding-left: 11px;\n  cursor: pointer;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__mole_view_titlebar {\n  border-radius: 4px 4px 0 0;\n  height: 40px;\n  padding-top: 9px;\n}\n\n.inboxsdk__mole_view_titlebar h2 {\n  font-size: inherit;\n  font-weight: inherit;\n  margin: 4px 0 0 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.inboxsdk__mole_title_buttons {\n  white-space: nowrap;\n  float: right;\n  padding-right: 5px;\n  margin-top: -3px;\n}\n\n.inboxsdk__mole_title_buttons > img {\n  height: 24px;\n  width: 24px;\n  position: relative;\n  top: 2px;\n  opacity: 0.6;\n}\n\n.inboxsdk__mole_title_buttons > img:hover {\n  opacity: 1;\n  background-color: #737373;\n}\n\n.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content,\n.inboxsdk__mole_view.inboxsdk__minimized.inboxsdk__mole_use_minimize_title\n  h2.inboxsdk__mole_default,\n.inboxsdk__mole_view:not(.inboxsdk__minimized) h2.inboxsdk__mole_minimized,\n.inboxsdk__mole_view:not(.inboxsdk__mole_use_minimize_title)\n  h2.inboxsdk__mole_minimized,\n.inboxsdk__mole_view.inboxsdk__minimized .Hl,\n.inboxsdk__mole_view:not(.inboxsdk__minimized) .Hk {\n  display: none;\n}\n\n.inboxsdk__mole_view_content {\n  margin-top: 36px;\n  border: 1px solid #cfcfcf;\n  background: white;\n  min-width: 260px;\n  min-height: 20px;\n  max-height: 80vh;\n}\n\n.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_inner {\n  min-width: 0px;\n}\n\n.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_content {\n  margin-top: 0px;\n  min-width: 0px;\n}\n\n/* end mole */\n\n/* tabs */\n\n.inboxsdk__tab {\n  width: 30px;\n}\n\n.inboxsdk__tab.IDMAP_hideTitleBar:first-child:last-child {\n  display: none;\n}\n\n.inboxsdk__tab.inboxsdk__tab_selected {\n  width: auto;\n}\n\ntable.aKk .inboxsdk__contentTabContainer .inboxsdk__tab .aAy[role='tab'] {\n  height: 28px;\n}\n\n.inboxsdk__tab_icon {\n  width: 30px;\n  height: 25px;\n  background-position-x: 5px;\n  background-position-y: 3px;\n  background-size: 16px;\n  bacgkround-repeat: no-repeat;\n}\n\n.inboxsdk__tab_icon img {\n  height: 16px;\n  width: 16px;\n  margin-left: 5px;\n  margin-top: 3px;\n}\n\n.inboxsdk__tab .aKx {\n  top: 4px;\n}\n\n.inboxsdk__sidebar div[role='complementary'] {\n  position: static !important;\n}\n\n/* Fix issue where sidebar causes threadview to be taller than it should */\n.inboxsdk__sidebar > div.y4,\n.IDMAP_app_sidebar_in_use > div.y4 {\n  display: none;\n}\n\ntable.aKk\n  .inboxsdk__contentTabContainer\n  .inboxsdk__tab:first-child\n  .aAy[role='tab'] {\n  border-left-width: 1px;\n}\n\n/* end tabs */\n\n/* old sidebar */\n\n.inboxsdk__sidebar .inboxsdk__contentPanelContainer {\n  font: 12px Arial, sans-serif;\n  max-width: 220px;\n}\n\n.inboxsdk__contentPanelContainer_contentContainer {\n  overflow: hidden;\n  margin-bottom: 10px;\n  border-bottom: 1px solid #d8d8d8;\n}\n\n/* end old sidebar */\n\n/* sidebar */\n\nbody.inboxsdk__hasTopMessageBar .bq9 {\n  top: var(--inboxsdk__topMessageBar-height);\n}\n\n.IDMAP_app_sidebar_in_use > div[role='complementary'] {\n  position: static !important;\n  width: 216px !important;\n}\n\n.IDMAP_app_sidebar_in_use {\n  /* Necessary to prevent z-indexes on sidebar items from causing them to show\n  above stuff outside of the sidebar. */\n  will-change: position;\n}\n\n.IDMAP_app_sidebar_content_panel {\n  background: #ffffff;\n}\n\n.IDMAP_app_sidebar_content_area {\n  padding: 4px 0 12px;\n}\n\n.IDMAP_app_sidebar.IDMAP_hideTitleBar .IDMAP_app_sidebar_content_area {\n  padding-top: 0;\n}\n\n/* gmail addon support */\n\n.container_app_sidebar_in_use.no,\n.IDMAP_container_app_sidebar_no_icons.no {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  width: 100%;\n}\n\nbody[dir='rtl'] .container_app_sidebar_in_use.no[dir='ltr'],\nbody[dir='rtl'] .idm5_container_app_sidebar_no_icons.no[dir='ltr'] {\n  flex-direction: row-reverse;\n  -webkit-flex-direction: row-reverse;\n}\n\n/* overwrite margin right of the gmail page next/back and settings icon buttons\n   to line up properly */\n\n/* when no siebar is visible */\n.container_app_sidebar_in_use.no\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: -57px !important;\n}\n\n/* when addon sidebar visible */\n.container_addon_sidebar_visible.container_app_sidebar_in_use.no\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: -321px !important;\n}\n\n/* when sdk sidebar visible */\n.container_app_sidebar_visible.container_app_sidebar_in_use.no\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: -321px !important;\n}\n\n/* no sdk icons and no native addons */\n.IDMAP_container_app_sidebar_no_icons\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: 0px !important;\n}\n\n.container_app_sidebar_in_use .bkK.nn,\n.IDMAP_container_app_sidebar_no_icons .bkK.nn {\n  width: auto !important;\n  flex: 1;\n  -webkit-flex: 1;\n  min-width: 0px;\n}\n\n/* when removing addon icons */\n.IDMAP_container_app_sidebar_no_icons .bnl.nn {\n  z-index: -1;\n  position: absolute;\n}\n\n.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use {\n  min-width: 57px !important;\n  flex-shrink: 0;\n  -webkit-flex-shrink: 0;\n}\n\n.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use.app_sidebar_visible {\n  min-width: 321px !important;\n}\n\n.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use > .J-KU-Jg {\n  display: block !important;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use\n  .IDMAP_app_sidebar_container {\n  display: none;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use.app_sidebar_visible\n  .IDMAP_app_sidebar_container {\n  display: block;\n  float: left;\n  height: 100%;\n  border-left: 1px solid #e0e0e0;\n  padding-left: 16px;\n  width: calc(100% - 74px);\n  overflow: auto;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_container\n  .IDMAP_app_sidebar_content_area {\n  width: calc(100% - 16px);\n  padding-right: 16px;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use.app_sidebar_visible\n  .J-KU-Jz {\n  width: auto;\n  padding-right: 50px;\n}\n\n/* make the native addon loading+icon container (div.bvq) always visible */\nbody.inboxsdk__gmailv1css\n  .container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use\n  > div:first-child {\n  display: block !important;\n}\n\n/* hide the native addon loading div */\nbody.inboxsdk__gmailv1css\n  .container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use\n  > div:first-child\n  > div:first-child {\n  display: none !important;\n}\n\n/* remove extraneous left border from our clone of the addon loading div */\nbody.inboxsdk__gmailv1css\n  .IDMAP_app_sidebar_in_use\n  .inboxsdk__addon_icon_loading\n  > div {\n  border-left: none !important;\n}\n\nbody.inboxsdk__gmailv1css\n  .IDMAP_app_sidebar_in_use\n  .IDMAP_sidebar_iconArea\n  .IDMAP_sidebar_button_container:not(.sidebar_button_container_active) {\n  filter: grayscale(100%);\n  opacity: 0.6;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon {\n  margin: 18px 18px 10px 18px;\n  border: none;\n  background: #fff;\n  height: 20px;\n  width: 20px;\n  overflow: hidden;\n  padding: 0;\n  cursor: pointer;\n  position: relative;\n}\n\n.IDMAP_sidebar_iconArea.sidebar_global_iconArea .inboxsdk__button_icon {\n  margin-bottom: 18px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .IDMAP_sidebar_iconArea .inboxsdk__button_icon {\n  overflow: visible;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_icon::before,\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_sidebar_iconArea\n  .inboxsdk__button_icon:hover:before {\n  content: '';\n  background: #f1f3f4;\n  position: absolute;\n  top: -10px;\n  left: -10px;\n  right: -10px;\n  bottom: -10px;\n  border-radius: 50%;\n  z-index: 0;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_icon::before {\n  background: #e8eaed;\n}\n\nbody.inboxsdk__gmailv1css .IDMAP_sidebar_iconArea .inboxsdk__button_icon {\n  margin-bottom: 0px;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_iconImg {\n  width: 20px;\n  height: 20px;\n  margin-top: 0px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_sidebar_iconArea\n  .inboxsdk__button_icon\n  .inboxsdk__button_iconImg {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  z-index: 1;\n}\n\n.IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_selectedIndicator {\n  height: 40px;\n  width: 4px;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  background-color: rgb(66, 133, 244);\n  border-radius: 3px 0 0 3px;\n}\n\n.IDMAP_sidebar_iconArea.sidebar_global_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_selectedIndicator {\n  bottom: 8px;\n}\n\nbody.inboxsdk__gmailv1css\n  .IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_selectedIndicator {\n  height: 24px;\n  border-radius: 0px;\n}\n\nbody.inboxsdk__gmailv1css .IDMAP_sidebar_iconArea + div:before {\n  position: absolute;\n  content: '';\n  height: 1px;\n  background: #ddd;\n  width: 100%;\n  top: -8px;\n}\n\n/* end sidebar */\n\n/* material sidebar */\n.brC-brG.companion_app_sidebar_visible {\n  display: block !important;\n}\n\n.bq9:not(.brC-brG).companion_app_sidebar_wrapper_visible {\n  display: block !important;\n}\n\n.companion_global_app_sidebar_visible .thread_app_sidebar {\n  display: none;\n}\n\n.companion_app_sidebar_visible:not(.companion_global_app_sidebar_visible)\n  .global_app_sidebar {\n  display: none;\n}\n\n.nH.companion_container_app_sidebar_visible {\n  width: calc(100% - 300px) !important;\n}\n\n.companion_app_sidebar_visible .addon_sidebar ~ div:not(.addon_sidebar) {\n  display: none !important;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_app_sidebar_in_use\n  .IDMAP_app_sidebar_container.addon_sidebar {\n  height: 100%;\n  overflow: auto;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_app_sidebar_in_use\n  .IDMAP_app_sidebar_container.addon_sidebar\n  .IDMAP_app_sidebar_content_area {\n  width: 100%;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_app_sidebar_in_use:not(.companion_app_sidebar_visible)\n  .addon_sidebar {\n  display: none;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_app_sidebar_content_panel_title_icon_container {\n  margin-left: 0px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_app_sidebar_content_panel\n  .IDMAP_app_sidebar_content_panel_top_line {\n  padding: 0px 16px;\n}\n\n/* hide thread addon icons when in custom view */\nbody:not(.inboxsdk__gmailv1css).inboxsdk__custom_view_active\n  .brC-aT5-aOt-ato-Kp-Jw\n  [role='tablist']\n  > div:not(:last-child) {\n  display: none;\n}\n\n/* make the native addon icon container for thread add-ons (div.bvq) always visible */\nbody:not(.inboxsdk__gmailv1css) .IDMAP_app_sidebar_in_use .bvq,\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_app_sidebar_in_use\n  .bvq\n  > div:last-child {\n  display: block !important;\n}\n\n/* hide the native addon loading div */\nbody:not(.inboxsdk__gmailv1css)\n  .IDMAP_companion_container_app_sidebar_in_use\n  .bvq\n  > div:first-child {\n  display: none !important;\n}\n\n/* end material sidebar */\n\n/* custom content */\n\n.inboxsdk__custom_view_element {\n  overflow: auto;\n}\n\n/* end custom content */\n\n/* nav menu */\n\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) {\n  border-left-color: transparent;\n}\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .nU:not(.n1) .n0 {\n  font-weight: normal;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__hide_native_marker\n  .ain:not(.inboxsdk__navItem)\n  .nZ\n  .aio\n  * {\n  color: inherit !important;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__hide_native_marker\n  .ain:not(.inboxsdk__navItem)\n  .bsU {\n  font-weight: normal;\n}\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__hide_native_marker\n  .ain:not(.inboxsdk__navItem)\n  .TO {\n  background: none;\n}\n\n.inboxsdk__hide_addon_container {\n  display: flex !important;\n  display: -webkit-flex !important;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  width: 100% !important;\n}\n\nbody[dir='rtl'] .inboxsdk__hide_addon_container[dir='ltr'] {\n  flex-direction: row-reverse;\n  -webkit-flex-direction: row-reverse;\n}\n\n.inboxsdk__hide_addon_container > .bkK.nn {\n  width: auto !important;\n  flex: 1;\n  -webkit-flex: 1;\n  min-width: 0;\n}\n\n.inboxsdk__hide_addon_container > .bnl.nn {\n  display: none;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem {\n  font-size: 14px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO.n4 {\n  display: block;\n  padding-left: 0;\n}\n\n/* The qj class has \"margin-right: 24px\" by default, but we tweak that here so icons\n properly align with the Gmail label icons, which have 3px of of margin-left in the\n element inside their qj container. The one exception to this is for GROUPER type\n nav-items (which have the \"n4\" class) where we use Gmail css for the icon.\n */\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO:not(.n4) .qj {\n  margin-left: 3px;\n  margin-right: 21px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO.n4 .qj > .G-asx {\n  margin-right: 0;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO .bsU:empty {\n  display: none;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO .qj:empty::after {\n  content: '';\n  border: 8px solid;\n  border-radius: 50%;\n  border-color: rgb(118, 118, 118);\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__navItem\n  > .TO\n  .qj[style*='border-color']:empty::after {\n  border-color: inherit;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO:hover .pM {\n  display: flex;\n  display: -webkit-flex;\n  visibility: visible;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO .afM {\n  cursor: pointer;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO:hover .afM {\n  display: block;\n  visibility: visible;\n}\n\n/* This does slightly break from the native Gmail behavior, but we keep the dropdown button\n  visible while it has an active dropdown */\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO img.afM.afO {\n  display: block;\n  visibility: visible;\n}\n\n/* Keep the subtitle hidden while the dropdown is active */\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__navItem\n  > .TO\n  img.afM.afO\n  ~ .aio\n  > .bsU {\n  display: none;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO:hover .bsU {\n  display: none;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__navItem.inboxsdk__navItem_nonClickable\n  > .TO:active {\n  background-color: initial;\n}\n\n.inboxsdk__navItem_hover .aj0,\n.inboxsdk__navItem_hover .p8 {\n  visibility: visible;\n}\n\n.inboxsdk__gmailv1css .inboxsdk__navItem_link {\n  position: absolute;\n  top: 1px;\n  right: -4px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem_link {\n  cursor: pointer;\n  margin-left: auto;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem_link > a {\n  margin-left: 16px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem > .TO .inboxsdk__button {\n  margin-right: 0;\n}\n\n[dir='rtl'] .inboxsdk__navItem_link {\n  left: -4px;\n  right: initial;\n}\n\n.inboxsdk__navItem_container .aio .inboxsdk__button {\n  position: absolute;\n  top: 0px;\n  right: -30px;\n}\n\n.inboxsdk__navItem_marker {\n  position: absolute;\n  left: 0px;\n  padding-bottom: 2px;\n}\n\nbody.inboxsdk__gmailv1css .ain .inboxsdk__navItem_container {\n  margin-left: -18px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__navItem_container {\n  margin-left: -14px;\n}\n\n.inboxsdk__expando {\n  z-index: 1;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem_link > a,\n.aip .CK {\n  color: #15c;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__navItem_link > a:hover,\n.aip .CK:hover {\n  text-decoration: underline;\n}\n\n.inboxsdk__navItem_container .aio.aip {\n  white-space: nowrap;\n}\n\n/* end nav menu */\n\n/* search results section */\n\n.inboxsdk__custom_sections {\n  margin-bottom: 15px;\n}\n\n.inboxsdk__custom_sections.Wc {\n  padding: 0px;\n  margin-bottom: 0px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__custom_sections {\n  margin-bottom: 8px;\n}\n\n.inboxsdk__gmailv1css .inboxsdk__resultsSection {\n  padding-top: 20px;\n}\n\n.inboxsdk__resultsSection.inboxsdk__resultsSection_nonCollapsible\n  .inboxsdk__resultsSection_title\n  .Wp {\n  visibility: hidden;\n}\n\n.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection {\n  padding-top: 0px;\n}\n\n.inboxsdk__custom_sections .Wg {\n  padding-top: 0px;\n}\n\n.inboxsdk__custom_sections.Wc .Wg {\n  border-bottom: 0;\n  padding: 0px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__results_collapsedContainer > div {\n  display: inline;\n}\n\n/* lone collapsed SectionView in Gmailv1 */\n/* If only a single SectionView is collapsed then its dropdown button and titleTextLink are still shown */\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child {\n  display: block;\n  margin-right: 0;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child\n  > .inboxsdk__resultsSection_header\n  > .Cr {\n  display: block;\n}\n\n/* end lone collapsed SectionView in Gmailv1 */\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__results_collapsedContainer.Wg {\n  height: auto;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__results_collapsedContainer > div {\n  display: flex;\n  display: -webkit-flex;\n  flex-wrap: wrap;\n  -webkit-flex-wrap: wrap;\n  flex: 1 0 100%;\n  -webkit-flex: 1 0 100%;\n}\n\n/* lone collapsed SectionView in Gmailv2 */\n/* If only a single SectionView is collapsed then its dropdown button and titleTextLink are still shown */\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child {\n  flex: 1;\n  -webkit-flex: 1;\n  margin-right: 0;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child\n  > .inboxsdk__resultsSection_header {\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  flex: 1;\n  -webkit-flex: 1;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child\n  > .inboxsdk__resultsSection_header\n  > .Cr {\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  margin-left: auto;\n}\n\n/* end lone collapsed SectionView in Gmailv2 */\n\n.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {\n  display: inline-block;\n  margin-right: 20px;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {\n  display: inline-flex;\n}\n\n.Wc .inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {\n  margin-right: 0px;\n}\n\n.inboxsdk__resultsSection_collapsed .Cr {\n  display: none;\n}\n\n.inboxsdk__resultsSection_title {\n  white-space: nowrap;\n  cursor: pointer;\n  display: inline-block;\n}\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__resultsSection_title {\n  display: flex;\n  align-items: center;\n  height: 48px;\n}\n\n.Wc .inboxsdk__resultsSection_title {\n  padding: 3px 0 3px 8px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__resultsSection_title_subtitle {\n  opacity: 0.5;\n  margin-left: 5px;\n}\n\nbody.inboxsdk__gmailv1css .Wc .inboxsdk__resultsSection_title_subtitle {\n  font-size: 80%;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__resultsSection_header {\n  min-height: 48px;\n  line-height: 48px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__resultsSection_header > .Cr > .J-J5-Ji {\n  padding-top: 3px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__resultsSection_title .Wp {\n  float: left;\n  height: 10px;\n  width: 20px;\n  margin-top: 3px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__resultsSection_title h3 {\n  margin-bottom: 10px;\n  margin-top: 20px;\n  display: inline;\n  float: none;\n}\n\n.inboxsdk__resultsSection_header_summaryText.Wm:last-child .amH {\n  padding-right: 0px;\n  margin-right: 0px;\n}\n\n.inboxsdk__custom_sections.Wc\n  .inboxsdk__resultsSection_header_summaryText:last-child {\n  margin-right: 11px;\n}\n\n.inboxsdk__custom_sections.Wc .J-JN-M-I {\n  margin-right: 13px;\n}\n\n.inboxsdk__resultsSection .TB.TC {\n  text-align: center;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_loading {\n  font-style: italic;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_result_icon {\n  height: 15px;\n  width: 15px;\n}\n\n.inboxsdk__resultsSection_label_iconHtml,\n.inboxsdk__resultsSection_result_iconHtml {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__resultsSection\n  .inboxsdk__resultsSection_tableRow.zA:hover\n  > .xW {\n  /* Gmailv2 tries to hide the \"xW\" element when a \"zA\" element is hovered. This prevent that. */\n  display: flex;\n}\n\nbody:not(.inboxsdk__gmailv1css)\n  .inboxsdk__resultsSection\n  .inboxsdk__resultsSection_tableRow.zA\n  > .xW {\n  max-width: none;\n  flex-basis: auto;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow .xT {\n  align-items: center;\n  -webkit-align-items: center;\n}\n\n.inboxsdk__resultsSection .xX {\n  width: 20ex;\n}\n\n.inboxsdk__resultsSection_result_title span {\n  text-overflow: ellipsis;\n  display: block;\n  overflow: hidden;\n}\n\n.inboxsdk__resultsSection tr .xW > span {\n  overflow: hidden;\n  display: block;\n  text-overflow: ellipsis;\n}\n\n.inboxsdk__resultsSection .V3 {\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.inboxsdk__resultsSection .at {\n  position: relative;\n}\n\n.inboxsdk__thread_row_label {\n  flex-shrink: 0;\n  align-self: center;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__thread_row_label {\n  align-self: flex-end;\n}\n\n/* label in vertical preview pane */\nbody:not(.inboxsdk__gmailv1css) .apv .inboxsdk__thread_row_label {\n  align-self: flex-start;\n}\n\n.inboxsdk__resultsSection_label_icon {\n  height: 11px;\n  width: 11px;\n  position: absolute;\n  top: 2px;\n  margin-left: 4px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__resultsSection_label_icon {\n  margin-top: 1px;\n}\n\n.inboxsdk__resultsSection .av,\n.inboxsdk__thread_row_label .av {\n  /* max-width is set inline, default is 90px */\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.inboxsdk__resultsSection_label_icon + .av,\n.inboxsdk__thread_row_label .inboxsdk__button_icon + .av {\n  margin-left: 16px;\n}\n\n.Wc .inboxsdk__resultsSection_footer {\n  padding: 3px 3px 3px 8px;\n}\n\n/* end search results section */\n\n/* tooltip */\n\n/* gmail styles */\n\n.inboxsdk__tooltip .T-P {\n  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  background-color: #fff;\n  border: 1px solid;\n  border-color: #bbb #bbb #a8a8a8;\n  padding: 16px;\n  position: absolute;\n  z-index: 1201 !important;\n}\n\n.inboxsdk__tooltip.inboxdk__tooltip_content .T-P {\n  padding: 0px;\n}\n\n.inboxsdk__tooltip .aRM {\n  outline: none;\n  padding: 13px 10px 16px;\n  text-align: center;\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n}\n\n.inboxdk__tooltip_content.inboxsdk__tooltip .aRM {\n  padding: 0px;\n}\n\n.inboxsdk__tooltip .aRR {\n  color: #333;\n  font-size: 18px;\n  margin-top: 13px;\n}\n\n.inboxsdk__tooltip .aRQ {\n  color: #777;\n  font-size: 13px;\n  margin: 3px 0 14px 0;\n}\n\n/* end gmail styles */\n\n.inboxsdk__tooltip {\n  position: fixed;\n  z-index: 1300;\n  transition: left 200ms ease, top 200ms ease;\n}\n\n.inboxsdk__tooltip .T-P {\n  position: relative;\n  width: auto;\n  max-width: 500px;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_arrow {\n  position: fixed;\n  z-index: 1400;\n  margin-top: -1px;\n  transition: left 200ms ease, top 200ms ease;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_close {\n  -webkit-user-select: none;\n}\n\n.inboxsdk__tooltip .inboxsdk__button {\n  margin-right: 0px;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_image {\n  max-height: 300px;\n  max-width: 500px;\n  overflow: hidden;\n  height: auto;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_image > img {\n  max-height: 300px;\n  max-width: 500px;\n}\n\n/* end tooltip */\n\n/* attachment card */\n\n.inboxsdk__attachmentCard img.aQG.aYB {\n  max-width: 178px;\n  min-width: 178px;\n  min-height: 118px;\n}\n\n.inboxsdk__attachmentCard img.aZG.aYw {\n  background: none;\n}\n\n/* add some margins between cards so 4+ cards don't hit each other */\n\n.aQw > .T-I.J-J5-Ji.L3 {\n  margin-top: 5px;\n}\n\n/* end attachment card */\n\n/* keyboard shortcut help */\n\ntable.cf.wd.inboxsdk__shortcutHelp_table {\n  margin-bottom: 15px;\n}\n\n.inboxsdk__shortcutHelp_table td.Dn {\n  display: inline-block;\n  width: 50%;\n}\n\n.inboxsdk__shortcutHelp_table table.cf {\n  display: block;\n}\n\n.inboxsdk__shortcutHelp_table tbody tbody {\n  display: block;\n}\n\n.inboxsdk__shortcutHelp_table tbody tbody tr {\n  display: block;\n  white-space: nowrap;\n}\n\n.inboxsdk__shortcutHelp_table td.wg.Dn {\n  display: inline-block;\n  width: 45%;\n}\n\n.inboxsdk__shortcutHelp_table span.wb {\n  margin-left: 3px;\n}\n\n.inboxsdk__shortcutHelp_table td.we.Dn {\n  width: 60%;\n  white-space: normal;\n}\n\n.inboxsdk__shortcutHelp_title img.inboxsdk__icon {\n  height: 21px;\n  width: 21px;\n  vertical-align: middle;\n  margin-right: 10px;\n  border-radius: 4px;\n}\n\n/* end keyboard shortcut help */\n\n/* search suggestions */\n\n.asor.inboxsdk__custom_suggestion {\n  display: flex;\n  display: -webkit-flex;\n  justify-content: center;\n  -webkit-justify-content: center;\n  align-items: center;\n  -webkit-align-items: center;\n}\n\n.inboxsdk__custom_suggestion img {\n  max-width: 32px;\n  max-height: 32px;\n}\n\n.inboxsdk__custom_suggestion_iconHTML {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  left: 8px;\n  height: 32px;\n  width: 43px;\n}\n\n/* Adjust positioning when no description present */\n.gstq_d .inboxsdk__custom_suggestion_iconHTML {\n  margin-top: -8px;\n}\n\n/* end send suggestions */\n\n/* app toolbar */\n\n.inboxsdk__gmailv1css .inboxsdk__appButton {\n  margin-right: -15px;\n}\n\n.inboxsdk__gmailv1css .inboxsdk__appButton:first-child {\n  margin-left: -45px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__appButton {\n  margin-right: 8px;\n}\n\n.inboxsdk__gmailv1css .inboxsdk__appButton + .inboxsdk__appButton {\n  margin-left: 35px;\n}\n\nbody:not(.inboxsdk__gmailv1css) .inboxsdk__appButton + .inboxsdk__appButton {\n  margin-left: 16px;\n}\n\n.inboxsdk__appButton.inboxsdk__appButton_noGPlus {\n  margin-right: 0px;\n}\n\n.inboxsdk__appButton .inboxsdk__button_icon {\n  margin-right: 5px;\n  position: relative;\n}\n\n.inboxsdk__appButton a {\n  color: #404040;\n  text-decoration: none;\n  line-height: 24px;\n}\n\n.inboxsdk__appButton.inboxsdk__appButton_noGPlus a {\n  line-height: 30px;\n}\n\n.inboxsdk__appButton a:hover {\n  text-decoration: underline;\n  color: #000;\n}\n\n.inboxsdk__gmail_dark_theme .inboxsdk__appButton a {\n  color: #eee;\n}\n.inboxsdk__gmail_dark_theme .inboxsdk__appButton a:hover {\n  color: #fff;\n}\n\n.inboxsdk__appButton_tooltip {\n  outline: none;\n  transition: none;\n  -webkit-animation: gb__a 0.2s;\n}\n\n.inboxsdk__appButton_tooltip .inboxsdk__tooltip_close {\n  display: none;\n}\n\n.inboxsdk__tooltip.inboxsdk__appButton_tooltip .T-P {\n  padding: 0px;\n}\n\n.inboxsdk__tooltip.inboxsdk__appButton_tooltip .aRM {\n  padding: 0px;\n  white-space: initial;\n  text-align: center;\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n}\n\n.inboxsdk__tooltip.inboxsdk__appButton_tooltip .inboxsdk__tooltip_arrow {\n  transform-origin: top;\n  transform: rotateZ(180deg);\n  margin-top: 9px;\n}\n\n/* resize based on width */\n\n.inboxsdk__searchIsNarrow .streak__appToolbarButton_title {\n  display: none;\n}\n\n/* end resize based on width */\n\n/* end app toolbar */\n\n/* custom message views */\n\n.inboxsdk__custom_message_view {\n  display: flex;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border-top: 1px solid #efefef;\n  border-collapse: collapse;\n}\n\n.inboxsdk__custom_message_view_hidden {\n  display: none;\n}\n\n/* when cusotm message is right after the last message with its reply */\n.h7.ie + .inboxsdk__custom_message_view {\n  margin-top: 5px;\n}\n\n/* when custom message is after the super collapsed message elements */\n.kQ + .inboxsdk__custom_message_view,\n.kx + .inboxsdk__custom_message_view {\n  margin-top: 1px;\n}\n\n.inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed {\n  cursor: pointer;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon {\n  padding-left: 16px;\n  padding-right: 16px;\n  flex-shrink: 0;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon img {\n  height: 32px;\n  width: 32px;\n  border-radius: 50%;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_content {\n  width: 100%;\n  min-width: 0px;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_header {\n  cursor: pointer;\n}\n\n.inboxsdk__custom_message_view_app_notice_content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  z-index: 1;\n}\n\n.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container {\n  position: relative;\n  width: auto !important;\n  min-width: 32px;\n}\n\n.inboxsdk__custom_message_view_app_notice_content {\n  align-items: center;\n  display: flex;\n  font-size: 0.75rem !important;\n  justify-content: flex-start;\n  margin-left: 0;\n  padding: 0px;\n  top: 0;\n}\n\n.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container:hover::before {\n  content: none !important;\n}\n\n.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container\n  > span:first-child {\n  display: none;\n}\n\n.inboxsdk__custom_message_view_app_notice_container::before {\n  position: absolute;\n}\n\n.inboxsdk__custom_message_view_app_notice_content > * {\n  color: #555;\n}\n\ntable[role='presentation'].inboxsdk__thread_view_with_custom_view {\n  table-layout: fixed;\n}\n\ntable[role='presentation'].inboxsdk__thread_view_with_custom_view > tr {\n  display: block;\n}\n\n/* compact density setting */\n\nbody.inboxsdk__gmailv1css.inboxsdk__gmail_density_compact\n  .inboxsdk__custom_message_view\n  .inboxsdk__custom_message_view_icon\n  img {\n  height: 24px;\n  width: 24px;\n}\n\nbody.inboxsdk__gmailv1css.inboxsdk__gmail_density_compact\n  .inboxsdk__custom_message_view {\n  padding-top: 6px;\n}\n\nbody.inboxsdk__gmailv1css.inboxsdk__gmail_density_compact\n  .inboxsdk__custom_message_view\n  .inboxsdk__custom_message_view_icon {\n  padding-left: 5px;\n  padding-right: 7px;\n}\n\nbody.inboxsdk__gmailv1css.inboxsdk__gmail_density_compact\n  .inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed {\n  padding-bottom: 2px;\n}\n\nbody.inboxsdk__gmailv1css.inboxsdk__gmail_density_compact\n  .inboxsdk__custom_message_view\n  .inboxsdk__custom_message_view_content {\n  padding-top: 4px;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__custom_message_view {\n  padding-top: 12px;\n  padding-bottom: 12px;\n  border-top-color: rgb(216, 216, 216);\n}\n\n/* end compact density setting */\n\n/* gmail v1 specific ui */\n\nbody.inboxsdk__gmailv1css .inboxsdk__custom_message_view_app_notice_content > *,\nbody.inboxsdk__gmailv1css\n  .inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed {\n  background-color: rgb(245, 245, 245);\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__custom_message_view\n  .inboxsdk__custom_message_view_icon {\n  padding-left: 8px;\n  padding-right: 12px;\n}\n\nbody.inboxsdk__gmailv1css\n  .inboxsdk__custom_message_view\n  .inboxsdk__custom_message_view_icon\n  img {\n  border-radius: 0%;\n}\n\n/* end v1 specific ui */\n\n/* end custom message views */\n\n/* butter/snack bar */\n\nbody.inboxsdk__gmailv1css .inboxsdk__butterbar div[role='button'].bBe {\n  display: none;\n}\n\nbody.inboxsdk__gmailv1css .inboxsdk__butterbar .a8k {\n  margin-left: 8px;\n}\n\n.inboxsdk__butterbar.inboxsdk__butterbar_error {\n  background-color: #c53929 !important;\n}\n\n.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button'] {\n  color: #fff;\n}\n\n.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button']::before {\n  background: #fff;\n}\n\n/* end butter/snack bar */\n")
},{"../../lib/rewriteCssWithIdMap":848,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"ud-kefir":596}],624:[function(e,t,r){"use strict";function n(e,t,r){t.style.display="",e.style.top="-10000px",e.style.position="relative",e.classList.remove("bAp"),r.style.display="none",r.removeAttribute("data-inboxsdk-id")}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/date/now")),a=i(e("@babel/runtime-corejs2/core-js/json/stringify")),s=i(e("@babel/runtime-corejs2/helpers/slicedToArray")),l=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=i(e("@babel/runtime-corejs2/helpers/createClass")),c=i(e("kefir")),d=i(e("../../lib/stream-wait-for")),f=i(e("../../lib/dom/querySelectorOrFail")),p=i(e("../../lib/dom/make-mutation-observer-chunked-stream")),h=(0,d.default)(function(){return document.body.querySelector('div.b8[role="alert"]')}).map(function(e){var t=(0,f.default)(e,".vh:not(.inboxsdk__butterbar)"),r=e.querySelector(".vh.inboxsdk__butterbar");if(!r){r=document.createElement("div"),r.classList.add("vh","inboxsdk__butterbar"),r.style.display="none";var n=document.createElement("span");n.classList.add("aT");var i=document.createElement("span");i.classList.add("inboxsdk__butterbar-text","bAq");var o=document.createElement("span");o.classList.add("inboxsdk__butterbar-buttons","bAo"),o.innerHTML="&nbsp;&nbsp;";var a=document.createElement("div");a.classList.add("inboxsdk__butterbar-close","bBe"),a.innerHTML='<div class="bBf"></div>',a.setAttribute("role","button"),a.tabIndex=0,n.appendChild(i),n.appendChild(o),r.appendChild(n),r.appendChild(a);var s=t.parentNode;if(!s)throw new Error("parentNode not found");s.insertBefore(r,t.nextSibling)}return{noticeContainer:e,googleNotice:t,sdkNotice:r}}).toProperty(),m=h.flatMapLatest(function(e){var t=e.googleNotice;return(0,p.default)(t,{childList:!0})}),b=m.filter(function(e){return e.some(function(e){return e.addedNodes.length>0})}),_=m.filter(function(e){return!e.some(function(e){return e.addedNodes.length>0})}),v=h.flatMapLatest(function(e){var t=e.sdkNotice;return(0,p.default)(t,{attributes:!0,attributeFilter:["data-inboxsdk-id"]}).map(function(){return t.getAttribute("data-inboxsdk-id")})}).filter(function(e){return null==e}),g=c.default.merge([_,v]),y=function(){function e(){(0,l.default)(this,e),c.default.combine([h,b]).onValue(function(e){var t=(0,s.default)(e,1),r=t[0],n=r.googleNotice,i=r.sdkNotice;n.style.display="",i.style.display="none",i.setAttribute("data-inboxsdk-id","gmail")}),g.onValue(function(){})}return(0,u.default)(e,[{key:"getNoticeAvailableStream",value:function(){return g}},{key:"getSharedMessageQueue",value:function(){var e=document.head.getAttribute("data-inboxsdk-butterbar-queue");return e?JSON.parse(e):[]}},{key:"setSharedMessageQueue",value:function(e){var t=(0,a.default)(e);document.head.setAttribute("data-inboxsdk-butterbar-queue",t)}},{key:"showMessage",value:function(e){var t=(0,o.default)()+"-"+Math.random(),r=function(){h.take(1).onValue(function(r){var i=r.noticeContainer,o=r.googleNotice,a=r.sdkNotice;a.getAttribute("data-inboxsdk-id")===t&&(e.className&&a.classList.remove(e.className),n(i,o,a))})};return h.take(1).onValue(function(n){var i=n.noticeContainer,o=n.googleNotice,a=n.sdkNotice;i.style.visibility="visible",i.style.top="",i.classList.add("bAp"),o.style.display="none",a.className=o.className,a.classList.add("inboxsdk__butterbar");for(var s=(0,f.default)(a,".inboxsdk__butterbar-text");s.firstChild;)s.removeChild(s.firstChild);for(var l=(0,f.default)(a,".inboxsdk__butterbar-buttons");l.firstChild;)l.removeChild(l.firstChild);e.html?s.innerHTML=e.html:e.el?s.appendChild(e.el):s.textContent=e.text,e.buttons&&e.buttons.forEach(function(e){var t=document.createElement("span");t.classList.add("ag","a8k"),t.onclick=function(t){return e.onClick(t)},t.setAttribute("role","button"),t.tabIndex=0,t.textContent=e.title,l.appendChild(t)});var u=(0,f.default)(a,".inboxsdk__butterbar-close");u&&c.default.fromEvents(u,"click").take(1).onValue(r),e.className&&a.classList.add(e.className),a.style.display="",a.setAttribute("data-inboxsdk-id",t)}),{destroy:r}}},{key:"hideGmailMessage",value:function(){h.take(1).onValue(function(e){var t=e.noticeContainer,r=e.googleNotice,i=e.sdkNotice;"gmail"===i.getAttribute("data-inboxsdk-id")&&n(t,r,i)})}}]),e}();r.default=y},{"../../lib/dom/make-mutation-observer-chunked-stream":815,"../../lib/dom/querySelectorOrFail":821,"../../lib/stream-wait-for":853,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/slicedToArray":54,kefir:301}],625:[function(e,t,r){(function(n){"use strict";var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/regenerator")),a=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),s=i(e("@babel/runtime-corejs2/core-js/array/from")),l=i(e("@babel/runtime-corejs2/helpers/objectSpread")),u=i(e("@babel/runtime-corejs2/core-js/date/now")),c=i(e("@babel/runtime-corejs2/core-js/map")),d=i(e("@babel/runtime-corejs2/core-js/set")),f=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),p=i(e("@babel/runtime-corejs2/helpers/createClass")),h=i(e("@babel/runtime-corejs2/helpers/defineProperty")),m=i(e("live-set/toValueObservable")),b=e("ud"),_=i(e("transducers.js")),v=i(e("kefir")),g=i(e("kefir-stopper")),y=i(e("kefir-bus")),w=(i(e("asap")),i(e("lodash/includes"))),k=i(e("../../../common/get-or-fail")),j=i(e("./gmail-driver/show-app-id-warning")),x=i(e("./gmail-element-getter")),E=i(e("./make-xhr-interceptor")),S=i(e("./views/gmail-backdrop")),C=e("./views/gmail-thread-row-view"),I=i(e("./widgets/gmail-top-message-bar-driver")),T=i(e("./widgets/gmail-modal-view-driver")),A=i(e("./widgets/gmail-mole-view-driver")),D=i(e("../inbox/views/inbox-drawer-view")),M=i(e("./views/gmail-route-view/gmail-route-processor")),R=i(e("./gmail-driver/keyboard-shortcut-help-modifier")),L=i(e("./gmail-driver/open-draft-by-message-id")),O=i(e("./gmail-driver/user-info")),P=i(e("./gmail-butter-bar-driver")),V=i(e("./gmail-driver/track-gmail-styles")),N=i(e("./gmail-driver/temporary-track-download-url-validity")),B=i(e("../../driver-common/getGmailThreadIdForRfcMessageId")),q=i(e("./gmail-driver/get-rfc-message-id-for-gmail-thread-id")),U=i(e("../../driver-common/getGmailMessageIdForSyncMessageId")),F=i(e("bimapcache")),H=i(e("./gmail-driver/get-draft-id-for-message-id")),z=i(e("./gmail-driver/add-nav-item")),W=i(e("./gmail-driver/goto-view")),G=i(e("./gmail-driver/show-custom-thread-list")),K=i(e("./gmail-driver/show-custom-route-view")),$=i(e("./gmail-driver/show-native-route-view")),J=i(e("./gmail-driver/register-search-suggestions-provider")),Y=i(e("./gmail-driver/setup-compose-view-driver-stream")),Q=i(e("./gmail-driver/track-events")),X=i(e("./gmail-driver/gmail-load-event")),Z=i(e("./gmail-driver/thread-row-identifier")),ee=i(e("./custom-style")),te=i(e("./gmail-driver/override-gmail-back-button")),re=i(e("./gmail-driver/add-toolbar-button-for-app")),ne=i(e("./gmail-driver/setup-route-view-driver-stream")),ie=i(e("./gmail-driver/get-native-nav-item")),oe=i(e("./gmail-driver/create-link")),ae=i(e("./gmail-driver/register-search-query-rewriter")),se=i(e("./gmail-driver/open-compose-window")),le=i(e("./views/gmail-app-sidebar-view")),ue=i(e("./gmail-driver/suppressAddon")),ce=i(e("./gmail-driver/getSyncThreadFromSyncThreadId")),de=i(e("./gmail-driver/getSyncThreadForOldGmailThreadId")),fe=i(e("../../lib/toItemWithLifetimeStream")),pe=i(e("../../lib/toLiveSet")),he=i(e("../../lib/stream-wait-for")),me=function(){function e(t,r,n,i,o,a){var s=this;(0,f.default)(this,e),(0,h.default)(this,"_appId",void 0),(0,h.default)(this,"_logger",void 0),(0,h.default)(this,"_opts",void 0),(0,h.default)(this,"_envData",void 0),(0,h.default)(this,"_customRouteIDs",new d.default),(0,h.default)(this,"_customListRouteIDs",new c.default),(0,h.default)(this,"_customListSearchStringsToRouteIds",new c.default),(0,h.default)(this,"_messageIDsToThreadIDs",new c.default),(0,h.default)(this,"_threadRowIdentifier",void 0),(0,h.default)(this,"_gmailRouteProcessor",void 0),(0,h.default)(this,"_keyboardShortcutHelpModifier",void 0),(0,h.default)(this,"onready",void 0),(0,h.default)(this,"_pageCommunicator",void 0),(0,h.default)(this,"_pageCommunicatorPromise",void 0),(0,h.default)(this,"_butterBar",void 0),(0,h.default)(this,"_butterBarDriver",void 0),(0,h.default)(this,"_routeViewDriverStream",void 0),(0,h.default)(this,"_rowListViewDriverStream",void 0),(0,h.default)(this,"_threadRowViewDriverKefirStream",void 0),(0,h.default)(this,"_threadViewDriverLiveSet",void 0),(0,h.default)(this,"_toolbarViewDriverLiveSet",void 0),(0,h.default)(this,"_composeViewDriverStream",void 0),(0,h.default)(this,"_xhrInterceptorStream",void 0),(0,h.default)(this,"_messageViewDriverStream",void 0),(0,h.default)(this,"_stopper",(0,g.default)()),(0,h.default)(this,"_navMarkerHiddenChanged",(0,y.default)()),(0,h.default)(this,"_addonSidebarHiddenChanged",(0,y.default)()),(0,h.default)(this,"_userInfo",void 0),(0,h.default)(this,"_timestampAccountSwitcherReady",void 0),(0,h.default)(this,"_timestampGlobalsFound",void 0),(0,h.default)(this,"_timestampOnready",void 0),(0,h.default)(this,"_lastCustomThreadListActivity",void 0),(0,h.default)(this,"_currentRouteViewDriver",void 0),(0,h.default)(this,"_appSidebarView",null),(0,h.default)(this,"getGmailThreadIdForRfcMessageId",void 0),(0,h.default)(this,"getRfcMessageIdForGmailThreadId",void 0),(0,h.default)(this,"getSyncThreadIdForOldGmailThreadId",void 0),(0,h.default)(this,"getOldGmailThreadIdFromSyncThreadId",void 0),(0,h.default)(this,"removeCachedOldGmailThreadIdFromSyncThreadId",void 0),(0,h.default)(this,"getGmailMessageIdForSyncDraftId",void 0),(0,h.default)(this,"getGmailMessageIdForSyncMessageId",void 0),(0,h.default)(this,"removeCachedGmailMessageIdForSyncMessageId",void 0),(0,h.default)(this,"_recentSyncDraftIds",new c.default),(0,h.default)(this,"_selectedThreadRows",_.default.mapcat(function(e){return e.getSelectedThreadRowViewDrivers()})),(0,h.default)(this,"_threadRowViewSelectionChanges",(0,y.default)()),(0,ee.default)(),this._appId=t,this._logger=i,this._opts=o,this._envData=a;var l=new F.default({key:"inboxsdk__cached_thread_ids",getAfromB:function(e){return(0,q.default)(s,e)},getBfromA:function(e){return(0,B.default)(s,e)}});this.getGmailThreadIdForRfcMessageId=function(e){return l.getBfromA(e)},this.getRfcMessageIdForGmailThreadId=function(e){return l.getAfromB(e)};var u=new F.default({key:"inboxsdk__cached_sync_thread_id_old_gmail_thread_id",getAfromB:function(e){return(0,de.default)(s,e).then(function(e){return e.syncThreadID})},getBfromA:function(e){return(0,ce.default)(s,e).then(function(e){if(e)return e.oldGmailThreadID;throw new Error("syncThread not found")})}});this.getSyncThreadIdForOldGmailThreadId=function(e){return u.getAfromB(e)},this.getOldGmailThreadIdFromSyncThreadId=function(e){return u.getBfromA(e)},this.removeCachedOldGmailThreadIdFromSyncThreadId=function(e){return u.removeAfromCache(e)};try{localStorage.removeItem("inboxsdk__cached_gmail_and_inbox_message_ids_2")}catch(e){console.error(e)}var p=new F.default({key:"inboxsdk__cached_gmail_and_inbox_message_ids_3",getAfromB:function(e){return(0,U.default)(s,e)},getBfromA:function(){throw new Error("should not happen")}});this.getGmailMessageIdForSyncMessageId=function(e){return p.getAfromB(e)},this.removeCachedGmailMessageIdForSyncMessageId=function(e){return p.removeBfromCache(e)},this.getGmailMessageIdForSyncDraftId=function(e){return(0,U.default)(s,e)},this._gmailRouteProcessor=new M.default,this._keyboardShortcutHelpModifier=new R.default,this._butterBarDriver=new P.default,this._setupEventStreams(),this.onready.then(function(){(0,Q.default)(s),(0,X.default)(s),(0,te.default)(s,s._gmailRouteProcessor),(0,V.default)(),(0,N.default)(s),null!=o.suppressAddonTitle&&s.isUsingMaterialUI()&&(0,ue.default)(s,o.suppressAddonTitle)}).catch(function(e){s._logger.error(e)})}return(0,p.default)(e,[{key:"destroy",value:function(){this._threadRowViewSelectionChanges.end(),this._keyboardShortcutHelpModifier.destroy(),this._stopper.destroy(),(0,C.removeAllThreadRowUnclaimedModifications)()}},{key:"getAppId",value:function(){return this._appId}},{key:"getOpts",value:function(){return this._opts}},{key:"getPageCommunicator",value:function(){return this._pageCommunicator}},{key:"getPageCommunicatorPromise",value:function(){return this._pageCommunicatorPromise}},{key:"getLogger",value:function(){return this._logger}},{key:"getCustomListSearchStringsToRouteIds",value:function(){return this._customListSearchStringsToRouteIds}},{key:"getThreadRowIdentifier",value:function(){return this._threadRowIdentifier}},{key:"getButterBarDriver",value:function(){return this._butterBarDriver}},{key:"getButterBar",value:function(){return this._butterBar}},{key:"setButterBar",value:function(e){this._butterBar=e}},{key:"getCustomRouteIDs",value:function(){return this._customRouteIDs}},{key:"getCustomListRouteIDs",value:function(){return this._customListRouteIDs}},{key:"getKeyboardShortcutHelpModifier",value:function(){return this._keyboardShortcutHelpModifier}},{key:"getRouteViewDriverStream",value:function(){return this._routeViewDriverStream}},{key:"getRowListViewDriverStream",value:function(){return this._rowListViewDriverStream}},{key:"getThreadRowViewDriverStream",value:function(){return this._threadRowViewDriverKefirStream}},{key:"getThreadViewDriverStream",value:function(){return(0,fe.default)(this._threadViewDriverLiveSet).map(function(e){return e.el})}},{key:"getAttachmentCardViewDriverStream",value:function(){return this._messageViewDriverStream.flatMap(function(e){return e.isLoaded()?v.default.constant(e):e.getEventStream().filter(function(e){return"messageLoad"===e.eventName}).map(function(){return e}).take(1)}).map(function(e){return e.getAttachmentCardViewDrivers()}).flatten()}},{key:"getComposeViewDriverStream",value:function(){return this._composeViewDriverStream}},{key:"getXhrInterceptorStream",value:function(){return this._xhrInterceptorStream}},{key:"getMessageViewDriverStream",value:function(){return this._messageViewDriverStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEnvData",value:function(){return this._envData}},{key:"getTimestampOnReady",value:function(){return null==this._timestampOnready?(this._logger.error(new Error("getTimestampOnReady called before ready")),(0,u.default)()):this._timestampOnready}},{key:"delayToTimeAfterReady",value:function(e){var t=this.getTimestampOnReady()+e,r=Math.max(0,t-(0,u.default)());return v.default.later(r)}},{key:"getTimings",value:function(){return{piMainStarted:this._envData.piMainStarted,piLoadStarted:this._envData.piLoadStarted,globalsFound:this._timestampGlobalsFound,accountSwitcherReady:this._timestampAccountSwitcherReady,onready:this._timestampOnready}}},{key:"registerThreadButton",value:function(e){var t=(0,g.default)(),r=function(e){t.takeUntilBy(e.getStopper()).onValue(function(){e.destroy()})},n=(0,m.default)(this._toolbarViewDriverLiveSet).subscribe(function(t){var n=t.value;n.isForThread()?e.positions&&!(0,w.default)(e.positions,"THREAD")||r(n.addButton((0,l.default)({},e,{section:e.threadSection||"METADATA_STATE",onClick:function(t){e.onClick({position:"THREAD",dropdown:t.dropdown,selectedThreadViewDrivers:[n.getThreadViewDriver()],selectedThreadRowViewDrivers:[]})}}))):n.isForRowList()&&(e.positions&&!(0,w.default)(e.positions,"LIST")||r(n.addButton((0,l.default)({},e,{section:e.listSection||"METADATA_STATE",onClick:function(t){var r=(0,s.default)(n.getThreadRowViewDrivers()).filter(function(e){return e.isSelected()});e.onClick({position:"LIST",dropdown:t.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:r})}}))))});if(t.onValue(function(){n.unsubscribe()}),!e.positions||(0,w.default)(e.positions,"ROW")){var i=function(r){r.addButton(v.default.constant({hasDropdown:e.hasDropdown,iconClass:e.iconClass,iconUrl:e.iconUrl,orderHint:e.orderHint,onClick:function(t){e.onClick&&e.onClick({position:"ROW",dropdown:t.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:[r]})}}).merge(t))};this._currentRouteViewDriver&&this._currentRouteViewDriver.getRowListViews().forEach(function(e){e.getThreadRowViewDrivers().forEach(i)});var o=this._threadRowViewDriverKefirStream.observe({value:i});t.onValue(function(){o.unsubscribe()})}return function(){t.destroy()}}},{key:"hashChangeNoViewChange",value:function(e){if("#"!==e[0])throw new Error("bad hash");window.history.replaceState(null,null,e);var t=new window.HashChangeEvent("hashchange",{oldURL:document.location.href.replace(/#.*$/,"")+"#inboxsdk-fake-no-vc",newURL:document.location.href.replace(/#.*$/,"")+e});window.dispatchEvent(t)}},{key:"addCustomRouteID",value:function(e){var t=this;return this._customRouteIDs.add(e),this._pageCommunicator.registerAllowedHashLinkStartTerm(e.split("/")[0]),function(){t._customRouteIDs.delete(e)}}},{key:"addCustomListRouteID",value:function(e,t){var r=this;return this._customListRouteIDs.set(e,t),this._pageCommunicator.registerAllowedHashLinkStartTerm(e.split("/")[0]),function(){r._customListRouteIDs.delete(e)}}},{key:"signalCustomThreadListActivity",value:function(e){this._lastCustomThreadListActivity={customRouteID:e,timestamp:new Date}}},{key:"getLastCustomThreadListActivity",value:function(){return this._lastCustomThreadListActivity}},{key:"showCustomThreadList",value:function(e,t,r){(0,G.default)(this,e,t,r)}},{key:"showCustomRouteView",value:function(e){(0,K.default)(this,e)}},{key:"showNativeRouteView",value:function(){(0,$.default)(this)}},{key:"createLink",value:function(e,t){return(0,oe.default)(this._gmailRouteProcessor,e,t)}},{key:"goto",value:function(e,t){return(0,W.default)(this,e,t)}},{key:"resolveUrlRedirects",value:function(e){return this._pageCommunicatorPromise.then(function(t){return t.resolveUrlRedirects(e)})}},{key:"registerSearchSuggestionsProvider",value:function(e){(0,J.default)(this,e)}},{key:"registerSearchQueryRewriter",value:function(e){(0,ae.default)(this._pageCommunicator,e)}},{key:"addToolbarButtonForApp",value:function(e){return(0,re.default)(this,e)}},{key:"openNewComposeViewDriver",value:function(){function e(){return t.apply(this,arguments)}var t=(0,a.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.getNextComposeViewDriver(),e.next=4,(0,se.default)(this);case 4:return e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),this._logger.error(e.t0),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return e}()},{key:"getNextComposeViewDriver",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return this._composeViewDriverStream.merge(v.default.later(e,new Error("Reached timeout while waiting for getNextComposeViewDriver"))).beforeEnd(function(){return new Error("Driver was shut down before a new compose was found")}).flatMap(function(e){return e instanceof Error?v.default.constantError(e):v.default.constant(e)}).take(1).takeErrors(1).toPromise()}},{key:"openDraftByMessageID",value:function(e){(0,L.default)(this,e)}},{key:"createModalViewDriver",value:function(e){return new T.default(e)}},{key:"createMoleViewDriver",value:function(e){return new A.default(this,e)}},{key:"createDrawerViewDriver",value:function(e){return new D.default(e)}},{key:"createBackdrop",value:function(e,t){return new S.default(e,t)}},{key:"addNavItem",value:function(e,t){return(0,z.default)(this,e,t)}},{key:"getSentMailNativeNavItem",value:function(){var e=this,t=(0,ie.default)(this,"sent");return t.catch(function(t){return e._logger.error(t)}),t}},{key:"setShowNativeNavMarker",value:function(e){this._navMarkerHiddenChanged.emit(null);var t=x.default.getLeftNavContainerElement();t&&(e?t.classList.remove("inboxsdk__hide_native_marker"):(t.classList.add("inboxsdk__hide_native_marker"),this._stopper.takeUntilBy(this._navMarkerHiddenChanged).onValue(function(){t.classList.remove("inboxsdk__hide_native_marker")})))}},{key:"setShowNativeAddonSidebar",value:function(e){this._addonSidebarHiddenChanged.emit(null);var t=x.default.getAddonSidebarContainerElement(),r=x.default.getMainContentBodyContainerElement();if(t&&r){var n=r.parentElement;if(!n)return;e?n.classList.remove("inboxsdk__hide_addon_container"):(n.classList.add("inboxsdk__hide_addon_container"),this._stopper.takeUntilBy(this._addonSidebarHiddenChanged).onValue(function(){n.classList.remove("inboxsdk__hide_addon_container")}))}}},{key:"getGmailActionToken",value:function(){function e(){return t.apply(this,arguments)}var t=(0,a.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pageCommunicator.getActionTokenValue());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getUserEmailAddress",value:function(){return this._pageCommunicator.getUserEmailAddress()}},{key:"isConversationViewDisabled",value:function(){return this._pageCommunicator.isConversationViewDisabled()}},{key:"getUserLanguage",value:function(){return this._pageCommunicator.getUserLanguage()}},{key:"getUserContact",value:function(){return{emailAddress:this.getUserEmailAddress(),name:this._userInfo.getUserName()}}},{key:"getAccountSwitcherContactList",value:function(){return this._userInfo.getAccountSwitcherContactList()}},{key:"activateShortcut",value:function(e,t,r){var n=this;this.getKeyboardShortcutHelpModifier().set(e,this._appId,t,r),e.once("destroy",function(){n.getKeyboardShortcutHelpModifier().delete(e)})}},{key:"_setupEventStreams",value:function(){var e=this,t=(0,E.default)();this._xhrInterceptorStream=t.xhrInterceptStream.takeUntilBy(this._stopper),this._pageCommunicatorPromise=t.pageCommunicatorPromise,this.onready=this._pageCommunicatorPromise.then(function(t){return e._timestampGlobalsFound=(0,u.default)(),e._pageCommunicator=t,e._logger.setUserEmailAddress(e.getUserEmailAddress()),e._logger.setIsUsingSyncAPI(t.isUsingSyncAPI()),e._logger.setIsUsingMaterialGmailUI(x.default.isUsingMaterialUI()),e._userInfo=new O.default(e),e._userInfo.waitForAccountSwitcherReady()}).then(function(){e._timestampAccountSwitcherReady=(0,u.default)(),x.default.isUsingMaterialUI()||document.body.classList.add("inboxsdk__gmailv1css"),e._routeViewDriverStream=(0,ne.default)(e._gmailRouteProcessor,e).takeUntilBy(e._stopper).toProperty(),e._routeViewDriverStream.onValue(function(t){e._currentRouteViewDriver=t}),e._rowListViewDriverStream=e._setupRouteSubViewDriver("newGmailRowListView").takeUntilBy(e._stopper),e._setupThreadRowViewDriverKefirStream(),e._threadViewDriverLiveSet=(0,pe.default)(e._setupRouteSubViewDriver("newGmailThreadView").takeUntilBy(e._stopper).flatMap(function(e){return e.getReadyStream().map(function(){return e})}).map(function(e){return{el:e,removalStream:e.getStopper()}})),e._setupToolbarViewDriverStream(),e._setupMessageViewDriverStream(),e._setupComposeViewDriverStream(),e._threadRowIdentifier=new Z.default(e),e._timestampOnready=(0,u.default)()})}},{key:"_setupComposeViewDriverStream",value:function(){this._composeViewDriverStream=(0,Y.default)(this,this._messageViewDriverStream,this._xhrInterceptorStream).takeUntilBy(this._stopper)}},{key:"_setupRouteSubViewDriver",value:function(e){return this._routeViewDriverStream.flatMap(function(t){return t.getEventStream().filter(function(t){return t.eventName===e}).map(function(e){return e.view})})}},{key:"_setupThreadRowViewDriverKefirStream",value:function(){this._threadRowViewDriverKefirStream=this._rowListViewDriverStream.flatMap(function(e){return e.getRowViewDriverStream()}).takeUntilBy(this._stopper)}},{key:"_setupToolbarViewDriverStream",value:function(){this._toolbarViewDriverLiveSet=(0,pe.default)(v.default.merge([this._rowListViewDriverStream.map(function(e){return e.getToolbarView()}),this.getThreadViewDriverStream().map(function(e){return e.getToolbarView()})]).filter(Boolean).flatMap(function(e){return e.waitForReady()}).map(function(e){return{el:e,removalStream:e.getStopper()}}).takeUntilBy(this._stopper)),this._toolbarViewDriverLiveSet.subscribe({})}},{key:"_setupMessageViewDriverStream",value:function(){this._messageViewDriverStream=this.getThreadViewDriverStream().flatMap(function(e){return e.getMessageViewDriverStream()}).takeUntilBy(this._stopper)}},{key:"addGlobalSidebarContentPanel",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,a.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isUsingMaterialUI()){e.next=7;break}return e.next=3,this.waitForGlobalSidebarReady().merge(this._stopper.flatMap(function(){return v.default.constantError(new Error("Driver instance was destroyed early"))})).take(1).takeErrors(1).toPromise();case 3:return r=this.getGlobalSidebar(),e.abrupt("return",r.addGlobalSidebarContentPanel(t));case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"waitForGlobalSidebarReady",value:function(){if(!this.isUsingMaterialUI())throw new Error("Should not happen: waitForGlobalSidebarReady called in Gmail v1");var e=function(){return x.default.getCompanionSidebarContentContainerElement()&&(x.default.getCompanionSidebarIconContainerElement()||x.default.getAddonSidebarContainerElement())};return e()?v.default.constant(void 0):(0,he.default)(e).map(function(){})}},{key:"getGlobalSidebar",value:function(){var e=this._appSidebarView;if(!e){var t=x.default.getCompanionSidebarContentContainerElement();if(!t)throw new Error("did not find companionSidebarContentContainerEl");e=this._appSidebarView=new le.default(this,t)}return e}},{key:"isRunningInPageContext",value:function(){return!(!n.GLOBALS||!n._GM_main)}},{key:"isUsingMaterialUI",value:function(){return x.default.isUsingMaterialUI()}},{key:"isUsingSyncAPI",value:function(){return this._pageCommunicator.isUsingSyncAPI()}},{key:"showAppIdWarning",value:function(){(0,j.default)(this)}},{key:"createTopMessageBarDriver",value:function(e){return new I.default(e)}},{key:"associateThreadAndMessageIDs",value:function(e,t){this._messageIDsToThreadIDs.set(t,e)}},{key:"getThreadIDForMessageID",value:function(e){return(0,k.default)(this._messageIDsToThreadIDs,e)}},{key:"getDraftIDForMessageID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,H.default)(this,e,t)}},{key:"reportRecentSyncDraftId",value:function(e){var t,r=this._recentSyncDraftIds.get(e),n=(null!==(t=r)&&void 0!==t?t:0)+1;this._recentSyncDraftIds.set(e,n)}},{key:"reportDraftClosed",value:function(e){var t=this;v.default.later(3e4).takeUntilBy(this._stopper).onValue(function(){var r,n=t._recentSyncDraftIds.get(e);null==n||n<1?(r=0,t._logger.error(new Error("_recentSyncDraftIds count had unexpected value"),{count:n})):r=n-1,0===r?t._recentSyncDraftIds.delete(e):t._recentSyncDraftIds.set(e,r)})}},{key:"isRecentSyncDraftId",value:function(e){return this._recentSyncDraftIds.has(e)}},{key:"getSelectedThreadRowViewDrivers",value:function(){return this._currentRouteViewDriver?_.default.toArray(this._currentRouteViewDriver.getRowListViews(),this._selectedThreadRows):[]}},{key:"signalThreadRowViewSelectionChange",value:function(){this._threadRowViewSelectionChanges.value(void 0)}},{key:"registerThreadRowViewSelectionHandler",value:function(e){var t=this;return this._threadRowViewSelectionChanges.onValue(e),function(){t._threadRowViewSelectionChanges.offValue(e)}}}]),e}(),be=(0,b.defn)(t,me);r.default=be}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/get-or-fail":611,"../../driver-common/getGmailMessageIdForSyncMessageId":783,"../../driver-common/getGmailThreadIdForRfcMessageId":784,"../../lib/stream-wait-for":853,"../../lib/toItemWithLifetimeStream":854,"../../lib/toLiveSet":855,"../inbox/views/inbox-drawer-view":769,"./custom-style":623,"./gmail-butter-bar-driver":624,"./gmail-driver/add-nav-item":626,"./gmail-driver/add-toolbar-button-for-app":627,"./gmail-driver/create-link":628,"./gmail-driver/get-draft-id-for-message-id":629,"./gmail-driver/get-native-nav-item":630,"./gmail-driver/get-rfc-message-id-for-gmail-thread-id":631,"./gmail-driver/getSyncThreadForOldGmailThreadId":633,"./gmail-driver/getSyncThreadFromSyncThreadId":634,"./gmail-driver/gmail-load-event":635,"./gmail-driver/goto-view":636,"./gmail-driver/keyboard-shortcut-help-modifier":637,"./gmail-driver/open-compose-window":638,"./gmail-driver/open-draft-by-message-id":639,"./gmail-driver/override-gmail-back-button":640,"./gmail-driver/register-search-query-rewriter":641,"./gmail-driver/register-search-suggestions-provider":642,"./gmail-driver/setup-compose-view-driver-stream":643,"./gmail-driver/setup-route-view-driver-stream":644,"./gmail-driver/show-app-id-warning":645,"./gmail-driver/show-custom-route-view":646,"./gmail-driver/show-custom-thread-list":647,"./gmail-driver/show-native-route-view":648,"./gmail-driver/suppressAddon":649,"./gmail-driver/temporary-track-download-url-validity":650,"./gmail-driver/thread-row-identifier":651,"./gmail-driver/track-events":652,"./gmail-driver/track-gmail-styles":653,"./gmail-driver/user-info":654,"./gmail-element-getter":655,"./make-xhr-interceptor":661,"./views/gmail-app-sidebar-view":662,"./views/gmail-backdrop":671,"./views/gmail-route-view/gmail-route-processor":704,"./views/gmail-thread-row-view":707,"./widgets/gmail-modal-view-driver":724,"./widgets/gmail-mole-view-driver":725,"./widgets/gmail-top-message-bar-driver":727,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/regenerator":59,asap:77,bimapcache:93,kefir:301,"kefir-bus":298,"kefir-stopper":300,"live-set/toValueObservable":311,"lodash/includes":466,"transducers.js":595,ud:597}],626:[function(e,t,r){"use strict";function n(e,t,r){var n=new c.default(e,t,1),a=o(n);return u.default.isStandalone()||u.default.waitForGmailModeToSettle().then(i).then(function(){a(),n.getEventStream().filter(function(e){return"orderChanged"===e.eventName}).takeWhile(function(){return!!u.default.getNavItemMenuInjectionContainer()}).onValue(a)}).catch(function(e){return d.default.error(e)}),n.setNavItemDescriptor(r),n}function i(){return(0,f.default)(function(){return!!u.default.getNavItemMenuInjectionContainer()})}function o(e){return function(){(0,p.default)(a(),e.getElement())}}function a(){var e=document.querySelector(".inboxsdk__navMenu");return e?(0,m.default)(e,".TK"):s()}function s(){var e=document.createElement("div");e.setAttribute("class","LrBjie inboxsdk__navMenu"),e.innerHTML='<div class="TK"></div>';var t=u.default.getNavItemMenuInjectionContainer();if(!t)throw new Error("should not happen");return t.insertBefore(e,t.children[2]),(0,h.default)(e,{attributes:!0,attributeFilter:["class"]}).onValue(function(){
e.classList.contains("TA")&&e.classList.remove("TA")}),(0,m.default)(e,".TK")}var l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var u=(l(e("kefir")),l(e("../gmail-element-getter"))),c=l(e("../views/gmail-nav-item-view")),d=l(e("../../../lib/logger")),f=l(e("../../../lib/wait-for")),p=l(e("../../../lib/dom/insert-element-in-order")),h=l(e("../../../lib/dom/make-mutation-observer-stream")),m=l(e("../../../lib/dom/querySelectorOrFail"))},{"../../../lib/dom/insert-element-in-order":809,"../../../lib/dom/make-mutation-observer-stream":816,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/logger":843,"../../../lib/wait-for":856,"../gmail-element-getter":655,"../views/gmail-nav-item-view":703,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],627:[function(e,t,r){"use strict";function n(e,t){return a.default.waitForGmailModeToSettle().then(function(){return a.default.isStandalone()?new o.default(function(e,t){}):new s.default(e,t)})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/promise")),a=i(e("../gmail-element-getter")),s=i(e("../views/gmail-app-toolbar-button-view"))},{"../gmail-element-getter":655,"../views/gmail-app-toolbar-button-view":667,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],628:[function(e,t,r){"use strict";function n(e,t,r){if(r="string"==typeof r?r:r?(0,a.default)({},r):{},t=e.getCompatibleRouteID(t),"string"==typeof r){var n=t.match(/:/g);if(n&&1===n.length){var i=r;r={},r[t.match(/:(\w+)($|\/)?/)[1]]=i}else r={}}t.match(/:page(?:\/|$)/)&&!r.page&&(r.page=0);var u,c=t.split("/");try{u=(0,s.default)(t,r)}catch(e){l.default.error(e,{routeID:t,paramsKey:(0,o.default)(r)}),u=c.map(function(e){if(-1===e.indexOf(":"))return e;var t=e.split(":");return r&&void 0!==r[t[1]]?t[0]+r[t[1]]:t[0]}).map(encodeURIComponent).join("/")}return e.isListRouteName(c[0])&&u.indexOf("p0")===u.length-2&&(u=u.substring(0,u.length-3)),"#"+u}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/object/keys")),a=i(e("@babel/runtime-corejs2/core-js/object/assign")),s=i(e("../../../lib/populateRouteID")),l=i(e("../../../lib/logger"))},{"../../../lib/logger":843,"../../../lib/populateRouteID":846,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],629:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,l.default)(s.default.mark(function e(t,r){var n,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.default)({method:"GET",url:document.location.origin+document.location.pathname,data:{ui:"2",ik:t.getPageCommunicator().getIkValue(),view:"cv",th:r,prf:"1",nsc:"1",mb:"0",rt:"j",search:"drafts"}});case 2:return n=e.sent,e.prev=3,i=(0,f.readDraftId)(n.text,r),o={responseText:n.text},e.abrupt("return",{draftID:i,debugData:o});case 9:throw e.prev=9,e.t0=e.catch(3),(0,p.default)(t.getAppId())&&t.getLogger().error(e.t0,{message:"failed to read draft ID",messageID:r,text:n.text}),e.t0;case 13:case"end":return e.stop()}},e,null,[[3,9]])})),i.apply(this,arguments)}function o(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?n(e,t):h(e,t)}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=a(e("lodash/memoize")),c=e("ud"),d=a(e("../../../driver-common/gmailAjax")),f=e("../gmail-response-processor"),p=a(e("../../../lib/isStreakAppId")),h=(0,u.default)(n,function(e,t){return t}),m=(0,c.defn)(t,o);r.default=m},{"../../../driver-common/gmailAjax":789,"../../../lib/isStreakAppId":842,"../gmail-response-processor":659,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,"lodash/memoize":486,ud:597}],630:[function(e,t,r){"use strict";function n(e,t){return(0,u.default)(function(){var e=s.default.getLeftNavContainerElement();return e?e.querySelector('.aim a[href*="#'.concat(t,'"]')):null},3e5).then(function(r){var n=(0,l.default)(r,function(e){return e.classList.contains("aim")});if(!n)throw new Error("native nav item structured weird");return n.__nativeGmailNavItemView||(n.__nativeGmailNavItemView=new a.default(e,n,t)),n.__nativeGmailNavItemView}).catch(function(e){if(s.default.isStandalone())return new o.default(function(e,t){});throw e})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/promise")),a=i(e("../views/native-gmail-nav-item-view")),s=i(e("../gmail-element-getter")),l=i(e("../../../../common/find-parent")),u=i(e("../../../lib/wait-for"))},{"../../../../common/find-parent":609,"../../../lib/wait-for":856,"../gmail-element-getter":655,"../views/native-gmail-nav-item-view":713,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],631:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,u.default)(s.default.mark(function e(t,r){var n,i,o,a,u,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={ui:2,ik:t.getPageCommunicator().getIkValue(),view:"cv",th:r,nsc:1,mb:0,rt:"j",search:"all"},e.next=3,(0,d.default)({method:"POST",url:document.location.origin+document.location.pathname+"?"+h.default.stringify(n),canRetry:!0});case 3:if(i=e.sent,o=m.extractMessageIdsFromThreadBatchRequest(i.text),1===(0,l.default)(o).length){e.next=7;break}throw new Error("Expected to find 1 thread/message ID pair, but got ".concat((0,l.default)(o).length));case 7:if(a=o[r]){e.next=10;break}throw new Error("Could not find a message ID for given thread ID");case 10:return e.next=12,(0,f.default)(t,{oldGmailMessageID:a});case 12:if(u=e.sent,c=u.match(/^Message-ID:\s+(\S+)\s*$/im)){e.next=16;break}throw new Error("Failed to find rfc id for gmail thread id. Message may not exist in user's account.");case 16:return e.abrupt("return",(0,p.default)(c[1]));case 17:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/core-js/object/keys")),u=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=e("ud"),d=a(e("../../../driver-common/gmailAjax")),f=a(e("../../../driver-common/getOriginalMessagePage")),p=a(e("../../../../common/html-to-text")),h=a(e("querystring")),m=o(e("../gmail-response-processor")),b=(0,c.defn)(t,n);r.default=b},{"../../../../common/html-to-text":614,"../../../driver-common/getOriginalMessagePage":785,"../../../driver-common/gmailAjax":789,"../gmail-response-processor":659,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"@babel/runtime-corejs2/regenerator":59,querystring:549,ud:597}],632:[function(e,t,r){"use strict";function n(e){var t=e.match(/#([^?]*)(?:\?(.*))?/);if(!t)return{name:"inbox",params:[],hash:"",query:void 0};var r=t[1],n=r.split("/");return{name:decodeURIComponent(n[0]),params:n.slice(1).map(function(e){return e.replace(/\+/g," ")}).map(decodeURIComponent),query:t[2],hash:r}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],633:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,s.default)(a.default.mark(function e(t,r){var n,i,o,s,d,f;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.default)(t,"threadid:"+new l.default(r,16).toString(10));case 2:if(n=e.sent,i=n.threads,o=n._text,null!=(s=i[0])){e.next=12;break}throw console.error("Thread with ID ".concat(r," not found by Gmail")),d=(0,c.default)(t.getAppId()),f=new Error("Thread not found by getSyncThreadForOldGmailThreadId"),t.getLogger().error(f,{oldGmailThreadId:d?r:null,responseText:d?o:null}),f;case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=(e("ud"),o(e("bignumber.js"))),u=o(e("../../../driver-common/getSyncThreadsForSearch")),c=(o(e("../../../driver-common/gmailAjax")),o(e("../../../lib/isStreakAppId")));e("../gmail-sync-response-processor")},{"../../../driver-common/getSyncThreadsForSearch":787,"../../../driver-common/gmailAjax":789,"../../../lib/isStreakAppId":842,"../gmail-sync-response-processor":660,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,"bignumber.js":92,ud:597}],634:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,f.default)(u.default.mark(function e(t,r){var n,i,a,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.all([t.getPageCommunicator().getBtaiHeader(),t.getPageCommunicator().getXsrfToken()]);case 2:return n=e.sent,i=(0,d.default)(n,2),a=i[0],s=i[1],e.abrupt("return",o(r,a,s));case 7:case"end":return e.stop()}},e)})),i.apply(this,arguments)}function o(e,t,r){return a.apply(this,arguments)}function a(){return a=(0,f.default)(u.default.mark(function e(t,r,n){var i,o,a,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.default)({method:"POST",url:"https://mail.google.com/sync".concat((0,m.default)(),"/i/fd"),headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":n,"X-Gmail-BTAI":r,"X-Google-BTD":"1"},data:(0,l.default)({1:[{1:t,2:1}]})});case 2:if(i=e.sent,o=i.text,a=(0,h.extractThreadsFromThreadResponse)(o),!(a.length>0)){e.next=9;break}if(s=a[0],!s.oldGmailThreadID){e.next=9;break}return e.abrupt("return",s);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e)})),a.apply(this,arguments)}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n,r.getThreadFromSyncThreadIdUsingHeaders=o;var l=s(e("@babel/runtime-corejs2/core-js/json/stringify")),u=s(e("@babel/runtime-corejs2/regenerator")),c=s(e("@babel/runtime-corejs2/core-js/promise")),d=s(e("@babel/runtime-corejs2/helpers/slicedToArray")),f=s(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),p=(e("ud"),s(e("../../../driver-common/gmailAjax"))),h=e("../gmail-sync-response-processor"),m=s(e("../../../driver-common/getAccountUrlPart"))},{"../../../driver-common/getAccountUrlPart":782,"../../../driver-common/gmailAjax":789,"../gmail-sync-response-processor":660,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/slicedToArray":54,"@babel/runtime-corejs2/regenerator":59,ud:597}],635:[function(e,t,r){(function(t){"use strict";function n(e){var r=e.getPageCommunicator();r.isConversationViewDisabled().then(function(n){e.getLogger().eventSite("gmailSettings",{screenWidth:window.screen&&window.screen.width,screenHeight:window.screen&&window.screen.height,windowWidth:window.innerWidth,windowHeight:window.innerHeight,language:r.getUserLanguage(),isUsingSyncAPI:r.isUsingSyncAPI(),isUsingMaterialUI:e.isUsingMaterialUI(),previewPane:r.getUserOriginalPreviewPaneMode(),isConversationViewDisabled:n,wasAccountSwitcherReadyAtStart:e.getEnvData().wasAccountSwitcherReadyAtStart,timings:(0,o.default)({responseStart:t.performance&&t.performance.timing.responseStart,responseEnd:t.performance&&t.performance.timing.responseEnd,domLoading:t.performance&&t.performance.timing.domLoading,domInteractive:t.performance&&t.performance.timing.domInteractive,domComplete:t.performance&&t.performance.timing.domComplete,domContentLoadedEventStart:t.performance&&t.performance.timing.domContentLoadedEventStart,domContentLoadedEventEnd:t.performance&&t.performance.timing.domContentLoadedEventEnd,domainLookupEnd:t.performance&&t.performance.timing.domainLookupEnd,domainLookupStart:t.performance&&t.performance.timing.domainLookupStart,fetchStart:t.performance&&t.performance.timing.fetchStart,loadEventStart:t.performance&&t.performance.timing.loadEventStart,loadEventEnd:t.performance&&t.performance.timing.loadEventEnd,navigationStart:t.performance&&t.performance.timing.navigationStart,requestStart:t.performance&&t.performance.timing.requestStart},e.getTimings())})})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/object/assign"));i(e("../gmail-element-getter"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../gmail-element-getter":655,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],636:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/regenerator")),a=i(e("@babel/runtime-corejs2/helpers/objectSpread")),s=i(e("@babel/runtime-corejs2/core-js/parse-int")),l=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=i(e("lodash/includes")),c=n(e("ud")),d=e("../../../constants/router"),f=e("../../../lib/dom/simulate-mouse-event"),p=(i(e("./get-url-object")),c.defn(t,function(){function e(e,r,n){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(t,r,n){var i,l,c,p,h,m;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("#"!==r[0]){e.next=4;break}if(!n){e.next=3;break}throw new Error("params parameter can't be passed with resolved URL");case 3:r=r.slice(1);case 4:if(!(0,u.default)(d.NATIVE_ROUTE_IDS,r)){e.next=24;break}if(!t.isUsingSyncAPI()){e.next=15;break}if(!n||"string"==typeof n){e.next=15;break}if(!(i=n.threadID)||"string"!=typeof i){e.next=15;break}if(l=(0,s.default)(i,16),isNaN(l)){e.next=15;break}return e.next=13,t.getSyncThreadIdForOldGmailThreadId(i);case 13:c=e.sent,n=(0,a.default)({},n,{threadID:"#"+c});case 15:p=t.createLink(r,n),h=document.createElement("a"),h.style.display="none",h.href=p,document.body.appendChild(h),(0,f.simulateClick)(h),h.remove(),e.next=26;break;case 24:m=t.createLink(r,n),window.location.hash=m;case 26:case"end":return e.stop()}},e)}));return e}())),h=p;r.default=h},{"../../../constants/router":621,"../../../lib/dom/simulate-mouse-event":827,"./get-url-object":632,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/regenerator":59,"lodash/includes":466,ud:597}],637:[function(e,t,r){"use strict";function n(e){for(var t=[],r=e.split(/[\s+]/g),n=e.match(/[\s+]/g),a=0;a<r.length;a++)t.push('<span class="wh">'+(0,f.default)(i(r[a]))+"</span>"),n&&n[a]&&t.push(o(n[a]));return t.push(" :"),t.join("")}function i(e){switch(e.toLowerCase()){case"shift":return"<Shift>";case"ctrl":return"<Ctrl>";case"alt":return"<Alt>";case"meta":case"command":return"<⌘>";default:return e}}function o(e){switch(e){case" ":return'<span class="wb">then</span> ';case"+":return' <span class="wb">+</span> ';default:return""}}var a=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/core-js/set")),u=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=s(e("@babel/runtime-corejs2/helpers/createClass")),d=s(e("@babel/runtime-corejs2/helpers/defineProperty")),f=s(e("lodash/escape")),p=(a(e("kefir")),s(e("kefir-stopper"))),h=s(e("../../../lib/dom/make-element-child-stream")),m=s(e("../../../lib/dom/querySelectorOrFail")),b=s(e("../../../lib/dom/make-mutation-observer-chunked-stream")),_=function(){function e(){(0,u.default)(this,e),(0,d.default)(this,"_appId",void 0),(0,d.default)(this,"_appName",void 0),(0,d.default)(this,"_appIconUrl",void 0),(0,d.default)(this,"_stopper",void 0),(0,d.default)(this,"_shortcuts",void 0),this._appId=null,this._appName=null,this._appIconUrl=null,this._stopper=(0,p.default)(),this._shortcuts=new l.default,this._monitorKeyboardHelp()}return(0,c.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._shortcuts.clear()}},{key:"set",value:function(e,t,r,n){this._initializeAppValues(t,r,n),this._shortcuts.add(e)}},{key:"delete",value:function(e){this._shortcuts.delete(e)}},{key:"_initializeAppValues",value:function(e,t,r){this._appId||(this._appId=e),this._appName||(this._appName=t),this._appIconUrl||(this._appIconUrl=r)}},{key:"_monitorKeyboardHelp",value:function(){var e=this;(0,h.default)(document.body).map(function(e){return e.el}).filter(function(e){return e&&e.classList&&e.classList.contains("wa")}).flatMap(function(e){return(0,b.default)(e,{attributes:!0,attributeFilter:["class"]}).filter(function(){return!e.classList.contains("aou")}).toProperty(function(){return null}).map(function(){return e})}).takeUntilBy(this._stopper).onValue(function(t){return e._renderHelp(t)})}},{key:"_renderHelp",value:function(e){var t=this;if(0!==this._shortcuts.size){var r=(this._shortcuts.keys(),this._renderHeader()),n=this._renderTable(),i=n.querySelectorAll("tbody tbody"),o=0;this._shortcuts.forEach(function(e){t._renderShortcut(i[o%2],e),o++});var a=(0,m.default)(e,".aov"),s=a.parentElement;if(!s)throw new Error("Could not find parent");s.insertBefore(r,a),s.insertBefore(n,a)}}},{key:"_renderHeader",value:function(){var e=document.createElement("div");if(e.setAttribute("class","aov  aox"),e.innerHTML=['<div class="aow">','<span class="inboxsdk__shortcutHelp_title">',(0,f.default)(this._appName||this._appId)+" keyboard shortcuts","</span>","</div>"].join(""),this._appIconUrl){var t=document.createElement("img");this._appIconUrl&&(t.src=this._appIconUrl),t.setAttribute("class","inboxsdk__icon");var r=(0,m.default)(e,".inboxsdk__shortcutHelp_title");r.insertBefore(t,r.firstChild)}return e}},{key:"_renderTable",value:function(){var e=document.createElement("table");return e.setAttribute("cellpadding","0"),e.setAttribute("class","cf wd inboxsdk__shortcutHelp_table"),e.innerHTML=["<tbody>","<tr>",'<td class="Dn">','<table cellpadding="0" class="cf">',"<tbody>","<tr><th>&nbsp;</th><th>&nbsp;</th></tr>","</tbody>","</table>","</td>",'<td class="Dn">','<table cellpadding="0" class="cf">',"<tbody>","<tr><th>&nbsp;</th><th>&nbsp;</th></tr>","</tbody>","</table>","</td>","</tr","</tbody>"].join(""),e}},{key:"_renderShortcut",value:function(e,t){var r=document.createElement("tr");r.innerHTML=['<td class="wg Dn"> ',n(t.chord),"</td>",'<td class="we Dn"> ',(0,f.default)(t.description||""),"</td>"].join(""),e.appendChild(r)}}]),e}();r.default=_},{"../../../lib/dom/make-element-child-stream":812,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301,"kefir-stopper":300,"lodash/escape":456}],638:[function(e,t,r){"use strict";function n(e){return i.apply(this,arguments)}function i(){return i=(0,s.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.waitForGmailModeToSettle();case 2:if(!u.default.isStandaloneComposeWindow()&&!u.default.isStandaloneThreadWindow()){e.next=4;break}throw new Error("Can not open new compose while in standalone window");case 4:if(u.default.getComposeButton()){e.next=7;break}return e.next=7,(0,c.default)(function(){return!!u.default.getComposeButton()});case 7:if(r=u.default.getComposeButton()){e.next=10;break}throw new Error("Could not find compose button");case 10:(0,l.simulateClick)(r);case 11:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=e("../../../lib/dom/simulate-mouse-event"),u=o(e("../gmail-element-getter")),c=o(e("../../../lib/wait-for"))},{"../../../lib/dom/simulate-mouse-event":827,"../../../lib/wait-for":856,"../gmail-element-getter":655,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59}],639:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,c.default)(l.default.mark(function e(t,r){var n,i,s,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isUsingSyncAPI()){e.next=13;break}return e.next=3,t.getRfcMessageIdForGmailThreadId(r);case 3:return i=e.sent,e.next=6,(0,f.default)(t,"rfc822msgid:"+i);case 6:if(s=e.sent,u=s.threads,0!==u.length){e.next=10;break}return e.abrupt("return");case 10:n=a(window.location.hash,u[0].syncThreadID,u[0].extraMetaData.syncMessageData[0].syncMessageID),e.next=14;break;case 13:n=o(window.location.hash,r);case 14:window.location.hash=n;case 15:case"end":return e.stop()}},e)})),i.apply(this,arguments)}function o(e,t){e="#"+e.replace(/^#/,"");var r=e.split("?"),n=(0,u.default)(r,2),i=n[0],o=n[1],a=d.default.parse(o);return a.compose?a.compose+=","+t:a.compose=t,i+"?"+d.default.stringify(a)}function a(e,t,r){e="#"+e.replace(/^#/,"");var n=e.split("?"),i=(0,u.default)(n,2),o=i[0],a=i[1],s=d.default.parse(a);return s.compose="#".concat(t,"+#").concat(r),o+"?"+d.default.stringify(s)}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n,r.makeNewHash=o,r.makeNewSyncHash=a;var l=s(e("@babel/runtime-corejs2/regenerator")),u=s(e("@babel/runtime-corejs2/helpers/slicedToArray")),c=s(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),d=s(e("querystring")),f=(s(e("../../../driver-common/getRfcMessageIdForSyncMessageId")),s(e("../../../driver-common/getSyncThreadsForSearch")))},{"../../../driver-common/getRfcMessageIdForSyncMessageId":786,"../../../driver-common/getSyncThreadsForSearch":787,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/slicedToArray":54,"@babel/runtime-corejs2/regenerator":59,querystring:549}],640:[function(e,t,r){"use strict";function n(e,t){l.default.waitForGmailModeToSettle().then(function(){l.default.isStandalone()||i(e,t)})}function i(e,t){e.getRouteViewDriverStream().scan(function(e,t){var r,n;return e&&e.gmailRouteView&&e.gmailRouteView.isCustomRouteBelongingToApp()&&(r=e.gmailRouteView.getRouteID(),n=e.gmailRouteView.getParams()),{gmailRouteView:t,lastCustomRouteID:r,lastCustomRouteParams:n}},void 0).changes().onValue(function(r){var n=r.gmailRouteView,i=r.lastCustomRouteID,o=r.lastCustomRouteParams;c(n,i,o,e,t)})}function o(e,t){var r=l.default.getThreadBackButton();r&&(0,u.default)(r).takeUntilBy(t.getStopper()).filter(function(e){return!e.defaultPrevented}).onValue(function(e){window.history.back(),e.preventDefault(),e.stopImmediatePropagation()})}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var s=(a(e("kefir")),e("ud")),l=a(e("../gmail-element-getter")),u=a(e("../../../lib/dom/on-mouse-down-and-up")),c=(0,s.defn)(t,function(e,t,r,n,i){t&&e.getRouteType()===i.RouteTypes.THREAD&&o(n,e)})},{"../../../lib/dom/on-mouse-down-and-up":817,"../gmail-element-getter":655,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,ud:597}],641:[function(e,t,r){"use strict";function n(e,t){e.createCustomSearchTerm(t.term),e.ajaxInterceptStream.filter(function(e){return"searchQueryForReplacement"===e.type&&e.term===t.term}).onValue(function(r){o.default.resolve(t.termReplacer({})).then(function(n){if("string"!=typeof n)throw new Error("termReplacer response must be a string");var i="("+n+")",o=r.query.replace(t.term,function(){return i});e.setSearchQueryReplacement(r.query,o)})})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],642:[function(e,t,r){"use strict";function n(e,t){var r="inboxsdk__suggestions_"+(""+(0,u.default)()+Math.random()).replace(/\D+/g,""),n=e.getPageCommunicator();n.registerSuggestionsModifier(r);var i=n.ajaxInterceptStream.filter(function(e){return"suggestionsRequest"===e.type}).flatMapLatest(function(n){var i=n.query;return f.default.fromPromise(l.default.resolve(t(i))).flatMap(function(t){try{var n=(0,_.default)(e,t),i=n.map(function(e){return(0,s.default)({},e,{providerId:r,id:"".concat((0,u.default)(),"-").concat(Math.random())})});return f.default.constant(i)}catch(e){return f.default.constantError(e)}}).mapErrors(function(t){return e.getLogger().error(t),[]}).map(function(e){return{query:i,suggestions:e}})}).onValue(function(e){n.provideAutocompleteSuggestions(r,e.query,e.suggestions)}).map(function(e){return e.suggestions}),v=e.getRouteViewDriverStream().toProperty(function(){return null}).map(function(){return b.default.getSearchInput()}).filter(Boolean).take(1),g=v.flatMapLatest(function(e){return f.default.fromEvents(e,"focus")}).map(function(){return b.default.getSearchSuggestionsBoxParent()}).filter(Boolean).flatMapLatest(h.default).map(function(e){return e.el.firstElementChild}).take(1).toProperty(),y=g.flatMap(function(e){return(0,m.default)(e,{childList:!0}).toProperty(function(){return null})}).map(function(){return null}),w=v.flatMap(function(e){return(0,p.default)(document,"keydown").filter(function(t){return 13==t.keyCode&&t.target===e})}),k=g.sampledBy(y).map(function(e){return(0,a.default)(e.children).filter(function(e){return e.getElementsByClassName(r).length>0})});k.onValue(function(e){if(e[0]&&e[0].previousElementSibling){var t=e[0].previousElementSibling.firstElementChild;t&&t.classList.add("inboxsdk__suggestions_separator_before");var r=e[0].firstElementChild;r&&r.classList.add("inboxsdk__suggestions_separator_after")}});var j=k.flatMapLatest(function(e){return f.default.merge(e.map(function(e){return f.default.merge([(0,p.default)(e,"click"),w.filter(function(){return e.classList.contains("gssb_i")})]).map(function(t){return{event:t,row:e}})}))}),x=f.default.merge([i,v.flatMapLatest(function(e){return f.default.fromEvents(e,"blur")}).map(function(){return[]})]).toProperty();f.default.combine([j,v],[x]).onValue(function(t){var r=t,n=(0,o.default)(r,3),i=n[0],a=i.event,s=i.row,l=n[1],u=n[2],f=s.querySelector("span[data-inboxsdk-suggestion]"),p=f?JSON.parse(f.getAttribute("data-inboxsdk-suggestion")||"null"):null,h=(0,c.default)(function(){a.stopImmediatePropagation(),a.preventDefault(),l.blur(),l.value=""});if(p){var m=p.id,b=(0,d.default)(u,function(e){return e.id===m});b||e.getLogger().error(new Error("Failed to find suggestion by id")),b&&b.onClick&&(h(),b.onClick.call(null))}p&&p.routeName?(h(),e.goto(p.routeName,p.routeParams)):p&&p.externalURL&&(h(),window.open(p.externalURL))})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/helpers/slicedToArray")),a=i(e("@babel/runtime-corejs2/core-js/array/from")),s=i(e("@babel/runtime-corejs2/helpers/objectSpread")),l=i(e("@babel/runtime-corejs2/core-js/promise")),u=i(e("@babel/runtime-corejs2/core-js/date/now")),c=i(e("lodash/once")),d=i(e("lodash/find")),f=i(e("kefir")),p=i(e("../../../lib/from-event-target-capture")),h=(e("../../../lib/dom/simulate-mouse-event"),i(e("../../../lib/dom/make-element-child-stream"))),m=i(e("../../../lib/dom/make-mutation-observer-chunked-stream")),b=i(e("../gmail-element-getter")),_=i(e("../../../lib/copyAndValidateAutocompleteResults"))},{"../../../lib/copyAndValidateAutocompleteResults":801,"../../../lib/dom/make-element-child-stream":812,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/simulate-mouse-event":827,"../../../lib/from-event-target-capture":831,"../gmail-element-getter":655,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/slicedToArray":54,kefir:301,"lodash/find":458,"lodash/once":489}],643:[function(e,t,r){"use strict";function n(e,t,r){return v.flatMapLatest(function(n){return n(e,t,r)})}function i(e,t,r){return c.default.fromPromise(b.default.waitForGmailModeToSettle()).flatMap(function(){var t,n=!1;return b.default.isStandaloneComposeWindow()?(t=a(),n=!0):t=b.default.isStandaloneThreadWindow()?c.default.never():o(),t.map((0,
h.default)(function(t){return new _.default(t,r,e,{isStandalone:n,isInlineReplyForm:!1})}))}).merge(t.flatMap(function(t){return t.getReplyElementStream().map((0,h.default)(function(t){return new _.default(t,r,e,{isStandalone:!1,isInlineReplyForm:!0})}))})).flatMap(function(e){return e.ready()})}function o(){return s(function(){return b.default.getComposeWindowContainer()}).flatMap(function(e){var t=e.el.querySelector("div.AD");return t?(0,p.default)(t).takeUntilBy(e.removalStream).map(l("composeFullscreenStateChanged")):c.default.never()}).merge(b.default.getFullscreenComposeWindowContainerStream().flatMap(function(e){var t=e.el,r=e.removalStream;return(0,p.default)(t).takeUntilBy(r)}).map(l("composeFullscreenStateChanged")).map(function(e){var t=e.el,r=e.removalStream,n=t.querySelector("[role=dialog] div.aaZ");if(!n)return null;var i=(0,f.default)(n,{childList:!0}).filter(function(){return 0===n.childElementCount}).map(function(){return null});return{el:t,removalStream:r.merge(i).take(1)}}).filter(Boolean)).flatMap(function(e){if(!e)throw new Error("Should not happen");var t=e.el.querySelector("[role=dialog]");return t&&t.querySelector("form")?c.default.constant({el:t,removalStream:e.removalStream}):c.default.never()}).flatMap((0,m.default)())}function a(){return s(function(){return b.default.StandaloneCompose.getComposeWindowContainer()})}function s(e){return c.default.interval(2e3).map(e).filter().take(1).flatMap(function(e){return(0,p.default)(e)})}function l(e){return function(t){var r=t&&t.el&&t.el.querySelector&&t.el.querySelector("[role=dialog]");return r&&r.dispatchEvent(new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:null})),t}}var u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var c=u(e("kefir")),d=u(e("ud-kefir")),f=(u(e("../../../lib/stream-wait-for")),u(e("../../../lib/dom/make-mutation-observer-chunked-stream"))),p=u(e("../../../lib/dom/make-element-child-stream")),h=u(e("../../../lib/dom/element-view-mapper")),m=u(e("../../../lib/dom/make-element-stream-merger")),b=u(e("../gmail-element-getter")),_=u(e("../views/gmail-compose-view")),v=(u(e("../../../lib/logger")),(0,d.default)(t,i))},{"../../../lib/dom/element-view-mapper":805,"../../../lib/dom/make-element-child-stream":812,"../../../lib/dom/make-element-stream-merger":813,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/logger":843,"../../../lib/stream-wait-for":853,"../gmail-element-getter":655,"../views/gmail-compose-view":673,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"ud-kefir":596}],644:[function(e,t,r){"use strict";function n(e,t){var r=t.getCustomRouteIDs(),n=t.getCustomListRouteIDs(),i=t.getCustomListSearchStringsToRouteIds(),_=(0,m.default)(document.location.href).hash,v=null;t.getStopper().onValue(function(){v&&v.destroy()});var g=_,y={},w=d.default.fromEvents(window,"hashchange").filter(function(e){return!e.oldURL.match(/#inboxsdk-fake-no-vc$/)}).map(function(e){return{new:(0,m.default)(e.newURL),old:(0,m.default)(e.oldURL)}}).filter(function(e){return e.new.hash!==e.old.hash}).map(function(e){return e.new}).map(function(t){var i=t.hash,o=t.name,a=!0,s=!1,l=void 0;try{for(var d,f=(0,c.default)(r);!(a=(d=f.next()).done);a=!0){var p=d.value,h=(0,b.default)(p,i);if(h)return{urlObject:t,type:"CUSTOM",routeID:h}}}catch(e){s=!0,l=e}finally{try{a||null==f.return||f.return()}finally{if(s)throw l}}var m=!0,_=!1,v=void 0;try{for(var g,y=(0,c.default)(n);!(m=(g=y.next()).done);m=!0){var w=(0,u.default)(g.value,1),k=w[0],j=(0,b.default)(k,o);if(j)return{urlObject:t,type:"CUSTOM_LIST_TRIGGER",routeID:j}}}catch(e){_=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(_)throw v}}return e.isNativeRoute(t.name)?{urlObject:t,type:"NATIVE"}:{urlObject:t,type:"OTHER_APP_CUSTOM"}}),k=w.filter(function(e){return"NATIVE"!==e.type}),j=w.filter(function(e){return"NATIVE"===e.type}).filter(function(e){var t=e.urlObject,r=_;return _=t.hash,r===t.hash}).filter(function(e){return e.urlObject.hash!==g});return d.default.merge([k,j,p.default.getMainContentElementChangedStream().map(function(e){return{urlObject:(0,m.default)(document.location.href),type:"NATIVE"}})]).map(function(e){var r=e.type,n=e.urlObject;if("NATIVE"===r&&"search"===n.name){var o=i.get(n.params[0]);if(o){var a=p.default.getSearchInput();if(!a)throw new Error("Should not happen");if(a.value="",1===n.params.length||2===n.params.length&&"p"===n.params[1][0])return t.hashChangeNoViewChange("#"+o+(n.params[1]?"/"+n.params[1]:"")),{type:"CUSTOM_LIST",urlObject:n,routeID:o}}}return e}).map(function(e){var t=e.urlObject;return y[t.hash]||(y[t.hash]={data:{}}),y[t.hash].lastUsedTimestamp=(0,l.default)(),(0,s.default)(y).length>50&&(y=(0,s.default)(y).sort(function(e,t){return y[t].lastUsedTimestamp-y[e].lastUsedTimestamp}).slice(0,25).reduce(function(e,t){return(0,a.default)({},e,(0,o.default)({},t,y[t]))},{})),(0,a.default)({},e,{cachedRouteData:y[t.hash].data})}).map(function(r){if("NATIVE"===r.type||"CUSTOM_LIST"===r.type)t.showNativeRouteView();else if("CUSTOM_LIST_TRIGGER"===r.type)return void t.showCustomThreadList(r.routeID,(0,f.default)(n,r.routeID),r.urlObject.params);return new h.default(r,e,t)}).filter(Boolean).map(function(e){return v&&v.destroy(),v=e,g=(0,m.default)(document.location.href).hash,e})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/helpers/defineProperty")),a=i(e("@babel/runtime-corejs2/helpers/objectSpread")),s=i(e("@babel/runtime-corejs2/core-js/object/keys")),l=i(e("@babel/runtime-corejs2/core-js/date/now")),u=i(e("@babel/runtime-corejs2/helpers/slicedToArray")),c=i(e("@babel/runtime-corejs2/core-js/get-iterator")),d=i(e("kefir")),f=i(e("../../../../common/get-or-fail")),p=i(e("../gmail-element-getter")),h=i(e("../views/gmail-route-view/gmail-route-view")),m=i(e("./get-url-object")),b=i(e("../../../lib/routeIDmatchesHash"))},{"../../../../common/get-or-fail":611,"../../../lib/routeIDmatchesHash":849,"../gmail-element-getter":655,"../views/gmail-route-view/gmail-route-view":705,"./get-url-object":632,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/slicedToArray":54,kefir:301}],645:[function(e,t,r){"use strict";function n(e){var t=document.createElement("div");t.className="inboxsdk__appid_warning",t.innerHTML='\n<div class="inboxsdk__appid_warning_main">\n  <div class="topline">InboxSDK Developer Warning: Invalid AppId</div>\n  <div>You\'ve loaded the InboxSDK with an unregistered appId. Registration is free but necessary to load the SDK.</div>\n</div>\n<a class="inboxsdk__appid_register" target="_blank" href="https://www.inboxsdk.com/register">Register Your App</a>\n<input type="button" value="" title="Close" class="inboxsdk__x_close_button" />\n';var r=e.createTopMessageBarDriver((0,a.default)(o.default,{el:t})),n=t.querySelector(".inboxsdk__x_close_button");if(!n)throw new Error("Should not happen");n.addEventListener("click",function(e){r.remove()})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("kefir")),a=i(e("kefir-cast"));i(e("../../../lib/fake-window-resize"))},{"../../../lib/fake-window-resize":830,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-cast":299}],646:[function(e,t,r){"use strict";function n(e){var t=e.querySelector(".inboxsdk__custom_view");return t||(t=document.createElement("div"),t.classList.add("inboxsdk__custom_view"),e.appendChild(t),t)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=e("ud"),a=i(e("../gmail-element-getter")),s=e("../../../lib/dom/simulate-mouse-event"),l=(0,o.defn)(t,function(e,t){var r=a.default.getContentSectionElement();if(r){for(var i=document.getSelection(),o=0;o<i.rangeCount;o++){var l=i.getRangeAt(o);if("function"==typeof l.intersectsNode&&l.intersectsNode(r)){i.removeAllRanges();break}}n(r).appendChild(t);var u=r.children;Array.prototype.forEach.call(u,function(e){e.classList.contains("inboxsdk__custom_view")||(e.style.display="none")});var c=a.default.getCompanionSidebarIconContainerElement();if(c){var d=c.querySelector(".J-KU-KO");d&&(0,s.simulateClick)(d)}document.body.classList.add("inboxsdk__custom_view_active")}}),u=l;r.default=u},{"../../../lib/dom/simulate-mouse-event":827,"../gmail-element-getter":655,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,ud:597}],647:[function(e,t,r){"use strict";function n(e,t){return e.length>I&&t.error(new Error("Received more than the maximum number of threads specified by handler, ignoring additional threads (https://www.inboxsdk.com/docs/#Router).")),e.slice(0,I)}function i(e,t){return console.log("Failed to find id for thread",e,t),null}function o(e,t,r){if((0,g.default)(r)){e.deprecationWarning("Returning an array from a handleCustomListRoute handler","a CustomListDescriptor object");var i=n(r,e);return{total:i.length,threads:i}}if("object"===(0,v.default)(r)){var o=r.total,a=r.hasMore,s=r.threads;if(!(0,g.default)(s))throw new Error('handleCustomListRoute result must contain a "threads" array (https://www.inboxsdk.com/docs/#Router).');if(null!=o&&null!=a)throw new Error('handleCustomListRoute result must only contain either a "total" or a "hasMore" property, but not both. (https://www.inboxsdk.com/docs/#Router).');if("number"==typeof o)return{total:o,threads:n(s,e)};if("boolean"==typeof a){var l=n(s,e);return{total:a?"MANY":t+s.length,threads:l}}throw new Error('handleCustomListRoute result must contain either a "total" number or a "hasMore" boolean (https://www.inboxsdk.com/docs/#Router).')}throw new Error("handleCustomListRoute result must be an array or an object (https://www.inboxsdk.com/docs/#Router).")}function a(e){if("string"==typeof e)return"<"==e[0]?{rfcId:e}:{gtid:e};if(e){var t={gtid:"string"==typeof e.gmailThreadId&&e.gmailThreadId,rfcId:"string"==typeof e.rfcMessageId&&e.rfcMessageId};if(t.gtid||t.rfcId)return t}}function s(e,t,r){if("string"==typeof t.rfcId)return _.default.resolve(t);if("string"==typeof t.gtid){var n=t.gtid;return e.getRfcMessageIdForGmailThreadId(n).then(function(e){return{gtid:n,rfcId:e}},function(e){return r(n,e)})}throw new Error("Should not happen")}function l(e,t,r){return"string"==typeof t.gtid?_.default.resolve(t):e.getGmailThreadIdForRfcMessageId(t.rfcId).then(function(e){return{gtid:e,rfcId:t.rfcId}},function(e){return r(t.rfcId,e)})}function u(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i,a=T(e,t,r,o),s=document.location.hash,l=k.default.getMainContentElementChangedStream().changes().take(1),u=k.default.getSearchInput();if(!u)throw new Error("could not find search input");u.value="",u.style.visibility="hidden",l.onValue(function(){u.style.visibility="visible"});var c="#search/"+[a].concat((0,f.default)(n)).map(encodeURIComponent).join("/");window.history.replaceState(null,null,c);var d=new window.HashChangeEvent("hashchange",{oldURL:document.location.href.replace(/#.*$/,"")+s,newURL:document.location.href.replace(/#.*$/,"")+c});window.dispatchEvent(d)}var c=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=u;var f=d(e("@babel/runtime-corejs2/helpers/toConsumableArray")),p=d(e("@babel/runtime-corejs2/regenerator")),h=d(e("@babel/runtime-corejs2/helpers/objectSpread")),m=d(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),b=d(e("@babel/runtime-corejs2/core-js/date/now")),_=d(e("@babel/runtime-corejs2/core-js/promise")),v=d(e("@babel/runtime-corejs2/helpers/typeof")),g=d(e("@babel/runtime-corejs2/core-js/array/is-array")),y=d(e("@babel/runtime-corejs2/core-js/map")),w=d(e("lodash/find")),k=(d(e("kefir")),d(e("../gmail-element-getter"))),j=c(e("../gmail-response-processor")),x=c(e("../gmail-sync-response-processor")),E=d(e("../../../lib/isStreakAppId")),S=d(e("immutability-helper")),C=new y.default,I=50,T=function(e,t,r,n){var i=C.get(r);if(i)return i;var u=(0,b.default)()+"-"+Math.random();return e.getPageCommunicator().setupCustomListResultsQuery(u),e.getPageCommunicator().ajaxInterceptStream.filter(function(e){return"searchForReplacement"===e.type&&e.query===u}).onValue(function(i){var c=i.start;(0,m.default)(p.default.mark(function i(){var d,f,m,v,g,y,k,C,T,A,D,M,R,L,O,P,V,N,B;return p.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.signalCustomThreadListActivity(t),i.prev=1,i.next=4,_.default.resolve(r(c,I));case 4:m=i.sent,v=o(e.getLogger(),c,m),d=v.total,f=v.threads,i.next=15;break;case 10:i.prev=10,i.t0=i.catch(1),e.getLogger().error(i.t0),d=0,f=[];case 15:return g=f.map(a).filter(Boolean),i.next=18,_.default.all(g.map(function(t){return s(e,t,n)}));case 18:return i.t1=Boolean,y=i.sent.filter(i.t1),k=y.length>0?y.map(function(e){return"rfc822msgid:"+e.rfcId}).join(" OR "):""+Math.random()+(0,b.default)(),e.getPageCommunicator().setCustomListNewQuery({newQuery:k,newStart:0,query:u,start:c}),C=e.getPageCommunicator().ajaxInterceptStream.filter(function(e){return"searchResultsResponse"===e.type&&e.query===u&&e.start===c}).map(function(e){return e.response}).take(1).toPromise(),i.next=25,_.default.all(y.map(function(t){return l(e,t,n)}));case 25:return i.t2=Boolean,T=i.sent.filter(i.t2),i.next=29,C;case 29:A=i.sent,e.signalCustomThreadListActivity(t),i.prev=31,e.isUsingSyncAPI()?(M=x.extractThreadsFromSearchResponse(A),R=T.map(function(e){var t=e.gtid;return(0,w.default)(M,function(e){return e.oldGmailThreadID===t})}).filter(Boolean),L=M.length!==R.length||M.some(function(e,t){return e!==R[t]}),L?(P=(0,b.default)(),O=R.map(function(e,t){var r=String(P-t),n=(0,S.default)(e,{rawResponse:{1:{3:{$set:r},8:{$set:r}}}});return e.rawResponse[1][5]&&(n=(0,S.default)(n,{rawResponse:{1:{5:function(e){return e.map(function(e){return(0,h.default)({},e,{7:r,18:r,31:r})})}}}})),n})):O=M,D=x.replaceThreadsInSearchResponse(A,O,{start:c,total:d})):(V=j.extractThreads(A),N=T.map(function(e){var t=e.gtid;return(0,w.default)(V,function(e){return e.gmailThreadId===t})}).filter(Boolean),D=j.replaceThreadsInResponse(A,N,{start:c,total:d})),e.getPageCommunicator().setCustomListResults(u,D),i.next=43;break;case 36:i.prev=36,i.t3=i.catch(31),e.getLogger().error(i.t3,{responseReplacementFailure:!0,idPairsLength:T.length}),B=e.getButterBar(),B&&B.showError({text:"Failed to load custom thread list"});try{e.isUsingSyncAPI()?e.getPageCommunicator().setCustomListResults(u,x.replaceThreadsInSearchResponse(A,[],{start:c,total:d})):e.getPageCommunicator().setCustomListResults(u,j.replaceThreadsInResponse(A,[],{start:c,total:d}))}catch(t){e.getLogger().error(t),e.getPageCommunicator().setCustomListResults(u,null)}return i.abrupt("return");case 43:setTimeout(function(){var t=document.querySelector(".vY .vX.UC");if(t&&"none"!==t.style.display&&/#\d+/.test(t.textContent)){var r=(0,E.default)(e.getAppId());e.getLogger().error(new Error("Gmail error with custom thread list"),{message:t.textContent,completedIDPairsLength:T.length,response:r?A:null,newResponse:r?D:null})}},1e3);case 44:case"end":return i.stop()}},i,null,[[1,10],[31,36]])}))().catch(function(t){return e.getLogger().error(t)})}),e.getCustomListSearchStringsToRouteIds().set(u,t),C.set(r,u),u}},{"../../../lib/isStreakAppId":842,"../gmail-element-getter":655,"../gmail-response-processor":659,"../gmail-sync-response-processor":660,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/toConsumableArray":57,"@babel/runtime-corejs2/helpers/typeof":58,"@babel/runtime-corejs2/regenerator":59,"immutability-helper":293,kefir:301,"lodash/find":458}],648:[function(e,t,r){"use strict";function n(e){var t=o.default.getContentSectionElement();t&&(Array.prototype.forEach.call(t.children,function(e){e.style.display=""}),document.body.classList.contains("inboxsdk__custom_view_active")&&(document.body.classList.remove("inboxsdk__custom_view_active"),(0,a.default)()))}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("../gmail-element-getter")),a=i(e("../../../lib/fake-window-resize"))},{"../../../lib/fake-window-resize":830,"../gmail-element-getter":655,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],649:[function(e,t,r){"use strict";function n(e,t){(0,s.default)(function(){return l.default.getCompanionSidebarIconContainerElement()}).map(function(t){var r=t.querySelector(".J-KU-Jg, [role=tablist], .brC-bsf-aT5-aOt");return r||(e.getLogger().error(new Error("_waitForAddonTitleAndSuppress: elementToWatch not found")),null)}).filter().flatMap(a.default).filter(function(e){var r=e.el;return"tab"===r.getAttribute("role")&&(r.getAttribute("data-tooltip")||r.getAttribute("aria-label"))===t}).takeUntilBy(e.getStopper()).onValue(function(e){var t=e.el;(t.classList.contains("J-KU-KO")||t.classList.contains("bse-bvF-I-KO")||t.classList.contains("aT5-aOt-I-KO"))&&(0,o.simulateClick)(t),t.style.display="none"}).onError(function(t){e.getLogger().error(t,"error in suppressAddon")})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=e("../../../lib/dom/simulate-mouse-event"),a=i(e("../../../lib/dom/make-element-child-stream")),s=i(e("../../../lib/stream-wait-for")),l=i(e("../gmail-element-getter"))},{"../../../lib/dom/make-element-child-stream":812,"../../../lib/dom/simulate-mouse-event":827,"../../../lib/stream-wait-for":853,"../gmail-element-getter":655,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],650:[function(e,t,r){(function(t){"use strict";function n(e){"sdk_streak_21e9788951"===e.getAppId()&&t.fetch&&!s&&(s=!0,e.getAttachmentCardViewDriverStream().filter(function(e){return"FILE"===e.getAttachmentType()}).filter(function(){return Math.random()<.01}).onValue(function(){var t=(0,a.default)(o.default.mark(function t(r){var n,i;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r._getDownloadLink(),t.prev=1,t.next=4,r.getDownloadURL();case 4:i=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),e.getLogger().error(t.t0,{reason:"problem getting download url",downloadLinkBefore:n,downloadLinkAfter:r._getDownloadLink()}),t.abrupt("return");case 11:if(i){t.next=14;break}return e.getLogger().error(new Error("no download url found"),{downloadLinkBefore:n,downloadLinkAfter:r._getDownloadLink()}),t.abrupt("return");case 14:e.getLogger().eventSdkPassive("testing.getDownloadURL success");case 15:case"end":return t.stop()}},t,null,[[1,7]])}));return function(e){return t.apply(this,arguments)}}()))}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/regenerator")),a=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),s=!1}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59}],651:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/regenerator")),o=n(e("@babel/runtime-corejs2/core-js/promise")),a=n(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),s=n(e("@babel/runtime-corejs2/core-js/get-iterator")),l=n(e("@babel/runtime-corejs2/core-js/set")),u=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=n(e("@babel/runtime-corejs2/helpers/createClass")),d=n(e("@babel/runtime-corejs2/helpers/defineProperty")),f=e("ud"),p=(n(e("kefir")),n(e("./getSyncThreadFromSyncThreadId")),function(){function e(t){var r=this;(0,u.default)(this,e),(0,d.default)(this,"_driver",void 0),(0,d.default)(this,"_composeViews",void 0),this._driver=t,this._composeViews=new l.default,this._driver.getComposeViewDriverStream().onValue(function(e){r._composeViews.add(e),e.getStopper().onValue(function(){r._composeViews.delete(e)})})}return(0,c.default)(e,[{key:"getThreadIdForThreadRow",value:function(e,t){var r=this._driver.getPageCommunicator().getThreadIdForThreadRowByDatabase(t[0]);if(r)return r;if(0==e.getVisibleMessageCount()&&e.getVisibleDraftCount()>0){var n=this._findComposeForThreadRow(e);if(n)return n.getMessageID()}return null}},{key:"getDraftIdForThreadRow",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,a.default)(i.default.mark(function e(t){var r,n,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.getVisibleMessageCount()>0||0==t.getVisibleDraftCount())){e.next=2;break}return e.abrupt("return",o.default.resolve(null));case 2:if(!(r=this._findComposeForThreadRow(t))){e.next=5;break}return e.abrupt("return",r.getDraftID());case 5:return e.next=7,this._driver.getDraftIDForMessageID(t.getThreadID());case 7:return n=e.sent,a=n.draftID,e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"_findComposeForThreadRow",value:function(e){var t=[],r=e.getSubject(),n=!0,i=!1,o=void 0;try{for(var a,l=(0,s.default)(this._composeViews);!(n=(a=l.next()).done);n=!0){var u=a.value;r===u.getSubject()&&t.push(u)}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return 1==t.length?t[0]:null}}]),e}()),h=(0,f.defn)(t,p);r.default=h},{"./getSyncThreadFromSyncThreadId":634,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,kefir:301,ud:597}],652:[function(e,t,r){"use strict";function n(e){i(e),d(e),f(e)}function i(e){e.getComposeViewDriverStream().onValue(function(t){var r=o(e,t);r("compose open"),a(t,r)})}function o(e,t){var r=e.getLogger(),n={isInlineReply:t.isInlineReplyForm(),isReply:t.isReply()};return function(e,t){r.eventSite(e,(0,h.default)({},n,t))}}function a(e,t){s(e,t),u(e,t)}function s(e,t){var r=e.getElement().querySelector(".a1");r&&m.default.fromEvents(r,"mousedown").takeUntilBy(e.getStopper()).onValue(function(){t("attachment button clicked"),l(e,t)})}function l(e,t){(0,b.default)(document.body).map(function(e){return e.el}).filter(function(e){return e&&"file"===e.type}).take(1).flatMap(function(t){return m.default.fromEvents(t,"change").map(function(){return!0}).merge(m.default.fromEvents(e.getBodyElement(),"focus").map(function(){return!1}).delay(1e3))}).take(1).filter(Boolean).takeUntilBy(e.getStopper()).onValue(function(){return t("attachment uploaded")})}function u(e,t){var r=e.getElement().querySelector(".aA7");r&&m.default.fromEvents(r,"mousedown").takeUntilBy(e.getStopper()).onValue(function(){t("drive button clicked"),c(e,t)})}function c(e,t){var r=e.getBodyElement().querySelectorAll(".gmail_drive_chip").length;(0,b.default)(document.body).map(function(e){return e.el}).filter(function(e){return e&&e.classList.contains("picker-dialog")}).take(1).flatMap(function(t){return m.default.fromEvents(e.getBodyElement(),"focus").delay(1e3).map(function(){return e.getBodyElement()?e.getBodyElement().querySelectorAll(".gmail_drive_chip").length:0}).map(function(e){return r<e}).take(1)}).take(1).filter(Boolean).takeUntilBy(e.getStopper()).onValue(function(){return t("drive file added")})}function d(e){(0,b.default)(document.body).map(function(e){return e.el}).filter(function(e){return e.getAttribute&&"alertdialog"===e.getAttribute("role")}).takeUntilBy(e.getStopper()).onValue(function(t){var r=t.querySelector("[role=heading]");if(r&&r.textContent.indexOf("exceeds the 25MB")>-1)return void e.getLogger().eventSite("large attachment suggest drive");var n=t.querySelector(".Kj-JD-Jz");return n&&n.textContent.indexOf("exceeds the maximum")>-1?void e.getLogger().eventSite("large attachment from drag and drop"):void 0})}function f(e){e.getComposeViewDriverStream().flatMapLatest(function(){return m.default.fromEvents(document.body,"dragenter").filter(function(e){return e.toElement}).filter(function(e){return e.toElement.classList.contains("aC7")||e.toElement.classList.contains("aC9")}).take(1)}).takeUntilBy(e.getStopper()).onValue(function(){return e.getLogger().eventSite("compose drag file")}),e.getComposeViewDriverStream().flatMapLatest(function(){return m.default.fromEvents(document.body,"drop").filter(function(e){return e.toElement}).filter(function(e){return e.toElement.classList.contains("aC7")||e.toElement.classList.contains("aC9")}).take(1)}).takeUntilBy(e.getStopper()).onValue(function(){return e.getLogger().eventSite("compose drop file")})}var p=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var h=p(e("@babel/runtime-corejs2/helpers/objectSpread")),m=p(e("kefir")),b=p(e("../../../lib/dom/make-element-child-stream"))},{"../../../lib/dom/make-element-child-stream":812,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,kefir:301}],653:[function(e,t,r){"use strict";function n(){var e=document.querySelector(".TO .TN");if(!e)return u.default.error(new Error("Failed to find nav item outer element")),"compact";var t=(0,l.default)(getComputedStyle(e).getPropertyValue("padding-top"),10);return t>=6?"comfortable":t>=3?"cozy":"compact"}function i(){var e=document.querySelector(".aio");if(!e)return u.default.error(new Error("Failed to find nav item")),!1;var t=getComputedStyle(e).getPropertyValue("color"),r=f.exec(t);if(!r)return u.default.error(new Error("Failed to read color string"),{colorString:t}),!1;var n=+r[1],i=+r[2],o=+r[3];return 36!==o&&(n===i&&n===o||u.default.error(new Error("Nav item color not grayscale"),{r:n,g:i,b:o}),n>128)}function o(){function e(){var e=n();t!==e&&(t&&document.body.classList.remove("inboxsdk__gmail_density_"+t),t=e,document.body.classList.add("inboxsdk__gmail_density_"+t));var o=i();r!==o&&(r=o,r?document.body.classList.add("inboxsdk__gmail_dark_theme"):document.body.classList.remove("inboxsdk__gmail_dark_theme"))}if(!document.head.hasAttribute("data-inboxsdk-gmail-style-tracker")&&!d.default.isStandalone()){document.head.setAttribute("data-inboxsdk-gmail-style-tracker","true");var t=null,r=null;(0,c.default)(function(){return document.querySelector(".TO .TN")&&document.querySelector(".aio")}).then(function(){var t=new MutationObserver(e),r={characterData:!0,childList:!0};(0,s.default)(document.styleSheets).forEach(function(e){"STYLE"==e.ownerNode.tagName&&t.observe(e.ownerNode,r)}),e()}).catch(function(e){u.default.error(e)})}}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=o;var s=a(e("@babel/runtime-corejs2/core-js/array/from")),l=a(e("@babel/runtime-corejs2/core-js/parse-int")),u=a(e("../../../lib/logger")),c=a(e("../../../lib/wait-for")),d=a(e("../gmail-element-getter")),f=/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/},{"../../../lib/logger":843,"../../../lib/wait-for":856,"../gmail-element-getter":655,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],654:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/array/from")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=n(e("lodash/find")),u=n(e("lodash/uniqBy")),c=n(e("../../../../common/censorHTMLstring")),d=n(e("../../../lib/logger")),f=n(e("../../../lib/wait-for")),p=function(){function e(t){(0,o.default)(this,e),(0,s.default)(this,"_failedWaitFor",void 0),(0,s.default)(this,"_userEmail",void 0),this._failedWaitFor=!1,this._userEmail=t.getUserEmailAddress()}return(0,a.default)(e,[{key:"getUserName",value:function(){var e=this,t=document.querySelector("div.gb_w div.gb_B .gb_D");if(t)return t.textContent;var r=(0,l.default)(this.getAccountSwitcherContactList(),function(t){return t.emailAddress===e._userEmail});return r&&null!=r.name?r.name:this._userEmail}},{key:"getAccountSwitcherContactList",value:function(){var e=(0,i.default)(document.querySelectorAll('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."]')).slice(0,1).map(function(e){var t=e.parentElement,r=t.children[0],n=t.children[1];return r&&n?{name:r.textContent,emailAddress:n.textContent}:null}).filter(Boolean),t=(0,i.default)(document.querySelectorAll('[role=banner] div[aria-label] div > a[target="_blank"] > img + div')).map(function(e){var t=e.children[1].textContent.match(/\S+/);if(!t)throw new Error("Failed to match");return{name:e.children[0].textContent,emailAddress:t[0]}});return(0,u.default)(e.concat(t),function(e){return e.emailAddress.toLowerCase()})}},{key:"waitForAccountSwitcherReady",value:function(){var e=this;return(0,f.default)(function(){return e.getAccountSwitcherContactList().length>0},1e4).then(function(){}).catch(function(t){e._failedWaitFor=!0,d.default.error(t,{reason:"waiting for user account switcher",switcherHTML:(0,i.default)(document.querySelectorAll("div.gb_w[aria-label], div.gb_va[aria-label]")).map(function(e){return(0,c.default)(e.outerHTML)})})})}}]),e}();r.default=p},{"../../../../common/censorHTMLstring":606,"../../../lib/logger":843,"../../../lib/wait-for":856,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,
"lodash/find":458,"lodash/uniqBy":502}],655:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/array/from")),a=i(e("lodash/once")),s=n(e("kefir")),l=i(e("../../lib/dom/make-element-child-stream")),u=i(e("../../lib/dom/querySelectorOrFail")),c=i(e("./gmail-element-getter/wait-for-gmail-mode-to-settle")),d=i(e("./gmail-element-getter/get-main-content-element-changed-stream")),f={waitForGmailModeToSettle:function(){return(0,c.default)().toPromise()},getMainContentElementChangedStream:(0,a.default)(function(){return(0,d.default)(this)}),isStandalone:function(){return this.isStandaloneComposeWindow()||this.isStandaloneThreadWindow()},isStandaloneComposeWindow:function(){return document.body.classList.contains("xE")&&document.body.classList.contains("xp")},isStandaloneThreadWindow:function(){return document.body.classList.contains("aAU")&&document.body.classList.contains("xE")&&document.body.classList.contains("Su")},getComposeWindowContainer:function(){return document.querySelector(".dw .nH > .nH > .no")},getFullscreenComposeWindowContainerStream:function(){if(!document.body)throw new Error;return(0,l.default)(document.body).filter(function(e){return e.el.classList.contains("aSs")}).flatMap(function(e){var t=e.el,r=e.removalStream;return(0,l.default)(t).takeUntilBy(r)}).filter(function(e){return e.el.classList.contains("aSt")}).take(1).map(function(e){return{el:e.el,removalStream:s.never()}}).toProperty()},getFullscreenComposeWindowContainer:function(){return document.querySelector(".aSs .aSt")},getContentSectionElement:function(){var e=f.getLeftNavContainerElement();return e?e.nextElementSibling.children[0]:void 0},getMainContentContainer:function(){return document.querySelector("div.aeF > div.nH")},getScrollContainer:function(){return document.querySelector("div.Tm.aeJ")},getMoleParent:function(){return document.body.querySelector(".dw .nH > .nH > .no")},isPreviewPane:function(){return!!document.querySelector(".aia")},getRowListElements:function(){return(0,o.default)(document.querySelectorAll("[gh=tl]"))},getSearchInput:function(){var e=document.getElementById("gbqfq"),t=document.querySelector("form[role=search] input");return e||t},getSearchSuggestionsBoxParent:function(){return document.querySelector("table.gstl_50 > tbody > tr > td.gssb_e")},getToolbarElement:function(){return(0,u.default)(document,"[gh=tm]")},getThreadContainerElement:function(){return document.querySelector("[role=main] .g.id table.Bs > tr")},getThreadBackButton:function(){var e;try{e=f.getToolbarElement()}catch(e){return null}return e.querySelector(".lS")},getSidebarContainerElement:function(){return document.querySelector("[role=main] table.Bs > tr .y3")},getComposeButton:function(){return document.querySelector("[gh=cm]")},getLeftNavContainerElement:function(){return document.querySelector(".aeN")},getAddonSidebarContainerElement:function(){return document.querySelector(".no > .nn.bnl")},getCompanionSidebarContentContainerElement:function(){return document.querySelector(".brC-brG")},getCompanionSidebarIconContainerElement:function(){return document.querySelector(".brC-aT5-aOt-Jw")},getMainContentBodyContainerElement:function(){return document.querySelector(".no > .nn.bkK")},getGtalkButtons:function(){return document.querySelector(".aeN .aj5.J-KU-Jg")},getNavItemMenuInjectionContainer:function(){return document.querySelector(".aeN .n3")},getActiveMoreMenu:function(){for(var e=document.querySelectorAll(".J-M.aX0.aYO.jQjAxd"),t=0;t<e.length;t++)if("none"!==e[t].style.display)return e[t];return null},getTopAccountContainer:function(){if(this.isUsingMaterialUI())return document.querySelector('header[role="banner"] > div:nth-child(2) > div:nth-child(2)');var e=document.getElementById("gbsfw");return e?e.parentElement.parentElement:null},isGplusEnabled:function(){var e=f.getTopAccountContainer();return!!e&&0===e.querySelectorAll('a[href*="https://plus"][href*="upgrade"]').length},isUsingMaterialUI:function(){var e=document.head.getAttribute("data-inboxsdk-using-material-ui");if(null==e)throw new Error("Failed to read value");return"true"===e},StandaloneCompose:{getComposeWindowContainer:function(){return document.querySelector("[role=main]")}}},p=f;r.default=p},{"../../lib/dom/make-element-child-stream":812,"../../lib/dom/querySelectorOrFail":821,"./gmail-element-getter/get-main-content-element-changed-stream":656,"./gmail-element-getter/wait-for-gmail-mode-to-settle":657,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301,"lodash/once":489}],656:[function(e,t,r){"use strict";function n(e){var t=i(e).flatMap(function(e){return(0,f.default)(e).map(function(e){return e.el}).filter(function(e){return e.classList.contains("nH")}).flatMap(function(e){return(0,d.default)(e,{attributes:!0,attributeFilter:["style"]}).map(function(e){return(0,l.default)(e)}).toProperty(function(){return{target:e}}).filter(o).map(function(e){return e.target})})}).toProperty();return t.onValue(function(){}),t}function i(e){return e.isStandaloneComposeWindow()?u.never():(0,c.default)(function(){return e.getMainContentContainer()})}function o(e){return"none"!==e.target.style.display}var a=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var l=s(e("lodash/last")),u=a(e("kefir")),c=s(e("../../../lib/stream-wait-for")),d=s(e("../../../lib/dom/make-mutation-observer-chunked-stream")),f=s(e("../../../lib/dom/make-element-child-stream"))},{"../../../lib/dom/make-element-child-stream":812,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/stream-wait-for":853,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301,"lodash/last":484}],657:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("lodash/once")),o=n(e("../../../lib/dom/make-mutation-observer-chunked-stream")),a=(0,i.default)(function(){return(0,o.default)(document.body,{attributes:!0,attributeFilter:["class"]}).toProperty(function(){}).filter(function(){return document.body.classList.length>0}).map(function(){}).take(1).toProperty()}),s=a;r.default=s},{"../../../lib/dom/make-mutation-observer-chunked-stream":815,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/once":489}],658:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/json/stringify")),o=n(e("@babel/runtime-corejs2/core-js/promise")),a=n(e("@babel/runtime-corejs2/helpers/slicedToArray")),s=n(e("@babel/runtime-corejs2/regenerator")),l=n(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=n(e("@babel/runtime-corejs2/helpers/createClass")),d=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),f=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),p=n(e("@babel/runtime-corejs2/helpers/inherits")),h=n(e("../../lib/common-page-communicator")),m=n(e("../../lib/dom/make-mutation-observer-chunked-stream")),b=n(e("kefir")),_=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,(0,f.default)(t).apply(this,arguments))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"getMessageDate",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(t,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getMessageData(t,r,"data-inboxsdk-sortdate","inboxSDKtellMeThisMessageDate"));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getMessageRecipients",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(t,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getMessageData(t,r,"data-inboxsdk-recipients","inboxSDKtellMeThisMessageRecipients"));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"_getMessageData",value:function(){function e(e,r,n,i){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(t,r,n,i){var l,u,c,d,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r.getAttribute(n)){e.next=19;break}if(!this.isUsingSyncAPI()){e.next=8;break}return e.next=5,o.default.all([this.getBtaiHeader(),this.getXsrfToken()]);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[null,null];case 9:if(u=e.t0,c=(0,a.default)(u,2),d=c[0],f=c[1],r.dispatchEvent(new CustomEvent(i,{bubbles:!0,cancelable:!1,detail:{threadId:t,ikValue:this.getIkValue(),btaiHeader:d,xsrfToken:f}})),l=r.getAttribute(n)){e.next=19;break}return e.next=18,(0,m.default)(r,{attributes:!0,attributeFilter:[n]}).take(1).toPromise();case 18:l=r.getAttribute(n);case 19:if(!l||"error"===l){e.next=23;break}return e.abrupt("return",JSON.parse(l));case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}},e,this)}));return e}()},{key:"getThreadIdForThreadRowByDatabase",value:function(e){var t=e.getAttribute("data-inboxsdk-threadid");return t||(e.dispatchEvent(new CustomEvent("inboxSDKtellMeThisThreadIdByDatabase",{bubbles:!0,cancelable:!1,detail:null})),t=e.getAttribute("data-inboxsdk-threadid")),t}},{key:"getThreadIdForThreadRowByClick",value:function(e){var t=e.getAttribute("data-inboxsdk-threadid");return t||(e.dispatchEvent(new CustomEvent("inboxSDKtellMeThisThreadIdByClick",{bubbles:!0,cancelable:!1,detail:null})),t=e.getAttribute("data-inboxsdk-threadid")),t}},{key:"getCurrentThreadID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.dispatchEvent(new CustomEvent("inboxSDKtellMeCurrentThreadId",{bubbles:!0,cancelable:!1,detail:{isPreviewedThread:t}}));var r=e.getAttribute("data-inboxsdk-currentthreadid");if(null==r)throw new Error("Failed to read value");return r}},{key:"getUserOriginalPreviewPaneMode",value:function(){return document.head.getAttribute("data-inboxsdk-user-preview-pane-mode")}},{key:"getActionTokenValue",value:function(){var e=document.head.getAttribute("data-inboxsdk-action-token-value");if(null==e)throw new Error("Failed to read value");return e}},{key:"isUsingSyncAPI",value:function(){var e=document.head.getAttribute("data-inboxsdk-using-sync-api");if(null==e)throw new Error("Failed to read value");return"true"===e}},{key:"isConversationViewDisabled",value:function(){return new o.default(function(e){b.default.fromEvents(document,"inboxSDKgmonkeyResponse").take(1).onValue(function(t){e(t.detail)}),document.dispatchEvent(new CustomEvent("inboxSDKtellMeIsConversationViewDisabled",{bubbles:!1,cancelable:!1,detail:null}))})}},{key:"registerSuggestionsModifier",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKregisterSuggestionsModifier",{bubbles:!1,cancelable:!1,detail:{providerID:e}}))}},{key:"provideAutocompleteSuggestions",value:function(e,t,r){document.dispatchEvent(new CustomEvent("inboxSDKprovideSuggestions",{bubbles:!1,cancelable:!1,detail:{providerID:e,query:t,suggestions:JSON.parse((0,i.default)(r))}}))}},{key:"setupCustomListResultsQuery",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKcustomListRegisterQuery",{bubbles:!1,cancelable:!1,detail:{query:e}}))}},{key:"setCustomListNewQuery",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKcustomListNewQuery",{bubbles:!1,cancelable:!1,detail:e}))}},{key:"setCustomListResults",value:function(e,t){document.dispatchEvent(new CustomEvent("inboxSDKcustomListResults",{bubbles:!1,cancelable:!1,detail:{query:e,newResults:t}}))}},{key:"createCustomSearchTerm",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKcreateCustomSearchTerm",{bubbles:!1,cancelable:!1,detail:{term:e}}))}},{key:"setSearchQueryReplacement",value:function(e,t){document.dispatchEvent(new CustomEvent("inboxSDKsearchReplacementReady",{bubbles:!1,cancelable:!1,detail:{query:e,newQuery:t}}))}},{key:"registerComposeRequestModifier",value:function(e,t){var r=(new Date).getTime()+"_"+t+"_"+Math.random(),n={modifierId:r};return this.isUsingSyncAPI()?n.draftID=e:n.composeid=e,document.dispatchEvent(new CustomEvent("inboxSDKregisterComposeRequestModifier",{detail:n,bubbles:!1,cancelable:!1})),r}},{key:"unregisterComposeRequestModifier",value:function(e,t){document.dispatchEvent(new CustomEvent("inboxSDKunregisterComposeRequestModifier",{detail:{keyId:e,modifierId:t},bubbles:!1,cancelable:!1}))}},{key:"modifyComposeRequest",value:function(e,t,r){var n={modifierId:t,composeParams:r};this.isUsingSyncAPI()?n.draftID=e:n.composeid=e,document.dispatchEvent(new CustomEvent("inboxSDKcomposeRequestModified",{detail:n,bubbles:!1,cancelable:!1}))}}]),t}(h.default);r.default=_},{"../../lib/common-page-communicator":800,"../../lib/dom/make-mutation-observer-chunked-stream":815,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,"@babel/runtime-corejs2/helpers/slicedToArray":54,"@babel/runtime-corejs2/regenerator":59,kefir:301}],659:[function(e,t,r){"use strict";function n(e){var t=c(e).value,r=i(t),n=o(t)||r;if(!r||!n)throw new Error("Failed to read email response");return{threadID:n,messageID:r}}function i(e){var t=S(e,"a",function(e){return e.length>3&&(0,O.default)(e[3])&&e[3].length>0});return t?t[3][0]:null}function o(e){var t=S(e,"csd",function(e){return 3==e.length&&(0,O.default)(e[2])&&e[2].length>5});return t?t[1]:null}function a(e){var t=c(e).value,r=S(t,"cs",function(e){return"cs"===e[0]&&e.length>20});return r?r[1]:null}function s(e){for(var t=0,r=[];;){var n=l(e,t);if(n<0){r.push(e.substr(t));break}if(r.push(e.substr(t,n-t)),r.push('"'),t=n+1,'"'===e[n]){var i=u(e,t,'"');if(i<0)throw new Error("Unclosed double quote");r.push(e.slice(t,i+1)),t=i+1}else{var o=u(e,t,"'");if(o<0)throw new Error("Unclosed single quote");var a=e.slice(t,o).replace(/"/g,'\\"').replace(/\\'/g,"'");r.push(a),r.push('"'),t=o+1}}return r.join("")}function l(e,t){for(var r=t,n=e.length;r<n;r++)if('"'===e[r]||"'"===e[r])return r;return-1}function u(e,t,r){for(var n=t,i=e.length;n<i;n++)if("\\"===e[n])n++;else if(e[n]===r)return n;return-1}function c(e){var t,r={includeLengths:!1,suggestionMode:/^5\n/.test(e),noArrayNewLines:!/^[,\]]/m.test(e),includeExplicitNulls:!0},n=[];if(r.suggestionMode){if(-1===(t=e.indexOf("'\n")))throw new Error("Message was missing beginning header");t+=2}else{if(-1===(t=e.indexOf("\n\n")))throw new Error("Message was missing beginning newlines");t+=2}for(;t<e.length;){var i=e.indexOf("\n",t+1);-1===i?i=e.length:"\r"===e[i-1]&&(i+=1);var o=e.slice(t,i),a=void 0;if(/^\d+\s*$/.test(o)){r.includeLengths=!0;var s=+o;a=e.slice(i,i+s),t=i+s}else a=e.slice(t),t=e.length;n.push(f(a))}return{value:n,options:r}}function d(e,t){for(var r,n=[],i=0,o=!1;-1!==(r=u(e,i,'"'));)o?n.push(e.slice(i,r+1)):n.push(t(e.slice(i,r+1))),i=r+1,o=!o;if(o)throw new Error("string ended inside quoted section");return n.push(t(e.slice(i))),n.join("")}function f(e){e=e.replace(/[\r\n\t]/g,""),e=s(e),e=d(e,function(e){return e.replace(/,\s*(?=,|\])/g,",null").replace(/\[\s*(?=,)/g,"[null")});try{return JSON.parse(e,function(e,t){return null==t?void 0:t})}catch(e){throw new Error("deserialization error")}}function p(e,t){return t.suggestionMode?((0,q.default)(t.includeLengths),m(e,t.includeExplicitNulls)):h(e,t)}function h(e,t){for(var r=t.includeLengths,n=t.noArrayNewLines,i=t.includeExplicitNulls,o=")]}'\n"+(n&&r?"":"\n"),a=0;a<e.length;a++){var s=e[a],l=b(s,n,i);if(r){var u=l.length+(n?2:1);o+=(n?"\n":"")+u+"\n"+l}else o+=l}if(!r)if(n)o=o.replace(/"([0-9a-f]{8,16})"\]$/,"'$1']");else{var c=o.split(/\r|\n/),d=c.slice(0,-3),f=c.slice(-3);o=d.join("\n"),o+="\n"+f[0]+f[1].replace(/"/g,"'")}return o+(n&&r?"\n":"")}function m(e,t){for(var r="5\n)]}'\n",n=0;n<e.length;n++){var i=e[n],o=b(i,!1,t);r+=o.length+"\r\n"+o}return r}function b(e,t,r){for(var n="[",i=0;i<e.length;i++){var o=e[i],a=void 0;a=(0,O.default)(o)?b(o,t,r):null==o?r?"null":"":(0,L.default)(o).replace(/</gim,"\\u003c").replace(/=/gim,"\\u003d").replace(/>/gim,"\\u003e").replace(/&/gim,"\\u0026"),i>0&&(n+=","),n+=a}return n+="]"+(t?"":"\n")}function _(e,t){var r=c(e).value,n=N.default.toArray(r,N.default.compose(N.default.cat,N.default.filter(O.default),N.default.cat,N.default.filter(function(e){return"ms"===e[0]&&e[1]===t}),N.default.take(1),N.default.map(function(e){return e[60]})))[0];if(n){var i=n.match(/^msg-[^:]:(\S+)$/i);return i&&i[1]}return null}function v(e,t,r){var n=r.start,i=r.total,o=c(e),a=o.value,s=o.options,l=1===a.length&&2===a[0].length&&"string"==typeof a[0][1],u=l?a[0][0].map(function(e){return[e]}):a,d=[],f=[],h=[],m=[],b=!1;u.forEach(function(e){var t=!1,r=[],n=[];e.forEach(function(e){if(i&&"ti"===e[0])if("number"==typeof i)e[2]=e[10]=i;else if("MANY"===i){e[2]=e[10]=1e5,e[3]=1;var o=e[5];e[6]?e[6][0]=[o,1]:console.error("replaceThreadsInResponse(): Missing item[6]")}"tb"===e[0]?(b=t=!0,r.length&&(h=r),m=n):b?n.push(e):r.push(e)}),t||(b?f.push(n):d.push(r))});var _=E(t,n);h.length&&(_[0]=h.concat(_[0]||[])),m.length&&(_.length?_[_.length-1]=_[_.length-1].concat(m):_.push(m));var v=(0,P.default)([d,_,f]),g=(0,P.default)(v),y=(0,V.default)(g);if("e"!==y[0])throw new Error("Failed to find end section");return y[1]=g.length,p(l?[[(0,P.default)(v),a[0][1]]]:v,s)}function g(e){return y(c(e).value)}function y(e){return 1===e.length&&2===e[0].length&&"string"==typeof e[0][1]&&(e=[e[0][0]]),j(e).map(function(e){return(0,R.default)((0,M.default)({subject:(0,U.default)(e[9]),shortDate:(0,U.default)(e[14]),timeString:(0,U.default)(e[15]),peopleHtml:k(e[7]),timestamp:e[16]/1e3,isUnread:e[9].indexOf("<b>")>-1,lastEmailAddress:e[28],bodyPreviewHtml:e[10],someGmailMessageIds:[e[1],e[2]],gmailThreadId:e[0]},"_originalGmailFormat",{value:e}))})}function w(e){var t=c(e),r=t.value;return N.default.toObj(r,F)}function k(e){return e.replace(/^[^<]*/,"").replace(/(<span[^>]*) class="[^"]*"/g,"$1")}function j(e){return N.default.toArray(e,H)}function x(e){var t=c(e),r=t.value;1===r.length&&(r=r[0]);var n=N.default.toArray(r,z),i=N.default.toArray(r,W),o={};return i.forEach(function(e){o[e.messageID]=e}),n.map(function(e){return{threadID:e.threadID,messages:e.messageIDs.map(function(e){return o[e]})}})}function E(e,t){var r=N.default.compose(N.default.map(function(e){return e._originalGmailFormat}),N.default.partition(10),(0,B.default)(function(e,r){return[["tb",t+10*r,e]]}));return N.default.toArray(e,r)}function S(e,t,r){for(var n=C(e,t,100),i=0;i<n.length;i++){var o=n[i].path.slice(0,-1),a=I(e,o);if(r(a))return a}}function C(e,t,r){for(var n=[],i={el:e,path:[]},o=[i];o.length>0;){var a=o.pop();if(a.path.length<=r)if(null!==a.el&&"object"===(0,D.default)(a.el))for(var s=(0,A.default)(a.el),l=0;l<s.length;l++){var u=s[l],c={el:a.el[u],path:a.path.concat([u])};o.push(c)}else a.el===t&&n.push(a)}return n}function I(e,t){for(var r=e,n=0;n<t.length;n++)r=r[t[n]];return r}var T=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.interpretSentEmailResponse=n,r.extractGmailMessageIdFromSentEmail=i,r.extractGmailThreadIdFromSentEmail=o,r.extractGmailThreadIdFromMessageIdSearch=a,r.rewriteSingleQuotes=s,r.deserialize=c,r.deserializeArray=f,r.serialize=p,r.readDraftId=_,r.replaceThreadsInResponse=v,r.extractThreads=g,r.extractThreadsFromDeserialized=y,r.extractMessageIdsFromThreadBatchRequest=w,r.cleanupPeopleLine=k,r.extractMessages=x;var A=T(e("@babel/runtime-corejs2/core-js/object/keys")),D=T(e("@babel/runtime-corejs2/helpers/typeof")),M=T(e("@babel/runtime-corejs2/core-js/object/define-property")),R=T(e("@babel/runtime-corejs2/core-js/object/freeze")),L=T(e("@babel/runtime-corejs2/core-js/json/stringify")),O=T(e("@babel/runtime-corejs2/core-js/array/is-array")),P=T(e("lodash/flatten")),V=T(e("lodash/last")),N=T(e("transducers.js")),B=T(e("map-indexed-xf")),q=T(e("assert")),U=T(e("../../../common/html-to-text")),F=N.default.compose(N.default.cat,N.default.cat,N.default.filter(function(e){return"cs"===e[0]}),N.default.map(function(e){return[e[1],e[2]]})),H=N.default.compose(N.default.cat,N.default.filter(function(e){return"tb"===e[0]}),N.default.map(function(e){return e[2]}),N.default.cat),z=N.default.compose(N.default.cat,N.default.filter(function(e){return"cs"===e[0]}),N.default.map(function(e){return{threadID:e[1],messageIDs:e[8]}})),W=N.default.compose(N.default.cat,N.default.filter(function(e){return"ms"===e[0]}),N.default.map(function(e){return{messageID:e[1],date:e[7]}}))},{"../../../common/html-to-text":614,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/typeof":58,assert:79,"lodash/flatten":462,"lodash/last":484,"map-indexed-xf":506,"transducers.js":595}],660:[function(e,t,r){"use strict";function n(e){var t=JSON.parse(e),r=t&&t[3];return r?r.map(function(e,r){var n=e[1];return n?{subject:n[1],snippet:n[2],syncThreadID:n[4],oldGmailThreadID:null!=n[18]?new d.default(n[18]).toString(16):n[20],rawResponse:e,extraMetaData:{snippet:t[15]&&t[15][1]&&t[15][1][r]||"",syncMessageData:n[5].map(function(e){return{syncMessageID:e[1],date:+e[7]}})}}:null}).filter(Boolean):[]}function i(e){var t=JSON.parse(e),r=t&&t[2];if(!r)throw new Error("Failed to process thread response");return r.map(function(e){if("string"!=typeof e[1]||!(0,c.default)(e[3])||e[2]&&e[2][1]&&e[2][1][14]&&(0,c.default)(e[2][2])){var t=e[2]&&e[2][1];if(!t)return null;var r,n=(0,c.default)(e[3])&&e[3];if(n)r=n.map(function(e){return{syncMessageID:e[1],date:+e[2][17],recipients:o(e)}});else{r=(e[2]&&e[2][2]).map(function(e){return{syncMessageId:e[1],date:+e[16]}})}return{subject:t[2],snippet:t[3],syncThreadID:t[1],oldGmailThreadID:new d.default(t[14]).toString(16),rawResponse:e,extraMetaData:{syncMessageData:r,snippet:""}}}return{syncThreadID:e[1],oldGmailThreadID:e[2]&&e[2][1]&&e[2][1][16]||void 0,extraMetaData:{snippet:e[2]&&e[2][1]&&e[2][1][3]||void 0,syncMessageData:(e[3]||[]).filter(function(e){return Boolean(e[2])}).map(function(e){return{syncMessageID:e[1],date:+e[2][17],recipients:o(e)}})}}}).filter(Boolean)}function o(e){if(e[2]){var t=e[2][1]||[],r=e[2][2]||[],n=e[2][3]||[];return t.concat(r).concat(n).map(function(e){return{emailAddress:e[2],name:e[3]}})}}function a(e,t,r){var n=(r.start,r.total,JSON.parse(e));return(n[3]||t.length)&&(n[3]=t.map(function(e,t){var r=e.rawResponse;return(0,u.default)({},r,{2:t})})),(n[15]||t.length)&&(n[15]=(0,u.default)({},n[15],{1:t.map(function(e){return e.extraMetaData.snippet}),2:t.map(function(e){return e.extraMetaData.syncMessageData.map(function(e){return e.syncMessageID})})})),(0,l.default)(n)}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.extractThreadsFromSearchResponse=n,r.extractThreadsFromThreadResponse=i,r.replaceThreadsInSearchResponse=a;var l=s(e("@babel/runtime-corejs2/core-js/json/stringify")),u=s(e("@babel/runtime-corejs2/helpers/objectSpread")),c=s(e("@babel/runtime-corejs2/core-js/array/is-array")),d=s(e("bignumber.js"))},{"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"bignumber.js":92}],661:[function(e,t,r){"use strict";function n(){var e=new s.default,t=e.ajaxInterceptStream,r=(0,l.default)().then(function(){return e});return{xhrInterceptStream:o.default.merge([t.filter(function(e){return"emailSending"===e.type}).map(function(e){if(e.draftID)return e;var t=(0,a.parse)(e.body);return{type:"emailSending",composeId:t.composeid,draft:t.draft}}),t.filter(function(e){return"emailSent"===e.type}).map(function(e){if(e.draftID)return e;var t=(0,a.parse)(e.originalSendBody),r=e.responseText;return{type:"emailSent",composeId:t.composeid,draft:t.draft,response:r}}),t.filter(function(e){return"emailDraftSaveSending"===e.type}).map(function(e){if(e.draftID)return e;var t=(0,a.parse)(e.body);return{type:"emailDraftSaveSending",composeId:t.composeid,draft:t.draft}}),t.filter(function(e){return"emailDraftReceived"===e.type}).map(function(e){if(e.draftID)return e;var t=(0,a.parse)(e.originalSendBody),r=e.responseText;return{type:"emailDraftReceived",composeId:t.composeid,draft:t.draft,response:r,connectionDetails:e.connectionDetails}})]),pageCommunicatorPromise:r}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("kefir")),a=e("querystring"),s=i(e("./gmail-page-communicator")),l=i(e("../../lib/inject-script"))},{"../../lib/inject-script":838,"./gmail-page-communicator":658,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,querystring:549}],662:[function(e,t,r){(function(n){"use strict";var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=i(e("ud-kefir")),c=i(e("kefir")),d=i(e("kefir-stopper")),f=i(e("./primary")),p=i(e("../../../../driver-common/sidebar/ContentPanelViewDriver")),h=(0,u.default)(t,null),m=function(){function e(t,r){var n=this;(0,o.default)(this,e),(0,s.default)(this,"_stopper",(0,d.default)()),(0,s.default)(this,"_driver",void 0),(0,s.default)(this,"_instanceId",void 0),this._driver=t;var i=r.getAttribute("data-sdk-sidebar-instance-id");if(null!=i)this._instanceId=i;else{var a=new f.default(t,r);this._instanceId=a.getInstanceId(),h.changes().onValue(function(){a.destroy(),a=new f.default(t,r),n._instanceId=a.getInstanceId()})}}return(0,a.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}},{key:"_getShouldThreadAppSidebarOpen",value:function(){return"false"!==n.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open")}},{key:"_setShouldThreadAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_getShouldGlobalAppSidebarOpen",value:function(){return"true"===n.localStorage.getItem("inboxsdk__global_app_sidebar_should_open")}},{key:"_setShouldGlobalAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__global_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"addThreadSidebarContentPanel",value:function(e,t){var r=new p.default(this._driver,e,this._instanceId);return c.default.merge([t.getStopper(),this._stopper]).take(1).takeUntilBy(r.getStopper()).onValue(function(){return r.remove()}),r}},{key:"addGlobalSidebarContentPanel",value:function(e){var t=new p.default(this._driver,e,this._instanceId,!0);return this._stopper.takeUntilBy(t.getStopper()).onValue(function(){return t.remove()}),t}}]),e}(),b=(0,l.defn)(t,m);r.default=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../driver-common/sidebar/ContentPanelViewDriver":794,"./primary":666,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300,ud:597,"ud-kefir":596}],663:[function(e,t,r){"use strict";function n(e,t,r){var n=r.querySelector(a);if(!n)return void e.error(new Error("addCompanionGlobalIconArea: no sidebarIconArea"));var i=n.firstElementChild;if(!i)return void e.error(new Error("addCompanionGlobalIconArea: no nativeIconArea"));i.insertAdjacentElement("beforebegin",t)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=e("ud"),a=(i(e("../../../../../lib/dom/querySelectorOrFail")),".brC-aT5-aOt-bsf-Jw"),s=(0,o.defn)(t,n);r.default=s},{"../../../../../lib/dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,ud:597}],664:[function(e,t,r){"use strict";function n(e,t,r){var n=r.querySelector(a);if(!n)return void e.error(new Error("addCompanionThreadIconArea: no tablist"));var i=r.querySelector("[role=separator]");if(i){if(!i.parentElement)throw new Error;i.parentElement.insertBefore(t,i.nextElementSibling)}else e.error(new Error("addCompanionThreadIconArea: failed to find separator")),n.insertAdjacentElement("beforebegin",t)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=e("ud"),a=(i(e("kefir")),i(e("../../../../../lib/dom/make-mutation-observer-chunked-stream")),i(e("../../../../../lib/dom/querySelectorOrFail")),"[role=tablist],.J-KU-Jg"),s=(0,o.defn)(t,n);r.default=s},{"../../../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../../../lib/dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,ud:597}],665:[function(e,t,r){"use strict";function n(e,t,r,n){(0,o.default)(n.querySelectorAll("[data-app-name]")).forEach(function(t){var r=t.getAttribute("data-app-name"),n=(0,s.default)(e.getOrderedItems(),function(e){return e.value.appName===r});t.setAttribute("data-order-hint",n)});var i=(0,s.default)(e.getOrderedItems(),function(e){return e.value.appName===t});i>-1&&r.setAttribute("data-order-hint",i),(0,l.default)(n,r,["data-order-hint"])}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/toConsumableArray")),a=e("ud"),s=i(e("lodash/findIndex")),l=i(e("../../../../../lib/dom/insert-element-in-order")),u=(0,a.defn)(t,n);r.default=u},{"../../../../../lib/dom/insert-element-in-order":809,"@babel/runtime-corejs2/core-js/object/define-property":14,
"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/toConsumableArray":57,"lodash/findIndex":459,ud:597}],666:[function(e,t,r){(function(n){"use strict";function i(){var e=(0,a.default)(['\n          <button class="inboxsdk__button_icon ','" type="button" data-tooltip="','">\n            <img class="inboxsdk__button_iconImg" src="','">\n          </button>\n          <div class="inboxsdk__button_selectedIndicator"></div>\n        ']);return i=function(){return e},e}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),s=o(e("@babel/runtime-corejs2/core-js/promise")),l=o(e("@babel/runtime-corejs2/core-js/array/from")),u=o(e("@babel/runtime-corejs2/core-js/json/stringify")),c=o(e("@babel/runtime-corejs2/core-js/set")),d=o(e("@babel/runtime-corejs2/core-js/map")),f=o(e("@babel/runtime-corejs2/core-js/date/now")),p=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),h=o(e("@babel/runtime-corejs2/helpers/createClass")),m=o(e("@babel/runtime-corejs2/helpers/defineProperty")),b=(o(e("lodash/find")),o(e("lodash/findIndex"))),_=e("ud"),v=o(e("auto-html")),g=o(e("asap")),y=o(e("kefir")),w=o(e("kefir-bus")),k=o(e("kefir-stopper")),j=o(e("order-manager")),x=o(e("react")),E=o(e("react-dom")),S=o(e("../../../../../driver-common/sidebar/AppSidebar")),C=o(e("../../../gmail-element-getter")),I=o(e("../../../../../lib/idMap")),T=o(e("../../../../../lib/incrementName")),A=o(e("../../../../../lib/dom/querySelectorOrFail")),D=o(e("../../../../../lib/dom/make-mutation-observer-chunked-stream")),M=(o(e("../../../../../lib/dom/make-element-child-stream")),e("../../../../../lib/dom/simulate-mouse-event")),R=o(e("../../../../../lib/fake-window-resize")),L=o(e("./add-companion-thread-icon-area")),O=o(e("./add-companion-global-icon-area")),P=o(e("./add-to-icon-area")),V=function(){function e(t,r){var i=this;(0,p.default)(this,e),(0,m.default)(this,"_stopper",(0,k.default)()),(0,m.default)(this,"_driver",void 0),(0,m.default)(this,"_instanceId","".concat((0,f.default)(),"-").concat(Math.random())),(0,m.default)(this,"_companionSidebarContentContainerEl",void 0),(0,m.default)(this,"_instanceIdsToDescriptors",new d.default),(0,m.default)(this,"_threadSidebarComponent",null),(0,m.default)(this,"_threadIconArea",null),(0,m.default)(this,"_globalIconArea",null),(0,m.default)(this,"_globalButtonContainers",new d.default),(0,m.default)(this,"_threadButtonContainers",new d.default),(0,m.default)(this,"_contentContainers",new d.default),(0,m.default)(this,"_threadSidebarContainerEl",null),(0,m.default)(this,"_companionSidebarOuterWrapper",void 0),(0,m.default)(this,"_currentIds",new c.default),(0,m.default)(this,"_orderManager",new j.default({get:function(){try{return JSON.parse(n.localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch(e){console.error("failed to read sidebar order data",e)}},set:function(e){try{n.localStorage.setItem("inboxsdk__sidebar_ordering",(0,u.default)(e))}catch(e){console.error("failed to set sidebar order data",e)}}})),(0,m.default)(this,"_containerProp",void 0),(0,m.default)(this,"_updateHighlightedAppThreadIconBus",(0,w.default)()),(0,m.default)(this,"_appSidebarRefSetter",function(e){e&&(i._threadSidebarComponent=e)}),(0,m.default)(this,"_closeButton",null),this._driver=t,this._companionSidebarContentContainerEl=r,this._setupElement()}return(0,h.default)(e,[{key:"getInstanceId",value:function(){return this._instanceId}},{key:"destroy",value:function(){this._stopper.destroy()}},{key:"_getShouldGlobalAppSidebarOpen",value:function(){return"true"===n.localStorage.getItem("inboxsdk__global_app_sidebar_should_open")}},{key:"_setShouldGlobalAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__global_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_getShouldThreadAppSidebarOpen",value:function(){return"false"!==n.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open")}},{key:"_setShouldThreadAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_createThreadSidebarIfNeeded",value:function(){var e=this;if(this._threadSidebarContainerEl)return this._threadSidebarContainerEl;var t=this._threadSidebarContainerEl=document.createElement("div");return t.classList.add("thread_app_sidebar",(0,I.default)("app_sidebar_container"),"addon_sidebar"),this._companionSidebarContentContainerEl.insertBefore(t,this._companionSidebarContentContainerEl.firstElementChild),this._containerProp=function(){return t},this._updateHighlightedAppThreadIconBus.bufferWithTimeOrCount(150,100).filter(function(e){return e.length>0}).takeUntilBy(this._stopper).onValue(function(){var r=t.getBoundingClientRect(),n=(0,l.default)(t.querySelectorAll(".".concat((0,I.default)("app_sidebar_content_panel"),".").concat((0,I.default)("expanded")," .").concat((0,I.default)("app_sidebar_content_panel_top_line")))),i=t.scrollTop,o=i+r.height/2,a=n.find(function(e){var t=e.getBoundingClientRect(),r=t.bottom,n=r+i;return n>i&&n<o});if(!a){for(var s,u=0;u<n.length;u++){var c=n[u],d=c.getBoundingClientRect(),f=d.bottom;if(f<0)s=c;else if(f>0)break}a=s}if(a){var p=(a.getAttribute("data-instance-id"),a.getAttribute("data-app-name"));if(!p)return;var h=e._threadButtonContainers.get(p);if(!h||!e._threadIconArea)return;var m=e._threadIconArea.querySelector(".sidebar_button_container_active");m&&m.classList.remove("sidebar_button_container_active"),h.classList.add("sidebar_button_container_active")}}),this._updateHighlightedAppThreadIconBus.plug(y.default.fromEvents(t,"scroll").map(function(){return null})),this._renderThreadSidebar(),t}},{key:"_renderThreadSidebarIfPresent",value:function(){this._threadSidebarContainerEl&&this._renderThreadSidebar()}},{key:"_renderThreadSidebar",value:function(){var e=this,t=this._threadSidebarContainerEl;if(!t)throw new Error("_renderThreadSidebar should not be called when _threadSidebarContainerEl is unset");return new s.default(function(r){E.default.render(x.default.createElement(S.default,{ref:e._appSidebarRefSetter,panels:e._orderManager.getOrderedItems().map(function(e){return e.value}),onMoveEnd:function(t,r,n,i){e._orderManager.moveItem(n,i),e._renderThreadSidebar()},onExpandedToggle:function(){e._updateHighlightedAppThreadIconBus.emit(null)},container:e._containerProp}),t,function(){if(!e._threadSidebarComponent)throw new Error("Should not happen");r(e._threadSidebarComponent),e._updateHighlightedAppThreadIconBus.emit(null)})})}},{key:"_getActiveButtonContainer",value:function(){var e;return this._globalIconArea&&(e=this._globalIconArea.querySelector(".sidebar_button_container_active")),!e&&this._threadIconArea&&(e=this._threadIconArea.querySelector(".sidebar_button_container_active")),e}},{key:"_addButton",value:function(e,t,r){var n=this;(0,g.default)(function(){if(!e)throw new Error("should not happen");var o,a=t.detail.instanceId,s=r&&t.detail.iconUrl?t.detail.iconUrl:t.detail.appIconUrl,l=t.detail.appName,u=t.detail.iconClass||"",c=r?n._globalButtonContainers.get(l):n._threadButtonContainers.get(l);if(c){var d=Number(c.getAttribute("data-count"))||1;c.setAttribute("data-count",String(d+1)),o=c}else{o=document.createElement("div"),o.className=(0,I.default)("sidebar_button_container"),o.setAttribute("data-app-name",l),o.innerHTML=(0,v.default)(i(),u,l,s),t.detail.primaryColor&&((0,A.default)(o,".inboxsdk__button_selectedIndicator").style.backgroundColor=t.detail.primaryColor),r?n._globalButtonContainers.set(l,o):n._threadButtonContainers.set(l,o);var f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n._getActiveButtonContainer()===o){if(!n._closeButton)throw new Error;n._closeButton(!0)}else{if(n._closeButton&&n._closeButton(!0),r?n._setShouldGlobalAppSidebarOpen(!0):n._setShouldThreadAppSidebarOpen(!0),n._openSidebarAndActivateButton(o,r),r){var t=n._contentContainers.get(l);t&&(t.style.display=""),n._companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible"),document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:a}}))}else{var i=n._threadSidebarComponent;if(!i)throw new Error("sidebar not mounted");e||(i.openPanel(a),i.scrollPanelIntoView(a,!0))}n._closeButton=function(e){n._closeButton=null;var t=n._getActiveButtonContainer();if(!t)throw new Error("Expected activeButtonContainer");if(n._closeSidebarAndDeactivateButton(t),r){e&&n._setShouldGlobalAppSidebarOpen(!1);var i=n._contentContainers.get(l);i?i.style.display="none":n._driver.getLogger().error(new Error("Unexpected: contentEl not set")),document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated",{bubbles:!0,cancelable:!1,detail:{instanceId:a}}))}else e&&n._setShouldThreadAppSidebarOpen(!1);(0,R.default)()},(0,R.default)()}};(0,A.default)(o,"button").addEventListener("click",function(e){e.stopPropagation(),f()},!0),e&&(0,P.default)(n._orderManager,l,o,e);var p=n._getActiveButtonContainer();if(r){if(n._getShouldGlobalAppSidebarOpen()){var h=n._globalIconArea&&p&&n._globalIconArea.contains(p);h||f(!0)}}else if(n._getShouldThreadAppSidebarOpen()){var m=n._threadIconArea&&p&&n._threadIconArea.contains(p);m||f(!0)}}})}},{key:"_removeButton",value:function(e,t,r){var n=e.detail.appName,i=t.get(n);if(!r||!i)throw new Error("should not happen: tried to remove button without container or iconArea");var o=Number(i.getAttribute("data-count"));if(o<=1){if(i===r.querySelector(".sidebar_button_container_active")){if(!this._closeButton)throw new Error;this._closeButton(!1),this._companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible");var a=this._companionSidebarOuterWrapper.previousElementSibling;a&&a.classList.remove("companion_container_app_sidebar_visible")}i.remove(),t.delete(n)}else 2===o?i.removeAttribute("data-count"):i.setAttribute("data-count",String(o-1))}},{key:"_closeSidebarAndDeactivateButton",value:function(e){e.classList.remove("sidebar_button_container_active"),this._companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.add("brC-brG-btc"),this._companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible","companion_global_app_sidebar_visible");var t=this._companionSidebarOuterWrapper.previousElementSibling;t&&t.classList.remove("companion_container_app_sidebar_visible")}},{key:"_openSidebarAndActivateButton",value:function(e,t){var r=C.default.getCompanionSidebarIconContainerElement();if(!r)throw new Error("Could not find companion sidebar icon container element");if(this._getActiveButtonContainer())throw new Error("activeButtonContainer should not be true");var n=r.querySelector(".aT5-aOt-I-KO");n&&(0,M.simulateClick)(n),e.classList.add("sidebar_button_container_active"),this._companionSidebarOuterWrapper.classList.add("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.add("companion_app_sidebar_visible"),this._companionSidebarContentContainerEl.classList.remove("brC-brG-btc");var i=this._companionSidebarOuterWrapper.previousElementSibling;i&&i.classList.add("companion_container_app_sidebar_visible"),t&&this._companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible")}},{key:"_setupElement",value:function(){var e=this,t=C.default.getCompanionSidebarIconContainerElement();if(!t)throw new Error("Could not find companion sidebar icon container element");if(this._companionSidebarContentContainerEl.setAttribute("data-sdk-sidebar-instance-id",this._instanceId),this._companionSidebarOuterWrapper=this._companionSidebarContentContainerEl.classList.contains("bq9")?this._companionSidebarContentContainerEl:this._companionSidebarContentContainerEl.parentElement,!this._companionSidebarOuterWrapper)throw new Error("should not happen: failed to find companionSidebarOuterWrapper");var r=this._companionSidebarOuterWrapper.previousElementSibling;if(r&&r.classList.add((0,I.default)("companion_container_app_sidebar_in_use")),this._companionSidebarContentContainerEl.classList.add((0,I.default)("app_sidebar_in_use")),!document.body.querySelector("."+(0,I.default)("app_sidebar_waiting_platform"))){var n=document.createElement("div");n.className=(0,I.default)("app_sidebar_waiting_platform"),document.body.appendChild(n)}y.default.fromEvents(window,"storage").filter(function(e){return"inboxsdk__sidebar_ordering"===e.key}).takeUntilBy(this._stopper).onValue(function(){e._orderManager.reload(),e._renderThreadSidebarIfPresent()}),y.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(r){e._createThreadSidebarIfNeeded();for(var n=r.detail.id;e._currentIds.has(n);)n=(0,T.default)(n);e._currentIds.add(n);var i=r.detail.appName;e._orderManager.addItem({groupId:r.detail.appId,id:n,orderHint:r.detail.orderHint,value:{id:n,appName:i,appId:r.detail.appId,instanceId:r.detail.instanceId,title:r.detail.title,iconClass:r.detail.iconClass,iconUrl:r.detail.iconUrl,hideTitleBar:r.detail.hideTitleBar,el:r.target}}),e._renderThreadSidebar();var o=e._threadIconArea=t.querySelector(".sidebar_thread_iconArea");o||(o=e._threadIconArea=document.createElement("div"),o.className=(0,I.default)("sidebar_iconArea"),o.classList.add("sidebar_thread_iconArea"),(0,L.default)(e._driver.getLogger(),o,t)),e._addButton(o,r,!1)}),y.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._orderManager.getOrderedItems(),n=(0,b.default)(r,function(e){return e.value.instanceId===t.detail.instanceId});if(-1===n)throw new Error("should not happen: failed to find orderItem");e._orderManager.updateItemValueByIndex(n,{id:r[n].value.id,appId:t.detail.appId,appName:t.detail.appName||t.detail.title,instanceId:t.detail.instanceId,title:t.detail.title,iconClass:t.detail.iconClass,iconUrl:t.detail.iconUrl,hideTitleBar:t.detail.hideTitleBar,el:t.target}),e._renderThreadSidebar()}),y.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._orderManager.getOrderedItems(),n=(0,b.default)(r,function(e){return e.value.instanceId===t.detail.instanceId});if(-1===n)throw new Error("should not happen: failed to find orderItem");e._currentIds.delete(r[n].id),e._orderManager.removeItemByIndex(n),e._renderThreadSidebar(),e._removeButton(t,e._threadButtonContainers,e._threadIconArea)}),y.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){e._threadSidebarComponent&&e._threadSidebarComponent.scrollPanelIntoView(t.detail.instanceId)}),y.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){e._threadSidebarComponent&&e._threadSidebarComponent.closePanel(t.detail.instanceId)}),y.default.fromEvents(document.body,"inboxsdkSidebarPanelOpen").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){e._renderThreadSidebar().then(function(r){var n=e._instanceIdsToDescriptors.get(t.detail.instanceId);if(n){var i=e._threadButtonContainers.get(n.appName);if(!i)throw new Error("missing button container");e._getActiveButtonContainer()!==i&&(0,A.default)(i,"button").click()}})}),y.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(r){for(var n=r.detail.id;e._currentIds.has(n);)n=(0,T.default)(n);e._currentIds.add(n);var i=r.detail.appName,o=e._globalIconArea=t.querySelector(".sidebar_global_iconArea");o||(o=e._globalIconArea=document.createElement("div"),o.className=(0,I.default)("sidebar_iconArea"),o.classList.add("sidebar_global_iconArea"),(0,O.default)(e._driver.getLogger(),o,t));var a=document.createElement("div");a.classList.add("addon_sidebar",(0,I.default)("app_sidebar_container"),"global_app_sidebar"),e._companionSidebarContentContainerEl.insertAdjacentElement("afterbegin",a),e._contentContainers.set(i,a),a.appendChild(r.target),a.style.display="none",e._addButton(o,r,!0)}),y.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._globalButtonContainers.get(t.detail.appName);if(r){var n=t.detail.iconClass||"",i=t.detail.iconUrl||t.detail.appIconUrl;(0,A.default)(r,"img").setAttribute("src",i);(0,A.default)(r,"button").setAttribute("class","inboxsdk__button_icon ".concat(n))}}),y.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){e._currentIds.delete(t.detail.id),e._removeButton(t,e._globalButtonContainers,e._globalIconArea)}),y.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._instanceIdsToDescriptors.get(t.detail.instanceId);if(r){var n=e._globalButtonContainers.get(r.appName);if(n){if(e._getActiveButtonContainer()===n){if(!e._closeButton)throw new Error("Expected this._closeButton");e._closeButton(!0)}}}}),y.default.fromEvents(document.body,"inboxsdkSidebarPanelOpen").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._instanceIdsToDescriptors.get(t.detail.instanceId);if(r){var n=e._globalButtonContainers.get(r.appName);if(n){e._getActiveButtonContainer()!==n&&(0,A.default)(n,"button").click()}}}),y.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId}).takeUntilBy(this._stopper).onValue(function(t){e._instanceIdsToDescriptors.set(t.detail.instanceId,t.detail)}),y.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId}).takeUntilBy(this._stopper).onValue(function(t){e._instanceIdsToDescriptors.delete(t.detail.instanceId)}),y.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId}).takeUntilBy(this._stopper).onValue(function(t){e._instanceIdsToDescriptors.set(t.detail.instanceId,t.detail)});var i=this._companionSidebarContentContainerEl.children[0],o=this._companionSidebarContentContainerEl.children[1];y.default.merge([i,o].map(function(e){return(0,D.default)(e,{attributes:!0,attributeFilter:["style"]})})).filter(function(){return i.style.display!==o.style.display}).takeUntilBy(this._stopper).onValue(function(){var t=e._getActiveButtonContainer();t&&(0,A.default)(t,"button").click()})}}]),e}(),N=(0,_.defn)(t,V);r.default=N}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../../driver-common/sidebar/AppSidebar":793,"../../../../../lib/dom/make-element-child-stream":812,"../../../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../../../lib/dom/querySelectorOrFail":821,"../../../../../lib/dom/simulate-mouse-event":827,"../../../../../lib/fake-window-resize":830,"../../../../../lib/idMap":835,"../../../../../lib/incrementName":837,"../../../gmail-element-getter":655,"./add-companion-global-icon-area":663,"./add-companion-thread-icon-area":664,"./add-to-icon-area":665,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,asap:77,"auto-html":83,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/find":458,"lodash/findIndex":459,"order-manager":510,react:580,"react-dom":553,ud:597}],667:[function(e,t,r){"use strict";function n(e,t){var r=document.createElement("div");r.setAttribute("class","inboxsdk__appButton"),r.innerHTML='<a href="#">\n               <span class="inboxsdk__appButton_title"></span>\n             </a>',r.addEventListener("click",function(e){e.preventDefault(),t(e)});var n=p.default.getTopAccountContainer();if(!n){var i=new Error("Could not make button"),o=document.querySelector("[role=banner]");throw e.getLogger().error(i,{type:"failed to make appToolbarButton",gbsfwPresent:!!document.getElementById("gbsfw"),bannerHtml:o&&(0,c.default)(o)}),i}var a=e.isUsingMaterialUI()?n:n.children[0];if(!a){var s=new Error("Could not make button");throw e.getLogger().error(s,{type:"failed to make appToolbarButton",topAccountContainerHTML:(0,c.default)(n)}),s}try{return p.default.isGplusEnabled()||r.classList.add("inboxsdk__appButton_noGPlus"),a.insertBefore(r,a.lastElementChild),r}catch(i){throw e.getLogger().error(i,{type:"failed to make appToolbarButton",insertionElementHTML:(0,c.default)(a)}),i}}function i(e,t){e.textContent=t.title,e.className="inboxsdk__appButton_title ".concat(t.titleClass||"")}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=o(e("../../../lib/dom/querySelectorOrFail")),c=o(e("../../../../common/censorHTMLtree")),d=(o(e("kefir")),o(e("kefir-stopper"))),f=o(e("../../../driver-common/update-icon")),p=o(e("../gmail-element-getter")),h=o(e("../widgets/gmail-tooltip-view")),m=o(e("../../../widgets/buttons/dropdown-view")),b=o(e("./gmail-app-toolbar-button-view/monitor-top-banner-size-and-react")),_=function(){function e(t,r){var n=this;(0,a.default)(this,e),(0,l.default)(this,"_stopper",void 0),(0,l.default)(this,"_iconSettings",void 0),(0,l.default)(this,"_element",null),(0,l.default)(this,"_activeDropdown",void 0),(0,l.default)(this,"_buttonDescriptor",void 0),(0,l.default)(this,"_driver",void 0),this._driver=t,this._stopper=(0,d.default)(),this._iconSettings={},r.takeUntilBy(this._stopper).onValue(function(e){try{n._handleButtonDescriptor(e)}catch(e){n._driver.getLogger().error(e)}}),t.isUsingMaterialUI()&&(0,b.default)()}return(0,s.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._element&&this._element.remove(),this._activeDropdown&&this._activeDropdown.close()}},{key:"getStopper",value:function(){return this._stopper}},{key:"getElement",value:function(){return this._element}},{key:"open",value:function(){try{this._activeDropdown||this._handleClick()}catch(e){this._driver.getLogger().error(e)}}},{key:"close",value:function(){try{this._activeDropdown&&this._handleClick()}catch(e){this._driver.getLogger().error(e)}}},{key:"_handleButtonDescriptor",value:function(e){var t=this;if(!e)throw new Error("The application passed an invalid value for buttonDescriptor");var r=this._element=this._element||n(this._driver,function(){t._handleClick()});this._buttonDescriptor=e,(0,f.default)(this._iconSettings,(0,u.default)(r,"a"),!1,e.iconClass,e.iconUrl),i((0,u.default)(r,"span"),e)}},{key:"_handleClick",value:function(){var e=this,t=this._element;if(t){var r=this._buttonDescriptor;if(!r)throw new Error("app toolbar button clicked before receiving button descriptor");if(this._activeDropdown)this._activeDropdown.close();else{var n={},i=new h.default;i.getContainerElement().classList.add("inboxsdk__appButton_tooltip"),i.getContentElement().innerHTML="",r.arrowColor&&((0,u.default)(i.getContainerElement(),".T-P-atC").style.borderTopColor=r.arrowColor),n.dropdown=this._activeDropdown=new m.default(i,t,{manualPosition:!0}),n.dropdown.on("destroy",function(){e._activeDropdown=null}),r.onClick&&r.onClick.call(null,n),this._element&&i.anchor(this._element,{position:"bottom",offset:{top:8}})}}}}]),e}();r.default=_},{"../../../../common/censorHTMLtree":607,"../../../driver-common/update-icon":795,"../../../lib/dom/querySelectorOrFail":821,"../../../widgets/buttons/dropdown-view":893,"../gmail-element-getter":655,"../widgets/gmail-tooltip-view":726,"./gmail-app-toolbar-button-view/monitor-top-banner-size-and-react":668,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300}],668:[function(e,t,r){(function(t){"use strict";function n(){var e=t.ResizeObserver;if(e){var r=document.body;if(r){var n=r.querySelector("[role=banner]");if(n&&!n.hasAttribute("inboxsdk__resize_claimed")){n.setAttribute("inboxsdk__resize_claimed","true");new e(function(){n.clientWidth<i?r.classList.add("inboxsdk__searchIsNarrow"):r.classList.remove("inboxsdk__searchIsNarrow")}).observe(n)}}}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=900}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime-corejs2/core-js/object/define-property":14}],669:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i,o=n(e("@babel/runtime-corejs2/core-js/array/from")),a=n(e("@babel/runtime-corejs2/core-js/weak-map")),s=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=n(e("@babel/runtime-corejs2/helpers/createClass")),u=n(e("@babel/runtime-corejs2/helpers/defineProperty")),c=e("ud"),d=n(e("./gmail-attachment-card-view")),f=n(e("../widgets/buttons/button-view")),p=n(e("../../../lib/dom/querySelectorOrFail")),h=n(e("../../../widgets/buttons/basic-button-view-controller")),m=(0,c.defn)(t,i=function(){function e(t,r,n){(0,s.default)(this,e),(0,u.default)(this,"_element",void 0),(0,u.default)(this,"_messageViewDriver",void 0),(0,u.default)(this,"_driver",void 0),(0,u.default)(this,"_elsToCardViews",void 0),this._driver=r,this._messageViewDriver=n,this._elsToCardViews=new a.default,t?this._element=t:this._setupElement()}return(0,l.default)(e,[{key:"destroy",value:function(){this.getAttachmentCardViews().forEach(function(e){e.destroy()})}},{key:"getElement",value:function(){return this._element}},{key:"getAttachmentCardViews",value:function(){var e=this,t=this._element.querySelectorAll(".aQH > span");return(0,o.default)(t).map(function(t){var r=e._elsToCardViews.get(t);return r||(r=new d.default({element:t},e._driver,e._messageViewDriver),e._elsToCardViews.set(t,r)),r})}},{key:"_setupElement",value:function(){this._element=document.createElement("div"),this._element.setAttribute("class","hq gt a10"),this._element.innerHTML=['<div class="hp"></div>','<div class="a3I">Attachments area</div>',"<div></div>",'<div class="aQH">','<div class="aZK"></div>',"</div>"].join("")}},{key:"_createAreaToolbarIfNeeded",value:function(){var e=this._element.querySelector(".ho");if(e)return e;var t=document.createElement("div");return t.className="ho",t.innerHTML='<span class="aVW"><span>'.concat(this.getAttachmentCardViews().length,'</span> Attachments</span><div class="aZi J-J5-Ji"></div>'),this._element.insertBefore(t,this._element.lastElementChild),this._element.classList.remove("a10"),t}},{key:"_updateToolbarCardCount",value:function(){var e=this.getAttachmentCardViews().length;if(e>1){var t=this._createAreaToolbarIfNeeded();(0,p.default)(t,".aVW > span").textContent=String(e)}}},{key:"addGmailAttachmentCardView",value:function(e){var t=this._element.querySelector(".aXK, .aQH");if(!t)return void this._driver.getLogger().error(new Error("Could not find attachment zone"));t.insertBefore(e.getElement(),t.lastElementChild),this._updateToolbarCardCount()}},{key:"addButtonToDownloadAllArea",value:function(e){var t=new f.default({iconClass:"T-I-J3",iconUrl:e.iconUrl,tooltip:e.tooltip,hasButtonToLeft:!0});t.addClass("aZj"),t.getElement().children[0].className="asa";var r=(new h.default({activateFunction:function(){e.onClick&&e.onClick()},buttonView:t}),this._createAreaToolbarIfNeeded());(0,p.default)(r,".aZi").appendChild(t.getElement())}}]),e}()),b=m;r.default=b},{"../../../lib/dom/querySelectorOrFail":821,"../../../widgets/buttons/basic-button-view-controller":891,"../widgets/buttons/button-view":716,"./gmail-attachment-card-view":670,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,ud:597}],670:[function(e,t,r){"use strict";function n(){var e=(0,l.default)(['\n\t\t\t<div class="aYy">\n\t\t\t\t<div class="aYA">\n\t\t\t\t\t<img class="aSM" src="','">\n\t\t\t\t</div>\n\t\t\t\t<div class="aYz">\n\t\t\t\t\t<div class="a12">\n\t\t\t\t\t\t<div class="aQA">\n\t\t\t\t\t\t\t<span class="aV3 a6U"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="aYp">\n\t\t\t\t\t\t\t<span class="SaH2Ve"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="aSI">\n\t\t\t<div class="aSJ"></div>\n\t\t</div>\n\t</div>\n</a>\n<div class="aQw"></div>']);return n=function(){return e},e}function i(){var e=(0,l.default)(['\n\t\t\t\t<img class="aQG aYB inboxsdk__attachmentCard_previewThumbnailUrl"\n\t\t\t\t\tsrc="','">']);return i=function(){return e},e}function o(){var e=(0,l.default)(['\n\t\t\t\t<div class="aYv">\n\t\t\t\t\t<img class="aZG aYw" src="','">\n\t\t\t\t</div>']);return o=function(){return e},e}function a(){var e=(0,l.default)(['\n\t\t\t<a target="_blank" role="link" class="aQy e" href="">\n\t\t\t\t<div aria-hidden="true">\n\t\t\t\t\t<div class="aSG"></div>\n\t\t\t\t\t<div class="aVY aZn">\n\t\t\t\t\t\t<div class="aZm"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="aSH">']);return a=function(){return e},e}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),u=s(e("@babel/runtime-corejs2/regenerator")),c=s(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),d=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),f=s(e("@babel/runtime-corejs2/helpers/createClass")),p=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("lodash/find")),m=s(e("kefir")),b=s(e("kefir-stopper")),_=(s(e("util")),
s(e("auto-html"))),v=e("ud"),g=s(e("../../../lib/from-event-target-capture")),y=s(e("../../../lib/dom/querySelectorOrFail")),w=s(e("../widgets/buttons/button-view")),k=s(e("../../../widgets/buttons/basic-button-view-controller")),j=e("../../../lib/dom/simulate-mouse-event"),x=s(e("../../../lib/wait-for")),E=(s(e("../../../lib/stream-wait-for")),function(){function e(t,r,n){(0,d.default)(this,e),(0,p.default)(this,"_element",void 0),(0,p.default)(this,"_driver",void 0),(0,p.default)(this,"_messageViewDriver",void 0),(0,p.default)(this,"_cachedType",void 0),(0,p.default)(this,"_stopper",(0,b.default)()),(0,p.default)(this,"_previewClicks",m.default.pool()),this._driver=r,this._messageViewDriver=n,t.element?this._element=t.element:this._createNewElement(t)}return(0,f.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getElement",value:function(){return this._element}},{key:"getMessageViewDriver",value:function(){return this._messageViewDriver}},{key:"getStopper",value:function(){return this._stopper}},{key:"getPreviewClicks",value:function(){return this._previewClicks.takeUntilBy(this._stopper)}},{key:"_isStandardAttachment",value:function(){return"FILE"===this.getAttachmentType()}},{key:"getAttachmentType",value:function(){if(this._cachedType)return this._cachedType;var e=this._readAttachmentType();return"UNLOADED"!==e&&(this._cachedType=e),e}},{key:"_readAttachmentType",value:function(){if(this._element.classList.contains("inboxsdk__attachmentCard"))return"CUSTOM";if(1===this._element.children.length&&0===this._element.children[0].children.length)return"UNLOADED";var e=this._getDownloadLink();return!e||e.match(/^https?:\/\/mail\.google\.com\//)?"FILE":e.match(/^https?:\/\/([^\/]*\.)?google(usercontent)?\.com\//)?"DRIVE":"UNKNOWN"}},{key:"addButton",value:function(e){var t=this,r=new w.default({iconUrl:e.iconUrl,tooltip:e.tooltip});new k.default({activateFunction:function(){e.onClick&&e.onClick({getDownloadURL:function(){return t.getDownloadURL()}})},buttonView:r});this._addButton(r)}},{key:"getTitle",value:function(){var e=this._element.querySelector("span .aV3");return e?e.textContent:""}},{key:"_getDownloadLink",value:function(){var e=this._element.firstElementChild;if(!e)throw new Error("Failed to find link");if("A"===e.tagName&&e.href){var t=e.href;return t?t.replace(/([?&])disp=inline(?=&|$)/,"$1disp=safe"):t}var r=this._element.getAttribute("download_url");if(r){var n=/:(https:\/\/[^:]+)/.exec(r);return n?n[1]:null}}},{key:"getDownloadURL",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(u.default.mark(function e(){var t,r,n,i,o=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this._isStandardAttachment()){e.next=19;break}return e.next=4,(0,x.default)(function(){return o._getDownloadLink()});case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,this._driver.resolveUrlRedirects(t);case 9:if(r=e.sent,/^https:\/\/mail-attachment\.googleusercontent\.com\/attachment\//.test(r)){e.next=16;break}if(console.error("getDownloadURL returned unexpected url",r),n=new Error("getDownloadURL returned unexpected url"),this._driver.getLogger().error(n,{finalUrlCensored:r.replace(/\?[^\/]+$/,"?[...]")}),!/^https:\/\/mail\.google\.com\//.test(r)){e.next=16;break}throw n;case 16:return e.abrupt("return",r);case 19:return i=this._element.querySelector("[data-inboxsdk-download-url]"),e.abrupt("return",i?i.getAttribute("data-inboxsdk-download-url"):null);case 21:e.next=27;break;case 23:throw e.prev=23,e.t0=e.catch(0),this._driver.getLogger().error(e.t0),e.t0;case 27:case"end":return e.stop()}},e,this,[[0,23]])}));return e}()},{key:"_extractFileNameFromElement",value:function(){return(0,y.default)(this._element,".aQA > span").textContent}},{key:"_createNewElement",value:function(e){this._element=document.createElement("span"),this._element.classList.add("aZo"),this._element.classList.add("inboxsdk__attachmentCard");var t=[(0,_.default)(a())];if(t=e.iconThumbnailUrl?t.concat([(0,_.default)(o(),e.iconThumbnailUrl)]):t.concat([(0,_.default)(i(),e.previewThumbnailUrl)]),t=t.concat([(0,_.default)(n(),e.fileIconImageUrl)]),this._element.innerHTML=t.join(""),this._element.children[0].href=e.previewUrl,e.mimeType&&"image"===e.mimeType.split("/")[0]&&this._element.children[0].classList.add("aZI"),(0,y.default)(this._element,"span .aV3").textContent=e.title,(0,y.default)(this._element,"div.aYp > span").textContent=e.description||"",(0,y.default)(this._element,"div.aSJ").style.borderColor=e.foldColor,this._addHoverEvents(),e.buttons){var r=(0,h.default)(e.buttons,function(e){return e.downloadUrl});r&&this._addDownloadButton(r),this._addMoreButtons(e.buttons)}if(this._previewClicks.plug(m.default.fromEvents(this._element,"click").map(function(e){return{preventDefault:function(){return e.preventDefault()}}})),e.previewThumbnailUrl&&e.failoverPreviewIconUrl){var s=(0,y.default)(this._element,".inboxsdk__attachmentCard_previewThumbnailUrl");s.onerror=function(t){var r=document.createElement("div");r.classList.add("aYv"),r.innerHTML='<img class="aZG aYw" src="'+e.failoverPreviewIconUrl+'">';var n=s.parentElement;if(!n)throw new Error("Could not find parent element");n.insertBefore(r,s.nextElementSibling),s.remove()}}}},{key:"_addHoverEvents",value:function(){var e=this;m.default.merge([m.default.fromEvents(this._element,"mouseenter"),(0,g.default)(this._element,"focus")]).onValue(function(){e._element.classList.add("aZp")}),m.default.merge([m.default.fromEvents(this._element,"mouseleave"),(0,g.default)(this._element,"blur")]).onValue(function(){e._element.classList.remove("aZp")});var t=(0,y.default)(this._element,"a");m.default.fromEvents(t,"focus").onValue(function(){t.classList.add("a1U")}),m.default.fromEvents(t,"blur").onValue(function(){t.classList.remove("a1U")})}},{key:"_addDownloadButton",value:function(e){var t=new w.default({tooltip:"Download",iconClass:"aSK J-J5-Ji aYr"});t.getElement().setAttribute("data-inboxsdk-download-url",e.downloadUrl);new k.default({activateFunction:function(){var t=!1;if(e.onClick&&e.onClick({preventDefault:function(){t=!0}}),!t){var r=document.createElement("a");r.href=e.downloadUrl,e.downloadFilename&&(r.download=e.downloadFilename),r.addEventListener("click",function(e){e.stopPropagation()},!0),e.openInNewTab&&r.setAttribute("target","_blank"),document.body.appendChild(r),(0,j.simulateClick)(r),r.remove()}},buttonView:t});this._addButton(t)}},{key:"_addMoreButtons",value:function(e){var t=this;(e||[]).filter(function(e){return!e.downloadUrl}).forEach(function(e){t.addButton(e)})}},{key:"_addButton",value:function(e){e.addClass("aQv"),this._getButtonContainerElement().appendChild(e.getElement())}},{key:"_getPreviewImageUrl",value:function(){var e=this._getPreviewImage();return e?e.src:null}},{key:"_getPreviewImage",value:function(){return this._element.querySelector("img.aQG")}},{key:"_getButtonContainerElement",value:function(){return(0,y.default)(this._element,".aQw")}}]),e}()),S=(0,v.defn)(t,E);r.default=S},{"../../../lib/dom/querySelectorOrFail":821,"../../../lib/dom/simulate-mouse-event":827,"../../../lib/from-event-target-capture":831,"../../../lib/stream-wait-for":853,"../../../lib/wait-for":856,"../../../widgets/buttons/basic-button-view-controller":891,"../widgets/buttons/button-view":716,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"@babel/runtime-corejs2/regenerator":59,"auto-html":83,kefir:301,"kefir-stopper":300,"lodash/find":458,ud:597,util:600}],671:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=e("ud"),l=(n(e("kefir")),n(e("kefir-stopper"))),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;(0,i.default)(this,e),(0,a.default)(this,"_stopper",(0,l.default)());var n=document.createElement("div");if(n.className="Kj-JD-Jh inboxsdk__modal_overlay",n.style.zIndex=String(t),!r)throw new Error("no target");r.appendChild(n),this._stopper.onValue(function(){n.remove()})}return(0,o.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._stopper.destroy()}}]),e}(),c=(0,s.defn)(t,u);r.default=c},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300,ud:597}],672:[function(e,t,r){"use strict";function n(){var e=(0,_.default)(['\n          <div class="av" style="color: ',"; max-width: ",'">\n            ',"\n          </div>\n        </div>\n      </div>\n    </div>\n    "]);return n=function(){return e},e}function i(){var e=(0,_.default)(['<img\n        class="inboxsdk__resultsSection_label_icon"\n        ','\n        src="','" />']);return i=function(){return e},e}function o(){var e=(0,_.default)(['<div\n        class="inboxsdk__resultsSection_label_icon ','"\n        ',"\n        >\n      </div>"]);return o=function(){return e},e}function a(){var e=(0,_.default)(['<div class="inboxsdk__resultsSection_label_icon inboxsdk__resultsSection_label_iconHtml"\n        ',"\n      >\n        ","\n      </div>"]);return a=function(){return e},e}function s(){var e=(0,_.default)(['style="background-color: ','"']);return s=function(){return e},e}function l(){var e=(0,_.default)(['<div class="ar as" data-tooltip="','">\n      <div class="at" style="background-color: ',"; border-color: ",';">\n        <div class="au" style="border-color: ',';">']);return l=function(){return e},e}function u(){var e=(0,_.default)(['<div class="','"></div>']);return u=function(){return e},e}function c(){var e=(0,_.default)(['<img class="inboxsdk__resultsSection_result_icon ','" src="','">']);return c=function(){return e},e}function d(){var e=(0,_.default)(['<div class="inboxsdk__resultsSection_result_icon inboxsdk__resultsSection_result_iconHtml">\n        ',"\n      </div>"]);return d=function(){return e},e}function f(){return["<colgroup>",'<col class="k0vOLb">','<col class="Ci">','<col class="y5">','<col class="WA">','<col class="yY">',"<col>",'<col class="xX">',"</colgroup>","<tbody>","</tbody>"].join("")}function p(e){var t="";null!=e.iconHtml?t=(0,C.default)(d(),{__html:e.iconHtml}):e.iconUrl?t=(0,C.default)(c(),e.iconClass||"",e.iconUrl):e.iconClass&&(t=(0,C.default)(u(),e.iconClass));var r=(0,b.default)(e.labels)?e.labels.map(h).join(""):"";return['<td class="xY PF"></td>','<td class="xY oZ-x3"></td>','<td class="xY WA">',t,"</td>",'<td class="xY WA"></td>','<td class="xY yX inboxsdk__resultsSection_result_title">','<div class="yW">',"<span "+(e.isRead?"":'class="zF"')+">",(0,j.default)(e.title),"</span>","</div>","</td>",'<td class="xY a4W">','<div class="xS">','<div class="xT">','<div class="yi">',r,"</div>",'<div class="y6">','<span class="bog">',e.isRead?"":"<b>",(0,j.default)(e.body||""),e.isRead?"":"</b>","</span>","</div>","</div>","</div>","</td>",'<td class="xY xW">',"<span"+(e.isRead?"":' class="bq3"')+">",(0,j.default)(e.shortDetailText||""),"</span>","</td>"].join("")}function h(e){var t=e.backgroundColor||"rgb(194, 194, 194)",r=e.foregroundColor||"rgb(255, 255, 255)",u=e.maxWidth||"90px",c=[(0,C.default)(l(),e.title,t,t,t)],d=e.iconBackgroundColor?(0,C.default)(s(),e.iconBackgroundColor):"";return null!=e.iconHtml?c.push((0,C.default)(a(),{__html:d},{__html:e.iconHtml})):e.iconClass?c.push((0,C.default)(o(),e.iconClass||"",{__html:d})):e.iconUrl&&c.push((0,C.default)(i(),{__html:d},e.iconUrl)),c.push((0,C.default)(n(),r,u,e.title)),c.join("")}var m=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var b=m(e("@babel/runtime-corejs2/core-js/array/is-array")),_=m(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),v=m(e("@babel/runtime-corejs2/core-js/array/from")),g=m(e("@babel/runtime-corejs2/helpers/classCallCheck")),y=m(e("@babel/runtime-corejs2/helpers/createClass")),w=m(e("@babel/runtime-corejs2/helpers/defineProperty")),k=e("ud"),j=m(e("lodash/escape")),x=m(e("kefir")),E=m(e("kefir-bus")),S=m(e("../../../../common/defer")),C=m(e("auto-html")),I=m(e("../../../lib/dom/querySelectorOrFail")),T=m(e("../widgets/buttons/inbox-dropdown-button-view")),A=m(e("../widgets/gmail-dropdown-view")),D=m(e("../../../widgets/buttons/dropdown-button-view-controller")),M=function(){function e(t,r,n,i){(0,g.default)(this,e),(0,w.default)(this,"_driver",void 0),(0,w.default)(this,"_groupOrderHint",void 0),(0,w.default)(this,"_isReadyDeferred",void 0),(0,w.default)(this,"_isCollapsible",void 0),(0,w.default)(this,"_collapsibleSectionDescriptor",{}),(0,w.default)(this,"_isSearch",void 0),(0,w.default)(this,"_element",null),(0,w.default)(this,"_headerElement",null),(0,w.default)(this,"_titleElement",null),(0,w.default)(this,"_bodyElement",null),(0,w.default)(this,"_contentElement",null),(0,w.default)(this,"_tableBodyElement",null),(0,w.default)(this,"_collapsedContainer",null),(0,w.default)(this,"_messageElement",null),(0,w.default)(this,"_footerElement",null),(0,w.default)(this,"_eventStream",void 0),(0,w.default)(this,"_isCollapsed",!1),(0,w.default)(this,"_inboxDropdownButtonView",null),(0,w.default)(this,"_dropdownViewController",null),this._driver=t,this._isSearch=n,this._groupOrderHint=r,this._isCollapsible=i,this._eventStream=(0,E.default)(),this._isReadyDeferred=new S.default}return(0,y.default)(e,[{key:"destroy",value:function(){this._element&&this._element.remove(),this._eventStream&&this._eventStream.end(),this._headerElement&&this._headerElement.remove(),this._titleElement&&this._titleElement.remove(),this._bodyElement&&this._bodyElement.remove(),this._contentElement&&this._contentElement.remove(),this._tableBodyElement&&this._tableBodyElement.remove(),this._collapsedContainer&&this._collapsedContainer.remove(),this._messageElement&&this._messageElement.remove(),this._inboxDropdownButtonView&&this._inboxDropdownButtonView.destroy(),this._dropdownViewController&&this._dropdownViewController.destroy()}},{key:"getElement",value:function(){var e=this._element;if(!e)throw new Error("tried to access element that does not exist");return e}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"setCollapsibleSectionDescriptorProperty",value:function(e){var t=this,r=e.takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null}));r.onValue(function(e){return t._updateValues(e)}),r.take(1).onValue(function(e){return t._isReadyDeferred.resolve(t)})}},{key:"setCollapsed",value:function(e){var t=this;this._isCollapsible&&this._isReadyDeferred.promise.then(function(){e?t._collapse():t._expand()})}},{key:"_updateValues",value:function(e){var t=this._element;if(!e)return void(t&&(t.style.display="none"));t&&(t.style.display=""),t?this._updateElement(e):(this._setupElement(e),this._showLoadingMessage()),this._updateHeader(e),this._updateTitle(e),this._updateSubtitle(e),this._updateSummaryText(e),this._updateDropdown(e),this._updateContentElement(e),this._updateTableRows(e),this._updateMessageElement(e),this._updateFooter(e),this._collapsibleSectionDescriptor=e}},{key:"_setupElement",value:function(e){var t=this,r=this._element=document.createElement("div");r.setAttribute("class","inboxsdk__resultsSection"),r.setAttribute("data-group-order-hint",String(this._groupOrderHint)),r.setAttribute("data-order-hint",String("number"==typeof e.orderHint?e.orderHint:0)),this._isCollapsible||r.classList.add("inboxsdk__resultsSection_nonCollapsible"),this._setupHeader(e);var n=this._bodyElement=document.createElement("div"),i=document.createElement("div");i.classList.add("zE"),n.appendChild(i),r.appendChild(n);var o=this._contentElement=document.createElement("div");i.appendChild(o);var a=this._messageElement=document.createElement("div");i.appendChild(a);var s=this._tableBodyElement=document.createElement("div");i.appendChild(s),this._setupFooter(e),this._isCollapsible&&this._titleElement&&x.default.fromEvents(this._titleElement,"click").onValue(function(){return t._toggleCollapseState()}),x.default.fromEvents(r,"removeCollapsedContainer").onValue(function(){return t._destroyCollapsedContainer()}),x.default.fromEvents(r,"readdToCollapsedContainer").onValue(function(){return t._addToCollapsedContainer()}),this._eventStream.emit({type:"update",property:"orderHint",sectionDescriptor:e})}},{key:"_setupHeader",value:function(e){var t=this._headerElement=document.createElement("div");t.classList.add("inboxsdk__resultsSection_header","Wg"),this._driver.isUsingMaterialUI()?this._setupGmailv2Header(t,e):this._setupGmailv1Header(t,e),this._element&&this._element.appendChild(t)}},{key:"_setupGmailv1Header",value:function(e,t){var r=this._titleElement=document.createElement("div");r.setAttribute("class","inboxsdk__resultsSection_title"),r.innerHTML='<span class="Wp Wq"></span><h3 class="'+(this._isSearch?"Wd":"Wr")+'">'+(0,j.default)(t.title)+"</h3>";var n=document.createElement("div");n.classList.add("Cr"),this._isSearch?n.classList.add("Wg"):r.classList.add("Wn"),e.appendChild(r),e.appendChild(n)}},{key:"_setupGmailv2Header",value:function(e,t){var r=this._titleElement=document.createElement("div");r.setAttribute("class","inboxsdk__resultsSection_title"),r.innerHTML=['<h3 class="Wr iR">','<img alt="" src="//ssl.gstatic.com/ui/v1/icons/mail/images/cleardot.gif" class="qi Wp Wq">','<div class="Wn">',(0,j.default)(t.title),"</div>","</h3>"].join("");var n=document.createElement("div");n.classList.add("Cr"),this._isSearch&&n.classList.add("Wg"),e.appendChild(r),e.appendChild(n)}},{key:"_setupFooter",value:function(e){var t=this._footerElement=document.createElement("div");t.classList.add("inboxsdk__resultsSection_footer"),this._bodyElement&&this._bodyElement.appendChild(t)}},{key:"_updateElement",value:function(e){if(this._collapsibleSectionDescriptor.orderHint!==e.orderHint){var t=this._element;t&&t.setAttribute("data-order-hint",""+("number"==typeof e.orderHint?e.orderHint:0)),this._eventStream.emit({type:"update",property:"orderHint"})}}},{key:"_updateHeader",value:function(e){this._isCollapsible||e.title||e.subtitle||e.titleLinkText||e.hasDropdown?this._headerElement&&(this._headerElement.style.display=""):this._headerElement&&(this._headerElement.style.display="none")}},{key:"_updateTitle",value:function(e){if(this._collapsibleSectionDescriptor.title!==e.title){var t=this._driver.isUsingMaterialUI()?"h3 > .Wn":"h3";this._titleElement&&((0,I.default)(this._titleElement,t).textContent=e.title)}}},{key:"_updateSubtitle",value:function(e){var t=this._titleElement;if(t){var r=t.querySelector(".inboxsdk__resultsSection_title_subtitle");if(e.subtitle){if(this._collapsibleSectionDescriptor.subtitle!==e.subtitle){if(!r&&(r=document.createElement("span"))&&t){r.classList.add("inboxsdk__resultsSection_title_subtitle");var n=this._driver.isUsingMaterialUI()?t.querySelector(".Wn"):t.querySelector("h3");n&&(this._driver.isUsingMaterialUI()&&r.classList.add("aw5"),n.appendChild(r))}r.textContent="("+e.subtitle+")"}}else r&&r.remove()}}},{key:"_updateSummaryText",value:function(e){var t=this,r=this._headerElement;if(r){var n=r.querySelector(".inboxsdk__resultsSection_header_summaryText");if(e.titleLinkText){if(e.titleLinkText!==this._collapsibleSectionDescriptor.titleLinkText){if(!n){n=document.createElement("div"),n.setAttribute("class","inboxsdk__resultsSection_header_summaryText Wm"),n.innerHTML=['<span class="Di">&nbsp;','<div class="J-J5-Ji amH">','<span class="Dj">',this._driver.isUsingMaterialUI()?"<span></span>":"<b></b>","</span>","&nbsp;","</div>","</span>"].join(""),this._eventStream.plug(x.default.fromEvents(n,"click").map(function(){return{eventName:"titleLinkClicked",sectionDescriptor:t._collapsibleSectionDescriptor}}));var i=n;n.addEventListener("mouseenter",function(){i.classList.add("aqi")}),n.addEventListener("mouseleave",function(){i.classList.remove("aqi")});var o=r.querySelector(".Cr");o&&o.insertAdjacentElement("afterbegin",n)}(0,I.default)(n,".Dj > *").textContent=e.titleLinkText}}else n&&n.remove()}}},{key:"_updateDropdown",value:function(e){if(e.hasDropdown&&e.onDropdownClick){if(e.hasDropdown&&e.onDropdownClick)if(this._inboxDropdownButtonView&&this._dropdownViewController)e.onDropdownClick!==this._collapsibleSectionDescriptor.onDropdownClick&&this._dropdownViewController&&this._dropdownViewController.setDropdownShowFunction(e.onDropdownClick);else{var t=this._inboxDropdownButtonView=new T.default;this._dropdownViewController=new D.default({buttonView:t,dropdownViewDriverClass:A.default,dropdownShowFunction:e.onDropdownClick});var r=this._headerElement;if(r){var n=r.querySelector(".Cr");n&&n.appendChild(t.getElement())}}}else this._inboxDropdownButtonView&&this._inboxDropdownButtonView.destroy(),this._dropdownViewController&&this._dropdownViewController.destroy()}},{key:"_updateContentElement",value:function(e){var t=this._contentElement;t&&(t.innerHTML="",e.contentElement?(t.style.display="",t.appendChild(e.contentElement)):t.style.display="none")}},{key:"_updateTableRows",value:function(e){var t=e.tableRows,r=this._tableBodyElement;r&&(r.innerHTML="",t&&0!==t.length?(r.style.display="",this._renderTable(t)):r.style.display="none")}},{key:"_renderTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","F cf zt"),t.innerHTML=f(),this._tableBodyElement&&this._tableBodyElement.appendChild(t);var r=t.querySelector("tbody"),n=this._eventStream;e.forEach(function(e){var t=document.createElement("tr");if(t.setAttribute("class","inboxsdk__resultsSection_tableRow zA "+(e.isRead?"yO":"zE")),t.innerHTML=p(e),!r)throw new Error("should not happen");r.appendChild(t),n.plug(x.default.fromEvents(t,"click").map(function(){return{eventName:"rowClicked",rowDescriptor:e}}))})}},{key:"_updateMessageElement",value:function(e){var t=this._messageElement;e.tableRows&&e.tableRows.length>0||e.contentElement?t&&(t.innerHTML="",t.style.display="none"):e.tableRows&&0===e.tableRows.length&&!e.contentElement&&this._showEmptyMessage()}},{key:"_showLoadingMessage",value:function(){var e=this._messageElement;e&&(e.setAttribute("class","TB TC inboxsdk__resultsSection_loading"),e.innerHTML="loading...",e.style.display="")}},{key:"_showEmptyMessage",value:function(){var e=this._messageElement;e&&(e.setAttribute("class","TB TC"),e.innerHTML="No results found",e.style.display="")}},{key:"_updateFooter",value:function(e){var t=this,r=this._footerElement;if(r)if(r.innerHTML="",e.footerLinkText||e.footerLinkIconUrl||e.footerLinkIconClass){r.style.display="";var n=document.createElement("span");n.setAttribute("class","e Wb"),n.textContent=e.footerLinkText,this._eventStream.plug(x.default.fromEvents(n,"click").map(function(){return{eventName:"footerClicked",sectionDescriptor:t._collapsibleSectionDescriptor}})),r.appendChild(n),r.insertAdjacentHTML("beforeend",'<br style="clear:both;">')}else r.style.display="none"}},{key:"_toggleCollapseState",value:function(){this._isCollapsed?this._expand():this._collapse()}},{key:"_collapse",value:function(){var e=this._element;if(e){e.classList.add("inboxsdk__resultsSection_collapsed"),this._isSearch||this._addToCollapsedContainer();var t=this._driver.isUsingMaterialUI()?"h3 > img.Wp":".Wp";if(this._titleElement){var r=(0,I.default)(this._titleElement,t);r&&(r.classList.remove("Wq"),r.classList.add("Wo"))}this._bodyElement&&(this._bodyElement.style.display="none"),this._isCollapsed=!0,this._eventStream.emit({eventName:"collapsed"})}}},{key:"_expand",value:function(){var e=this._element;if(e){e.classList.remove("inboxsdk__resultsSection_collapsed"),this._isSearch||this._removeFromCollapsedContainer();var t=this._driver.isUsingMaterialUI()?"h3 > img.Wp":".Wp";if(this._titleElement){var r=(0,I.default)(this._titleElement,t);r&&(r.classList.remove("Wo"),r.classList.add("Wq"))}this._bodyElement&&(this._bodyElement.style.display=""),this._isCollapsed=!1,this._eventStream.emit({eventName:"expanded"})}}},{key:"_addToCollapsedContainer",value:function(){var e=this._element;if(e)if(this._headerElement&&this._headerElement.classList.remove("Wg"),this._isCollapsedContainer(e.previousElementSibling)&&this._isCollapsedContainer(e.nextElementSibling)){var t=e.nextElementSibling,r=e.previousElementSibling;if(!r)throw new Error("previousSibling does not exist");if(!t)throw new Error("otherCollapseContainer does not exist");var n=(r.children[0].appendChild(e),(0,v.default)(t.children[0].children).concat((0,v.default)(t.children[1].children)));t&&this._pulloutSectionsFromCollapsedContainer(t),this._recollapse(n)}else this._readdToCollapsedContainer()}},{key:"_removeFromCollapsedContainer",value:function(){this._headerElement&&this._headerElement.classList.add("Wg");var e=this._element;if(e){var t=e.parentElement;if(t){var r=t.parentElement;if(r&&r.classList.contains("inboxsdk__results_collapsedContainer")){var n=(0,v.default)(r.children[0].children).concat((0,v.default)(r.children[1].children));this._pulloutSectionsFromCollapsedContainer(r),this._destroyCollapsedContainer(),this._recollapse(n.filter(function(t){return t!==e}))}}}}},{key:"_pulloutSectionsFromCollapsedContainer",value:function(e){(0,v.default)(e.children[0].children).forEach(function(t){return e.insertAdjacentElement("beforebegin",t)}),(0,v.default)(e.children[1].children).reverse().forEach(function(t){return e.insertAdjacentElement("afterend",t)})}},{key:"_readdToCollapsedContainer",value:function(){var e=this._element;if(e){if(this._collapsedContainer)return void this._collapsedContainer.children[0].insertBefore(e,this._collapsedContainer.children[1].firstElementChild);var t,r;this._isCollapsedContainer(e.previousElementSibling)?(r=!1,t=e.previousElementSibling):this._isCollapsedContainer(e.nextElementSibling)?(r=!0,t=e.nextElementSibling):(r=!0,this._createCollapsedContainer(),t=this._collapsedContainer),r&&t?t.children[0].insertBefore(e,t.children[0].firstElementChild):t&&t.children[0].appendChild(e)}}},{key:"_isCollapsedContainer",value:function(e){return e&&e.classList.contains("inboxsdk__results_collapsedContainer")}},{key:"_recollapse",value:function(e){e.forEach(function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("removeCollapsedContainer",!1,!1,null),e.dispatchEvent(t);var r=document.createEvent("CustomEvent");r.initCustomEvent("readdToCollapsedContainer",!1,!1,null),e.dispatchEvent(r)})}},{key:"_createCollapsedContainer",value:function(){var e=this._collapsedContainer=document.createElement("div");e.setAttribute("class","inboxsdk__results_collapsedContainer Wg"),e.innerHTML='<div class="inboxsdk__results_collapsedContainer_prepend"></div><div class="inboxsdk__results_collapsedContainer_append"></div>';var t=this._element;t&&t.insertAdjacentElement("afterend",e)}},{key:"_destroyCollapsedContainer",value:function(){this._collapsedContainer&&(this._collapsedContainer.remove(),this._collapsedContainer=null)}}]),e}(),R=(0,k.defn)(t,M);r.default=R},{"../../../../common/defer":608,"../../../lib/dom/querySelectorOrFail":821,"../../../widgets/buttons/dropdown-button-view-controller":892,"../widgets/buttons/inbox-dropdown-button-view":718,"../widgets/gmail-dropdown-view":722,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"auto-html":83,kefir:301,"kefir-bus":298,"lodash/escape":456,ud:597}],673:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/typeof")),a=i(e("@babel/runtime-corejs2/core-js/get-iterator")),s=i(e("@babel/runtime-corejs2/core-js/parse-int")),l=i(e("@babel/runtime-corejs2/core-js/array/from")),u=i(e("@babel/runtime-corejs2/core-js/weak-map")),c=i(e("@babel/runtime-corejs2/core-js/object/define-property")),d=i(e("@babel/runtime-corejs2/core-js/promise")),f=i(e("@babel/runtime-corejs2/regenerator")),p=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),h=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),m=i(e("@babel/runtime-corejs2/helpers/createClass")),b=i(e("@babel/runtime-corejs2/helpers/defineProperty")),_=i(e("transducers.js")),v=i(e("lodash/once")),g=i(e("lodash/escape")),y=i(e("lodash/includes")),w=i(e("lodash/constant")),k=i(e("lodash/find")),j=i(e("asap")),x=i(e("pdelay")),E=n(e("kefir")),S=n(e("ud")),C=i(e("closest-ng")),I=i(e("kefir-bus")),T=i(e("kefir-stopper")),A=i(e("../../../lib/delay-asap")),D=e("../../../lib/dom/simulate-mouse-event"),M=i(e("../../../lib/dom/simulate-key")),R=i(e("../../../lib/dom/querySelectorOrFail")),L=i(e("../../../../common/isElementVisible")),O=i(e("../../../lib/dom/make-element-child-stream")),P=e("../../../lib/dom/simulate-drag-and-drop"),V=n(e("../gmail-response-processor")),N=i(e("../gmail-element-getter")),B=i(e("../../../lib/dom/set-css")),q=i(e("../../../lib/wait-for")),U=i(e("../../../lib/stream-wait-for")),F=i(e("../../../lib/dom/make-mutation-observer-chunked-stream")),H=i(e("../../../lib/handle-compose-link-chips")),z=i(e("../../../lib/insert-link-chip-into-body")),W=i(e("./gmail-compose-view/add-compose-notice")),G=i(e("./gmail-compose-view/add-status-bar")),K=i(e("../../../lib/dom/insert-html-at-cursor")),$=i(e("./gmail-compose-view/ensure-grouping-is-open")),J=i(e("./gmail-compose-view/ensure-app-button-toolbars-are-closed")),Y=i(e("./gmail-compose-view/size-fixer")),Q=i(e("./gmail-compose-view/add-tooltip-to-button")),X=i(e("./gmail-compose-view/add-recipient-row")),Z=i(e("./gmail-compose-view/add-button")),ee=i(e("./gmail-compose-view/set-recipients")),te=i(e("./gmail-compose-view/focus")),re=i(e("./gmail-compose-view/monitor-selection-range")),ne=i(e("./gmail-compose-view/manage-button-grouping")),ie=e("../../../lib/dom/get-selection"),oe=i(e("./gmail-compose-view/get-minimized-stream")),ae=i(e("../../../../common/censorHTMLstring")),se=i(e("./gmail-compose-view/insert-link-into-body")),le=i(e("./gmail-compose-view/get-address-changes-stream")),ue=i(e("./gmail-compose-view/get-body-changes-stream")),ce=i(e("./gmail-compose-view/get-recipients")),de=i(e("./gmail-compose-view/get-response-type-changes-stream")),fe=i(e("../../../driver-common/compose/getPresendingStream")),pe=i(e("../../../driver-common/compose/getDiscardStream")),he=i(e("./gmail-compose-view/update-insert-more-area-left")),me=i(e("./gmail-compose-view/get-formatting-area-offset-left")),be=i(e("./gmail-compose-view/override-edit-subject")),_e=n(e("./gmail-compose-view/from-manager")),ve=!1,ge=function(){function t(e,r,n,i){var o=this;(0,h.default)(this,t),(0,b.default)(this,"_element",void 0),(0,b.default)(this,"_seenBodyElement",void 0),(0,b.default)(this,"_isInlineReplyForm",void 0),(0,b.default)(this,"_isFullscreen",void 0),(0,
b.default)(this,"_isStandalone",void 0),(0,b.default)(this,"_emailWasSent",void 0),(0,b.default)(this,"_driver",void 0),(0,b.default)(this,"_managedViewControllers",void 0),(0,b.default)(this,"_eventStream",void 0),(0,b.default)(this,"_isTriggeringADraftSavePending",void 0),(0,b.default)(this,"_buttonViewControllerTooltipMap",void 0),(0,b.default)(this,"_composeID",void 0),(0,b.default)(this,"_messageIDElement",void 0),(0,b.default)(this,"_messageId",void 0),(0,b.default)(this,"_finalMessageId",void 0),(0,b.default)(this,"_initialMessageId",void 0),(0,b.default)(this,"_targetMessageID",void 0),(0,b.default)(this,"_draftSaving",void 0),(0,b.default)(this,"_draftIDpromise",void 0),(0,b.default)(this,"_threadID",void 0),(0,b.default)(this,"_stopper",void 0),(0,b.default)(this,"_lastSelectionRange",void 0),(0,b.default)(this,"_requestModifiers",void 0),(0,b.default)(this,"_isListeningToAjaxInterceptStream",void 0),(0,b.default)(this,"_formattingArea",void 0),(0,b.default)(this,"_closedProgrammatically",!1),(0,b.default)(this,"_destroyed",!1),(0,b.default)(this,"_removedFromDOMStopper",void 0),(0,b.default)(this,"ready",void 0),this._element=e,this._element.classList.add("inboxsdk__compose"),i.isInlineReplyForm&&this._element.classList.add("inboxsdk__compose_inlineReply"),this._isInlineReplyForm=i.isInlineReplyForm,this._isStandalone=i.isStandalone,this._isFullscreen=!1,this._emailWasSent=!1,this._messageId=null,this._finalMessageId=null,this._draftSaving=!1,this._draftIDpromise=null,this._driver=n,this._stopper=(0,T.default)(),this._managedViewControllers=[],this._requestModifiers={},this._isListeningToAjaxInterceptStream=!1,this._eventStream=(0,I.default)(),this._removedFromDOMStopper=(0,T.default)(),this._isTriggeringADraftSavePending=!1;var a;a=this._driver.isUsingSyncAPI()?r.filter(function(e){return e.draftID===o._getDraftIDfromForm()}).map(function(e){switch(e.type){case"emailSending":return{eventName:"sending"};case"emailSent":var t=e.threadID,r=e.messageID;return e.oldMessageID&&(o._messageId=e.oldMessageID),e.oldThreadID&&(o._threadID=e.oldThreadID),n.removeCachedGmailMessageIdForSyncMessageId(r),n.removeCachedOldGmailThreadIdFromSyncThreadId(t),{eventName:"sent",data:{getThreadID:(0,v.default)((0,p.default)(f.default.mark(function r(){return f.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.oldThreadID){r.next=2;break}return r.abrupt("return",e.oldThreadID);case 2:return r.next=4,n.getOldGmailThreadIdFromSyncThreadId(t);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},r)}))),getMessageID:(0,v.default)((0,p.default)(f.default.mark(function t(){return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.oldMessageID){t.next=2;break}return t.abrupt("return",e.oldMessageID);case 2:return t.next=4,n.getGmailMessageIdForSyncMessageId(r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)})))}};case"emailSendFailed":return{eventName:"sendCanceled"};case"emailDraftReceived":return o._messageId=e.oldMessageID,o._threadID=e.oldThreadID,{eventName:"draftSaved",data:{getThreadID:function(){return d.default.resolve(e.oldThreadID)},getMessageID:function(){return d.default.resolve(e.oldMessageID)}}};default:return null}}).filter(Boolean):r.filter(function(e){return e.composeId===o.getComposeID()}).map(function(e){switch(e.type){case"emailSending":return[{eventName:"sending"}];case"emailSent":var t=V.interpretSentEmailResponse(e.response);if((0,y.default)(["tr","eu"],t.messageID))return[{eventName:"sendCanceled"}];o._emailWasSent=!0,t.messageID&&(o._finalMessageId=t.messageID),o._messageId=null;var r={getThreadID:function(){return d.default.resolve(t.threadID)},getMessageID:function(){return d.default.resolve(t.messageID)}};return["threadID","gmailThreadId"].forEach(function(e){(0,c.default)(r,e,{get:function(){return o._driver.getLogger().deprecationWarning("composeView sent event.".concat(e),"composeView sent event.getThreadID()"),t.threadID}})}),["messageID","gmailMessageId"].forEach(function(e){(0,c.default)(r,e,{get:function(){return o._driver.getLogger().deprecationWarning("composeView sent event.".concat(e),"composeView sent event.getMessageID()"),t.messageID}})}),[{eventName:"sent",data:r}];case"emailDraftSaveSending":return o._draftSaving=!0,[{eventName:"draftSaving"}];case"emailDraftReceived":o._draftSaving=!1;var n;try{n=V.interpretSentEmailResponse(e.response)}catch(t){throw"sdk_streak_21e9788951"===o._driver.getAppId()?(o._driver.getLogger().error(t,{connectionDetails:e.connectionDetails,response:e.response}),t):t}if("eu"===n.messageID)return[];var i=[{eventName:"draftSaved",data:n}];return n.messageID?n.messageID&&o._messageId!==n.messageID&&(/^[0-9a-f]+$/i.test(n.messageID)?(o._messageId=n.messageID,i.push({eventName:"messageIDChange",data:o._messageId})):o._driver.getLogger().error(new Error("Invalid message id from emailDraftReceived"),{value:n.messageID})):o._driver.getLogger().error(new Error("Missing message id from emailDraftReceived")),i;default:return[]}}).flatten().map(function(e){return o._driver.getLogger().shouldTrackEverything()&&n.getLogger().eventSite("compose.debug.xhr",{eventName:e.eventName}),e}),this._eventStream.plug(E.merge([a,E.fromEvents(this._element,"buttonAdded").map(function(){return{eventName:"buttonAdded"}}),E.fromEvents(this._element,"resize").map(function(){return{eventName:"resize"}}),E.fromEvents(this._element,"composeFullscreenStateChanged").map(function(){return o._updateComposeFullscreenState(),{eventName:"fullscreenChanged",data:{fullscreen:o._isFullscreen}}})])),E.fromEvents(this._element,"closedProgrammatically").takeUntilBy(this._stopper).onValue(function(){o._closedProgrammatically=!0}),this._buttonViewControllerTooltipMap=new u.default;var s=this.getMaybeBodyElement();this.ready=(0,w.default)((s?E.constant(s):(0,U.default)(function(){return o.getMaybeBodyElement()},18e4)).takeUntilBy(this._stopper).map(function(e){return o._seenBodyElement=e,o._composeID=o._element.querySelector('input[name="composeid"]').value,o._messageIDElement=o._element.querySelector('input[name="draft"]'),o._messageIDElement||(n.getLogger().error(new Error("Could not find compose message id field")),o._messageIDElement=document.createElement("input")),o._setupIDs(),o._setupStreams(),o._setupConsistencyCheckers(),o._updateComposeFullscreenState(),o.getEventStream().filter(function(e){return"presending"===e.eventName}).takeUntilBy(o._stopper).onValue(function(){(0,O.default)(document.body).map(function(e){return e.el}).filter(function(e){return e.getAttribute&&"alertdialog"===e.getAttribute("role")}).takeUntilBy(E.merge([o.getEventStream().filter(function(e){var t=e.eventName;return"sendCanceled"===t||"sending"===t}),E.later(15)])).onValue(function(){o._eventStream.emit({eventName:"sendCanceled"})})}),o}).toProperty()),this.ready().onError(function(e){n.getLogger().error(e,{hasForm:!!o.getElement().querySelector("form"),class:o.getElement().getAttribute("class")})}),this._driver.isUsingSyncAPI()?E.merge([this._removedFromDOMStopper.filterBy(this._eventStream.filter(function(e){var t=e.eventName;return"presending"===t||"sendCanceled"===t}).map(function(e){return"sendCanceled"===e.eventName}).toProperty(function(){return!0})),E.combine([this._removedFromDOMStopper,this._eventStream.filter(function(e){return"sent"===e.eventName})])]).take(1).flatMap(function(){return(0,A.default)(null)}).onValue(function(){return o._destroy()}):this._removedFromDOMStopper.onValue(function(){return o._destroy()})}return(0,m.default)(t,[{key:"destroy",value:function(){this._removedFromDOMStopper.destroy()}},{key:"_destroy",value:function(){this._eventStream.emit({eventName:"destroy",data:{messageID:this.getMessageID(),closedByInboxSDK:this._closedProgrammatically}}),this._eventStream.end(),this._managedViewControllers.forEach(function(e){e.destroy()}),this._requestModifiers={},this._managedViewControllers.length=0,this._stopper.destroy(),this._destroyed=!0}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getGmailDriver",value:function(){return this._driver}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"_setupStreams",value:function(){var e=this;this._eventStream.plug((0,le.default)(this)),this._eventStream.plug((0,ue.default)(this)),this._eventStream.plug((0,de.default)(this)),this._eventStream.plug((0,fe.default)({element:this.getElement(),sendButton:this.getSendButton(),sendAndArchive:this.getSendAndArchiveButton()})),this._eventStream.plug((0,pe.default)({element:this.getElement(),discardButton:this.getDiscardButton()})),this._eventStream.plug(E.fromEvents(this.getElement(),"inboxSDKsendCanceled").map(function(){return{eventName:"sendCanceled"}})),this._eventStream.plug(E.fromEvents(this.getElement(),"inboxSDKdiscardCanceled").map(function(){return{eventName:"discardCanceled"}})),this._eventStream.plug(E.later(10).flatMap(function(){return(0,oe.default)(e)}).changes().map(function(e){return{eventName:e?"minimized":"restored"}})),this._driver.isUsingSyncAPI()||(0,F.default)(this._messageIDElement,{attributes:!0,attributeFilter:["value"]}).takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null})).map(function(){return e._getMessageIDfromForm()}).filter(function(t){return t&&!e._emailWasSent&&e._messageId!==t}).onValue(function(t){e._messageId=t,e._eventStream.emit({eventName:"messageIDChange",data:e._messageId})})}},{key:"_setupConsistencyCheckers",value:function(){try{(0,H.default)(this),(0,re.default)(this),(0,ne.default)(this),(0,Y.default)(this._driver,this)}catch(e){this._driver.getLogger().error(e)}}},{key:"_setupIDs",value:function(){var e=this;if(this._driver.isUsingSyncAPI()){var t=this._getTargetMessageID();t&&this._driver.getGmailMessageIdForSyncMessageId(t).then(function(t){return e._targetMessageID=t});var r=this._getMessageIDfromForm();r?(this._driver.getGmailMessageIdForSyncDraftId(r).then(function(t){e._initialMessageId=t,e._messageId=t}).catch(function(){}),this._driver.reportRecentSyncDraftId(r),this._stopper.onValue(function(){e._driver.reportDraftClosed(r)})):this._driver.getLogger().error(new Error("Draft is missing sync draft id"));var n=this._element.querySelector('input[name="lts"]');n&&"string"==typeof n.value&&(this._threadID=n.value)}else this._targetMessageID=this._getTargetMessageID(),this._messageId=this._initialMessageId=this._getMessageIDfromForm(),this._threadID=this._getThreadID()}},{key:"_updateComposeFullscreenState",value:function(){if(this._isInlineReplyForm)this._isFullscreen=!1;else if(this._isStandalone)this._isFullscreen=!0;else{var e=N.default.getFullscreenComposeWindowContainer();this._isFullscreen=!!e&&e.contains(this._element)}}},{key:"focus",value:function(){(0,te.default)(this)}},{key:"insertBodyTextAtCursor",value:function(e){return this.insertBodyHTMLAtCursor((0,g.default)(e).replace(/\n/g,"<br>"))}},{key:"insertBodyHTMLAtCursor",value:function(e){var t=(0,K.default)(this.getBodyElement(),e,this._lastSelectionRange);return this._triggerDraftSave(),(0,M.default)(this.getBodyElement(),13,13),t}},{key:"insertLinkIntoBody",value:function(e,t){var r=(0,se.default)(this,e,t);return this._triggerDraftSave(),r}},{key:"insertLinkChipIntoBody",value:function(e){var t=(0,z.default)(this,e);return this._triggerDraftSave(),t}},{key:"setSubject",value:function(e){this._element.querySelector("input[name=subjectbox]").value=e,this._triggerDraftSave()}},{key:"setBodyHTML",value:function(e){this.getBodyElement().innerHTML=e,this._triggerDraftSave()}},{key:"setBodyText",value:function(e){this.getBodyElement().textContent=e,this._triggerDraftSave()}},{key:"setToRecipients",value:function(e){(0,ee.default)(this,"to",e),this._triggerDraftSave()}},{key:"setCcRecipients",value:function(e){(0,ee.default)(this,"cc",e),this._triggerDraftSave()}},{key:"setBccRecipients",value:function(e){(0,ee.default)(this,"bcc",e),this._triggerDraftSave()}},{key:"addRecipientRow",value:function(e){return(0,X.default)(this,e)}},{key:"forceRecipientRowsOpen",value:function(){var e=this;return this._element.classList.add("inboxsdk__compose_forceRecipientsOpen"),function(){e._element.classList.remove("inboxsdk__compose_forceRecipientsOpen")}}},{key:"hideNativeRecipientRows",value:function(){var e=this.getRecipientRowElements();return e.forEach(function(e){e.classList.add("inboxsdk__compose_forceRecipientRowHidden")}),function(){e.forEach(function(e){e.classList.remove("inboxsdk__compose_forceRecipientRowHidden")})}}},{key:"hideRecipientArea",value:function(){var e=this;return this._element.classList.add("inboxsdk__compose_hideRecipientArea"),function(){e._element.classList.remove("inboxsdk__compose_hideRecipientArea")}}},{key:"getFromContact",value:function(){return _e.getFromContact(this._driver,this)}},{key:"getFromContactChoices",value:function(){return _e.getFromContactChoices(this._driver,this)}},{key:"setFromEmail",value:function(e){_e.setFromEmail(this._driver,this,e)}},{key:"addButton",value:function(e,t,r){return(0,Z.default)(this,e,t,r)}},{key:"addTooltipToButton",value:function(e,t,r){var n=(0,Q.default)(this,e,t,r);this._buttonViewControllerTooltipMap.set(e,n)}},{key:"closeButtonTooltip",value:function(e){if(this._buttonViewControllerTooltipMap){var t=this._buttonViewControllerTooltipMap.get(e);t&&(t.destroy(),this._buttonViewControllerTooltipMap.delete(e))}}},{key:"addComposeNotice",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,W.default)(this,t);return this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})),E.fromEvents(r,"destroy").flatMap(A.default).takeUntilBy(this._stopper).onValue(function(){e._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),r}},{key:"addStatusBar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,G.default)(this,t);return this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})),E.fromEvents(r,"destroy").flatMap(A.default).takeUntilBy(this._stopper).onValue(function(){e._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),r}},{key:"hideNativeStatusBar",value:function(){var e=this.getStatusArea(),t=(0,R.default)(e,"table"),r=this.getFormattingToolbar(),n=r&&"none"!==r.style.display;return t.style.display="none",r&&n&&(r.style.display="none"),function(){t.style.display="",r&&n&&(r.style.display="")}}},{key:"replaceSendButton",value:function(e){var t=this,r=this.getSendButtonGroup(),n=this.getSendAndArchiveButton();r.style.display="none";var i=n&&n.parentElement;i instanceof HTMLElement&&(i.style.display="none");var o=document.createElement("div");o.classList.add("inboxsdk__compose_customSendContainer"),o.appendChild(e),r.insertAdjacentElement("afterend",o),this._element.setAttribute("data-inboxsdk-send-replaced","");var a=(0,T.default)();return E.fromEvents(this.getBodyElement(),"keydown").takeUntilBy(this._stopper).takeUntilBy(a).filter(function(e){return(9===e.which||9===e.keyCode)&&!e.shiftKey}).onValue(function(e){var r=t.getStatusArea(),n=r.querySelectorAll("[tabindex]");if(0!==n.length){var i=(0,l.default)(n).find(function(e){return null!==e.offsetParent});i&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),i.focus())}}),function(){a.destroy(),o.remove(),t._element.removeAttribute("data-inboxsdk-send-replaced"),r.style.display="",i instanceof HTMLElement&&(i.style.display="")}}},{key:"hideDiscardButton",value:function(){var e=this.getDiscardButton();return e.style.display="none",function(){e.style.display=""}}},{key:"ensureFormattingToolbarIsHidden",value:function(){var e=this.getFormattingToolbarToggleButton(),t=this.getFormattingToolbar();e&&t&&""===t.style.display&&(0,D.simulateClick)(e)}},{key:"close",value:function(){var e=this;if(this.isInlineReplyForm())return void console.warn("Trying to close an inline reply which doesn't work.");this._element.dispatchEvent(new CustomEvent("closedProgrammatically",{bubbles:!1,cancelable:!1,detail:null})),this._isFullscreen?(this._eventStream.filter(function(e){return"fullscreenChanged"===e.eventName}).onValue(function(){return(0,D.simulateClick)(e.getCloseButton())}),(0,D.simulateClick)(this.getMoleSwitchButton())):(0,D.simulateClick)(this.getCloseButton())}},{key:"send",value:function(e){var t=this,r=e.sendAndArchive;(0,j.default)(function(){var e=t.getSendAndArchiveButton();r&&e?(0,D.simulateClick)(e):(0,D.simulateClick)(t.getSendButton())})}},{key:"discard",value:function(){(0,D.simulateClick)(this.getDiscardButton())}},{key:"popOut",value:function(){if(!this.isInlineReplyForm())throw new Error("Can only pop out inline reply compose views");var e=(0,R.default)(this._element,".M9 > [role=menu]:first-child > .SK > [role=menuitem]:last-child");(0,D.simulateClick)(e)}},{key:"overrideEditSubject",value:function(){(0,be.default)(this._driver,this)}},{key:"_hideDropzones",value:function(){(0,B.default)("compose dropzone hider","body > .aC7 .aC9 {visibility: hidden;}")}},{key:"_reenableDropzones",value:function(){(0,B.default)("compose dropzone hider",null)}},{key:"_dropzonesVisible",value:function(){return null!=(0,k.default)(document.querySelectorAll("body > .aC7:not(.aWP)"),L.default)}},{key:"_findDropzoneForThisCompose",value:function(e){var t=this._element.getBoundingClientRect(),r=e?"body > .aC7:not(.aWP)":"body > .aC7.aWP",n=_.default.toArray(Array.prototype.slice.call(document.querySelectorAll(r)),_.default.compose(_.default.filter(L.default),_.default.filter(function(e){var r=(0,s.default)(e.style.top,10),n=r+(0,s.default)(e.style.height,10),i=(0,s.default)(e.style.left,10),o=i+(0,s.default)(e.style.width,10);return r>=t.top&&i>=t.left&&o<=t.right&&n<=t.bottom}),_.default.take(1)))[0];if(!n)throw new Error("Failed to find dropzone");return n}},{key:"_attachFiles",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,p.default)(f.default.mark(function e(t,r){var n,i,o,s,l,u,c,d,p,h=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._hideDropzones(),n=(0,v.default)(function(){return(0,P.simulateDragEnd)(h._element,t)}),e.prev=2,i=!0,o=!0,s=!1,l=void 0,e.prev=7,u=(0,a.default)(_.default.partition(t,3));case 9:if(o=(c=u.next()).done){e.next=28;break}if(d=c.value,!i){e.next=15;break}i=!1,e.next=17;break;case 15:return e.next=17,(0,x.default)(500);case 17:return(0,P.simulateDragOver)(this._element,d),e.next=20,(0,q.default)(function(){return h._dropzonesVisible()},2e4);case 20:return p=this._findDropzoneForThisCompose(r),(0,P.simulateDrop)(p,d),n(),e.next=25,(0,q.default)(function(){return!h._dropzonesVisible()},2e4);case 25:o=!0,e.next=9;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(7),s=!0,l=e.t0;case 34:e.prev=34,e.prev=35,o||null==u.return||u.return();case 37:if(e.prev=37,!s){e.next=40;break}throw l;case 40:return e.finish(37);case 41:return e.finish(34);case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(2),this._driver.getLogger().error(e.t1);case 47:return e.prev=47,n(),this._reenableDropzones(),e.finish(47);case 51:case"end":return e.stop()}},e,this,[[2,44,47,51],[7,30,34,42],[35,,37,41]])}));return e}()},{key:"attachFiles",value:function(e){return this._attachFiles(e,!1)}},{key:"attachInlineFiles",value:function(e){return this._attachFiles(e,!0)}},{key:"isForward",value:function(){return Boolean(this._element.querySelector(".Un.J-JN-M-I .mI"))}},{key:"isReply",value:function(){return this._isInlineReplyForm||!!this._element.querySelector(".HQ")}},{key:"isInlineReplyForm",value:function(){return this._isInlineReplyForm}},{key:"getBodyElement",value:function(){var e=this.getMaybeBodyElement();if(!e)throw new Error("Could not find body element");return e}},{key:"getMaybeBodyElement",value:function(){return this._element.querySelector(".Ap [g_editable=true]")}},{key:"getTopFormElement",value:function(){return(0,R.default)(this._element,"td > form")}},{key:"getHTMLContent",value:function(){return this.getBodyElement().innerHTML}},{key:"getTextContent",value:function(){return this.getBodyElement().textContent}},{key:"getSelectedBodyHTML",value:function(){return(0,ie.getSelectedHTMLInElement)(this.getBodyElement(),this._lastSelectionRange)}},{key:"getSelectedBodyText",value:function(){return(0,ie.getSelectedTextInElement)(this.getBodyElement(),this._lastSelectionRange)}},{key:"getSubject",value:function(){return this.getSubjectInput().value}},{key:"getSubjectInput",value:function(){return this._element.querySelector("input[name=subjectbox]")}},{key:"getMetadataFormElement",value:function(){var e=this.getBodyElement().closest(".aoP.aoC");if(!e)throw new Error("Could not find compose container");return(0,R.default)(e,"form.bAs")}},{key:"getToRecipients",value:function(){return(0,ce.default)(this,"to")}},{key:"getCcRecipients",value:function(){return(0,ce.default)(this,"cc")}},{key:"getBccRecipients",value:function(){return(0,ce.default)(this,"bcc")}},{key:"getAdditionalActionToolbar",value:function(){return e("./gmail-compose-view/get-additional-action-toolbar").default(this._driver.isUsingMaterialUI(),this)}},{key:"updateInsertMoreAreaLeft",value:function(e){(0,he.default)(this,e)}},{key:"_getFormattingAreaOffsetLeft",value:function(){return(0,me.default)(this)}},{key:"getFormattingArea",value:function(){var e=this._formattingArea;return e||(e=this._formattingArea=this._element.querySelector(".oc")),e}},{key:"getFormattingToolbar",value:function(){return this._element.querySelector(".aX")}},{key:"getFormattingToolbarArrow",value:function(){var e=this.getFormattingToolbar();if(!e)throw new Error("Failed to find formatting toolbar");return(0,R.default)(e,".aA4")}},{key:"getFormattingToolbarToggleButton",value:function(){var e=(0,R.default)(this._element,"[role=button] .dv"),t=(0,C.default)(e,"[role=button]");if(!t)throw new Error("failed to find button");return t}},{key:"getStatusBarPrependContainer",value:function(){return this._element.querySelector(".inboxsdk__compose_statusBarPrependContainer")}},{key:"getScrollBody",value:function(){var e=this._element.querySelector("table .GP");if(!e)throw new Error("Failed to find scroll body");return e}},{key:"getStatusArea",value:function(){var e=this._element.querySelector(".aDg .aDj > .aDh");if(!e)throw new Error("Failed to find status area");return e}},{key:"getInsertMoreArea",value:function(){return(0,R.default)(this._element,".eq")}},{key:"getInsertLinkButton",value:function(){return(0,R.default)(this._element,".e5.aaA.aMZ")}},{key:"getSendButton",value:function(){return(0,R.default)(this._element,".IZ .Up div > div[role=button]:not(.Uo):not([aria-haspopup=true]):not([class^=inboxsdk_])")}},{key:"getSendButtonGroup",value:function(){var e=this._element.querySelector(".IZ .Up div > [role=button][aria-haspopup=true]:not([class^=inboxsdk_])");return e?e.parentElement:this.getSendButton()}},{key:"getSendAndArchiveButton",value:function(){if(!this.isReply())return null;var e=this._element.querySelector(".IZ .Up div > div[role=button].Uo:not([aria-haspopup=true]):not([class^=inboxsdk_])");if(e)return e;var t=this.getSendButton(),r=t.parentElement;if(!(r instanceof HTMLElement))throw new Error("should not happen");if(r.childElementCount<=1)return this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find, childElementCount <= 1"),null;var n=r.children[0]!==t?r.children[0]:r.children[1],i=n?n.querySelector("[role=button]"):null;return i?this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - found"):this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find"),i}},{key:"getCloseButton",value:function(){return this._element.querySelectorAll(".Hm > img")[2]}},{key:"getMoleSwitchButton",value:function(){return this._element.querySelectorAll(".Hm > img")[1]}},{key:"getBottomBarTable",value:function(){return(0,R.default)(this._element,".aoP .aDh > table")}},{key:"getBottomToolbarContainer",value:function(){return(0,R.default)(this._element,".aoP .aDj")}},{key:"getDiscardButton",value:function(){return(0,R.default)(this._element,".gU.az5 .oh")}},{key:"getComposeID",value:function(){return this._composeID}},{key:"getInitialMessageID",value:function(){return this._initialMessageId}},{key:"_getDraftIDfromForm",value:function(){var e=this._messageIDElement&&this._messageIDElement.value||null;if("string"==typeof e&&"undefined"!==e&&"null"!==e){if(this._driver.isUsingSyncAPI())return e.replace("#","").replace("msg-a:","");this._driver.getLogger().error(new Error("Invalid draft id in element"),{value:e})}return null}},{key:"_getMessageIDfromForm",value:function(){var e=this._messageIDElement&&this._messageIDElement.value||null;if("string"==typeof e&&"undefined"!==e&&"null"!==e){if(this._driver.isUsingSyncAPI())return e.replace("#","");if(/^[0-9a-f]+$/i.test(e))return e;this._driver.getLogger().error(new Error("Invalid message id in element"),{value:e})}return null}},{key:"getMessageID",value:function(){return this._messageId}},{key:"getTargetMessageID",value:function(){return this._targetMessageID}},{key:"getThreadID",value:function(){return this._threadID}},{key:"getCurrentDraftID",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(f.default.mark(function e(){var t,r,n;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._driver.isUsingSyncAPI()){e.next=20;break}if(t=this._getDraftIDfromForm(),!this._messageId){e.next=6;break}return e.abrupt("return",t);case 6:if(!(r=this._getMessageIDfromForm())){e.next=18;break}return e.prev=8,e.next=11,this._driver.getGmailMessageIdForSyncDraftId(r);case 11:n=e.sent,e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(8),e.abrupt("return",null);case 17:return e.abrupt("return",t);case 18:e.next=25;break;case 20:if(this.getMessageID()){e.next=24;break}return e.abrupt("return",null);case 24:return e.abrupt("return",this.getDraftID());case 25:case"end":return e.stop()}},e,this,[[8,14]])}));return e}()},{key:"getDraftID",value:function(){var e=this._draftIDpromise;return e||(e=this._draftIDpromise=this._getDraftIDimplementation()),e}},{key:"_getDraftIDimplementation",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(f.default.mark(function e(){var t,r,n,i,a,s,l,u,c=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._driver.isUsingSyncAPI()){e.next=21;break}if(t=this._getDraftIDfromForm(),!this._messageId){e.next=6;break}return e.abrupt("return",t);case 6:if(!(r=this._getMessageIDfromForm())){e.next=19;break}return e.prev=8,e.next=11,this._driver.getGmailMessageIdForSyncDraftId(r);case 11:n=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(8),e.next=18,this._eventStream.filter(function(e){return"draftSaved"===e.eventName}).beforeEnd(function(){return null}).map(function(){return c._getDraftIDfromForm()}).take(1).toPromise();case 18:return e.abrupt("return",t);case 19:e.next=48;break;case 21:if(i=-1,a=null,e.prev=23,this._messageId){e.next=29;break}return e.next=27,this._eventStream.filter(function(e){return"messageIDChange"===e.eventName}).beforeEnd(function(){return null}).take(1).toPromise();case 27:if(this._messageId){e.next=29;break}return e.abrupt("return",null);case 29:s=null,l=f.default.mark(function e(){var t,r,n,o;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i++,t=c._messageId){e.next=4;break}throw new Error("Should not happen");case 4:if(s!==t){e.next=11;break}if(!c._draftSaving){e.next=9;break}return e.next=8,c._eventStream.filter(function(e){return"messageIDChange"===e.eventName}).beforeEnd(function(){return null}).take(1).toPromise();case 8:return e.abrupt("return","continue");case 9:throw setTimeout((0,p.default)(f.default.mark(function e(){var r,n,i,o,a;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c._messageId){e.next=3;break}throw new Error("Should not happen");case 3:return e.next=5,c._driver.getDraftIDForMessageID(r,!0);case 5:n=e.sent,i=n.draftID,o=n.debugData,a=new Error("Failed to read draft ID -- after check"),c._driver.getLogger().error(a,{message:"getDraftID error -- after check",messageIdChanged:t!==r,gotDraftID:null!=i,debugData:i?null:o});case 10:case"end":return e.stop()}},e)})),1e4),new Error("Failed to read draft ID");case 11:return s=t,e.next=14,c._driver.getDraftIDForMessageID(t);case 14:if(r=e.sent,n=r.draftID,o=r.debugData,a=o,!n){e.next=20;break}return e.abrupt("return",{v:n});case 20:case"end":return e.stop()}},e)});case 31:return e.delegateYield(l(),"t1",33);case 33:u=e.t1,e.t2=u,e.next="continue"===e.t2?37:38;break;case 37:return e.abrupt("continue",31);case 38:if("object"!==(0,o.default)(u)){e.next=40;break}return e.abrupt("return",u.v);case 40:e.next=31;break;case 42:e.next=48;break;case 44:throw e.prev=44,e.t3=e.catch(23),this._driver.getLogger().error(e.t3,{message:"getDraftID error",removedFromDOM:!document.contains(this._element),destroyed:this._destroyed,isFullscreen:this._isFullscreen,isStandalone:this._isStandalone,emailWasSent:this._emailWasSent,i:i,lastDebugData:a}),e.t3;case 48:case"end":return e.stop()}},e,this,[[8,14],[23,44]])}));return e}()},{key:"getRecipientRowElements",value:function(){return Array.prototype.filter.call(this._element.querySelectorAll(".GS tr"),function(e){return!e.classList.contains("inboxsdk__recipient_row")})}},{key:"getRecipientRowForType",value:function(e){var t=(0,R.default)(this._element,'.GS tr textarea.vO[name="'.concat(e,'"], .GS tr input[name="').concat(e,'"]')),r=(0,C.default)(t,"tr");if(!r)throw new Error;return r}},{key:"addManagedViewController",value:function(e){this._managedViewControllers.push(e)}},{key:"ensureGroupingIsOpen",value:function(e){(0,$.default)(this._element,e)}},{key:"ensureAppButtonToolbarsAreClosed",value:function(){(0,J.default)(this._element)}},{key:"isMinimized",value:function(){var e=this.getElement(),t=this.getMaybeBodyElement(),r=(0,k.default)(e.children,function(e){return e.contains(t)});return r?""!==r.style.display:(ve||(ve=!0,this._driver.getLogger().error(new Error("isMinimized failed to find bodyContainer"),{bodyElement:!!t,hasMessageIDElement:!!this._messageIDElement,ended:this._eventStream.ended,bodyElStillInCompose:this._element.contains(this._seenBodyElement),seenBodyElHtml:(0,ae.default)(this._seenBodyElement.outerHTML),composeHtml:(0,ae.default)(e.outerHTML)})),!1)}},{key:"setMinimized",value:function(e){if(e!==this.isMinimized()){if(this._isInlineReplyForm)throw new Error("Not implemented for inline compose views");var t=(0,R.default)(this._element,".Hm > img");(0,D.simulateClick)(t)}}},{key:"setFullscreen",value:function(e){if(e!==this.isFullscreen()){if(this._isInlineReplyForm)throw new Error("Not implemented for inline compose views");var t=(0,R.default)(this._element,".Hm > img:nth-of-type(2)");(0,D.simulateClick)(t)}}},{key:"setTitleBarColor",value:function(e){var t=(0,R.default)(this._element,".nH.Hy.aXJ table.cf.Ht td.Hm"),r=[(0,R.default)(this._element,".nH.Hy.aXJ .pi > .l.o"),(0,R.default)(this._element,".nH.Hy.aXJ .l.m"),(0,R.default)(this._element,".nH.Hy.aXJ .l.m > .l.n"),(0,R.default)(this._element,".nH.Hy.aXJ .l.m > .l.n > .k")];return t.classList.add("inboxsdk__compose_customTitleBarColor"),r.forEach(function(t){t.style.backgroundColor=e}),function(){t.classList.remove("inboxsdk__compose_customTitleBarColor"),r.forEach(function(e){e.style.backgroundColor=""})}}},{key:"setTitleBarText",value:function(e){if(this.isInlineReplyForm())throw new Error("setTitleBarText() is not supported on inline compose views");var t=(0,R.default)(this._element,".nH.Hy.aXJ table.cf.Ht");if(t.classList.contains("inboxsdk__compose_hasCustomTitleBarText"))throw new Error("Custom title bar text is already registered for this compose view");var r=(0,R.default)(t,"div.Hp").parentElement
;if(!(r instanceof HTMLElement))throw new Error("Could not locate title bar text parent");t.classList.add("inboxsdk__compose_hasCustomTitleBarText"),r.classList.add("inboxsdk__compose_nativeTitleBarText");var n=document.createElement("td");return n.classList.add("inboxsdk__compose_customTitleBarText"),n.innerHTML='\n      <div class="Hp">\n        <h2 class="a3E">\n          <div class="aYF">'.concat(e,"</div>\n        </h2>\n      </div>\n    "),r.insertAdjacentElement("afterend",n),function(){n.remove(),t.classList.remove("inboxsdk__compose_hasCustomTitleBarText"),r.classList.remove("inboxsdk__compose_nativeTitleBarText")}}},{key:"_triggerDraftSave",value:function(){var e=this;this._isTriggeringADraftSavePending||(this._isTriggeringADraftSavePending=!0,E.later(0).takeUntilBy(this._stopper).onValue(function(){e._isTriggeringADraftSavePending=!1;var t=e.getMaybeBodyElement();if(t){var r=e._driver.getPageCommunicator().silenceGmailErrorsForAMoment();try{(0,M.default)(t,190,0)}finally{r()}}}))}},{key:"_getTargetMessageID",value:function(){var e=this._element.querySelector('input[name="rm"]');return e&&"string"==typeof e.value&&"undefined"!=e.value?e.value.replace("#",""):null}},{key:"_getThreadID",value:function(){var e=this.getTargetMessageID();try{return e?this._driver.getThreadIDForMessageID(e):null}catch(e){return this._driver.getLogger().error(e),null}}},{key:"getElement",value:function(){return this._element}},{key:"isFullscreen",value:function(){return this._isFullscreen}},{key:"getLastSelectionRange",value:function(){return this._lastSelectionRange}},{key:"setLastSelectionRange",value:function(e){this._lastSelectionRange=e}},{key:"registerRequestModifier",value:function(e){var t=this,r=this._driver.isUsingSyncAPI()?this._getDraftIDfromForm():this.getComposeID();if(!r)throw new Error("keyId should be set here");var n=this._driver.getPageCommunicator().registerComposeRequestModifier(r,this._driver.getAppId());this._requestModifiers[n]=e,this._startListeningForModificationRequests(),this._stopper.onValue(function(){t._driver.getPageCommunicator().unregisterComposeRequestModifier(r,n)})}},{key:"_startListeningForModificationRequests",value:function(){var e=this;if(!this._isListeningToAjaxInterceptStream){var t=this._driver.isUsingSyncAPI()?this._getDraftIDfromForm():this.getComposeID();if(!t)throw new Error("keyId should be set here");this._driver.getPageCommunicator().ajaxInterceptStream.filter(function(r){var n=r.type,i=r.composeid,o=r.draftID,a=r.modifierId;return"inboxSDKmodifyComposeRequest"===n&&(i===t||t===o)&&Boolean(e._requestModifiers[a])}).takeUntilBy(this._stopper).onValue(function(r){var n=r.modifierId,i=r.composeParams;e._driver.getLogger().shouldTrackEverything()&&e._driver.getLogger().eventSite("inboxSDKmodifyComposeRequest");var o=e._requestModifiers[n];new d.default(function(e){return e(o(i))}).then(function(r){return e._driver.getPageCommunicator().modifyComposeRequest(t,n,r||i)}).then(function(t){return e._driver.getLogger().shouldTrackEverything()&&e._driver.getLogger().eventSite("composeRequestModified"),t}).catch(function(r){e._driver.getPageCommunicator().modifyComposeRequest(t,n,i),e._driver.getLogger().error(r)})}),this._isListeningToAjaxInterceptStream=!0}}}]),t}(),ye=S.defn(t,ge);r.default=ye},{"../../../../common/censorHTMLstring":606,"../../../../common/isElementVisible":615,"../../../driver-common/compose/getDiscardStream":780,"../../../driver-common/compose/getPresendingStream":781,"../../../lib/delay-asap":803,"../../../lib/dom/get-selection":808,"../../../lib/dom/insert-html-at-cursor":810,"../../../lib/dom/make-element-child-stream":812,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/dom/set-css":823,"../../../lib/dom/simulate-drag-and-drop":825,"../../../lib/dom/simulate-key":826,"../../../lib/dom/simulate-mouse-event":827,"../../../lib/handle-compose-link-chips":833,"../../../lib/insert-link-chip-into-body":839,"../../../lib/stream-wait-for":853,"../../../lib/wait-for":856,"../gmail-element-getter":655,"../gmail-response-processor":659,"./gmail-compose-view/add-button":674,"./gmail-compose-view/add-compose-notice":675,"./gmail-compose-view/add-recipient-row":676,"./gmail-compose-view/add-status-bar":677,"./gmail-compose-view/add-tooltip-to-button":678,"./gmail-compose-view/ensure-app-button-toolbars-are-closed":679,"./gmail-compose-view/ensure-grouping-is-open":680,"./gmail-compose-view/focus":681,"./gmail-compose-view/from-manager":682,"./gmail-compose-view/get-additional-action-toolbar":683,"./gmail-compose-view/get-address-changes-stream":684,"./gmail-compose-view/get-body-changes-stream":686,"./gmail-compose-view/get-formatting-area-offset-left":687,"./gmail-compose-view/get-minimized-stream":688,"./gmail-compose-view/get-recipients":689,"./gmail-compose-view/get-response-type-changes-stream":690,"./gmail-compose-view/insert-link-into-body":692,"./gmail-compose-view/manage-button-grouping":693,"./gmail-compose-view/monitor-selection-range":694,"./gmail-compose-view/override-edit-subject":695,"./gmail-compose-view/set-recipients":697,"./gmail-compose-view/size-fixer":698,"./gmail-compose-view/update-insert-more-area-left":699,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"@babel/runtime-corejs2/helpers/typeof":58,"@babel/runtime-corejs2/regenerator":59,asap:77,"closest-ng":96,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/constant":451,"lodash/escape":456,"lodash/find":458,"lodash/includes":466,"lodash/once":489,pdelay:518,"transducers.js":595,ud:597}],674:[function(e,t,r){"use strict";function n(e,t,r,n){return new f.default(function(o,a){var s;t.takeUntilBy(e.getStopper()).onValue(function(t){var a=l(t,n);s?s.update(a):a&&(s=i(e,a,r),o({buttonViewController:s,buttonDescriptor:t}))}).onEnd(function(){o(null)})})}function i(e,t,r){if(e.getElement()&&e.getFormattingToolbar()){var n;return"MODIFIER"===t.type?n=o(e,t,r):"SEND_ACTION"===t.type&&(n=a(e,t)),e.getElement().dispatchEvent(new CustomEvent("buttonAdded",{bubbles:!1,cancelable:!1,detail:null})),n}}function o(e,t,r){var n=s(t);n.getView().getElement().setAttribute("tabindex","1"),n.getView().getElement().setAttribute("data-order-hint",String(t.orderHint||0)),n.getView().getElement().setAttribute("data-group-order-hint",r);var i=e._getFormattingAreaOffsetLeft(),o=n.getView().getElement(),a=e.getAdditionalActionToolbar();return(0,_.default)(a,o),e.updateInsertMoreAreaLeft(i),e.addManagedViewController(n),n}function a(e,t){var r=s(t);r.getView().removeClass("inboxsdk__composeButton"),r.getView().addClass("inboxsdk__compose_sendButton"),r.getView().getElement().setAttribute("tabindex","1");var n=e.getSendButtonGroup(),i=r.getView().getElement();return n.parentElement.insertBefore(i,n.nextSibling),e.addManagedViewController(r),r}function s(e){var t,r=new p.default(e),n=(0,d.default)({buttonView:r},e);return e.hasDropdown?((0,c.default)(n,{dropdownViewDriverClass:b.default,dropdownPositionOptions:{vAlign:"top"}}),t=new m.default(n)):t=new h.default(n),t}function l(e,t){if(!e)return null;var r=(0,d.default)({type:"MODIFIER"},e),n=r.onClick;return r.onClick=function(e){n((0,d.default)({},t,e))},r.hasDropdown?r.dropdownShowFunction=r.onClick:r.activateFunction=r.onClick,r.noArrow=!0,r.tooltip=r.tooltip||r.title,delete r.title,"MODIFIER"===r.type?r.buttonColor="flatIcon":"SEND_ACTION"===r.type&&(r.buttonColor="blue"),r}var u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var c=u(e("@babel/runtime-corejs2/core-js/object/assign")),d=u(e("@babel/runtime-corejs2/helpers/objectSpread")),f=u(e("@babel/runtime-corejs2/core-js/promise")),p=(u(e("kefir")),u(e("./gmail-compose-button-view"))),h=u(e("../../../../widgets/buttons/basic-button-view-controller")),m=u(e("../../../../widgets/buttons/dropdown-button-view-controller")),b=u(e("../../widgets/gmail-dropdown-view")),_=u(e("../../../../lib/dom/insert-element-in-order"))},{"../../../../lib/dom/insert-element-in-order":809,"../../../../widgets/buttons/basic-button-view-controller":891,"../../../../widgets/buttons/dropdown-button-view-controller":892,"../../widgets/gmail-dropdown-view":722,"./gmail-compose-button-view":691,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,kefir:301}],675:[function(e,t,r){"use strict";function n(e,t){var r=(0,p.default)({orderHint:0},t),n=r.orderHint,i=new y(e,n);return e.getStopper().takeUntilBy(h.default.fromEvents(i,"destroy")).onValue(function(){return i.destroy()}),i}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),c=i(e("@babel/runtime-corejs2/helpers/get")),d=i(e("@babel/runtime-corejs2/helpers/inherits")),f=i(e("@babel/runtime-corejs2/helpers/defineProperty")),p=i(e("@babel/runtime-corejs2/helpers/objectSpread")),h=i(e("kefir")),m=i(e("kefir-stopper")),b=i(e("../../../../lib/dom/insert-element-in-order")),_=i(e("../../../../lib/logger")),v=i(e("../../../../lib/dom/querySelectorOrFail")),g=i(e("../../../../views/SimpleElementView")),y=function(e){function t(e,r){var n;(0,o.default)(this,t);var i=document.createElement("div");return i.style.fontFamily="Roboto,RobotoDraft,Helvetica,Arial,sans-serif",i.style.fontSize="14px",n=(0,s.default)(this,(0,u.default)(t).call(this,i)),(0,f.default)((0,l.default)(n),"_gmailComposeView",void 0),(0,f.default)((0,l.default)(n),"_orderHint",void 0),(0,f.default)((0,l.default)(n),"_stopper",(0,m.default)()),n._gmailComposeView=e,n._orderHint=r,i.className="inboxsdk__compose_notice",i.setAttribute("data-order-hint",String(r)),n._setComposeNotice(),n}return(0,d.default)(t,e),(0,a.default)(t,[{key:"destroy",value:function(){this.destroyed||((0,c.default)((0,u.default)(t.prototype),"destroy",this).call(this),this._stopper.destroy())}},{key:"_setComposeNotice",value:function(){try{var e=(0,v.default)(this._gmailComposeView.getElement(),".iN");(0,b.default)(e,this.el,["data-order-hint"],!0)}catch(e){_.default.error(e)}}}]),t}(g.default)},{"../../../../lib/dom/insert-element-in-order":809,"../../../../lib/dom/querySelectorOrFail":821,"../../../../lib/logger":843,"../../../../views/SimpleElementView":872,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/get":40,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301,"kefir-stopper":300}],676:[function(e,t,r){"use strict";function n(e,t){var r;return t.takeUntilBy(e.getStopper()).onValue(function(t){r&&(r.remove(),r=null),t&&(r=i(e,t),(0,a.default)(r)),e.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),function(){r&&(r.remove(),r=null,e.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})))}}function i(e,t){var r=document.createElement("tr"),n=document.createElement("td"),i=document.createElement("td");if(r.appendChild(n),r.appendChild(i),r.setAttribute("class","inboxsdk__recipient_row"),t.labelText){n.setAttribute("class","ok");var o=document.createElement("span");o.setAttribute("class","gO"),n.appendChild(o),o.textContent=t.labelText,t.labelClass&&n.classList.add(t.labelClass),t.labelTextClass&&o.classList.add(t.labelTextClass)}t.el&&(i.setAttribute("class","az3"),i.appendChild(t.el));var a=e.getRecipientRowElements()[0];return a.parentElement.insertBefore(r,a.nextSibling),r}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=(o(e("kefir")),o(e("../../../../lib/dom/block-and-reemit-keyboard-events")))},{"../../../../lib/dom/block-and-reemit-keyboard-events":804,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],677:[function(e,t,r){"use strict";function n(e,t){var r=(0,m.default)({height:40,orderHint:0,addAboveNativeStatusBar:!1},t),n=r.height,i=r.orderHint,o=r.addAboveNativeStatusBar,a=new E(e,n,i,o);return e.getStopper().takeUntilBy(_.default.fromEvents(a,"destroy")).onValue(function(){return a.destroy()}),a}function i(e,t){var r=document.createElement("div");return r.className=(0,g.default)("aDh","inboxsdk__compose_statusbar",{inboxsdk__addAboveNative:t}),r.style.fontFamily="Roboto,RobotoDraft,Helvetica,Arial,sans-serif",r.style.fontSize="15.6px",r.setAttribute("data-order-hint",String(e)),r}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/core-js/array/from")),s=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=o(e("@babel/runtime-corejs2/helpers/createClass")),u=o(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),c=o(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=o(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),f=o(e("@babel/runtime-corejs2/helpers/get")),p=o(e("@babel/runtime-corejs2/helpers/inherits")),h=o(e("@babel/runtime-corejs2/helpers/defineProperty")),m=o(e("@babel/runtime-corejs2/helpers/objectSpread")),b=e("ud"),_=o(e("kefir")),v=o(e("kefir-stopper")),g=o(e("classnames")),y=o(e("../../../../lib/dom/insert-element-in-order")),w=o(e("../../../../lib/logger")),k=o(e("../../../../lib/dom/querySelectorOrFail")),j=o(e("../../../../views/SimpleElementView")),x=(0,b.defn)(t,n);r.default=x;var E=function(e){function t(e,r,n,o){var a;return(0,s.default)(this,t),a=(0,u.default)(this,(0,d.default)(t).call(this,i(n,o))),(0,h.default)((0,c.default)(a),"_addAboveNativeStatusBar",void 0),(0,h.default)((0,c.default)(a),"_gmailComposeView",void 0),(0,h.default)((0,c.default)(a),"_nativeStatusContainer",void 0),(0,h.default)((0,c.default)(a),"_prependContainer",null),(0,h.default)((0,c.default)(a),"_stopper",(0,v.default)()),a._addAboveNativeStatusBar=o,a._gmailComposeView=e,a._nativeStatusContainer=(0,k.default)(e.getElement(),".iN > tbody .aDj"),a._setStatusBar(),a.setHeight(r),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"destroy",value:function(){this.destroyed||((0,f.default)((0,d.default)(t.prototype),"destroy",this).call(this),this._stopper.destroy(),this._prependContainer&&0===this._prependContainer.children.length&&this._prependContainer.remove(),this._updateTotalHeight())}},{key:"setHeight",value:function(e){this.el.style.height=e+"px",this._updateTotalHeight()}},{key:"_updateTotalHeight",value:function(){var e=(0,a.default)(this._gmailComposeView.getElement().querySelectorAll(".inboxsdk__compose_statusbar")).map(function(e){return e.getBoundingClientRect().height}).reduce(function(e,t){return e+t},0);this._gmailComposeView.getElement().style.setProperty("--inboxsdk-total-added-statusbar-height",e+"px")}},{key:"_setStatusBar",value:function(){try{var e=this._gmailComposeView.getStatusArea();if(this._gmailComposeView.getElement().classList.add("inboxsdk__compose_statusbarActive"),this._addAboveNativeStatusBar){var t=this._prependContainer=e.querySelector(".inboxsdk__compose_statusBarPrependContainer")||document.createElement("div");t.classList.add("inboxsdk__compose_statusBarPrependContainer"),e.insertAdjacentElement("afterbegin",t),(0,y.default)(t,this.el)}else if(this._gmailComposeView.getGmailDriver().isUsingMaterialUI()&&this._gmailComposeView.isInlineReplyForm()){var r=(0,k.default)(this._gmailComposeView.getElement(),".iN > tbody .aDj .aDh .IZ");(0,y.default)(r,this.el)}else(0,y.default)(e,this.el)}catch(e){w.default.error(e)}}}]),t}(j.default)},{"../../../../lib/dom/insert-element-in-order":809,"../../../../lib/dom/querySelectorOrFail":821,"../../../../lib/logger":843,"../../../../views/SimpleElementView":872,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/get":40,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,classnames:95,kefir:301,"kefir-stopper":300,ud:597}],678:[function(e,t,r){"use strict";function n(e,t,r,n){var o=new l.default(n),s=o.getStopper().merge(e.getStopper());e.getStopper().takeUntilBy(o.getStopper()).onValue(function(){return o.destroy()}),document.body.appendChild(o.getElement()),i(o,e,t,r),e.getEventStream().filter(function(e){return"buttonAdded"===e.eventName||"fullscreenChanged"===e.eventName}).merge(o.getEventStream().filter(function(e){return"imageLoaded"===e.eventName})).debounce(10).takeUntilBy(s).onValue(i.bind(null,o,e,t,r)),t.getView().getEventStream().takeUntilBy(s).filter(function(e){return"click"===e.eventName}).onValue(o.destroy.bind(o));var u=a.default.interval(50).takeUntilBy(s),c=0,d=0;return u.takeWhile(function(){return!!t.getView()&&!!o.getElement()}).map(function(){return t.getView().getElement().getBoundingClientRect()}).filter(function(e){return e.left!==c||e.top!==d}).map(function(e){return c=e.left,d=e.top,e}).onValue(o.anchor.bind(o,t.getView().getElement(),{position:"top"})),u.filter(function(){return!t.getView()||!t.getView().getElement().offsetParent}).onValue(o.destroy.bind(o)),o}function i(e,t,r,n){try{t.ensureGroupingIsOpen(n.type),setTimeout(function(){e.anchor(r.getView().getElement(),{position:"top"})},10)}catch(e){s.default.error(e)}}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("kefir")),s=o(e("../../../../lib/logger")),l=o(e("../../widgets/gmail-tooltip-view"))},{"../../../../lib/logger":843,"../../widgets/gmail-tooltip-view":726,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],679:[function(e,t,r){"use strict";function n(e){var t=e.querySelector(".inboxsdk__compose_groupedActionButton");t&&e.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")&&(0,i.simulateClick)(t)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":827,"@babel/runtime-corejs2/core-js/object/define-property":14}],680:[function(e,t,r){"use strict";function n(e,t){if("SEND_ACTION"!==t){var r=e.querySelector(".inboxsdk__compose_groupedActionButton");r&&(e.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")||(0,i.simulateClick)(r))}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":827,"@babel/runtime-corejs2/core-js/object/define-property":14}],681:[function(e,t,r){"use strict";function n(e){e.getBodyElement().focus();var t=e.getLastSelectionRange(),r=document.getSelection();if(!r)throw new Error;t&&r.anchorNode===r.focusNode&&r.anchorOffset===r.focusOffset&&(r.removeAllRanges(),r.addRange(t))}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],682:[function(e,t,r){"use strict";function n(e,t){var r=t.getElement().querySelector('input[name="from"]'),n=r?r.value:null;if(!n)return e.getUserContact();var o,a=i(e,t),s=(0,l.default)(a,function(e){return e.emailAddress===n});return s?o=s.name:(o=n,e.getLogger().error(new Error("getFromContact failed to find name"),{fromContactChoicesLength:a.length})),{emailAddress:n,name:o}}function i(e,t){var r=t.getElement().querySelectorAll("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX > div[value][role=menuitem]");return 0==r.length?[e.getUserContact()]:(0,s.default)(r).map(function(e){return{emailAddress:e.getAttribute("value")||"",name:e.textContent.replace(/<.*/,"").trim()}})}function o(e,t,r){if(t.getFromContact().emailAddress!==r){var n=t.getElement().querySelector("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX");if(n){var i=(0,l.default)(n.children,function(e){return e.getAttribute("value")==r});if(!i)throw new Error("Chosen email from choice was not found");(0,u.simulateClick)(i)}else if(e.getUserContact().emailAddress!=r)throw new Error("Chosen email from choice was not found")}}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.getFromContact=n,r.getFromContactChoices=i,r.setFromEmail=o;var s=a(e("@babel/runtime-corejs2/core-js/array/from")),l=a(e("lodash/find")),u=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":827,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/find":458}],683:[function(e,t,r){"use strict";function n(e,t){var r=t.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar > div");if(r)return r;var n=t.getElement().querySelector(".inboxsdk__compose_actionToolbar > div");if(n)return n;if(!(n=s.get(t))){var o=n=i(e,t);t.getStopper().onValue(function(){o.remove()}),s.set(t,n)}return n}function i(e,t){var r=document.createElement("td");r.setAttribute("class","inboxsdk__compose_actionToolbar gU");var n=t.getFormattingArea();if(!n)throw new Error("formatting area missing");if(n.insertAdjacentElement("beforebegin",r),!e){var i=document.createElement("td");i.setAttribute("class","inboxsdk__compose_separator gU"),i.innerHTML='<div class="Uz"></div>',r.insertAdjacentElement("afterend",i)}for(var o=r.parentElement;o&&"TABLE"!==o.tagName;)o=o.parentElement;if(o){var a=o.querySelector("colgroup col");if(a){var s=document.createElement("col");s.setAttribute("class","inboxsdk__compose_actionToolbarColumn");var l=document.createElement("col");l.setAttribute("class","inboxsdk__compose_separatorColumn"),a.insertAdjacentElement("afterend",l),a.insertAdjacentElement("afterend",s)}}var u=document.createElement("div");return r.appendChild(u),u}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/core-js/weak-map")),s=new a.default},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],684:[function(e,t,r){"use strict";function n(e){var t=e.getRecipientRowElements();if(!t||0===t.length)return d.default.never();var r=d.default.merge([i("to",e),i("cc",e),i("bcc",e)]),n=r.map(a);return d.default.merge([r,n,s(e)])}function i(e,t){var r;try{r=t.getRecipientRowForType(e)}catch(t){return p.default.error(t,{addressType:e}),d.default.never()}var n=(0,h.default)(r,{childList:!0,subtree:!0});return d.default.later(0,null).flatMap(function(){return d.default.merge([n.toProperty(function(){return{addedNodes:r.querySelectorAll(".vR")}}).transduce(f.default.compose(f.default.mapcat(function(e){return(0,c.default)(e.addedNodes)}),f.default.filter(o),f.default.map((0,m.default)(e,t)),f.default.keep(),f.default.map(function(t){return l(e+"ContactAdded",t)}))),n.transduce(f.default.compose(f.default.mapcat(function(e){return(0,c.default)(e.removedNodes)}),f.default.filter(o),f.default.map((0,m.default)(e,t)),f.default.keep(),f.default.map(function(t){return l(e+"ContactRemoved",t)})))])})}function o(e){return e.classList&&e.classList.contains("vR")}function a(e){var t={to:{added:[],removed:[]},cc:{added:[],removed:[]},bcc:{added:[],removed:[]}},r=e.eventName.split("Contact");return t[r[0]][r[1].toLowerCase()].push(e.data.contact),{eventName:"recipientsChanged",data:t}}function s(e){return d.default.later(0,null).flatMap(function(){var t=e.getElement().querySelector('input[name="from"]');return d.default.constant(l("fromContactChanged",e.getFromContact())).merge(t?(0,h.default)(t,{attributes:!0,attributeFilter:["value"]}).map(function(){return l("fromContactChanged",e.getFromContact())}):d.default.never())})}function l(e,t){return{eventName:e,data:{contact:t}}}var u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var c=u(e("@babel/runtime-corejs2/core-js/array/from")),d=u(e("kefir")),f=u(e("transducers.js")),p=u(e("../../../../lib/logger")),h=u(e("../../../../lib/dom/make-mutation-observer-stream")),m=u(e("./get-address-information-extractor"))},{"../../../../lib/dom/make-mutation-observer-stream":816,"../../../../lib/logger":843,"./get-address-information-extractor":685,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"transducers.js":595}],685:[function(e,t,r){"use strict";function n(e,t){return function(r){var n=r.querySelector("input[name='".concat(e,"']"));if(!n)return o.default.error(new Error("contactNode can't be found"),{addressType:e,composeViewHtml:(0,s.default)(t.getElement().outerHTML)}),null;var i=n.value;try{return(0,a.default)(i)}catch(e){return null}}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("../../../../lib/logger")),a=i(e("../../../../lib/extract-contact-from-email-contact-string")),s=i(e("../../../../../common/censorHTMLstring"))},{"../../../../../common/censorHTMLstring":606,"../../../../lib/extract-contact-from-email-contact-string":829,"../../../../lib/logger":843,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],686:[function(e,t,r){"use strict";function n(e){var t=e.getBodyElement();return(0,o.default)(t,{childList:!0,subtree:!0,characterData:!0}).map(function(){return{eventName:"bodyChanged"}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=(i(e("kefir")),i(e("../../../../lib/dom/make-mutation-observer-stream")))},{"../../../../lib/dom/make-mutation-observer-stream":816,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],687:[function(e,t,r){"use strict";function n(e,t){if(!t){var r=s.get(e);if(null!=r)return r}var n=e.getFormattingArea();if(!n)return 0;var i=n.getBoundingClientRect().left;return s.set(e,i),(0,a.default)(function(){return s.delete(e)}),i}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/weak-map")),a=i(e("asap")),s=new o.default},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,asap:77}],688:[function(e,t,r){"use strict";function n(e){return u.flatMapLatest(function(t){return t(e)})}function i(e){var t=e.getElement(),r=e.getBodyElement(),n=(0,a.default)(t.children,function(e){return e.contains(r)});return(0,l.default)(n,{attributes:!0,attributeFilter:["style"]}).map(function(){return e.isMinimized()})}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("lodash/find")),s=(o(e("kefir")),o(e("ud-kefir"))),l=o(e("../../../../lib/dom/make-mutation-observer-stream")),u=(0,s.default)(t,i)},{"../../../../lib/dom/make-mutation-observer-stream":816,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"lodash/find":458,"ud-kefir":596}],689:[function(e,t,r){"use strict";function n(e,t){var r;try{r=e.getRecipientRowForType(t)}catch(e){return a.default.error(e,{addressType:t}),[]}return i(r,t,e).filter(Boolean)}function i(e,t,r){var n=e.querySelectorAll(".vR");return Array.prototype.map.call(n,(0,s.default)(t,r))}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=(o(e("../gmail-compose-view")),o(e("../../../../lib/logger"))),s=o(e("./get-address-information-extractor"))},{"../../../../lib/logger":843,"../gmail-compose-view":673,"./get-address-information-extractor":685,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],690:[function(e,t,r){"use strict";function n(e){var t;try{return t=(0,l.default)(e.getElement(),".J-J5-Ji .J-JN-M-I-Jm > img"),(0,s.default)(t,{attributeFilter:["class"],attributes:!0}).map(function(){return{data:{isForward:e.isForward()},eventName:"responseTypeChanged"}})}catch(e){return a.default.error(e),o.default.never()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("kefir")),a=i(e("../../../../lib/logger")),s=i(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),l=i(e("../../../../lib/dom/querySelectorOrFail"))},{"../../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../../lib/dom/querySelectorOrFail":821,"../../../../lib/logger":843,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],691:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0
;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/defineProperty")),l=i(e("lodash/includes")),u=n(e("kefir")),c=i(e("kefir-bus")),d=i(e("../../../../lib/logger")),f=e("../../../../lib/dom/simulate-mouse-event"),p=i(e("../../../../lib/dom/keyboard-shortcut-stream")),h=function(){function e(t){(0,o.default)(this,e),(0,s.default)(this,"_element",document.createElement("div")),(0,s.default)(this,"_iconElement",document.createElement("div")),(0,s.default)(this,"_iconImgElement",void 0),(0,s.default)(this,"_iconClass",void 0),(0,s.default)(this,"_iconUrl",void 0),(0,s.default)(this,"_tooltip",void 0),(0,s.default)(this,"_hasDropdown",void 0),(0,s.default)(this,"_isEnabled",void 0),(0,s.default)(this,"_keyboardShortcutHandle",void 0),(0,s.default)(this,"_eventStream",void 0),this._isEnabled=!1!==t.enabled,this._iconClass=t.iconClass,this._iconUrl=t.iconUrl,this._tooltip=t.tooltip||t.title||t.text,this._hasDropdown=!!t.hasDropdown,this._keyboardShortcutHandle=t.keyboardShortcutHandle,this._createElement(t),this._eventStream=(0,c.default)(),this._setupEventStream(),this._setupAestheticEvents(),!1!==t.enabled&&this._setupKeyboardShortcutEvent()}return(0,a.default)(e,[{key:"destroy",value:function(){this._element.remove(),this._eventStream.end()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"activate",value:function(){this.addClass("inboxsdk__composeButton_active")}},{key:"deactivate",value:function(){this.removeClass("inboxsdk__composeButton_active")}},{key:"addClass",value:function(e){this._element.classList.add(e)}},{key:"removeClass",value:function(e){this._element.classList.remove(e)}},{key:"simulateHover",value:function(){(0,f.simulateHover)(this._element)}},{key:"setEnabled",value:function(e){this._setEnabled(e)}},{key:"isEnabled",value:function(){return this._isEnabled}},{key:"update",value:function(e){if(!e)return void(this._element.style.display="none");"none"===this._element.style.display&&(this._element.style.display="");var t=e.tooltip||e.title||e.text;t!=this._tooltip&&this._updateTooltip(t),e.iconUrl!=this._iconUrl&&this._updateIconUrl(e.iconUrl),e.iconClass!=this._iconClass&&this._updateIconClass(e.iconClass),!1!==e.enabled&&!0!==e.enabled||this._setEnabled(e.enabled)}},{key:"_createElement",value:function(e){this._createMainElement(e),this._createIconElement()}},{key:"_createMainElement",value:function(e){this._element.setAttribute("class","inboxsdk__composeButton"),e.tooltip&&this._element.setAttribute("aria-label",e.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0");var t=e.tooltip||e.title||e.text;t&&this._element.setAttribute("data-tooltip",t),!1===e.enabled&&this._element.classList.add("inboxsdk__button_disabled")}},{key:"_createIconElement",value:function(){var e=this._iconElement;this._iconClass&&(e.innerHTML="&nbsp;",e.setAttribute("class",this._iconClass)),e.classList.add("inboxsdk__button_icon"),this._element.appendChild(e),this._iconUrl&&this._createIconImgElement()}},{key:"_createIconImgElement",value:function(){this._iconElement.innerHTML="";var e=this._iconImgElement=document.createElement("img");e.classList.add("inboxsdk__button_iconImg"),this._iconUrl?e.src=this._iconUrl:d.default.error(new Error("_createIconImgElement should not be called with null _iconUrl")),this._iconElement.appendChild(e)}},{key:"_updateTooltip",value:function(e){this._tooltip=e,e?this._element.setAttribute("data-tooltip",e):this._element.removeAttribute("data-tooltip")}},{key:"_updateIconUrl",value:function(e){this._iconUrl=e,!e&&this._iconImgElement?(this._iconImgElement.remove(),this._iconImgElement=null):e&&!this._iconImgElement?this._createIconImgElement():e&&this._iconImgElement&&(this._iconImgElement.src=e)}},{key:"_updateIconClass",value:function(e){this._iconClass=e,this._iconElement.setAttribute("class","inboxsdk__button_icon "+(e||""))}},{key:"_setEnabled",value:function(e){this._isEnabled!==e&&(this._isEnabled=e,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}),this._isEnabled&&this._setupKeyboardShortcutEvent())}},{key:"_setupEventStream",value:function(){var e=this,t=u.fromEvents(this._element,"click");t.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(t.filter(function(){return e.isEnabled()}).map(function(e){return{eventName:"click",domEvent:e}}));var r=function(e){return(0,l.default)([32,13],e.which)},n=u.fromEvents(this._element,"keydown").filter(function(){return e.isEnabled()}),i=n.filter(r);this._eventStream.plug(i.map(function(e){return{eventName:"click",domEvent:e}})),i.onValue(function(e){e.stopPropagation(),e.preventDefault()})}},{key:"_setupKeyboardShortcutEvent",value:function(){var e=this._keyboardShortcutHandle;e&&this._eventStream.plug((0,p.default)(e.chord).takeUntilBy(this._eventStream.filter(function(e){return"enabledChanged"===e.eventName&&!1===e.isEnabled})).map(function(e){return{eventName:"click",domEvent:e}}))}},{key:"_setupAestheticEvents",value:function(){var e=this;u.fromEvents(this._element,"mouseenter").filter(function(){return e.isEnabled()}).onValue(function(){e._element.classList.add("inboxsdk__button_hover")}),u.fromEvents(this._element,"mouseleave").onValue(function(){e._element.classList.remove("inboxsdk__button_hover")})}}]),e}();r.default=h},{"../../../../lib/dom/keyboard-shortcut-stream":811,"../../../../lib/dom/simulate-mouse-event":827,"../../../../lib/logger":843,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301,"kefir-bus":298,"lodash/includes":466}],692:[function(e,t,r){"use strict";function n(e,t,r){return i(e,t,r)}function i(e,t,r){e.focus(),e.getBodyElement().focus();var n=document.getSelection();if(!n)throw new Error("selection does't exist, what?");var i=n.getRangeAt(0),o=document.createElement("a");return o.href=r,i.extractContents(),i.insertNode(o),o.textContent=t,n.selectAllChildren(o),n.collapseToEnd(),o}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;e("../../../../lib/dom/simulate-mouse-event"),o(e("../../../../lib/dom/set-value-and-dispatch-event"))},{"../../../../lib/dom/set-value-and-dispatch-event":824,"../../../../lib/dom/simulate-mouse-event":827,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],693:[function(e,t,r){"use strict";function n(e){e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")&&i(e),o(e)}function i(e){var t=(0,O.default)(P,e);t.groupedToolbarButtonViewController&&t.groupedToolbarButtonViewController.destroy(),t.formattingToolbarMutationObserver&&t.formattingToolbarMutationObserver.disconnect();var r=t.groupedActionToolbarContainer.firstElementChild;if(r){r.remove();var n=(0,M.default)(e.getElement(),".inboxsdk__compose_actionToolbar");n.innerHTML="",n.appendChild(r)}}function o(e){a(e),g(e)}function a(e){N.has(e)||(N.add(e),window.requestAnimationFrame(function(){if(N.delete(e),!e.isDestroyed()&&(s(e),l(e))){var t=c(e),r=d(e);p(e,r),h(e,r),w(e,r),e.getElement().classList.remove("inboxsdk__compose_narrow_buttons"),s(e),e.getStopper().onValue(function(){t.remove(),r.destroy()})}}))}function s(e){e.getElement().clientWidth>u(e)||0===e.getElement().querySelectorAll(".inboxsdk__composeButton").length||e.getElement().classList.contains("inboxsdk__compose_narrow_buttons")||(e.getElement().classList.add("inboxsdk__compose_narrow_buttons"),e.getElement().offsetTop)}function l(e){return!e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")&&(!(e.getElement().querySelectorAll(".inboxsdk__composeButton").length<2)&&u(e)>e.getBottomToolbarContainer().clientWidth)}function u(e){var t=e.getBottomBarTable();return e.getGmailDriver().isUsingMaterialUI()?(0,j.default)(t.querySelectorAll(".btC > td")).reduce(function(e,t){return e+t.clientWidth},0):t.clientWidth}function c(e){var t=document.createElement("div");return t.classList.add("inboxsdk__compose_groupedActionToolbar"),t.innerHTML='<div class="inboxsdk__compose_groupedActionToolbar_arrow"> </div>',(0,O.default)(P,e).groupedActionToolbarContainer=t,t.style.display="none",t}function d(e){var t=(0,O.default)(P,e),r=f(),n=new I.default({buttonView:r,activateFunction:function(){_(e,n),v()&&(0,O.default)(P,e).groupedActionToolbarContainer.querySelectorAll(".inboxsdk__composeButton")[0].focus()}});return t.groupedActionToolbarContainer.addEventListener("keydown",function(e){27===e.which&&(n.activate(),r.getElement().focus(),e.preventDefault(),e.stopPropagation())}),(0,O.default)(P,e).groupedToolbarButtonViewController=n,n}function f(){var e=new C.default({tooltip:"More Tools",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAADxJREFUOBFjYKASYISa8x/NPJLFmdAMIJs7+Awi2ys000hy7EBdghHLgy+wqeYimgU+2QaPxhrZQUe6RgBYwgkWqJftAwAAAABJRU5ErkJggg=="});return e.addClass("inboxsdk__compose_groupedActionButton"),e.getElement().setAttribute("tabindex","1"),e}function p(e,t){var r=(0,M.default)(e.getElement(),".inboxsdk__compose_actionToolbar > div"),n=r.parentElement,i=document.createElement("div");i.appendChild(t.getView().getElement()),n.appendChild(i);var o=(0,O.default)(P,e).groupedActionToolbarContainer;o.insertBefore(r,o.firstElementChild),n.appendChild(o)}function h(e,t){v()&&b(e,t)}function m(e,t){(0,O.default)(P,e).groupedActionToolbarContainer.style.display="none",e.getElement().classList.remove("inboxsdk__compose_groupedActionToolbar_visible"),t.getView().deactivate(),localStorage.inboxsdk__compose_groupedActionButton_state="collapsed",e.getBottomBarTable().style.position="";var r=e.getElement().querySelector(".qz");r&&(r.scrollTop=r.scrollTop-1)}function b(e,t){(0,O.default)(P,e).groupedActionToolbarContainer.style.display="",e.getElement().classList.add("inboxsdk__compose_groupedActionToolbar_visible"),t.getView().activate(),localStorage.inboxsdk__compose_groupedActionButton_state="expanded",y(e);var r=e.getFormattingToolbar();r&&""===r.style.display&&(0,T.simulateClick)(e.getFormattingToolbarToggleButton());var n=e.getElement().querySelector(".qz");n&&(n.scrollTop=n.scrollTop+1)}function _(e,t){v()?m(e,t):b(e,t)}function v(){return"expanded"===localStorage.inboxsdk__compose_groupedActionButton_state}function g(e){B.has(e)||(B.add(e),window.requestAnimationFrame(function(){if(B.delete(e),!e.isDestroyed()){(0,L.default)(e);var t=e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");t&&"none"!==t.style.display&&y(e)}}))}function y(e){if(!e.isMinimized()){var t=e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");if(t){var r=(0,M.default)(e.getElement(),".inboxsdk__compose_groupedActionButton"),n=(0,M.default)(t,".inboxsdk__compose_groupedActionToolbar_arrow");if(t.style.display="",r.offsetLeft+r.clientWidth>t.offsetWidth){var i=r.clientWidth/2-t.offsetWidth/2-3;t.style.left=r.offsetLeft+i+"px",n.style.left=-(i+1)+"px"}else t.style.left="",n.style.left=r.offsetLeft-1+"px";e.getBottomBarTable().style.position="relative";var o=e.getBottomBarTable().clientHeight;if(t.style.bottom="".concat(o+1,"px"),o<1){var a=e.getElement().querySelectorAll("td.HE");D.default.error(new Error("bottom toolbar had bad height"),{bottomToolbarHeight:o,heElementHeights:(0,j.default)(a).map(function(e){return e.clientHeight}),heElementsHTML:(0,j.default)(a).map(R.default)})}}}}function w(e,t){(0,A.default)(function(){if(e.isDestroyed())throw"skip";return e.getFormattingToolbar()}).then(function(r){var n=new MutationObserver(function(e){var r=e[0].target;r instanceof HTMLElement&&""===r.style.display&&"expanded"===localStorage.inboxsdk__compose_groupedActionButton_state&&t.activate()});n.observe(r,{attributes:!0,attributeFilter:["style"]}),(0,O.default)(P,e).formattingToolbarMutationObserver=n,e.getStopper().onValue(function(){return n.disconnect()})}).catch(function(e){if("skip"!==e)throw D.default.error(e),e})}var k=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var j=k(e("@babel/runtime-corejs2/core-js/array/from")),x=k(e("@babel/runtime-corejs2/core-js/weak-set")),E=k(e("@babel/runtime-corejs2/core-js/map")),S=(k(e("asap")),e("ud")),C=k(e("./gmail-compose-button-view")),I=k(e("../../../../widgets/buttons/basic-button-view-controller")),T=(k(e("../../../../widgets/buttons/dropdown-button-view-controller")),k(e("../../widgets/gmail-dropdown-view")),e("../../../../lib/dom/simulate-mouse-event")),A=k(e("../../../../lib/wait-for")),D=k(e("../../../../lib/logger")),M=k(e("../../../../lib/dom/querySelectorOrFail")),R=k(e("../../../../../common/censorHTMLtree")),L=k(e("./position-formatting-toolbar")),O=k(e("../../../../../common/get-or-fail")),P=(0,S.defonce)(t,function(){return new E.default}),V=(0,S.defn)(t,function(e){if("true"!==e.getElement().getAttribute("data-button-grouping-managed")){var t={};P.set(e,t),e.getElement().setAttribute("data-button-grouping-managed","true"),e.getEventStream().filter(function(e){return"fullscreenChanged"===e.eventName}).debounce(10).onValue(function(){n(e)}),e.getEventStream().filter(function(e){return"buttonAdded"===e.eventName}).onValue(function(){o(e)}),e.getEventStream().filter(function(e){return"resize"===e.eventName||"restored"===e.eventName}).onValue(function(){o(e)});var r=e.getElement();e.getStopper().onValue(function(){P.delete(e),r.setAttribute("data-button-grouping-managed","false")})}});r.default=V;var N=new x.default,B=new x.default},{"../../../../../common/censorHTMLtree":607,"../../../../../common/get-or-fail":611,"../../../../lib/dom/querySelectorOrFail":821,"../../../../lib/dom/simulate-mouse-event":827,"../../../../lib/logger":843,"../../../../lib/wait-for":856,"../../../../widgets/buttons/basic-button-view-controller":891,"../../../../widgets/buttons/dropdown-button-view-controller":892,"../../widgets/gmail-dropdown-view":722,"./gmail-compose-button-view":691,"./position-formatting-toolbar":696,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-set":31,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,asap:77,ud:597}],694:[function(e,t,r){"use strict";function n(e){i.merge([i.fromEvents(document.body,"mousedown"),i.fromEvents(document.body,"keydown")]).takeUntilBy(e.getStopper()).onValue(function(t){var r=e.getMaybeBodyElement(),n=document.getSelection();r&&n.rangeCount>0&&r.contains(n.anchorNode)&&e.setLastSelectionRange(n.getRangeAt(0))})}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=e("kefir")},{"@babel/runtime-corejs2/core-js/object/define-property":14,kefir:301}],695:[function(e,t,r){"use strict";function n(e,t){if(t.isReply()){var r=t.getElement().querySelector("div.J-M.jQjAxd.HX[role=menu] > div.SK.AX > [role=menuitem]:nth-last-child(2)");if(!r)return void(u||(e.getLogger().error(new Error("could not find edit subject item"),{composeElement:(0,s.default)(t.getElement())}),u=!0));r.addEventListener("click",function(e){e.stopPropagation()},!0),r.addEventListener("mouseup",function(r){r.stopPropagation(),i(e,t)},!0)}}function i(e,t){var r=t.getToRecipients(),n=t.getCcRecipients(),i=t.getBccRecipients(),a=t.getFromContact(),s=t.getSubject();o(t);var l=t.getHTMLContent();t.discard(),e.openNewComposeViewDriver().then(function(e){r.length>0&&e.setToRecipients(r.map(function(e){return e.emailAddress})),n.length>0&&e.setCcRecipients(n.map(function(e){return e.emailAddress})),i.length>0&&e.setBccRecipients(i.map(function(e){return e.emailAddress})),e.setFromEmail(a.emailAddress),e.setSubject(s),e.setBodyHTML(l),setTimeout(function(){e.getSubjectInput().select()},1)})}function o(e){if(!e.getBodyElement().querySelector(".gmail_extra")){var t=e.getElement().querySelector(".ajR");t&&(0,l.simulateClick)(t)}}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var s=a(e("../../../../../common/censorHTMLtree")),l=e("../../../../lib/dom/simulate-mouse-event"),u=!1},{"../../../../../common/censorHTMLtree":607,"../../../../lib/dom/simulate-mouse-event":827,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],696:[function(e,t,r){"use strict";function n(e){var t=e.getFormattingToolbar();if(t&&""===t.style.display){var r=e.getFormattingToolbarArrow(),n=e.getFormattingToolbarToggleButton(),i=n.offsetLeft+n.clientWidth/2-r.offsetWidth/2;r.style.left=i+"px";var o=e.getStatusBarPrependContainer();t.style.bottom=o?-1*o.offsetHeight+"px":""}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],697:[function(e,t,r){"use strict";function n(e,t,r){if(!i(e,t,r)){var n;try{n=e.getRecipientRowForType(t)}catch(e){return void s.default.error(e,{addressType:t})}var o=n.querySelector("textarea.vO");if(o&&o instanceof HTMLTextAreaElement){(0,a.default)(n.querySelectorAll(".vR .vM")).forEach(function(e){(0,c.simulateClick)(e)}),o.value=r.join(","),(0,d.default)(o,13,0);var u=e.getLastSelectionRange();if((0,l.default)(e.getElement(),"div.aoD.hl").dispatchEvent(new FocusEvent("focus")),"cc"===t){var f=(0,l.default)(e.getElement(),"span.aB.gQ.pE");(0,c.simulateClick)(f)}else if("bcc"===t){var p=(0,l.default)(e.getElement(),"span.aB.gQ.pB");(0,c.simulateClick)(p)}if(document.activeElement&&document.activeElement.blur(),u){var h=document.getSelection();if(!h)throw new Error;h.removeAllRanges(),h.addRange(u)}}}}function i(e,t,r){var n=(0,u.default)(e,t).map(function(e){return e.emailAddress});if(!r)return!!n;if(!n)return!!r;if(r.length!==n.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(-1===r.indexOf(o))return!1}return!0}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/core-js/array/from")),s=o(e("../../../../lib/logger")),l=o(e("../../../../lib/dom/querySelectorOrFail")),u=o(e("./get-recipients")),c=e("../../../../lib/dom/simulate-mouse-event"),d=o(e("../../../../lib/dom/simulate-key"))},{"../../../../lib/dom/querySelectorOrFail":821,"../../../../lib/dom/simulate-key":826,"../../../../lib/dom/simulate-mouse-event":827,"../../../../lib/logger":843,"./get-recipients":689,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],698:[function(e,t,r){"use strict";function n(e){return"#"+(0,_.default)(e)}function i(e,t,r){return["height","min-height","max-height"].map(function(n){var i=(0,c.default)(e.style.getPropertyValue(n),10);if((0,u.default)(i))return null;var o=Math.max(i-t,r);return o===i?null:"".concat(n,": ").concat(o,"px !important;")}).filter(Boolean).join("\n")}function o(e){var t=e.getMaybeBodyElement();return t?(0,c.default)(t.style.minHeight,10)||0:0}function a(e,t){function r(e,t){var r=n(S)+" "+e,i=(0,p.default)(x.cssRules,function(e){return e.selectorText===r});-1!==i&&x.deleteRule(i),x.insertRule(r+" { "+t+" }",0)}if(!t.isInlineReplyForm()&&!t.getElement().classList.contains("inboxsdk__size_fixer")){t.getElement().classList.add("inboxsdk__size_fixer");var a=e.isUsingMaterialUI()?g:v,s=e.isUsingMaterialUI()?w:y,u=t.getEventStream(),c=u.filter(function(){return!1}).beforeEnd(function(){return null}),h=u.filter(function(e){return(0,d.default)(["resize","fullscreenChanged"],e.eventName)}).merge((0,m.default)(null)),_=t.getStatusArea().parentElement,j=t.getScrollBody(),x=k(),E=t.getTopFormElement(),S=t.getElement().id;S||(S=t.getElement().id="x".concat(Math.random(),"x").concat((0,l.default)())),(0,b.default)(_,{attributes:!0}).takeUntilBy(c).onValue(function(){t.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),h.bufferBy(h.flatMap(function(e){return(0,m.default)(null)})).filter(function(e){return e.length>0}).merge((0,b.default)(j,{attributes:!0})).takeUntilBy(c).onValue(function(){var e=Math.max(_.offsetHeight-a,0),l=Math.max(E.offsetHeight-s,0),u=e+l,c=o(t),d=i(j,u,c);r(n(j.id),d)}),c.onValue(function(){for(var e=x.cssRules.length-1;e>=0;e--)(0,f.default)(x.cssRules[e].selectorText,n(S)+" ")&&x.deleteRule(e)})}}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=a;var l=s(e("@babel/runtime-corejs2/core-js/date/now")),u=s(e("@babel/runtime-corejs2/core-js/number/is-nan")),c=s(e("@babel/runtime-corejs2/core-js/parse-int")),d=s(e("lodash/includes")),f=s(e("lodash/startsWith")),p=s(e("lodash/findIndex")),h=s(e("lodash/once")),m=(s(e("kefir")),s(e("../../../../lib/delay-asap"))),b=s(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),_=s(e("../../../../lib/css-selector-escape")),v=42,g=60,y=84,w=72,k=(0,h.default)(function(){var e=document.createElement("style");e.type="text/css",e.className="inboxsdk__compose_size_fixer",document.head.appendChild(e);var t=e.sheet;if(!(t instanceof CSSStyleSheet))throw new Error("Could not add stylesheet");return t})},{"../../../../lib/css-selector-escape":802,"../../../../lib/delay-asap":803,"../../../../lib/dom/make-mutation-observer-chunked-stream":815,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/number/is-nan":8,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"lodash/findIndex":459,"lodash/includes":466,"lodash/once":489,"lodash/startsWith":493}],699:[function(e,t,r){"use strict";function n(e,t){s.has(e)||(s.add(e),window.requestAnimationFrame(function(){if(s.delete(e),!e.isDestroyed()){var r=e._getFormattingAreaOffsetLeft(),n=(0,o.default)(e.getInsertMoreArea().style.left,10),i=r-t;e.getInsertMoreArea().style.left=n+i+"px"}}))}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/parse-int")),a=i(e("@babel/runtime-corejs2/core-js/weak-set")),s=new a.default},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/core-js/weak-set":31,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],700:[function(e,t,r){"use strict";function n(){var e=(0,s.default)(['<div class="J-N-Jz">',"</div>"]);return n=function(){return e},e}function i(e){return{name:e.getAttribute("name"),emailAddress:e.getAttribute("email")}}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/core-js/parse-int")),s=o(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),l=o(e("@babel/runtime-corejs2/core-js/array/from")),u=o(e("@babel/runtime-corejs2/regenerator")),c=o(e("@babel/runtime-corejs2/core-js/promise")),d=o(e("@babel/runtime-corejs2/helpers/typeof")),f=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),p=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),h=o(e("@babel/runtime-corejs2/helpers/createClass")),m=o(e("@babel/runtime-corejs2/helpers/defineProperty")),b=o(e("lodash/sortBy")),_=o(e("lodash/once")),v=o(e("auto-html")),g=(o(e("asap")),e("ud")),y=o(e("kefir")),w=o(e("kefir-bus")),k=o(e("kefir-stopper")),j=o(e("kefir-cast")),x=o(e("./gmail-attachment-area-view")),E=o(e("./gmail-attachment-card-view")),S=o(e("./gmail-message-view/get-updated-contact")),C=o(e("./gmail-message-view/attachment-icon")),I=(o(e("../../../lib/delay-asap")),o(e("../../../lib/wait-for")),o(e("../../../lib/dom/make-mutation-observer-stream"))),T=o(e("../../../lib/dom/querySelectorOrFail")),A=o(e("../../../lib/dom/make-mutation-observer-chunked-stream")),D=e("../../../lib/dom/simulate-mouse-event"),M=o(e("../../../../common/censorHTMLtree")),R=o(e("../../../../common/find-parent")),L=o(e("../../../lib/dom/reemitClickEventForReact")),O=!1,P=function(){function e(t,r,n){var i=this;(0,p.default)(this,e),(0,m.default)(this,"_element",void 0),(0,m.default)(this,"_driver",void 0),(0,m.default)(this,"_eventStream",(0,w.default)()),(0,m.default)(this,"_stopper",(0,k.default)()),(0,m.default)(this,"_threadViewDriver",void 0),(0,m.default)(this,"_moreMenuItemDescriptors",void 0),(0,m.default)(this,"_moreMenuAddedElements",void 0),(0,m.default)(this,"_replyElementStream",void 0),(0,m.default)(this,"_readyStream",void 0),(0,m.default)(this,"_replyElement",void 0),(0,m.default)(this,"_gmailAttachmentAreaView",void 0),(0,m.default)(this,"_messageLoaded",!1),(0,m.default)(this,"_openMoreMenu",void 0),(0,m.default)(this,"_sender",null),(0,m.default)(this,"_recipients",null),(0,m.default)(this,"_recipientEmailAddresses",null),(0,m.default)(this,"_recipientsFull",null),this._element=t,this._threadViewDriver=r,this._driver=n,this._moreMenuItemDescriptors=[],this._moreMenuAddedElements=[],this._replyElement=null,this._replyElementStream=this._eventStream.filter(function(e){return"replyElement"===e.eventName}).map(function(e){return e.change}),this._setupMessageStateStream(),this._monitorEmailAddressHovering(),this._setupMoreMenuWatching();var o;if(n.isUsingSyncAPI()){var a=this._element.querySelector("[data-message-id]");if(a){var s=a.getAttribute("data-message-id");if(!s)throw new Error("data-message-id attribute has no value");o=a.hasAttribute("data-legacy-message-id")&&!this._driver.isRecentSyncDraftId(s.replace("#",""))?y.default.constant(null):y.default.fromPromise((0,f.default)(u.default.mark(function e(){var t,r,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=u.default.mark(function e(t){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i._driver.getGmailMessageIdForSyncMessageId(s.replace("#",""));case 3:return r=e.sent,a.setAttribute("data-legacy-message-id",r),e.abrupt("return",{v:null});case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,new c.default(function(e){return setTimeout(e,200*t)});case 12:case"end":return e.stop()}},e,null,[[0,8]])}),r=0;case 2:if(!(r<10)){e.next=10;break}return e.delegateYield(t(r),"t0",4);case 4:if(n=e.t0,"object"!==(0,d.default)(n)){e.next=7;break}return e.abrupt("return",n.v);case 7:r++,e.next=2;break;case 10:throw new Error("gmail message id never became available");case 11:case"end":return e.stop()}},e)}))())}else o=y.default.constant(null)}else o=y.default.constant(null);this._readyStream=o.takeUntilBy(this._stopper).onValue(function(){return i._processInitialState()})}return(0,h.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._eventStream.end(),this._gmailAttachmentAreaView&&this._gmailAttachmentAreaView.destroy(),this._moreMenuAddedElements.forEach(function(e){e.remove()})}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getReplyElementStream",value:function(){return this._replyElementStream}},{key:"getElement",value:function(){return this._element}},{key:"getThreadViewDriver",value:function(){return this._threadViewDriver}},{key:"isLoaded",value:function(){return this._messageLoaded}},{key:"getContentsElement",value:function(){if(!this._messageLoaded)throw new Error("tried to get message contents before message is loaded");try{return(0,T.default)(this._element,"div.ii.gt")}catch(e){return this._driver.getLogger().error(e),(0,T.default)(this._element,".adP")}}},{key:"isElementInQuotedArea",value:function(e){return null!=(0,R.default)(e,function(e){return"BLOCKQUOTE"===e.nodeName})}},{key:"getSender",value:function(){var e=this._sender;if(e)return e;var t=(0,T.default)(this._element,"td.gF span[email]"),r=t.getAttribute("email");if(!r)throw new Error("Could not find email address");return e=this._sender={name:t.getAttribute("name"),emailAddress:r}}},{key:"getRecipients",value:function(){var e=this,t=this._recipients;if(t)return t;var r=(0,l.default)(this._element.querySelectorAll(".hb span[email]"));return t=this._recipients=r.map(function(t){return e._getUpdatedContact({name:t.getAttribute("name"),emailAddress:t.getAttribute("email")||""})})}},{key:"getRecipientEmailAddresses",value:function(){var e=this._recipientEmailAddresses;if(e)return e;var t=(0,l.default)(this._element.querySelectorAll(".hb span[email]"));return e=this._recipientEmailAddresses=t.map(function(e){return e.getAttribute("email")||""})}},{key:"getRecipientsFull",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(u.default.mark(function e(){var t,r,n,i=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._recipientsFull)){e.next=3;break}return e.abrupt("return",t);case 3:if(!this._driver.isUsingSyncAPI()){e.next=11;break}return r=this._threadViewDriver.getInternalID(),e.next=7,this._driver.getPageCommunicator().getMessageRecipients(r,this._element);case 7:t=this._recipientsFull=e.sent,t||(this._driver.getLogger().error(new Error("Failed to find message recipients from response"),{threadID:r}),t=this._recipientsFull=this.getRecipients()),e.next=13;break;case 11:n=(0,l.default)(this._element.querySelectorAll(".hb span[email]")),t=this._recipientsFull=n.map(function(e){return i._getUpdatedContact({name:e.getAttribute("name"),emailAddress:e.getAttribute("email")||""})});case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDateString",value:function(){return(0,T.default)(this._element,".ads .gK .g3").title}},{key:"getDate",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(u.default.mark(function e(){var t
;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._threadViewDriver.getInternalID(),e.next=3,this._driver.getPageCommunicator().getMessageDate(t,this._element);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"getAttachmentCardViewDrivers",value:function(){return this._gmailAttachmentAreaView?this._gmailAttachmentAreaView.getAttachmentCardViews():[]}},{key:"addButtonToDownloadAllArea",value:function(e){var t=this._getAttachmentArea();t&&t.addButtonToDownloadAllArea(e)}},{key:"addMoreMenuItem",value:function(e){this._moreMenuItemDescriptors=(0,b.default)(this._moreMenuItemDescriptors.concat([e]),function(e){return e.orderHint}),this._updateMoreMenu()}},{key:"_setupMoreMenuWatching",value:function(){var e=this;this._openMoreMenu=null,this._eventStream.filter(function(e){return"viewStateChange"===e.eventName}).toProperty(function(){return null}).flatMapLatest(function(){var t=e._getMoreButton();return t?(0,A.default)(t,{attributes:!0,attributeFilter:["aria-expanded"]}).map(function(){return"true"===t.getAttribute("aria-expanded")?e._getOpenMoreMenu():null}):y.default.constant(null)}).takeUntilBy(this._stopper).onValue(function(t){e._openMoreMenu=t,e._updateMoreMenu()})}},{key:"_getMoreButton",value:function(){return"EXPANDED"!==this.getViewState()?null:this._element.querySelector("tr.acZ div.T-I.J-J5-Ji.aap.L3[role=button][aria-haspopup]")}},{key:"_getOpenMoreMenu",value:function(){return document.body.querySelector("td > div.nH.if > div.nH.aHU div.b7.J-M[aria-haspopup=true]")}},{key:"_closeActiveEmailMenu",value:function(){var e=this._getMoreButton();e&&(0,D.simulateClick)(e)}},{key:"_updateMoreMenu",value:function(){var e=this;this._moreMenuAddedElements.forEach(function(e){e.remove()}),this._moreMenuAddedElements.length=0;var t=this._openMoreMenu;if(t&&this._moreMenuItemDescriptors.length){var r=t.offsetHeight,i=t.offsetWidth,o=document.createElement("div");o.className="J-Kh",this._moreMenuAddedElements.push(o),t.appendChild(o),this._moreMenuItemDescriptors.forEach(function(r){var i=document.createElement("div");if(i.className="J-N",i.setAttribute("role","menuitem"),i.innerHTML=(0,v.default)(n(),r.title),i.addEventListener("mouseenter",function(e){return i.classList.add("J-N-JT")}),i.addEventListener("mouseleave",function(e){return i.classList.remove("J-N-JT")}),i.addEventListener("click",function(t){e._closeActiveEmailMenu(),r.onClick()}),r.iconUrl||r.iconClass){var o=document.createElement("img");o.className="f4 J-N-JX inboxsdk__message_more_icon ".concat(r.iconClass||""),o.src=r.iconUrl||"images/cleardot.gif";var a=i.firstElementChild;a&&a.appendChild(o)}e._moreMenuAddedElements.push(i),t.appendChild(i)});var s=t.getBoundingClientRect(),l=s.width-i;l>0&&(t.style.left=Math.max(0,(0,a.default)(t.style.left)-l)+"px");var u=this._getMoreButton();if(u){var c=u.getBoundingClientRect();if(s.top<c.top){var d=s.height-r;t.style.top=Math.max(0,(0,a.default)(t.style.top)-d)+"px"}}}}},{key:"getMessageID",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this._messageLoaded))throw new Error("tried to get message id before message is loaded");var e=this._element.querySelector("[data-legacy-message-id]");if(e){var t=e.getAttribute("data-legacy-message-id");if(!t)throw new Error("message id attribute with no value, wtf?");return t}var r=this._element.querySelector("div.ii.gt");if(!r){var n=new Error("Could not find message id element");throw this._driver.getLogger().error(n,{elementHtml:(0,M.default)(this._element)}),n}var i=r.className.match(/\bm([0-9a-f]+)\b/);if(i)return O||(O=!0,this._driver.getLogger().eventSite("old messageid location")),i[1];var o=r.firstElementChild;if(!o){var a=new Error("Could not find message id value");throw this._driver.getLogger().error(a,{reason:"Could not find element",messageHtml:(0,M.default)(r)}),a}var s=o.className.match(/\bm([0-9a-f]+)\b/);if(!s){var l=new Error("Could not find message id value");throw this._driver.getLogger().error(l,{reason:"Element was missing message className",messageHtml:(0,M.default)(r)}),l}return s[1]}},{key:"getMessageIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getMessageID());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"addAttachmentIcon",value:function(e){var t=this,r=new C.default;if(!this._element)return console.warn("addDateIcon called on destroyed message"),r;this._element.setAttribute("inboxsdk__message_added_attachment_icon","true");var n=(0,_.default)(function(){var e=document.createElement("img");return e.src="images/cleardot.gif",e}),i=(0,_.default)(function(){return document.createElement("div")}),o=(0,_.default)(function(){return document.createElement("div")}),a=!1,s=null;return this._stopper.onValue(function(){a&&(i().remove(),o().remove(),n().remove(),a=!1)}),(0,j.default)(y.default,e).combine(this._eventStream.filter(function(e){return"viewStateChange"===e.eventName}).toProperty(function(){return null}),function(e){return e}).takeUntilBy(this._stopper).onValue(function(e){if(e){var l;l="COLLAPSED"===t.getViewState()?(0,T.default)(t._element,".adf.ads td.gH span"):(0,T.default)(t._element,"td.gH div.gK span");var u=null!=e.iconHtml?i():n(),c=e.onClick;if(c?(u.onclick=function(e){e.preventDefault(),e.stopPropagation(),c()},u.style.cursor="pointer"):(u.onclick=null,u.style.cursor=""),e.tooltip&&"object"==(0,d.default)(e.tooltip)&&e.tooltip instanceof HTMLElement){var f=o();f.className="inboxsdk__message_attachment_tooltipWrapper",f.onclick=function(e){e.stopPropagation(),(0,L.default)(e)},f.appendChild(e.tooltip),u.onmouseenter=function(e){e.preventDefault(),e.stopPropagation(),u.appendChild(f),r.emit("tooltipShown")},u.onmouseleave=function(e){e.preventDefault(),e.stopPropagation(),u.removeChild(f),r.emit("tooltipHidden")},u.removeAttribute("data-tooltip")}else e.tooltip&&"string"==typeof e.tooltip?u.setAttribute("data-tooltip",e.tooltip):u.removeAttribute("data-tooltip");u.className=null!=e.iconHtml?"inboxsdk__message_attachment_iconWrapper ".concat(e.iconClass||""):"inboxsdk__message_attachment_icon "+(e.iconClass||""),null!=e.iconHtml?(l.contains(n())&&n().remove(),u.innerHTML=e.iconHtml):s!=e.iconUrl&&(l.contains(i())&&i().remove(),u.style.background=e.iconUrl?"url("+e.iconUrl+") no-repeat 0 0":"",s=e.iconUrl),l.contains(u)||(l.appendChild(u),a=!0)}else a&&(i().remove(),n().remove(),o().remove(),a=!1)}),r}},{key:"getViewState",value:function(){return this._element.classList.contains("kQ")||this._element.classList.contains("kx")?"HIDDEN":this._element.classList.contains("kv")?"COLLAPSED":"EXPANDED"}},{key:"hasOpenReply",value:function(){return Boolean(this._replyElement)}},{key:"addAttachmentCard",value:function(e){var t=new E.default(e,this._driver,this);return this._gmailAttachmentAreaView||(this._gmailAttachmentAreaView=this._getAttachmentArea()),this._gmailAttachmentAreaView||(this._gmailAttachmentAreaView=this._createAttachmentArea()),this._gmailAttachmentAreaView.addGmailAttachmentCardView(t),t}},{key:"_setupMessageStateStream",value:function(){var e=this;this._eventStream.plug((0,I.default)(this._element,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0}).takeUntilBy(this._stopper).map(function(e){var t,r,n=e.target.classList,i=e.oldValue;return i.indexOf("kQ")>-1||i.indexOf("kx")>-1?t="HIDDEN":i.indexOf("kv")>-1||i.indexOf("ky")>-1?t="COLLAPSED":i.indexOf("h7")>-1&&(t="EXPANDED"),n.contains("kQ")||n.contains("kx")?r="HIDDEN":n.contains("kv")||n.contains("ky")?r="COLLAPSED":n.contains("h7")&&(r="EXPANDED"),{oldValue:t,newValue:r,currentClassList:n}}).map(function(t){return"EXPANDED"===t.newValue&&"EXPANDED"!==t.oldValue&&e._checkMessageOpenState(t.currentClassList),t}).filter(function(e){return e.newValue!==e.oldValue&&!!e.oldValue&&!!e.newValue}).map(function(e){return{eventName:"viewStateChange",oldValue:e.oldValue,newValue:e.newValue}}))}},{key:"_processInitialState",value:function(){this._checkMessageOpenState(this._element.classList)}},{key:"_checkMessageOpenState",value:function(e){if(e.contains("h7")&&!this._messageLoaded){var t;try{t=this.getMessageID(!0)}catch(e){return void this._driver.getLogger().error(e)}this._messageLoaded=!0;try{this._driver.associateThreadAndMessageIDs(this._threadViewDriver.getThreadID(),t)}catch(e){this._driver.getLogger().error(e)}this._gmailAttachmentAreaView=this._getAttachmentArea(),this._eventStream.emit({type:"internal",eventName:"messageLoad"}),this._setupReplyStream()}}},{key:"_setupReplyStream",value:function(){var e=this._element.querySelector(".ip");if(e){var t=this,r=null;y.default.combine([(0,A.default)(e,{attributes:!0,attributeFilter:["class"]}),y.default.later(1,null)]).merge(y.default.later(1)).takeUntilBy(this._stopper).beforeEnd(function(){return"END"}).onValue(function(n){if("END"!==n&&e.classList.contains("adB")){if(!r){var i=e.firstElementChild;t._replyElement=i,i&&(r=(0,w.default)(),t._eventStream.emit({type:"internal",eventName:"replyElement",change:{el:i,removalStream:r}}))}}else if(r){var o=r;r=null,o.emit(null),o.end(),t._replyElement=null}})}}},{key:"_monitorEmailAddressHovering",value:function(){var e=this;this._eventStream.plug(y.default.fromEvents(this._element,"mouseover").map(function(e){return e.target}).filter(function(e){return e&&e.getAttribute("email")}).map(function(t){var r=null;return r=e._element.classList.contains("h7")?e._element.querySelector("h3.iw").contains(t)?"sender":"recipient":"sender",{get contact(){return e._getUpdatedContact(i(t))},contactType:r,eventName:"contactHover",messageViewDriver:e}}))}},{key:"_getAttachmentArea",value:function(){return this._element.querySelector(".hq")?new x.default(this._element.querySelector(".hq"),this._driver,this):null}},{key:"_createAttachmentArea",value:function(){var e=new x.default(null,this._driver,this),t=(0,T.default)(this._element,".hi"),r=t.parentNode;if(!r)throw new Error("parentNode not found");return r.insertBefore(e.getElement(),t),e}},{key:"_getUpdatedContact",value:function(e){return(0,S.default)(e,this._element)}},{key:"getReadyStream",value:function(){return this._readyStream}}]),e}(),V=(0,g.defn)(t,P);r.default=V},{"../../../../common/censorHTMLtree":607,"../../../../common/find-parent":609,"../../../lib/delay-asap":803,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/make-mutation-observer-stream":816,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/dom/reemitClickEventForReact":822,"../../../lib/dom/simulate-mouse-event":827,"../../../lib/wait-for":856,"./gmail-attachment-area-view":669,"./gmail-attachment-card-view":670,"./gmail-message-view/attachment-icon":701,"./gmail-message-view/get-updated-contact":702,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"@babel/runtime-corejs2/helpers/typeof":58,"@babel/runtime-corejs2/regenerator":59,asap:77,"auto-html":83,kefir:301,"kefir-bus":298,"kefir-cast":299,"kefir-stopper":300,"lodash/once":489,"lodash/sortBy":492,ud:597}],701:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),a=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),s=n(e("@babel/runtime-corejs2/helpers/inherits")),l=e("ud"),u=n(e("../../../../lib/safe-event-emitter")),c=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,s.default)(t,e),t}(u.default),d=(0,l.defn)(t,c);r.default=d},{"../../../../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,ud:597}],702:[function(e,t,r){"use strict";function n(e,t){var r=u[e.emailAddress];if(r){if(r.headerContact.name===e.name)return r.modalContact;delete u[e.emailAddress]}var n=t.querySelector(".ajA.SK"),o=n&&"hidden"===n.style.visibility,l=t.querySelector(".ajy[aria-haspopup=true]");if(l&&o){var c=function(e){e.stopPropagation()},d=function(e){e.shouldIgnore=!0};t.addEventListener("click",c),document.addEventListener("focus",d,!0),(0,s.simulateClick)(l);try{i(e)}catch(e){a.default.error(e)}finally{(0,s.simulateClick)(l),t.removeEventListener("click",c),document.removeEventListener("focus",d,!0)}if(r=u[e.emailAddress])return r.modalContact}return e}function i(e){for(var t=document.querySelectorAll(".ajC [email]"),r=0;r<t.length;r++){var n=t[r],i=n.getAttribute("email");if(i&&!u[i]){var o={emailAddress:i,name:null},a=n.getAttribute("name");if(a)o.name=a;else{var s=(0,l.default)(n.textContent);i===s.emailAddress&&(o=s)}u[i]={headerContact:e,modalContact:o}}}}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("../../../../lib/logger")),s=e("../../../../lib/dom/simulate-mouse-event"),l=o(e("../../../../lib/extract-contact-from-email-contact-string")),u={}},{"../../../../lib/dom/simulate-mouse-event":827,"../../../../lib/extract-contact-from-email-contact-string":829,"../../../../lib/logger":843,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],703:[function(e,t,r){"use strict";function n(){var e=(0,c.default)(["",""]);return n=function(){return e},e}function i(){var e=(0,c.default)(['<a href="#" class="CK inboxsdk__navItem_name">',"</a>"]);return i=function(){return e},e}function o(){var e=(0,c.default)(['<span class="inboxsdk__navItem_name">',"</span>"]);return o=function(){return e},e}function a(e){return e.isUsingMaterialUI()?R:M}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.getLeftIndentationPaddingValue=a,r.default=void 0;var l=s(e("@babel/runtime-corejs2/core-js/number/max-safe-integer")),u=s(e("@babel/runtime-corejs2/helpers/objectSpread")),c=s(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),d=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),f=s(e("@babel/runtime-corejs2/helpers/createClass")),p=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("auto-html")),m=s(e("kefir")),b=s(e("kefir-bus")),_=s(e("../gmail-element-getter")),v=s(e("../../../lib/dom/get-insert-before-element")),g=s(e("../../../lib/dom/querySelectorOrFail")),y=s(e("../../../lib/dom/make-mutation-observer-chunked-stream")),w=s(e("../widgets/buttons/button-view")),k=s(e("../widgets/buttons/arrow-dropdown-button-view")),j=s(e("../widgets/buttons/label-dropdown-button-view")),x=s(e("../widgets/buttons/create-accessory-button-view")),E=s(e("../widgets/gmail-dropdown-view")),S=s(e("../../../widgets/buttons/dropdown-button-view-controller")),C=s(e("../../../widgets/buttons/basic-button-view-controller")),I=s(e("../../../driver-common/update-icon")),T=s(e("../../../driver-common/render-custom-icon")),A=s(e("../../../constants/nav-item-types")),D=0,M=14,R=12,L=function(){function e(t,r,n){(0,d.default)(this,e),(0,p.default)(this,"_driver",void 0),(0,p.default)(this,"_navItemDescriptor",void 0),(0,p.default)(this,"_element",void 0),(0,p.default)(this,"_eventStream",void 0),(0,p.default)(this,"_itemContainerElement",null),(0,p.default)(this,"_expandoElement",null),(0,p.default)(this,"_isCollapsed",!1),(0,p.default)(this,"_orderGroup",void 0),(0,p.default)(this,"_orderHint",void 0),(0,p.default)(this,"_type",null),(0,p.default)(this,"_name",""),(0,p.default)(this,"_accessory",null),(0,p.default)(this,"_accessoryCreated",!1),(0,p.default)(this,"_accessoryViewController",null),(0,p.default)(this,"_level",void 0),(0,p.default)(this,"_navItemNumber",void 0),(0,p.default)(this,"_isActive",!1),(0,p.default)(this,"_iconSettings",{}),this._driver=t,this._orderGroup=r,this._eventStream=(0,b.default)(),this._level=n||0,this._navItemNumber=++D,this._setupElement()}return(0,f.default)(e,[{key:"destroy",value:function(){this._element.remove(),this._eventStream&&this._eventStream.end(),this._itemContainerElement&&this._itemContainerElement.remove(),this._expandoElement&&this._expandoElement.remove(),this._accessoryViewController&&this._accessoryViewController.destroy()}},{key:"getNavItemDescriptor",value:function(){return this._navItemDescriptor}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getOrderGroup",value:function(){return this._orderGroup}},{key:"getOrderHint",value:function(){return this._orderHint}},{key:"getName",value:function(){return this._name}},{key:"setNavItemDescriptor",value:function(e){var t=this;e.takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null})).onValue(function(e){return t._updateValues(e)})}},{key:"addNavItem",value:function(t,r){var n=this,i=this._type===A.default.GROUPER&&this._driver.isUsingMaterialUI()?this._level:this._level+1,o=new e(this._driver,t,i);return o.getEventStream().filter(function(e){return"orderChanged"===e.eventName}).onValue(function(){return n._addNavItemElement(o)}),o.setNavItemDescriptor(r),o}},{key:"_setHighlight",value:function(e){this._element&&this._type!==A.default.LINK&&this._type!==A.default.MANAGE&&(e?(0,g.default)(this._element,".TO").classList.add("NQ"):(0,g.default)(this._element,".TO").classList.remove("NQ"))}},{key:"setActive",value:function(e){if(this._element&&this._type!==A.default.LINK&&this._type!==A.default.MANAGE&&this._isActive!==e){var t=(0,g.default)(this._element,".TO");e?(this._element.classList.add("ain"),t.classList.add("nZ"),t.classList.add("aiq")):(this._element.classList.remove("ain"),t.classList.remove("nZ"),t.classList.remove("aiq")),this._setHeights(),this._isActive=e}}},{key:"toggleCollapse",value:function(){this._toggleCollapse()}},{key:"setCollapsed",value:function(e){this._isCollapsed=e,this._isCollapsible()&&(e?this._collapse():this._expand())}},{key:"isCollapsed",value:function(){return this._isCollapsed}},{key:"remove",value:function(){this.destroy()}},{key:"_setupElement",value:function(){var e=this;this._element=document.createElement("div"),this._element.setAttribute("class","aim inboxsdk__navItem"),this._driver.isUsingMaterialUI()?this._element.innerHTML=['<div class="TO">','<div class="TN aik">','<div class="qj" style="">',"</div>",'<div class="aio aip">','<span class="nU" role="link">',"</span>",'<span class="bsU">',"</span>","</div>","</div>","</div>"].join(""):this._element.innerHTML=['<div class="TO">','<div class="TN aik">','<div class="aio aip">','<span class="nU" role="link">',"</span>","</div>","</div>","</div>"].join("");var t=(0,g.default)(this._element,".TO");m.default.merge([m.default.fromEvents(t,"mouseenter").map(this._makeEventMapper("mouseenter")),m.default.fromEvents(t,"mouseleave").map(this._makeEventMapper("mouseleave"))]).onValue(function(t){e._updateHighlight(t)}),this._eventStream.plug(m.default.fromEvents(t,"click").map(this._makeEventMapper("click")))}},{key:"_makeEventMapper",value:function(e){return function(t){return t.stopPropagation(),t.preventDefault(),{eventName:e,domEvent:t}}}},{key:"_updateHighlight",value:function(e){switch(e.eventName){case"mouseenter":(this._navItemDescriptor.routeID||"function"==typeof this._navItemDescriptor.onClick||this._driver.isUsingMaterialUI())&&this._setHighlight(!0);break;case"mouseleave":this._setHighlight(!1)}}},{key:"_updateValues",value:function(e){if(this._navItemDescriptor=e,this._updateType(e.type),this._updateName(e.name),this._updateSubtitle(e),this._updateOrder(e),this._type===A.default.GROUPER&&this._driver.isUsingMaterialUI())return void this._setupGrouper(e);this._updateIcon(e),this._updateAccessory(e.accessory),this._updateClickability(e)}},{key:"_updateType",value:function(e){if(this._element&&(e=e||A.default.NAVIGATION,this._type!==e)){var t=this._element.querySelector(".inboxsdk__navItem_name");switch(e){case A.default.GROUPER:case A.default.NAVIGATION:t&&"SPAN"===t.tagName||((0,g.default)(this._element,".nU").innerHTML+=(0,h.default)(o(),this._name));break;case A.default.LINK:case A.default.MANAGE:t&&"A"===t.tagName||((0,g.default)(this._element,".nU").innerHTML+=(0,h.default)(i(),this._name))}this._type=e}}},{key:"_updateName",value:function(e){if(this._name!==e){var t=(0,g.default)(this._element,".inboxsdk__navItem_name");t.textContent=e,t.setAttribute("title",e),this._expandoElement&&(this._expandoElement.title="Expand ".concat(e)),this._name=e}}},{key:"_updateIcon",value:function(e){var t=this._driver.isUsingMaterialUI()?(0,g.default)(this._element,".qj"):(0,g.default)(this._element,".aio");if(e.iconElement)return void(0,T.default)(t,e.iconElement,"BEFORE_NAME"!==e.iconPosition);if((0,I.default)(this._iconSettings,t,"BEFORE_NAME"!==e.iconPosition,e.iconClass,e.iconUrl),this._driver.isUsingMaterialUI()&&(e.backgroundColor||e.accessory&&e.accessory.buttonBackgroundColor)){var r=e.backgroundColor||e.accessory.buttonBackgroundColor;t.style.borderColor=r}}},{key:"_updateClickability",value:function(e){this._driver.isUsingMaterialUI()&&(e.type===A.default.LINK||e.type===A.default.MANAGE||!e.routeID&&"function"!=typeof e.onClick&&!this._driver.isUsingMaterialUI()?this._element.classList.add("inboxsdk__navItem_nonClickable"):this._element.classList.remove("inboxsdk__navItem_nonClickable"))}},{key:"_updateSubtitle",value:function(e){!this._driver.isUsingMaterialUI()||e.accessory&&!["SETTINGS_BUTTON","DROPDOWN_BUTTON"].includes(e.accessory.type)&&e.type!==A.default.GROUPER||((0,g.default)(this._element,".bsU").innerHTML+=(0,h.default)(n(),e.subtitle||""))}},{key:"_updateAccessory",value:function(e){this._accessory!==e&&(this._accessoryViewController&&(this._accessoryViewController.destroy(),this._accessoryViewController=null),e&&this._createAccessory(e),this._accessory=e)}},{key:"_createAccessory",value:function(e){switch(e.type){case"CREATE":this._createCreateAccessory(e);break;case"ICON_BUTTON":this._createIconButtonAccessory(e);break;case"DROPDOWN_BUTTON":this._createDropdownButtonAccessory(e);break;case"SETTINGS_BUTTON":this._createSettingsButtonAccessory(e)}this._accessoryCreated=!0}},{key:"_createCreateAccessory",value:function(e){this._driver.isUsingMaterialUI()?this._createPlusButtonAccessory(e):(e.name="+ New",this._createLinkButtonAccessory(e))}},{key:"_createPlusButtonAccessory",value:function(e){var t=(0,u.default)({},e);t.buttonView=new x.default,this._accessoryViewController=new C.default(t),(0,g.default)(this._element,".TN").appendChild(t.buttonView.getElement())}},{key:"_createLinkButtonAccessory",value:function(e){var t=document.createElement("div"),r=this._driver.isUsingMaterialUI()?"inboxsdk__navItem_link":"CL inboxsdk__navItem_link";t.setAttribute("class",r);var n=document.createElement("a");n.classList.add("CK"),n.textContent=e.name,t.appendChild(n),n.href="#",n.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.onClick()}),(0,g.default)(this._element,".aio").appendChild(t)}},{key:"_createIconButtonAccessory",value:function(e){var t=(0,u.default)({},e,{buttonColor:"pureIcon"});t.buttonView=new w.default(t),this._accessoryViewController=new C.default(t),(this._driver.isUsingMaterialUI()?(0,g.default)(this._element,".TN"):(0,g.default)(this._element,".aio")).appendChild(t.buttonView.getElement())}},{key:"_createDropdownButtonAccessory",value:function(e){if(!this._driver.isUsingMaterialUI())return void this._createSettingsButtonAccessory(e);var t=(0,u.default)({},e);if(t.buttonView=new k.default(t),t.dropdownViewDriverClass=E.default,t.dropdownPositionOptions={position:"bottom",hAlign:"left",vAlign:"top"},this._driver.isUsingMaterialUI()){var r=_.default.getLeftNavContainerElement();if(!r)throw new Error("leftNavContainer not found");t.dropdownShowFunction=function(e){if(r.classList.contains("bhZ")){var n=m.default.fromEvents(e.dropdown,"destroy");(0,y.default)(r,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(n).toProperty(function(){return null}).onValue(function(){r.classList.contains("bym")||r.classList.add("bym")}),n.onValue(function(){r.classList.remove("bym")})}t.onClick(e)}}else t.dropdownShowFunction=t.onClick;var n=new S.default(t);this._accessoryViewController=n;var i=(0,g.default)(this._element,".TO");i.addEventListener("mouseenter",function(){return i.classList.add("inboxsdk__navItem_hover")}),i.addEventListener("mouseleave",function(){return i.classList.remove("inboxsdk__navItem_hover")});var o=(0,g.default)(this._element,".TN");o.insertBefore(t.buttonView.getElement(),o.firstElementChild),this._setupContextClickHandler(n)}},{key:"_createSettingsButtonAccessory",value:function(e){var t=this,r=(0,u.default)({},e);r.buttonView=new j.default(r),r.dropdownViewDriverClass=E.default,r.dropdownPositionOptions={position:"bottom",hAlign:"left",vAlign:"top"},r.dropdownShowFunction=function(e){var n=e.dropdown;t._driver.isUsingMaterialUI()&&(n.el.style.marginLeft="16px"),r.onClick({dropdown:n})};var n=new S.default(r);this._accessoryViewController=n;var i=(0,g.default)(this._element,".TO");i.addEventListener("mouseenter",function(){return i.classList.add("inboxsdk__navItem_hover")}),i.addEventListener("mouseleave",function(){return i.classList.remove("inboxsdk__navItem_hover")}),(this._driver.isUsingMaterialUI()?(0,g.default)(this._element,".TN"):(0,g.default)(this._element,".aio")).appendChild(r.buttonView.getElement()),this._setupContextClickHandler(n)}},{key:"_setupContextClickHandler",value:function(e){var t=this;m.default.fromEvents(this._element,"contextmenu").takeWhile(function(){return t._accessoryViewController===e}).onValue(function(t){t.stopPropagation(),t.preventDefault(),e.showDropdown()})}},{key:"_updateOrder",value:function(e){this._element.setAttribute("data-group-order-hint",""+this._orderGroup),this._element.setAttribute("data-insertion-order-hint",""+this._navItemNumber),e.orderHint=e.orderHint||0===e.orderHint?e.orderHint:l.default,e.orderHint!==this._orderHint&&(this._element.setAttribute("data-order-hint",""+e.orderHint),this._eventStream.emit({eventName:"orderChanged"})),this._orderHint=e.orderHint}},{key:"_setupGrouper",value:function(e){var t=this,r=this._element.firstElementChild;r&&(r.classList.add("n4"),r.addEventListener("click",function(e){e.stopPropagation(),t._toggleCollapse()}),this._isCollapsed?this._collapse():this._expand()),(0,g.default)(this._element,".qj").innerHTML='<div class="G-asx T-I-J3 J-J5-Ji">&nbsp;</div>'}},{key:"_addNavItemElement",value:function(e){var t=this._getItemContainerElement(),r=(0,v.default)(e.getElement(),t.children,["data-group-order-hint","data-order-hint","data-insertion-order-hint"]);t.insertBefore(e.getElement(),r);var n=this._type===A.default.GROUPER&&this._driver.isUsingMaterialUI()?this._level-1:this._level,i=e.getElement();this._driver.isUsingMaterialUI()?(0,g.default)(i,".TN").style.marginLeft=a(this._driver)*n+"px":(0,g.default)(i,".TO").style.paddingLeft=a(this._driver)*n+"px",this._setHeights()}},{key:"_getItemContainerElement",value:function(){var e=this._itemContainerElement;return e||(e=this._createItemContainerElement(),this._createExpando()),e}},{key:"_createItemContainerElement",value:function(){var e=this._itemContainerElement=document.createElement("div");return e.classList.add("inboxsdk__navItem_container"),this._element.appendChild(e),this._isCollapsible()&&(this._isCollapsed?this._collapse():this._expand()),e}},{key:"_createExpando",value:function(){var e=this;if(this._type!==A.default.GROUPER||!this._driver.isUsingMaterialUI()){var t=this._expandoElement=document.createElement("div");t.setAttribute("class","TH aih J-J5-Ji inboxsdk__expando"),t.setAttribute("role","link"),t.title="Expand ".concat(this._name||""),t.addEventListener("click",function(t){e._toggleCollapse(),t.stopPropagation()});var r=this._driver.isUsingMaterialUI()?this._element.querySelector(".TN.aik"):this._element.querySelector(".aip");r&&r.insertAdjacentElement("afterbegin",t),this._isCollapsed?this._collapse():this._expand()}}},{key:"_toggleCollapse",value:function(){if(!this._isCollapsible())return void(this._isCollapsed=!this._isCollapsed);this._isCollapsed?this._expand():this._collapse()}},{key:"_isCollapsible",value:function(){return Boolean(this._expandoElement)||this._type===A.default.GROUPER&&this._driver.isUsingMaterialUI()}},{key:"_collapse",value:function(){var e=this._expandoElement;if(e)e.classList.remove("aih"),e.classList.add("aii");else if(this._type===A.default.GROUPER&&this._driver.isUsingMaterialUI()){var t=this._element.firstElementChild;t&&t.classList.remove("air")}this._itemContainerElement&&(this._itemContainerElement.style.display="none"),this._isCollapsed=!0,this._setHeights(),this._eventStream.emit({eventName:"collapsed"})}},{key:"_expand",value:function(){var e=this._expandoElement;if(e)e.classList.add("aih"),e.classList.remove("aii");else if(this._type===A.default.GROUPER&&this._driver.isUsingMaterialUI()){var t=this._element.firstElementChild;t&&t.classList.add("air")}this._itemContainerElement&&(this._itemContainerElement.style.display=""),this._isCollapsed=!1,this._eventStream.emit({eventName:"expanded"}),this._setHeights()}},{key:"_isExpanded",value:function(){return!!this._expandoElement&&this._expandoElement.classList.contains("aih")}},{key:"_setHeights",value:function(){var e=(0,g.default)(this._element,".TO");if(this._element.classList.contains("ain")&&this._itemContainerElement){this._element.style.height="";var t=this._element.clientHeight,r=e.clientHeight;this._element.style.height=r+"px",this._element.style.overflow="visible",this._element.style.marginBottom=t-r+"px"}else this._element.style.height="",this._element.style.overflow="",this._element.style.marginBottom=""}}]),e}();r.default=L},{"../../../constants/nav-item-types":620,"../../../driver-common/render-custom-icon":791,"../../../driver-common/update-icon":795,"../../../lib/dom/get-insert-before-element":807,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOrFail":821,"../../../widgets/buttons/basic-button-view-controller":891,"../../../widgets/buttons/dropdown-button-view-controller":892,"../gmail-element-getter":655,"../widgets/buttons/arrow-dropdown-button-view":714,"../widgets/buttons/button-view":716,"../widgets/buttons/create-accessory-button-view":717,"../widgets/buttons/label-dropdown-button-view":719,"../widgets/gmail-dropdown-view":722,"@babel/runtime-corejs2/core-js/number/max-safe-integer":9,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"auto-html":83,kefir:301,"kefir-bus":298}],704:[function(e,t,r){"use strict";function n(){this._routeNameToRouteIDMap=null,this._compatibleRouteIDMap=null,this._setupRouteNameToRouteIDMap(),
this._setupCompatibleRouteIDMap()}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/object/values")),a=i(e("@babel/runtime-corejs2/core-js/object/assign")),s=i(e("lodash/includes")),l=e("../../../../constants/router");(0,a.default)(n.prototype,{NativeRouteIDs:l.NATIVE_ROUTE_IDS,NativeListRouteIDs:l.NATIVE_LIST_ROUTE_IDS,RouteTypes:l.ROUTE_TYPES,isListRouteName:function(e){var t=this.getRouteID(e);return!!t&&(0,s.default)((0,o.default)(l.NATIVE_LIST_ROUTE_IDS),t)},isSettingsRouteName:function(e){return this._routeNameToRouteIDMap[e]===this.NativeRouteIDs.SETTINGS},isContactRouteName:function(e){return this._routeNameToRouteIDMap[e]===this.NativeRouteIDs.CONTACTS||this._routeNameToRouteIDMap[e]===this.NativeRouteIDs.CONTACT},getRouteID:function(e){var t=this._routeNameToRouteIDMap[e];return t||null},getRouteName:function(e){for(var t in this._routeNameToRouteIDMaps)if(this._routeNameToRouteIDMap[t]===e)return t;return null},isNativeRoute:function(e){return!!this._routeNameToRouteIDMap[e]},getCompatibleRouteID:function(e){return this._compatibleRouteIDMap[e]||e},_setupRouteNameToRouteIDMap:function(){this._routeNameToRouteIDMap={inbox:this.NativeRouteIDs.INBOX,section_query:this.NativeRouteIDs.SEARCH,all:this.NativeRouteIDs.ALL_MAIL,imp:this.NativeRouteIDs.IMPORTANT,contacts:this.NativeRouteIDs.CONTACTS,contact:this.NativeRouteIDs.CONTACT,sent:this.NativeRouteIDs.SENT,starred:this.NativeRouteIDs.STARRED,snoozed:this.NativeRouteIDs.SNOOZED,drafts:this.NativeRouteIDs.DRAFTS,label:this.NativeRouteIDs.LABEL,category:this.NativeRouteIDs.LABEL,search:this.NativeRouteIDs.SEARCH,"advanced-search":this.NativeRouteIDs.SEARCH,trash:this.NativeRouteIDs.TRASH,spam:this.NativeRouteIDs.SPAM,apps:this.NativeRouteIDs.SEARCH,circle:this.NativeRouteIDs.LABEL,settings:this.NativeRouteIDs.SETTINGS,chats:this.NativeRouteIDs.CHATS}},_setupCompatibleRouteIDMap:function(){this._compatibleRouteIDMap={},this._compatibleRouteIDMap[this.NativeRouteIDs.INBOX]="inbox/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.ALL_MAIL]="all/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SENT]="sent/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.STARRED]="starred/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.DRAFTS]="drafts/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.LABEL]="label/:labelName/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.TRASH]="trash/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SPAM]="spam/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.IMPORTANT]="imp/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SEARCH]="search/:query/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.THREAD]=this.NativeRouteIDs.THREAD,this._compatibleRouteIDMap[this.NativeRouteIDs.CHATS]="chats/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.CHAT]=this.NativeRouteIDs.CHAT,this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACTS]="contacts/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACT]=this.NativeRouteIDs.CONTACT,this._compatibleRouteIDMap[this.NativeRouteIDs.SETTINGS]=this.NativeRouteIDs.SETTINGS}})},{"../../../../constants/router":621,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/values":22,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/includes":466}],705:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/create")),o=n(e("@babel/runtime-corejs2/core-js/parse-int")),a=n(e("@babel/runtime-corejs2/core-js/date/now")),s=n(e("@babel/runtime-corejs2/core-js/object/freeze")),l=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=n(e("@babel/runtime-corejs2/helpers/createClass")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=n(e("lodash/includes")),f=n(e("lodash/last")),p=n(e("lodash/once")),h=n(e("kefir")),m=n(e("kefir-stopper")),b=n(e("kefir-bus")),_=e("querystring"),v=n(e("asap")),g=e("ud"),y=n(e("../../../../lib/dom/make-element-child-stream")),w=n(e("../../../../lib/dom/make-element-view-stream")),k=n(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),j=n(e("../../../../lib/dom/get-insert-before-element")),x=n(e("../gmail-row-list-view")),E=n(e("../gmail-thread-view")),S=n(e("../gmail-collapsible-section-view")),C=n(e("../../gmail-element-getter")),I=e("../../../../lib/dom/simulate-mouse-event"),T=n(e("../../../../lib/dom/querySelectorOrFail")),A=function(){function e(t,r,n){var i=this,o=t.urlObject,u=t.type,f=t.routeID,_=t.cachedRouteData;(0,l.default)(this,e),(0,c.default)(this,"_type",void 0),(0,c.default)(this,"_hash",void 0),(0,c.default)(this,"_name",void 0),(0,c.default)(this,"_paramsArray",void 0),(0,c.default)(this,"_customRouteID",void 0),(0,c.default)(this,"_stopper",(0,m.default)()),(0,c.default)(this,"_rowListViews",void 0),(0,c.default)(this,"_gmailRouteProcessor",void 0),(0,c.default)(this,"_driver",void 0),(0,c.default)(this,"_eventStream",void 0),(0,c.default)(this,"_customViewElement",void 0),(0,c.default)(this,"_threadView",void 0),(0,c.default)(this,"_sectionsContainer",void 0),(0,c.default)(this,"_hasAddedCollapsibleSection",void 0),(0,c.default)(this,"_cachedRouteData",void 0),(0,c.default)(this,"getParams",(0,p.default)(function(){var e;if(i._customRouteID)e=i._getCustomParams();else{e=i._getNativeParams();var t=i.getRouteID();if(t){var r=i._extractParamKeysFromRouteID(t),n={};r.forEach(function(t){e[t]&&(n[t]=e[t])}),e=n}}return(0,s.default)(e)})),(0,c.default)(this,"_getThreadContainerElement",(0,p.default)(function(){return C.default.getThreadContainerElement()})),this._type=u,this._hash=o.hash,this._name=o.name,this._paramsArray=o.params,this._customRouteID=f,this._cachedRouteData=_,this._stopper=(0,m.default)(),this._rowListViews=[],this._gmailRouteProcessor=r,this._driver=n,this._eventStream=(0,b.default)(),this._hasAddedCollapsibleSection=!1,"CUSTOM"===this._type?(this._setupCustomViewElement(),n.getStopper().takeUntilBy(this._stopper.delay(0)).onValue(function(){n.showNativeRouteView(),window.location.hash="#inbox"})):(0,d.default)(["NATIVE","CUSTOM_LIST"],this._type)&&this._setupSubViews(),"CUSTOM_LIST"===this._type&&h.default.later(500).takeUntilBy(this._stopper).onValue(function(){var e=n.getLastCustomThreadListActivity();(!e||e.customRouteID!==i._customRouteID||(0,a.default)()-e.timestamp>5e3)&&i.refresh()})}return(0,u.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._eventStream.end(),this._customViewElement&&this._customViewElement.remove();var e=this._rowListViews;this._rowListViews=[],e.forEach(function(e){e.destroy()}),this._threadView&&(this._threadView.destroy(),this._threadView=null)}},{key:"getHash",value:function(){return this._hash}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"getCustomViewElement",value:function(){return this._customViewElement}},{key:"getRowListViews",value:function(){return this._rowListViews}},{key:"getThreadView",value:function(){return this._threadView}},{key:"getType",value:function(){return"OTHER_APP_CUSTOM"===this._type?"CUSTOM":this._type}},{key:"isCustomRouteBelongingToApp",value:function(){return"CUSTOM"===this._type}},{key:"addCollapsibleSection",value:function(e,t){return this._addCollapsibleSection(e,t,!0)}},{key:"addSection",value:function(e,t){return this._addCollapsibleSection(e,t,!1)}},{key:"_addCollapsibleSection",value:function(e,t,r){this._hasAddedCollapsibleSection=!0;var n=new S.default(this._driver,t,this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.SEARCH,r),i=this._getSectionsContainer();return n.getEventStream().filter(function(e){return"update"===e.type&&"orderHint"===e.property}).onValue(function(){var e=i.children,t=(0,j.default)(n.getElement(),e,["data-group-order-hint","data-order-hint"]);t?i.insertBefore(n.getElement(),t):i.appendChild(n.getElement())}),n.setCollapsibleSectionDescriptorProperty(e),n}},{key:"_setupCustomViewElement",value:function(){this._customViewElement=document.createElement("div"),this._customViewElement.classList.add("inboxsdk__custom_view_element"),this._monitorLeftNavHeight(),this._setCustomViewElementHeight()}},{key:"_monitorLeftNavHeight",value:function(){var e=this,t=C.default.getLeftNavContainerElement();t&&(0,k.default)(t,{attributes:!0,attributeFilter:["style"]}).takeUntilBy(this._stopper).onValue(function(){e._setCustomViewElementHeight()})}},{key:"_setCustomViewElementHeight",value:function(){var e=C.default.getLeftNavContainerElement(),t=C.default.getGtalkButtons(),r=this._customViewElement;if(!e||!r)throw new Error("Should not happen");r.style.height="".concat((0,o.default)(e.style.height,10)+(t?t.offsetHeight:0),"px")}},{key:"_setupSubViews",value:function(){var e=this;(0,v.default)(function(){e._eventStream&&(e._setupRowListViews(),e._setupContentAndSidebarView(),e._setupScrollStream())})}},{key:"_setupRowListViews",value:function(){var e=this,t=C.default.getRowListElements();Array.prototype.forEach.call(t,function(t){e._processRowListElement(t)})}},{key:"_processRowListElement",value:function(e){var t=e.parentElement;if(!t)throw new Error("no rootElement");var r=new x.default(t,this,this._driver);this._rowListViews.push(r),this._eventStream.emit({eventName:"newGmailRowListView",view:r})}},{key:"_setupContentAndSidebarView",value:function(){var e=document.querySelector(".aia[gh=tl]");if(e)return void this._startMonitoringPreviewPaneRowListForThread(e);var t=this._getThreadContainerElement();if(t){var r=new E.default(t,this,this._driver);this._threadView=r,this._eventStream.emit({eventName:"newGmailThreadView",view:r})}}},{key:"_setupScrollStream",value:function(){var e=this,t=C.default.getScrollContainer(),r=this._cachedRouteData.scrollTop;t&&this._hasAddedCollapsibleSection&&(r&&(t.scrollTop=r),h.default.fromEvents(t,"scroll").throttle(100).map(function(e){return e.target.scrollTop}).takeUntilBy(this._stopper).onValue(function(t){e._cachedRouteData.scrollTop=t}))}},{key:"_startMonitoringPreviewPaneRowListForThread",value:function(e){var t=this,r=(0,T.default)(e,"table.Bs > tr"),n=(0,y.default)(r).filter(function(e){return!!e.el.querySelector(".if")});this._eventStream.plug(n.flatMap((0,w.default)(function(e){return new E.default(e,t,t._driver,!0)})).map(function(e){return t._threadView=e,{eventName:"newGmailThreadView",view:e}}))}},{key:"_getSectionsContainer",value:function(){var e=document.querySelector("div[role='main']");if(!e)throw new Error("should not happen");var t=e.querySelector(".inboxsdk__custom_sections");return t?t.classList.contains("Wc")&&!this._isSearchRoute()&&t.classList.remove("Wc"):(t=this._sectionsContainer=document.createElement("div"),t.classList.add("inboxsdk__custom_sections"),e.insertBefore(t,e.firstChild)),t}},{key:"_getCustomParams",value:function(){var e=this,t=(0,i.default)(null);if(!this._customRouteID)throw new Error("Should not happen, can't get custom params for non-custom view");return this._customRouteID.split("/").slice(1).forEach(function(r,n){":"===r[0]&&(r=r.substring(1),e._paramsArray[n]&&(t[r]=e._paramsArray[n]))}),t}},{key:"_getNativeParams",value:function(){return this._isSearchRoute()?this._getSearchRouteParams():this._isListRoute()?this._getListRouteParams():this._isThreadRoute()?this._getThreadRouteParams():this._isSettingsRoute()?this._getSettingsRouteParams():{}}},{key:"_isSearchRoute",value:function(){return this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.SEARCH}},{key:"getRouteType",value:function(){return(0,d.default)(["CUSTOM","OTHER_APP_CUSTOM"],this._type)?this._gmailRouteProcessor.RouteTypes.CUSTOM:this._isListRoute()?this._gmailRouteProcessor.RouteTypes.LIST:this._isThreadRoute()?this._gmailRouteProcessor.RouteTypes.THREAD:this._isSettingsRoute()?this._gmailRouteProcessor.RouteTypes.SETTINGS:this._gmailRouteProcessor.RouteTypes.UNKNOWN}},{key:"_isThreadRoute",value:function(){return!!this._getThreadContainerElement()}},{key:"_isListRoute",value:function(){var e=C.default.getRowListElements();return("CUSTOM_LIST"===this._type||this._gmailRouteProcessor.isListRouteName(this._name))&&e&&e.length>0}},{key:"_isSettingsRoute",value:function(){return this._gmailRouteProcessor.isSettingsRouteName(this._name)}},{key:"_getSearchRouteParams",value:function(){return{query:this._paramsArray[0],includesDriveResults:"apps"===this._name,page:this._getPageParam()}}},{key:"_getListRouteParams",value:function(){var e={page:this._getPageParam()};return this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.LABEL&&this._paramsArray[0]&&(e.labelName=this._paramsArray[0]),e}},{key:"_getThreadRouteParams",value:function(){if(this._paramsArray&&this._paramsArray.length>0){var e=(0,f.default)(this._paramsArray);if(e&&(16===e.length||"#"===e[0]))return{threadID:e.replace("#","")}}var t,r=this._getThreadContainerElement();if(r)try{t=this._driver.getPageCommunicator().getCurrentThreadID(r)}catch(e){}return t||(t=(0,_.parse)(document.location.search,null,null).th||""),{threadID:t}}},{key:"_getSettingsRouteParams",value:function(){return{tabName:this._paramsArray[0]}}},{key:"_getPageParam",value:function(){for(var e=1;e<this._paramsArray.length;e++)if(this._paramsArray[e].match(/p\d+/))return(0,o.default)(this._paramsArray[e].replace(/[a-zA-Z]/,""),10);return 1}},{key:"getRouteID",value:function(){return this._customRouteID?this._customRouteID:this._isThreadRoute()?this._gmailRouteProcessor.NativeRouteIDs.THREAD:this._gmailRouteProcessor.getRouteID(this._name)}},{key:"refresh",value:function(){var e=C.default.getToolbarElement().querySelector("div.T-I.nu");if(e){var t=document.activeElement,r=e.className;(0,I.simulateClick)(e),e.className=r,t?t.focus():e.blur()}}},{key:"setFullWidth",value:function(e){}},{key:"_extractParamKeysFromRouteID",value:function(e){return e.split("/").filter(function(e){return":"===e[0]}).map(function(e){return e.substring(1)})}}]),e}(),D=(0,g.defn)(t,A);r.default=D},{"../../../../lib/dom/get-insert-before-element":807,"../../../../lib/dom/make-element-child-stream":812,"../../../../lib/dom/make-element-view-stream":814,"../../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../../lib/dom/querySelectorOrFail":821,"../../../../lib/dom/simulate-mouse-event":827,"../../gmail-element-getter":655,"../gmail-collapsible-section-view":672,"../gmail-row-list-view":706,"../gmail-thread-view":710,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/create":12,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,asap:77,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/includes":466,"lodash/last":484,"lodash/once":489,querystring:549,ud:597}],706:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/array/from")),o=n(e("@babel/runtime-corejs2/core-js/parse-int")),a=n(e("@babel/runtime-corejs2/helpers/slicedToArray")),s=n(e("@babel/runtime-corejs2/core-js/map")),l=n(e("@babel/runtime-corejs2/core-js/set")),u=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=n(e("@babel/runtime-corejs2/helpers/createClass")),d=n(e("@babel/runtime-corejs2/helpers/defineProperty")),f=e("ud"),p=n(e("lodash/find")),h=n(e("lodash/zip")),m=(n(e("asap")),n(e("assert"))),b=n(e("kefir")),_=n(e("kefir-bus")),v=(n(e("../../../../common/get-or-fail")),n(e("../../../lib/delay-asap"))),g=n(e("../../../lib/dom/querySelectorOrFail")),y=n(e("./gmail-toolbar-view")),w=n(e("./gmail-thread-row-view")),k=(n(e("../../../lib/stream-wait-for")),n(e("../../../lib/dom/make-element-child-stream"))),j=(n(e("../../../lib/dom/make-element-view-stream")),/\bx7\b/),x=function(){function e(t,r,n){var i=this;(0,u.default)(this,e),(0,d.default)(this,"_element",void 0),(0,d.default)(this,"_gmailDriver",void 0),(0,d.default)(this,"_routeViewDriver",void 0),(0,d.default)(this,"_pendingExpansions",void 0),(0,d.default)(this,"_pendingExpansionsSignal",void 0),(0,d.default)(this,"_toolbarView",void 0),(0,d.default)(this,"_threadRowViewDrivers",new l.default),(0,d.default)(this,"_eventStreamBus",void 0),(0,d.default)(this,"_rowViewDriverStream",void 0),(0,d.default)(this,"_stopper",void 0),(0,d.default)(this,"_elementsToViews",new s.default),(0,d.default)(this,"_selectionMutationObserver",void 0),(0,d.default)(this,"_selectedThreadRowViews",new l.default),(0,d.default)(this,"_batchedSignalThreadRowViewSelectionChangeScheduled",!1),this._eventStreamBus=(0,_.default)(),this._stopper=this._eventStreamBus.ignoreValues().beforeEnd(function(){return null}),this._gmailDriver=n,this._element=t,this._routeViewDriver=r,this._selectionMutationObserver=new MutationObserver(function(e){for(var t=!1,r=0,n=e.length;r<n;r++){var o=e[r],a=o.target,s=j.test(o.oldValue),l=j.test(a.className);if(s!==l){var u=i._elementsToViews.get(a);u&&(t=!0,l?i._selectedThreadRowViews.add(u):i._selectedThreadRowViews.delete(u))}}t&&i._gmailDriver.signalThreadRowViewSelectionChange()}),this._pendingExpansions=new s.default,this._pendingExpansionsSignal=(0,_.default)(),this._pendingExpansionsSignal.bufferBy(this._pendingExpansionsSignal.flatMap(v.default)).filter(function(e){return e.length>0}).takeUntilBy(this._stopper).onValue(this._expandColumnJob.bind(this)),this._setupToolbarView(),this._startWatchingForRowViews()}return(0,c.default)(e,[{key:"destroy",value:function(){this._selectionMutationObserver.disconnect(),this._threadRowViewDrivers.forEach(function(e){return e.destroy()}),this._eventStreamBus.end(),this._toolbarView&&this._toolbarView.destroy(),this._selectedThreadRowViews.size&&(this._selectedThreadRowViews.clear(),this._gmailDriver.signalThreadRowViewSelectionChange())}},{key:"getElement",value:function(){return this._element}},{key:"getRouteViewDriver",value:function(){return this._routeViewDriver}},{key:"getToolbarView",value:function(){return this._toolbarView}},{key:"getSelectedThreadRowViewDrivers",value:function(){return this._selectedThreadRowViews}},{key:"getThreadRowViewDrivers",value:function(){return this._threadRowViewDrivers}},{key:"getRowViewDriverStream",value:function(){return this._rowViewDriverStream}},{key:"getEventStream",value:function(){return this._eventStreamBus}},{key:"_setupToolbarView",value:function(){var e=this._findToolbarElement();this._toolbarView=e?new y.default(e,this._gmailDriver,this._routeViewDriver,this):null}},{key:"_findToolbarElement",value:function(){var e=this,t=this._element.querySelector("[gh=mtb]");if(t)return t;var r=(0,p.default)(document.querySelectorAll("[gh=tm]"),function(t){return t.parentElement.parentElement===e._element.parentElement.parentElement.parentElement.parentElement.parentElement||t.parentElement.parentElement===e._element.parentElement});return r?r.querySelector("[gh=mtb]"):null}},{key:"_fixColumnWidths",value:function(e){if(e&&e.parentElement){var t=e.parentElement.firstElementChild;if(t!==e&&t){var r=t.querySelectorAll("table.cf > colgroup > col"),n=e.querySelectorAll("table.cf > colgroup > col");m.default.strictEqual(r.length,n.length),(0,h.default)(r,n).forEach(function(e){var t=(0,a.default)(e,2),r=t[0];t[1].style.width=r.style.width})}}}},{key:"expandColumn",value:function(e,t){var r=this._pendingExpansions.get(e);(!r||t>r)&&(this._pendingExpansions.set(e,t),this._pendingExpansionsSignal.emit())}},{key:"_expandColumnJob",value:function(){var e=this;this._pendingExpansions.forEach(function(t,r){Array.prototype.forEach.call(e._element.querySelectorAll("table.cf > colgroup > "+r),function(e){var r=(0,o.default)(e.style.width,10);(isNaN(r)||r<t)&&(e.style.width=t+"px")})}),this._pendingExpansions.clear()}},{key:"_batchedSignalThreadRowViewSelectionChange",value:function(){var e=this;this._batchedSignalThreadRowViewSelectionChangeScheduled||(this._batchedSignalThreadRowViewSelectionChangeScheduled=!0,(0,v.default)(null).takeUntilBy(this._stopper).onValue(function(){e._batchedSignalThreadRowViewSelectionChangeScheduled=!1,e._gmailDriver.signalThreadRowViewSelectionChange()}))}},{key:"_startWatchingForRowViews",value:function(){var e=this,t=(0,i.default)(this._element.querySelectorAll("div.Cp")),r=b.default.merge(t.map(k.default)).flatMap(function(t){e._fixColumnWidths(t.el);var r=(0,g.default)(t.el,"table > tbody");return(0,k.default)(r).takeUntilBy(t.removalStream).filter(function(e){return e.el.id})}),n=b.default.later(2);this._rowViewDriverStream=r.map(function(t){var r=t.el;e._selectionMutationObserver.observe(r,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0});var n=new w.default(r,e,e._gmailDriver);return e._elementsToViews.set(r,n),r.classList.contains("x7")&&(e._selectedThreadRowViews.add(n),e._batchedSignalThreadRowViewSelectionChange()),t.removalStream.take(1).onValue(function(){e._selectedThreadRowViews.has(n)&&(e._selectedThreadRowViews.delete(n),e._batchedSignalThreadRowViewSelectionChange()),e._elementsToViews.delete(r),n.destroy()}),n}).flatMap(function(e){return e.getAlreadyHadModifications()?n.flatMap(function(){return e.waitForReady()}).takeUntilBy(e.getStopper()):e.waitForReady().takeUntilBy(e.getStopper())}).takeUntilBy(this._stopper),this._rowViewDriverStream.onValue(function(t){return e._addThreadRowView(t)})}},{key:"_addThreadRowView",value:function(e){var t=this;this._threadRowViewDrivers.add(e),e.getStopper().takeUntilBy(this._stopper).onValue(function(){t._threadRowViewDrivers.delete(e)})}}]),e}(),E=(0,f.defn)(t,x);r.default=E},{"../../../../common/get-or-fail":611,"../../../lib/delay-asap":803,"../../../lib/dom/make-element-child-stream":812,"../../../lib/dom/make-element-view-stream":814,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/stream-wait-for":853,"./gmail-thread-row-view":707,"./gmail-toolbar-view":712,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/slicedToArray":54,asap:77,assert:79,kefir:301,"kefir-bus":298,"lodash/find":458,"lodash/zip":505,ud:597}],707:[function(e,t,r){"use strict";function n(e){this.focus(),e.stopImmediatePropagation()}function i(e){var t=this.firstElementChild.contains(e.target),r=!t&&this!==e.target;if(!t&&(e.stopImmediatePropagation(),!r||"mouseover"==e.type)){var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.parentElement.dispatchEvent(n)}}function o(){setTimeout(function(){var e=document.querySelectorAll(".inboxsdk__thread_row");Array.prototype.forEach.call(e,function(e){var t=q.get(e);t&&a(t)})},15)}function a(e){for(var t=0;t<e.label.unclaimed.length;t++){e.label.unclaimed[t].remove()}e.label.unclaimed.length=0;for(var r=0;r<e.button.unclaimed.length;r++){e.button.unclaimed[r].remove()}e.button.unclaimed.length=0;for(var n=0;n<e.image.unclaimed.length;n++){e.image.unclaimed[n].remove()}e.image.unclaimed.length=0;for(var i=0;i<e.replacedDate.unclaimed.length;i++){e.replacedDate.unclaimed[i].remove()}e.replacedDate.unclaimed.length=0;for(var o=0;o<e.replacedDraftLabel.unclaimed.length;o++){e.replacedDraftLabel.unclaimed[o].remove()}e.replacedDraftLabel.unclaimed.length=0}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.removeAllThreadRowUnclaimedModifications=o,r.default=void 0;var l=s(e("@babel/runtime-corejs2/regenerator")),u=s(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=s(e("@babel/runtime-corejs2/core-js/promise")),d=s(e("@babel/runtime-corejs2/core-js/object/assign")),f=s(e("@babel/runtime-corejs2/helpers/slicedToArray")),p=s(e("@babel/runtime-corejs2/core-js/array/from")),h=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),m=s(e("@babel/runtime-corejs2/helpers/createClass")),b=s(e("@babel/runtime-corejs2/helpers/defineProperty")),_=s(e("@babel/runtime-corejs2/core-js/weak-map")),v=s(e("lodash/once")),g=s(e("lodash/flatten")),y=s(e("lodash/includes")),w=s(e("lodash/intersection")),k=s(e("lodash/uniqBy")),j=s(e("lodash/flatMap")),x=e("ud"),E=s(e("assert")),S=s(e("kefir")),C=s(e("asap")),I=s(e("kefir-bus")),T=s(e("../../../lib/dom/querySelectorOrFail")),A=s(e("../../../lib/dom/make-mutation-observer-chunked-stream")),D=s(e("../../../lib/dom/insert-element-in-order")),M=s(e("kefir-cast")),R=s(e("../../../lib/delay-asap")),L=s(e("kefir-stopper")),O=s(e("../widgets/gmail-dropdown-view")),P=s(e("../../../widgets/buttons/dropdown-view")),V=s(e("../widgets/gmail-label-view")),N=s(e("../widgets/gmail-action-button-view")),B=s(e("../../../driver-common/update-icon")),q=(0,x.defonce)(t,function(){return new _.default}),U=function(){function e(t,r,n){if((0,h.default)(this,e),(0,b.default)(this,"_elements",void 0),(0,b.default)(this,"_modifications",void 0),(0,b.default)(this,"_alreadyHadModifications",void 0),(0,b.default)(this,"_rowListViewDriver",void 0),(0,b.default)(this,"_driver",void 0),(0,b.default)(this,"_userView",void 0),(0,b.default)(this,"_cachedThreadID",void 0),(0,b.default)(this,"_cachedSyncThreadID",void 0),(0,b.default)(this,"_cachedSyncDraftIDPromise",void 0),(0,b.default)(this,"_imageFixer",void 0),(0,b.default)(this,"_imageFixerTask",void 0),(0,b.default)(this,"_stopper",(0,L.default)()),(0,b.default)(this,"_refresher",void 0),(0,b.default)(this,"_subjectRefresher",void 0),(0,b.default)(this,"_imageRefresher",void 0),(0,b.default)(this,"_counts",void 0),(0,b.default)(this,"_isVertical",void 0),(0,b.default)(this,"_isDestroyed",!1),(0,E.default)(t.hasAttribute("id"),"check element is main thread row"),this._isVertical=2===(0,w.default)((0,p.default)(t.classList),["zA","apv"]).length,this._isVertical){var i=t.nextElementSibling;if(!i)throw new Error("threadRow2 not found");var o=i.nextElementSibling,a=o&&o.classList.contains("apw");this._elements=a?[t,t.nextElementSibling,t.nextElementSibling.nextElementSibling]:[t,t.nextElementSibling]}else this._elements=[t];var s=q.get(this._elements[0]);s?(this._modifications=s,this._alreadyHadModifications=!0):(this._alreadyHadModifications=!1,this._modifications={label:{unclaimed:[],claimed:[]},action:{unclaimed:[],claimed:[]},button:{unclaimed:[],claimed:[]},image:{unclaimed:[],claimed:[]},replacedDate:{unclaimed:[],claimed:[]},replacedDraftLabel:{unclaimed:[],claimed:[]}},q.set(this._elements[0],this._modifications)),this._rowListViewDriver=r,this._driver=n,this._userView=null,this._cachedThreadID=null,this._imageFixer=null,this._imageFixerTask=null,this._refresher=null,this._subjectRefresher=null,this._imageRefresher=null,this._counts=null,this._elements[0].classList.add("inboxsdk__thread_row")}return(0,m.default)(e,[{key:"destroy",value:function(){this._elements.length&&(this._isDestroyed=!0,this._modifications.label.unclaimed=this._modifications.label.claimed.concat(this._modifications.label.unclaimed),this._modifications.label.claimed.length=0,this._modifications.action.unclaimed=this._modifications.action.claimed.concat(this._modifications.action.unclaimed),this._modifications.action.claimed.length=0,this._modifications.button.unclaimed=this._modifications.button.claimed.concat(this._modifications.button.unclaimed),this._modifications.button.claimed.length=0,this._modifications.image.unclaimed=this._modifications.image.claimed.concat(this._modifications.image.unclaimed),this._modifications.image.claimed.length=0,this._modifications.replacedDate.unclaimed=this._modifications.replacedDate.claimed.concat(this._modifications.replacedDate.unclaimed),this._modifications.replacedDate.claimed.length=0,this._modifications.replacedDraftLabel.unclaimed=this._modifications.replacedDraftLabel.claimed.concat(this._modifications.replacedDraftLabel.unclaimed),this._modifications.replacedDraftLabel.claimed.length=0,(0,j.default)(this._elements,function(e){return(0,p.default)(e.getElementsByClassName("inboxsdk__thread_row_addition"))}).forEach(function(e){e.remove()}),this._stopper.destroy(),this._elements.length=0)}},{key:"_removeUnclaimedModifications",value:function(){a(this._modifications)}},{key:"getAlreadyHadModifications",value:function(){return this._alreadyHadModifications}},{key:"waitForReady",value:function(){var e=this,t=[0,10,100,1e3,15e3];return function r(){if(e._threadIdReady())return(0,C.default)(function(){e._elements.length&&e._removeUnclaimedModifications()}),S.default.constant(e);var n=t.shift();return void 0==n?(console.log("Should not happen: ThreadRowViewDriver never became ready",e),S.default.never()):S.default.later(n).flatMap(r)}()}},{key:"setUserView",value:function(e){this._userView=e}},{key:"getCounts",value:function(){var e=this._counts;if(!e){var t=(0,T.default)(this._elements[0],"td div.yW");if(this._driver.isUsingSyncAPI()){var r=t.querySelectorAll(".boq").length,n=t.querySelector(".bx0"),i=n&&n.innerHTML?+n.innerHTML:r?0:1;e=this._counts={messageCount:i,draftCount:r}}else{var o=t.innerHTML.split(/<font color=[^>]+>[^>]+<\/font>/),a=(0,f.default)(o,2),s=a[0],l=a[1],u=s.replace(/<span\b[^>]*>.*?<\/span>/g,""),c=u.match(/\((\d+)\)/),d=c?+c[1]:s?1:0,p=l&&l.match(/\((\d+)\)/),h=p?+p[1]:null!=l?1:0;e=this._counts={messageCount:d,draftCount:h}}}return e}},{key:"_expandColumn",value:function(e,t){this._rowListViewDriver.expandColumn(e,t)}},{key:"addLabel",value:function(e){var t=this;if(!this._elements.length)return void console.warn("addLabel called on destroyed thread row");var r=(0,M.default)(S.default,e).takeUntilBy(this._stopper).toProperty(),n=null;r.combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(function(e){var r=(0,f.default)(e,1),i=r[0];if(i){if(!n){if(!(n=t._modifications.label.unclaimed.shift())){var o=new V.default({classes:["inboxsdk__thread_row_label"]}),a=o.getElement();n={gmailLabelView:o,remove:a.remove.bind(a)}}t._modifications.label.claimed.push(n)}n.gmailLabelView.updateLabelDescriptor(i);var s=t._getLabelParent();s!==n.gmailLabelView.getElement().parentElement&&(t._driver.isUsingMaterialUI()?s.insertAdjacentElement("afterbegin",n.gmailLabelView.getElement()):t._elements.length>1?s.insertAdjacentElement("afterbegin",n.gmailLabelView.getElement()):s.insertBefore(n.gmailLabelView.getElement(),s.querySelector(".y6"))),t._getImageFixer().emit()}else n&&(n.remove(),t._modifications.label.claimed.splice(t._modifications.label.claimed.indexOf(n),1),n=null)})}},{key:"addImage",value:function(e){var t=this;if(!this._elements.length)return void console.warn("addImage called on destroyed thread row");var r=(0,M.default)(S.default,e).toProperty().combine(S.default.merge([this._getRefresher(),this._getSubjectRefresher(),this._getImageContainerRefresher()])).takeUntilBy(this._stopper),n=null;r.onValue(function(e){var r=(0,f.default)(e,1),i=r[0];if(i){n||(n=t._modifications.image.unclaimed.shift(),n||(n={iconSettings:{},iconWrapper:document.createElement("div"),remove:function(){this.iconWrapper.remove()}},
n.iconWrapper.className="inboxsdk__thread_row_icon_wrapper"),t._modifications.image.claimed.push(n));var o=n,a=o.iconSettings,s=o.iconWrapper;(0,B.default)(a,s,!1,i.imageClass,i.imageUrl);(3===t._elements.length?t._elements[2]:t._elements[0]).classList.add("inboxsdk__thread_row_image_added"),i.tooltip?s.setAttribute("data-tooltip",i.tooltip):s.removeAttribute("data-tooltip");var l=t._getLabelParent();if(!l.contains(s))if(t._driver.isUsingMaterialUI())(0,T.default)(l,".y6").insertAdjacentElement("beforebegin",s);else if(t._elements.length>1)l.insertAdjacentElement("beforeend",s);else{var u=(0,T.default)(l,".y6");u.insertBefore(s,u.firstElementChild)}t._getImageFixer().emit()}else n&&(n.remove(),t._modifications.image.claimed.splice(t._modifications.image.claimed.indexOf(n),1),n=null)}),this._getImageFixerTask().onValue(function(){var e=n&&n.iconWrapper&&n.iconWrapper.firstElementChild;e instanceof HTMLElement&&(e.style.display=e.style&&"block"===e.style.display?"inline-block":"block")})}},{key:"addButton",value:function(e){var t=this;if(!this._elements.length)return void console.warn("addButton called on destroyed thread row");if(1==this._elements.length){var r=null,o=null,a=(0,M.default)(S.default,e).toProperty().takeUntilBy(this._stopper);a.merge(this._stopper).onValue(function(e){e||r&&(r.close(),r=null)}),this._stopper.onValue(function(){o&&o.buttonSpan&&(o.buttonSpan.onclick=null)}),a.combine(this._getRefresher()).onValue(function(e){var a=(0,f.default)(e,1),s=a[0],l=s;if(l){l.className&&(l.iconClass=l.className,delete l.className);var u,c,d=t._elements[0].querySelector("ul[role=toolbar]");o||(o=t._modifications.button.unclaimed.shift(),o||(d?(u=document.createElement("li"),u.classList.add("bqX")):(u=document.createElement("span"),u.classList.add("T-KT")),u.classList.add("inboxsdk__thread_row_button"),l.title?u.setAttribute("title",l.title):u.removeAttribute("title"),u.setAttribute("tabindex","-1"),u.setAttribute("data-order-hint",String(l.orderHint||0)),u.addEventListener("onmousedown",n),c={},o={buttonSpan:u,iconSettings:c,remove:u.remove.bind(u)}),t._modifications.button.claimed.push(o));var p=d?null:(0,T.default)(t._elements[0],"td.apU.xY, td.aqM.xY");u=o.buttonSpan,c=o.iconSettings,l.onClick&&(u.onclick=function(e){var n={dropdown:null,threadRowView:t._userView};if(l.hasDropdown){if(r)return t._elements[0].classList.remove("inboxsdk__dropdown_active"),t._elements[0].classList.remove("buL"),r.close(),void(r=null);t._elements[0].classList.add("inboxsdk__dropdown_active"),t._elements[0].classList.add("buL"),n.dropdown=r=new P.default(new O.default,u,null),r.setPlacementOptions({position:"bottom",hAlign:"left",vAlign:"top"}),r.on("destroy",function(){setTimeout(function(){r=null},1)})}l.onClick.call(null,n)}),(0,B.default)(c,u,!1,l.iconClass,l.iconUrl),d&&u.parentElement!==d?(0,D.default)(d,u,void 0,!0):p&&u.parentElement!==p&&((0,D.default)(p,u),t._expandColumn("col.y5",26*p.children.length),p.onmouseover=p.onclick=i),t._getImageFixer().emit()}else o&&(o.remove(),t._modifications.button.claimed.splice(t._modifications.button.claimed.indexOf(o),1),o=null)})}}},{key:"addActionButton",value:function(e){var t=this;if(1===this._elements.length){var r=(0,M.default)(S.default,e).takeUntilBy(this._stopper).toProperty(),n=null;this._stopper.onEnd(function(){n&&n.gmailActionButtonView.setOnClick(null)}),r.takeUntilBy(this._stopper).onValue(function(e){if(e&&"LINK"!==e.type)return void console.error("Only type=LINK is currently supported");if(e){if(!n){if(!(n=t._modifications.action.unclaimed.shift())){var r=new N.default,i=r.getElement();n={gmailActionButtonView:r,remove:i.remove.bind(i)}}t._modifications.action.claimed.push(n)}n.gmailActionButtonView.updateDescriptor(e);var o=e.url,a=e.onClick;n.gmailActionButtonView.setOnClick(function(e){e.stopPropagation(),window.open(o,"_blank"),a&&a.call(null,{})});var s=t._elements[0].querySelector("td.a4W .a4X .aKS")||t._elements[0].querySelector("td.a4W div.xS");if(!s)throw new Error("Failed to find actionParentDiv");(0,y.default)(s.children,n.gmailActionButtonView.getElement())||s.insertBefore(n.gmailActionButtonView.getElement(),s.firstChild),t._getImageFixer().emit()}else n&&(n.remove(),t._modifications.action.claimed.splice(t._modifications.action.claimed.indexOf(n),1),n=null)})}}},{key:"addAttachmentIcon",value:function(e){var t=this;if(!this._elements.length)return void console.warn("addAttachmentIcon called on destroyed thread row");var r,n=(0,v.default)(function(){var e=document.createElement("img");return e.src="images/cleardot.gif",e}),i=(0,v.default)(function(){return document.createElement("div")}),o=!1;(0,M.default)(S.default,e).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(function(e){var a=(0,f.default)(e,1),s=a[0],l=(0,T.default)(t._elements[0],"td.yf.xY");if(s){var u=null!=s.iconHtml?i():n();s.tooltip?u.setAttribute("data-tooltip",s.tooltip):u.removeAttribute("data-tooltip"),u.className=null!=s.iconHtml?"inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_iconWrapper "+(s.iconClass||""):"inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_icon "+(s.iconClass||""),null!=s.iconHtml?(l.contains(n())&&n().remove(),u.innerHTML=s.iconHtml):r!=s.iconUrl&&(l.contains(i())&&i().remove(),u.style.background=s.iconUrl?"url("+s.iconUrl+") no-repeat 0 0":"",r=s.iconUrl),l.contains(u)||(l.appendChild(u),o=!0,t._expandColumn("col.yg",16*l.children.length),t._elements.length>1&&t._fixDateColumnWidth()),l.classList.add("inboxsdk__thread_row_attachment_icons_present")}else o&&(i().remove(),n().remove(),o=!1,l.querySelector(".inboxsdk__thread_row_attachment_icon")||l.classList.remove("inboxsdk__thread_row_attachment_icons_present"))})}},{key:"_fixDateColumnWidth",value:function(){var e=this;(0,C.default)(function(){if(e._elements.length){var t=e._elements[0].querySelector("td.xW, td.yf > div.apm");if(t){var r=t.querySelector(".inboxsdk__thread_row_custom_date")||t.firstElementChild;if(r&&r instanceof HTMLElement){var n=e._elements[0].querySelectorAll("td.yf > img").length;e._expandColumn("col.xX",r.offsetWidth+8+2+20+16*n)}}}})}},{key:"replaceDraftLabel",value:function(e){var t=this;if(!this._elements.length)return void console.warn("replaceDraftLabel called on destroyed thread row");var r,n,i;(0,M.default)(S.default,e).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(function(e){var o=(0,f.default)(e,1),a=o[0],s=(0,T.default)(t._elements[0],"td > div.yW"),l=s.parentElement;if(!l)throw new Error("Should not happen");if(a){a=(0,d.default)({count:1},a),r||(r=t._modifications.replacedDraftLabel.unclaimed.shift(),r||(r={el:(0,d.default)(document.createElement("span"),{className:"inboxsdk__thread_row_custom_draft_label"}),remove:function(){this.el.remove()}}),t._modifications.replacedDraftLabel.claimed.push(r));var u=!(0,y.default)(l.children,r.el);if(u||!n){r.el.innerHTML=s.innerHTML;var c=(0,p.default)(r.el.querySelectorAll(".boq"));if(c.length>0)c.forEach(function(e){return e.remove()}),n=(0,d.default)(document.createElement("span"),{className:"boq"}),r.el.appendChild(n);else{if(!(n=r.el.querySelector("font")))return;var h=n.nextElementSibling;h&&h.remove()}n.classList.add("inboxsdk__thread_row_custom_draft_part"),i=(0,d.default)(document.createElement("span"),{className:"inboxsdk__thread_row_custom_draft_count"}),r.el.appendChild(i)}n.textContent=a.text,i.textContent=1!==a.count?" (".concat(a.count,")"):"",u&&l.insertBefore(r.el,s)}else r&&(r.remove(),t._modifications.replacedDraftLabel.claimed.splice(t._modifications.replacedDraftLabel.claimed.indexOf(r),1),r=null)})}},{key:"replaceDate",value:function(e){var t=this;if(!this._elements.length)return void console.warn("replaceDate called on destroyed thread row");var r;(0,M.default)(S.default,e).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(function(e){var n=(0,f.default)(e,1),i=n[0],o=(0,T.default)(t._elements[0],"td.xW, td.yf > div.apm");o.firstElementChild,i?(r||(r=t._modifications.replacedDate.unclaimed.shift(),r||(r={el:(0,d.default)(document.createElement("span"),{className:"inboxsdk__thread_row_custom_date"}),remove:function(){this.el.remove(),o.classList.remove("inboxsdk__thread_row_custom_date_container")}}),t._modifications.replacedDate.claimed.push(r)),r.el.textContent=i.text,i.tooltip?(r.el.setAttribute("data-tooltip",i.tooltip),r.el.setAttribute("aria-label",i.tooltip)):(r.el.removeAttribute("data-tooltip"),r.el.removeAttribute("aria-label")),r.el.style.color=i.textColor||"",(0,y.default)(o.children,r.el)||(o.insertBefore(r.el,o.firstChild),o.classList.add("inboxsdk__thread_row_custom_date_container")),t._fixDateColumnWidth()):r&&(r.remove(),t._modifications.replacedDate.claimed.splice(t._modifications.replacedDate.claimed.indexOf(r),1),r=null)})}},{key:"getEventStream",value:function(){return this._stopper}},{key:"getStopper",value:function(){return this._stopper}},{key:"getSubject",value:function(){return this._elements.length>1?(0,T.default)(this._elements[1],"div.xS div.xT div.y6 > span[id]").textContent:(0,T.default)(this._elements[0],"td.a4W div.xS div.xT div.y6 > span[id]").textContent}},{key:"getDateString",value:function(){return(0,T.default)(this._elements[0],"td.xW > span[title]:not(.inboxsdk__thread_row_custom_date), td.yf.apt > div.apm > span[title]:not(.inboxsdk__thread_row_custom_date)").title}},{key:"_threadIdReady",value:function(){return!!this._getThreadID()}},{key:"_getThreadID",value:function(){var e=this;if(this._cachedThreadID)return this._cachedThreadID;if(this._driver.isUsingSyncAPI()){var t=(0,g.default)(this._elements.map(function(e){return(0,p.default)(e.querySelectorAll("[data-thread-id][data-legacy-thread-id]"))})).filter(Boolean)[0];if(t)return this._cachedSyncThreadID=t.getAttribute("data-thread-id").replace("#",""),this._cachedThreadID=t.getAttribute("data-legacy-thread-id").replace("#",""),this._cachedThreadID;var r=this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this,this._elements);this._cachedSyncThreadID=r,r&&this._driver.getOldGmailThreadIdFromSyncThreadId(r).then(function(t){e._cachedThreadID=t})}else this._cachedThreadID=this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this,this._elements);return this._cachedThreadID}},{key:"getThreadID",value:function(){var e=this._getThreadID();if(!e)throw new Error("Should not happen: thread id was null");return e}},{key:"getSyncThreadID",value:function(){return c.default.resolve(this._cachedSyncThreadID)}},{key:"getThreadIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getThreadID());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDraftID",value:function(){if(this._cachedSyncDraftIDPromise)return this._cachedSyncDraftIDPromise;if(this._driver.isUsingSyncAPI()){var e=(0,g.default)(this._elements.map(function(e){return(0,p.default)(e.querySelectorAll("[data-standalone-draft-id]"))})).filter(Boolean)[0];this._cachedSyncDraftIDPromise=c.default.resolve(e?e.getAttribute("data-standalone-draft-id").replace("#msg-a:",""):null)}else this._cachedSyncDraftIDPromise=this._driver.getThreadRowIdentifier().getDraftIdForThreadRow(this);return this._cachedSyncDraftIDPromise}},{key:"getVisibleDraftCount",value:function(){return this.getCounts().draftCount}},{key:"getVisibleMessageCount",value:function(){return this.getCounts().messageCount}},{key:"getContacts",value:function(){var e=this._elements[0].querySelectorAll("[email]"),t=(0,p.default)(e).map(function(e){return{emailAddress:e.getAttribute("email"),name:e.getAttribute("name")}});return(0,k.default)(t,function(e){return e.emailAddress})}},{key:"isSelected",value:function(){return!!this._elements[0].querySelector("div[role=checkbox][aria-checked=true]")}},{key:"_getLabelParent",value:function(){return this._elements.length>1?(0,T.default)(this._elements[2===this._elements.length?0:2],"div.apu"):(0,T.default)(this._elements[0],"td.a4W div.xS div.xT")}},{key:"_getImageFixer",value:function(){var e=this._imageFixer;return e||(e=this._imageFixer=(0,I.default)()),e}},{key:"_getImageFixerTask",value:function(){var e=this._imageFixerTask;return e||(e=this._imageFixerTask=this._getImageFixer().bufferBy(this._getImageFixer().flatMap(function(e){return(0,R.default)()})).filter(function(e){return e.length>0}).map(function(e){return null}).takeUntilBy(this._stopper)),e}},{key:"_getWatchElement",value:function(){return 1===this._elements.length?this._elements[0]:this._elements[0].children[2]}},{key:"_getRefresher",value:function(){var e=this._refresher;return e||(e=this._refresher=(0,A.default)(this._getWatchElement(),{childList:!0}).map(function(){return null}).takeUntilBy(this._stopper).toProperty(function(){return null})),e}},{key:"_getSubjectRefresher",value:function(){var e=this._subjectRefresher;if(!e)if(this._isVertical)e=this._subjectRefresher=S.default.constant(null);else{var t=this._getWatchElement(),r=(0,T.default)(t,".y6");e=this._subjectRefresher=(0,A.default)(r,{childList:!0}).merge((0,A.default)(t,{attributes:!0,attributeFilter:["class"]}).map(function(){return(0,p.default)(t.classList).filter(function(e){return 0!==e.indexOf("inboxsdk")}).sort().join(" ")}).skipDuplicates()).map(function(){return null}).takeUntilBy(this._stopper).toProperty(function(){return null})}return e}},{key:"_getImageContainerRefresher",value:function(){var e=this._imageRefresher;if(!e)if(this._isVertical){var t=3===this._elements.length?this._elements[2]:this._elements[0],r=(0,A.default)(t,{attributes:!0,attributeFilter:["class"]});e=this._imageRefresher=r.bufferBy(r.flatMapLatest(function(){return(0,R.default)()})).filter(function(){return t.querySelectorAll(".inboxsdk__thread_row_icon_wrapper").length>0&&!t.classList.contains("inboxsdk__thread_row_image_added")}).map(function(){return null}).takeUntilBy(this._stopper).toProperty(function(){return null})}else e=this._imageRefresher=S.default.constant(null);return e}}]),e}(),F=(0,x.defn)(t,U);r.default=F},{"../../../driver-common/update-icon":795,"../../../lib/delay-asap":803,"../../../lib/dom/insert-element-in-order":809,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOrFail":821,"../../../widgets/buttons/dropdown-view":893,"../widgets/gmail-action-button-view":721,"../widgets/gmail-dropdown-view":722,"../widgets/gmail-label-view":723,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/slicedToArray":54,"@babel/runtime-corejs2/regenerator":59,asap:77,assert:79,kefir:301,"kefir-bus":298,"kefir-cast":299,"kefir-stopper":300,"lodash/flatMap":461,"lodash/flatten":462,"lodash/includes":466,"lodash/intersection":467,"lodash/once":489,"lodash/uniqBy":502,ud:597}],708:[function(e,t,r){(function(n){"use strict";function i(){var e=(0,a.default)(['\n              <button class="inboxsdk__button_icon" type="button" data-tooltip="','">\n                <img class="inboxsdk__button_iconImg" src="','">\n              </button>\n              <div class="inboxsdk__button_selectedIndicator"></div>\n            ']);return i=function(){return e},e}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),s=o(e("@babel/runtime-corejs2/core-js/array/from")),l=o(e("@babel/runtime-corejs2/core-js/json/stringify")),u=o(e("@babel/runtime-corejs2/core-js/set")),c=o(e("@babel/runtime-corejs2/core-js/map")),d=o(e("@babel/runtime-corejs2/core-js/date/now")),f=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),p=o(e("@babel/runtime-corejs2/helpers/createClass")),h=o(e("@babel/runtime-corejs2/helpers/defineProperty")),m=o(e("lodash/findIndex")),b=o(e("asap")),_=e("ud"),v=o(e("auto-html")),g=o(e("kefir")),y=o(e("kefir-stopper")),w=o(e("kefir-bus")),k=o(e("react")),j=o(e("react-dom")),x=o(e("../../../../common/find-parent")),E=(o(e("../../../lib/delay-asap")),o(e("../../../lib/from-event-target-capture")),o(e("order-manager"))),S=o(e("../../../lib/idMap")),C=o(e("../../../lib/incrementName")),I=o(e("../../../lib/dom/querySelectorOrFail")),T=o(e("../../../lib/dom/make-mutation-observer-chunked-stream")),A=o(e("../../../lib/dom/make-element-child-stream")),D=e("../../../lib/dom/simulate-mouse-event"),M=o(e("../../../lib/fake-window-resize")),R=o(e("../../../driver-common/sidebar/AppSidebar")),L=o(e("../../../driver-common/sidebar/ContentPanelViewDriver")),O=o(e("../gmail-element-getter")),P=o(e("./gmail-thread-sidebar-view/add-icon-area")),V=o(e("./gmail-app-sidebar-view/primary/add-to-icon-area")),N=function(){function e(t,r,n,i){(0,f.default)(this,e),(0,h.default)(this,"_stopper",(0,y.default)()),(0,h.default)(this,"_driver",void 0),(0,h.default)(this,"_instanceId",void 0),this._driver=t;var o=n||r;if(!o)throw new Error("should not happen");var a=o.getAttribute("data-sdk-sidebar-instance-id");null!=a?this._instanceId=a:this._createElement(r,n,i)}return(0,p.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}},{key:"_getShouldAppSidebarOpen",value:function(){return"false"!==n.localStorage.getItem("inboxsdk__app_sidebar_should_open")}},{key:"_setShouldAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_createElement",value:function(e,t,r){var o,a,f,p=this;this._instanceId="".concat((0,d.default)(),"-").concat(Math.random());var h=t||e;if(!h)throw new Error("should not happen");h.setAttribute("data-sdk-sidebar-instance-id",this._instanceId),this._stopper.onValue(function(){h.removeAttribute("data-sdk-sidebar-instance-id")});var _=document.createElement("div");_.className=(0,S.default)("app_sidebar_container");var y,L=new c.default,N=!1,B=!1,q=(0,w.default)();if(this._stopper.onEnd(function(){q.end()}),t){var U=O.default.getMainContentBodyContainerElement();if(U){if(!(y=U.parentElement))throw new Error("should not happen");y.classList.add("container_app_sidebar_in_use"),(0,I.default)(t,".J-KU-Jz").insertAdjacentElement("beforebegin",_),t.classList.add("app_sidebar_visible"),t.classList.add((0,S.default)("app_sidebar_in_use")),y.classList.add("container_app_sidebar_visible"),_.textContent="x";var F=_.getBoundingClientRect();_.textContent="",t.classList.remove("app_sidebar_visible"),y.classList.remove("container_app_sidebar_visible");var H=window.innerWidth>=1024&&window.innerHeight>=600;!n._APP_SIDEBAR_TEST&&(0==F.width||0==F.height||H&&Math.floor(F.right)>Math.floor(window.innerWidth))?this._driver.getLogger().error(new Error("SDK sidebar inserted into add-ons sidebar was not visible"),{rect:{top:F.top,bottom:F.bottom,left:F.left,right:F.right,width:F.width,height:F.height},window:{innerWidth:window.innerWidth,innerHeight:window.innerHeight}}):B=!0,B||(y&&y.classList.remove("container_app_sidebar_in_use"),t.classList.remove((0,S.default)("app_sidebar_in_use")))}}var z=B?t:null,W=B?t:e;if(!W)throw new Error("should not happen");if(B||(W.insertBefore(_,W.firstElementChild),W.classList.add((0,S.default)("app_sidebar_in_use"))),!document.body.querySelector("."+(0,S.default)("app_sidebar_waiting_platform"))){var G=document.createElement("div");G.className=(0,S.default)("app_sidebar_waiting_platform"),document.body.appendChild(G)}if(z)o=function(){return _},_.classList.add("addon_sidebar");else{var K=(0,x.default)(W,function(e){return"visible"!==window.getComputedStyle(e).overflowY});o=K?function(){return K}:void 0}var $=new u.default,J=new E.default({get:function(){try{return JSON.parse(n.localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch(e){console.error("failed to read sidebar order data",e)}},set:function(e){try{n.localStorage.setItem("inboxsdk__sidebar_ordering",(0,l.default)(e))}catch(e){console.error("failed to set sidebar order data",e)}}});q.bufferWithTimeOrCount(150,100).filter(function(e){return e.length>0}).takeUntilBy(this._stopper).onValue(function(){var e=_.getBoundingClientRect(),t=e.top+_.scrollTop,r=t+e.height,n=(0,s.default)(_.querySelectorAll(".".concat((0,S.default)("app_sidebar_content_panel"),".").concat((0,S.default)("expanded")," .").concat((0,S.default)("app_sidebar_content_panel_top_line")))),i=n.find(function(e){var n=e.getBoundingClientRect();return n.bottom>t&&n.bottom<r});if(i){var o=(i.getAttribute("data-instance-id"),i.getAttribute("data-app-name"));if(!o)return;var l=L.get(o);if(!l||!a)return;var u=a.querySelector(".sidebar_button_container_active");u&&u.classList.remove("sidebar_button_container_active"),l.classList.add("sidebar_button_container_active")}});var Y=function(e){e&&(f=e)},Q=function e(){j.default.render(k.default.createElement(R.default,{ref:Y,panels:J.getOrderedItems().map(function(e){return e.value}),onMoveEnd:function(t,r,n,i){J.moveItem(n,i),e()},onExpandedToggle:function(){q.emit(null)},container:o}),_,function(){q.emit(null)})};if(Q(),g.default.fromEvents(window,"storage").filter(function(e){return"inboxsdk__sidebar_ordering"===e.key}).takeUntilBy(this._stopper).onValue(function(){J.reload(),Q()}),this._stopper.onValue(function(){j.default.unmountComponentAtNode(_),_.remove(),W.classList.remove((0,S.default)("app_sidebar_in_use")),W.classList.remove("app_sidebar_visible"),a&&a.remove();var e=O.default.getMainContentBodyContainerElement();e&&(y=e.parentElement)&&(y.classList.remove("container_app_sidebar_in_use"),y.classList.remove("container_app_sidebar_visible"))}),g.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(function(e){return e.detail.sidebarId===p._instanceId}).takeUntilBy(this._stopper).onValue(function(e){for(var t=e.detail.id;$.has(t);)t=(0,C.default)(t);$.add(t);var n=e.detail.appName;J.addItem({groupId:e.detail.appId,id:t,orderHint:e.detail.orderHint,value:{id:t,appName:n,appId:e.detail.appId,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}}),Q(),z&&(a=z.querySelector("."+(0,S.default)("sidebar_iconArea")),a||(a=document.createElement("div"),a.className=(0,S.default)("sidebar_iconArea"),(0,P.default)(a,z,p._stopper)),(0,b.default)(function(){if(!a)throw new Error("should not happen");var t,o=e.detail.instanceId,s=e.detail.appIconUrl,l=L.get(n);if(l){var u=Number(l.getAttribute("data-count"))||1;l.setAttribute("data-count",String(u+1)),t=l}else if(t=document.createElement("div"),t.className=(0,S.default)("sidebar_button_container"),t.setAttribute("data-app-name",n),t.setAttribute("data-count",String(1)),t.innerHTML=(0,v.default)(i(),n,s),e.detail.primaryColor&&((0,I.default)(t,".inboxsdk__button_selectedIndicator").style.backgroundColor=e.detail.primaryColor),L.set(n,t),(0,I.default)(t,"button").addEventListener("click",function(e){e.stopPropagation();var r=a?a.querySelector(".sidebar_button_container_active"):null;if(r&&r.classList.remove("sidebar_button_container_active"),r===t)z&&z.classList.remove("app_sidebar_visible"),y&&y.classList.remove("container_app_sidebar_visible"),p._setShouldAppSidebarOpen(!1);else{if(z&&z.classList.add("app_sidebar_visible"),t.classList.add("sidebar_button_container_active"),y&&y.classList.add("container_app_sidebar_visible"),p._setShouldAppSidebarOpen(!0),z){var n=z.querySelector(".J-KU-KO");n&&(0,D.simulateClick)(n),(0,M.default)();var i=z.firstElementChild;if(!i)return;var s=i.firstElementChild,l=s;if(!l)return;"none"!==l.style.display&&(N=!0,(0,T.default)(l,{attributes:!0,attributeFilter:["style"]}).toProperty(function(){return null}).map(function(){return"none"===l.style.display}).filter(Boolean).take(1).delay(150).takeUntilBy(p._stopper).onValue(function(){N=!1}))}f.openPanel(o),f.scrollPanelIntoView(o,!0)}},!0),a&&(0,V.default)(J,n,t,a),r&&r.fixWidths(),p._getShouldAppSidebarOpen()){var c=a.querySelector(".sidebar_button_container_active");c||(t.classList.add("sidebar_button_container_active"),z&&z.classList.add("app_sidebar_visible"),y&&y.classList.add("container_app_sidebar_visible"),(0,M.default)())}}))}),g.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(function(e){return e.detail.sidebarId===p._instanceId}).takeUntilBy(this._stopper).onValue(function(e){var t=J.getOrderedItems(),r=(0,m.default)(t,function(t){return t.value.instanceId===e.detail.instanceId});if(-1===r)throw new Error("should not happen: failed to find orderItem");J.updateItemValueByIndex(r,{id:t[r].value.id,appId:e.detail.appId,appName:e.detail.appName||e.detail.title,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}),Q()}),g.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(function(e){return e.detail.sidebarId===p._instanceId}).takeUntilBy(this._stopper).onValue(function(e){var t=J.getOrderedItems(),n=(0,m.default)(t,function(t){return t.value.instanceId===e.detail.instanceId});if(-1===n)throw new Error("should not happen: failed to find orderItem");if($.delete(t[n].id),J.removeItemByIndex(n),0===J.getOrderedItems().length?p.destroy():Q(),z&&(a=z.querySelector("."+(0,S.default)("sidebar_iconArea")))){r&&r.fixWidths();var i=e.detail.appName,o=L.get(i);if(o){var s=Number(o.getAttribute("data-count"));if(s<=1){var l=_.querySelector(".sidebar_button_container_active");o.remove(),L.delete(i),o===l&&(z&&(z.classList.remove("app_sidebar_visible"),y&&y.classList.remove("container_app_sidebar_visible")),p._setShouldAppSidebarOpen(!1))}else 2===s?o.removeAttribute("data-count"):o.setAttribute("data-count",String(s-1))}}}),g.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").takeUntilBy(this._stopper).onValue(function(e){f.scrollPanelIntoView(e.detail.instanceId)}),g.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").takeUntilBy(this._stopper).onValue(function(e){f.closePanel(e.detail.instanceId)}),z){var X=(0,I.default)(z,".J-KU-Jz");(0,A.default)(X).flatMap(function(e){var t=e.el;e.removalStream;return(0,T.default)(t,{attributes:!0,attributeFilter:["style"]}).toProperty(function(){return null}).map(function(){return"none"!==t.style.display})}).takeUntilBy(this._stopper).onValue(function(e){if(e){if(y&&y.classList.add("container_addon_sidebar_visible"),N){var t=z.querySelector(".J-KU-KO");return void(t&&(0,D.simulateClick)(t))}p._setShouldAppSidebarOpen(!1);var r=a?a.querySelector(".sidebar_button_container_active"):null;r&&(z.classList.remove("app_sidebar_visible"),r.classList.remove("sidebar_button_container_active"),y&&y.classList.remove("container_app_sidebar_visible"))}else y&&y.classList.remove("container_addon_sidebar_visible")})}z&&g.default.fromEvents(_,"scroll").takeUntilBy(this._stopper).onValue(function(){q.emit(null)})}},{key:"addSidebarContentPanel",value:function(e){var t=new L.default(this._driver,e,this._instanceId);return this._stopper.takeUntilBy(t.getStopper()).onValue(function(){t.remove()}),t}}]),e}(),B=(0,_.defn)(t,N);r.default=B}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../common/find-parent":609,"../../../driver-common/sidebar/AppSidebar":793,"../../../driver-common/sidebar/ContentPanelViewDriver":794,"../../../lib/delay-asap":803,"../../../lib/dom/make-element-child-stream":812,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/dom/simulate-mouse-event":827,"../../../lib/fake-window-resize":830,"../../../lib/from-event-target-capture":831,"../../../lib/idMap":835,"../../../lib/incrementName":837,"../gmail-element-getter":655,"./gmail-app-sidebar-view/primary/add-to-icon-area":665,"./gmail-thread-sidebar-view/add-icon-area":709,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,asap:77,"auto-html":83,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/findIndex":459,"order-manager":510,react:580,"react-dom":553,ud:597}],709:[function(e,t,r){"use strict";function n(e,t,r){var n=t.firstElementChild;if(n){var o=n.firstElementChild,a=o;if(a){var c=t.querySelector(u);if(c){var d=(0,l.default)(a,{attributes:!0,attributeFilter:["style"]}).toProperty(function(){return null}).map(function(){return"none"!==a.style.display}).takeUntilBy(r),f=(0,l.default)(c,{attributes:!0,attributeFilter:["role"]}).toProperty(function(){return null}).filter(function(){return"tablist"===c.getAttribute("role")}).takeUntilBy(r);c.insertAdjacentElement("beforebegin",e),s.default.combine([d.filter(function(e){return!e}),f]).onValue(function(){c.insertAdjacentElement("afterbegin",e),i(e,c,s.default.merge([d.filter(Boolean),r]))}),d.filter(Boolean).onValue(function(){var t=document.createElement("div");t.innerHTML=a.innerHTML,t.classList.add("inboxsdk__addon_icon_loading"),c.insertAdjacentElement("beforebegin",e),e.insertAdjacentElement("afterend",t),s.default.merge([d.filter(function(e){return!e}),r]).take(1).onValue(function(){t.remove()})})}}}}function i(e,t,r){(0,l.default)(t,{childList:!0}).filter(function(){return e.parentElement!==t}).takeUntilBy(r).onValue(function(){t.insertAdjacentElement("afterbegin",e)})}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=e("ud"),s=o(e("kefir")),l=(o(e("kefir-stopper")),o(e("../../../../lib/dom/make-mutation-observer-chunked-stream"))),u=(o(e("../../../../lib/dom/querySelectorOrFail")),"[role=tablist],.J-KU-Jg"),c=(0,a.defn)(t,n);r.default=c},{"../../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../../lib/dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300,ud:597}],710:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/array/from")),o=n(e("@babel/runtime-corejs2/regenerator")),a=n(e("@babel/runtime-corejs2/core-js/promise")),s=n(e("@babel/runtime-corejs2/helpers/toConsumableArray")),l=n(e("@babel/runtime-corejs2/core-js/number/min-safe-integer")),u=n(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=n(e("@babel/runtime-corejs2/core-js/get-iterator")),d=n(e("@babel/runtime-corejs2/core-js/set")),f=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),p=n(e("@babel/runtime-corejs2/helpers/createClass")),h=n(e("@babel/runtime-corejs2/helpers/defineProperty")),m=(n(e("lodash/constant")),n(e("asap")),n(e("pdelay"))),b=e("ud"),_=(n(e("util")),n(e("kefir"))),v=(e("querystring"),
n(e("kefir-bus"))),g=n(e("kefir-stopper")),y=n(e("../../../../common/find-parent")),w=n(e("../../../lib/dom/make-mutation-observer-chunked-stream")),k=n(e("../../../lib/dom/querySelectorOrFail")),j=n(e("../../../lib/idMap")),x=n(e("../../../views/SimpleElementView")),E=n(e("../../../views/conversations/custom-message-view")),S=(n(e("../../../lib/delay-asap")),n(e("../gmail-element-getter"))),C=n(e("./gmail-message-view")),I=n(e("./gmail-toolbar-view")),T=n(e("./gmail-thread-sidebar-view")),A=n(e("./gmail-thread-view/width-manager")),D=!1,M=function(){function e(t,r,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,f.default)(this,e),(0,h.default)(this,"_element",void 0),(0,h.default)(this,"_routeViewDriver",void 0),(0,h.default)(this,"_driver",void 0),(0,h.default)(this,"_isPreviewedThread",void 0),(0,h.default)(this,"_eventStream",void 0),(0,h.default)(this,"_stopper",(0,g.default)()),(0,h.default)(this,"_threadSidebar",null),(0,h.default)(this,"_widthManager",null),(0,h.default)(this,"_toolbarView",void 0),(0,h.default)(this,"_messageViewDrivers",void 0),(0,h.default)(this,"_newMessageMutationObserver",void 0),(0,h.default)(this,"_readyStream",void 0),(0,h.default)(this,"_threadID",void 0),(0,h.default)(this,"_syncThreadID",void 0),(0,h.default)(this,"_customMessageViews",new d.default),(0,h.default)(this,"_hiddenCustomMessageViews",new d.default),(0,h.default)(this,"_hiddenCustomMessageNoticeProvider",void 0),(0,h.default)(this,"_hiddenCustomMessageNoticeElement",void 0),(0,h.default)(this,"_resolveUnmountHiddenNoticePromise",void 0),this._element=t,this._routeViewDriver=r,this._driver=n,this._isPreviewedThread=o,this._eventStream=(0,v.default)(),this._messageViewDrivers=[],this._logAddonElementInfo().catch(function(e){return i._driver.getLogger().error(e)});var a,s=(this._driver.isUsingMaterialUI()?this._driver.waitForGlobalSidebarReady():_.default.constant(null)).merge(this._driver.delayToTimeAfterReady(15e3).flatMap(function(){return _.default.constantError(new Error("15 second timeout while waiting for sidebar fired"))})).take(1).takeErrors(1).flatMapErrors(function(e){return i._driver.getLogger().error(e),_.default.constant(null)}).toProperty();a=1===n.getOpts().REQUESTED_API_VERSION&&n.isUsingSyncAPI()?_.default.combine([s,_.default.fromPromise(this.getThreadIDAsync())]):s,this._readyStream=a.map(function(){return i._setupToolbarView(),i._setupMessageViewStream(),null}).takeUntilBy(this._stopper).toProperty(),this._listenToExpandCollapseAll(),this._stopper.take(1).onValue(function(){i._resolveUnmountHiddenNoticePromise&&i._resolveUnmountHiddenNoticePromise()})}return(0,p.default)(e,[{key:"getMessageViewDriverStream",value:function(){return _.default.constant(this._messageViewDrivers).flatten().merge(this._eventStream.filter(function(e){return"internal"===e.type&&"messageCreated"===e.eventName}).map(function(e){return e.view}))}},{key:"isLoadingStub",value:function(){return!1}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getElement",value:function(){return this._element}},{key:"getRouteViewDriver",value:function(){return this._routeViewDriver}},{key:"getIsPreviewedThread",value:function(){return this._isPreviewedThread}},{key:"getToolbarView",value:function(){return this._toolbarView}},{key:"getMessageViewDrivers",value:function(){return this._messageViewDrivers}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy(),this._toolbarView&&this._toolbarView.destroy(),this._threadSidebar&&this._threadSidebar.destroy(),this._messageViewDrivers.forEach(function(e){e.destroy()}),this._messageViewDrivers.length=0,this._newMessageMutationObserver&&this._newMessageMutationObserver.disconnect();var e=!0,t=!1,r=void 0;try{for(var n,i=(0,c.default)(this._customMessageViews);!(e=(n=i.next()).done);e=!0){n.value.destroy()}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"addSidebarContentPanel",value:function(e){var t=this;if(this._driver.isUsingMaterialUI()){return this._driver.getGlobalSidebar().addThreadSidebarContentPanel(e,this)}var r=S.default.getSidebarContainerElement(),n=S.default.getAddonSidebarContainerElement();S.default.getCompanionSidebarContentContainerElement();if(!r&&!n)return void console.warn("This view does not have a sidebar");var i=this._threadSidebar;if(!i){var o;n&&(o=this._setupWidthManager()),i=this._threadSidebar=new T.default(this._driver,r,n,o),i.getStopper().onValue(function(){t._threadSidebar===i&&(t._threadSidebar=null)})}return i.addSidebarContentPanel(e)}},{key:"addNoticeBar",value:function(){var e=document.createElement("div");e.className=(0,j.default)("thread_noticeBar");var t=this._element.querySelector(".if > .nH");if(!t)throw new Error("Failed to find subject container");t.insertAdjacentElement("afterend",e);var r=new x.default(e);return this._stopper.takeUntilBy(_.default.fromEvents(r,"destroy")).onValue(function(){return r.destroy()}),r}},{key:"registerHiddenCustomMessageNoticeProvider",value:function(e){this._hiddenCustomMessageNoticeProvider=e}},{key:"addCustomMessage",value:function(e){var t=this,r=this._element.parentElement;if(!r)throw new Error("missing parent element");var n=new E.default(e,function(){t._readyStream.onValue((0,u.default)(o.default.mark(function e(){var d,f,p,h,m,b,_,v,g,y,w,k;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d=t._element.querySelector("[role=list]")){e.next=3;break}return e.abrupt("return");case 3:return f=l.default,h=!1,e.t0=[],e.t1=s.default,e.next=9,a.default.all(t._messageViewDrivers.map(function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDate();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=0;case 5:return e.t1=e.t0,e.t2="HIDDEN"===t.getViewState(),e.t3=t.getElement(),e.abrupt("return",{sortDatetime:e.t1,isHidden:e.t2,element:e.t3});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 9:if(e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=(0,s.default)((0,i.default)(t._customMessageViews).filter(function(e){return e!==n&&e.getElement().parentElement}).map(function(e){var t=e.getSortDate();return{sortDatetime:(t?t.getTime():null)||0,isHidden:e.getElement().classList.contains("inboxsdk__custom_message_view_hidden"),element:e.getElement()}})),e.t5=function(e,t){return e.sortDatetime-t.sortDatetime},m=e.t0.concat.call(e.t0,e.t3,e.t4).sort(e.t5),b=n.getSortDate()){e.next=17;break}return e.abrupt("return");case 17:_=!0,v=!1,g=void 0,e.prev=20,y=(0,c.default)(m);case 22:if(_=(w=y.next()).done){e.next=32;break}if(k=w.value,h=k.isHidden,!(b.getTime()>=f&&b.getTime()<=k.sortDatetime)){e.next=28;break}return p=k.element,e.abrupt("break",32);case 28:f=k.sortDatetime;case 29:_=!0,e.next=22;break;case 32:e.next=38;break;case 34:e.prev=34,e.t6=e.catch(20),v=!0,g=e.t6;case 38:e.prev=38,e.prev=39,_||null==y.return||y.return();case 41:if(e.prev=41,!v){e.next=44;break}throw g;case 44:return e.finish(41);case 45:return e.finish(38);case 46:p?p.insertAdjacentElement("beforebegin",n.getElement()):d.insertAdjacentElement("beforeend",n.getElement()),h&&t._setupHiddenCustomMessage(n),r.classList.add("inboxsdk__thread_view_with_custom_view");case 49:case"end":return e.stop()}},e,null,[[20,34,38,46],[39,,41,45]])})))});return this._customMessageViews.add(n),n.on("destroy",function(){t._customMessageViews.delete(n),t._customMessageViews.size>0?r.classList.add("inboxsdk__thread_view_with_custom_view"):r.classList.remove("inboxsdk__thread_view_with_custom_view")}),n}},{key:"_setupHiddenCustomMessage",value:function(e){var t=this;this._hiddenCustomMessageViews.add(e),e.getElement().classList.add("inboxsdk__custom_message_view_hidden");var r=this._element.querySelector(".adv"),n=!0;if(!r){n=!1;var o=(0,i.default)(this._element.querySelectorAll(".kQ"));if(o.length<2)return;r=o[1]}(0,w.default)(r,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(_.default.merge([this._stopper,_.default.fromEvents(e,"destroy")])).filter(function(){return r&&!r.classList.contains("kQ")}).onValue(function(){e.getElement().classList.remove("inboxsdk__custom_message_view_hidden"),t._hiddenCustomMessageNoticeElement&&t._hiddenCustomMessageNoticeElement.remove(),t._hiddenCustomMessageNoticeElement=null}),this._updateHiddenNotice(r,n),_.default.fromEvents(e,"destroy").takeUntilBy(this._stopper).take(1).onValue(function(){t._hiddenCustomMessageViews.delete(e),r&&t._updateHiddenNotice(r,n)})}},{key:"_updateHiddenNotice",value:function(e,t){var r=this,n=this._hiddenCustomMessageNoticeElement;n&&(n.remove(),this._hiddenCustomMessageNoticeElement=null,this._resolveUnmountHiddenNoticePromise&&this._resolveUnmountHiddenNoticePromise());var i=this._hiddenCustomMessageNoticeProvider;if(i){var o=this._hiddenCustomMessageNoticeElement=document.createElement("span");o.classList.add("inboxsdk__custom_message_view_app_notice_content");var s=this._hiddenCustomMessageViews.size,l=null;if(t){var u=(0,k.default)(e,".adx span");if(l=Number(u.innerHTML),isNaN(l))throw new Error("Couldn't find number of native hidden messages in dom structure")}var c=i(s,l,new a.default(function(e){r._resolveUnmountHiddenNoticePromise=e}));if(c){if(o.appendChild(c),!t){var d=document.createElement("span");d.classList.add("adx");(0,k.default)(e,".G3").appendChild(d)}var f=(0,k.default)(e,".adx");f.classList.add("inboxsdk__custom_message_view_app_notice_container"),f.appendChild(o)}}}},{key:"getSubject",value:function(){var e=this._element.querySelector(".ha h2");return e?e.textContent:""}},{key:"getInternalID",value:function(){return this._syncThreadID||this.getThreadID()}},{key:"getThreadID",value:function(){if(this._threadID)return this._threadID;var e;if(this._driver.isUsingSyncAPI()){var t=this._element.querySelector("[data-thread-perm-id]");if(!t)throw new Error("threadID element not found");if(!(this._syncThreadID=t.getAttribute("data-thread-perm-id")))throw new Error("syncThreadID attribute with no value");if(!(e=t.getAttribute("data-legacy-thread-id"))){var r=new Error("Failed to get id for thread: data-legacy-thread-id attribute missing");this._driver.getLogger().error(r)}}if(!e)if(this._isPreviewedThread)e=this._driver.getPageCommunicator().getCurrentThreadID(this._element,!0);else{var n=this._routeViewDriver?this._routeViewDriver.getParams():null;if(!n||!n.threadID){var i=new Error("Failed to get id for thread");throw this._driver.getLogger().error(i),i}e=n.threadID}return this._threadID=e,e}},{key:"getThreadIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(o.default.mark(function e(){var t,r,n,i,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._driver.isUsingSyncAPI()){e.next=14;break}if(r=this._element.querySelector("[data-thread-perm-id]")){e.next=4;break}throw new Error("threadID element not found");case 4:if(n=this._syncThreadID=r.getAttribute("data-thread-perm-id")){e.next=7;break}throw new Error("syncThreadID attribute with no value");case 7:if(this._threadID=t=r.getAttribute("data-legacy-thread-id"),t){e.next=12;break}return e.next=11,this._driver.getOldGmailThreadIdFromSyncThreadId(n);case 11:this._threadID=t=e.sent;case 12:e.next=27;break;case 14:if(!this._isPreviewedThread){e.next=18;break}t=this._driver.getPageCommunicator().getCurrentThreadID(this._element,!0),e.next=26;break;case 18:if(!(i=this._routeViewDriver?this._routeViewDriver.getParams():null)||!i.threadID){e.next=23;break}t=i.threadID,e.next=26;break;case 23:throw a=new Error("Failed to get id for thread"),this._driver.getLogger().error(a),a;case 26:this._threadID=t;case 27:if(!this._threadID){e.next=31;break}return e.abrupt("return",this._threadID);case 31:throw new Error("Failed to get id for thread");case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"addLabel",value:function(){var e=this._element.querySelector(".ha .J-J5-Ji");if(!e)throw new Error("Thread view label container not found");var t=document.createElement("span");e.appendChild(t);var r=new x.default(t),n=new MutationObserver(function(r){r.some(function(e){return"childList"===e.type&&e.removedNodes&&e.removedNodes.length&&e.removedNodes.length>0})&&(e.contains(t)||e.appendChild(t))});return n.observe(e,{childList:!0}),this._stopper.takeUntilBy(_.default.fromEvents(r,"destroy")).onValue(function(){return r.destroy()}),_.default.fromEvents(r,"destroy").take(1).onValue(function(){n.disconnect()}),r}},{key:"_setupToolbarView",value:function(){var e=this._findToolbarElement();if(!e)throw new Error("No toolbar element found");var t=e.parentElement;t&&t.classList.add("inboxsdk__thread_toolbar_parent"),this._toolbarView=new I.default(e,this._driver,this._routeViewDriver,this)}},{key:"_findToolbarElement",value:function(){for(var e=document.querySelectorAll("[gh=tm]"),t=0;t<e.length;t++)if(this._isToolbarContainerRelevant(e[t]))return e[t].querySelector("[gh=mtb]");return null}},{key:"_isToolbarContainerRelevant",value:function(e){return e.parentElement.parentElement===this._element.parentElement.parentElement||("main"!==e.parentElement.getAttribute("role")&&"main"!==this._element.parentElement.getAttribute("role")||!("main"!==e.parentElement.getAttribute("role")||!e.parentElement.querySelector(".if")||e.parentElement.querySelector(".if").parentElement!==this._element))}},{key:"_setupMessageViewStream",value:function(){var e=this._element.querySelector(".h7");if(!e){var t=this;return void setTimeout(function(){t._element&&t._setupMessageViewStream()},500)}var r=e.parentElement;this._initializeExistingMessages(r),this._observeNewMessages(r)}},{key:"_initializeExistingMessages",value:function(e){var t=this,r=e.children;Array.prototype.forEach.call(r,function(e){t._createMessageView(e)})}},{key:"_observeNewMessages",value:function(e){this._newMessageMutationObserver=new MutationObserver(this._handleNewMessageMutations.bind(this)),this._newMessageMutationObserver.observe(e,{childList:!0})}},{key:"_handleNewMessageMutations",value:function(e){var t=this;e.forEach(function(e){Array.prototype.forEach.call(e.addedNodes,function(e){e.classList.contains("inboxsdk__custom_message_view")||t._createMessageView(e)})})}},{key:"_createMessageView",value:function(e){var t=new C.default(e,this,this._driver);this._eventStream.plug(t.getEventStream()),this._messageViewDrivers.push(t),this._eventStream.emit({type:"internal",eventName:"messageCreated",view:t})}},{key:"_setupWidthManager",value:function(){var e=this._widthManager;if(!e){var t=S.default.getAddonSidebarContainerElement();if(!t)throw new Error("addonSidebarElement not found");var r=S.default.getMainContentBodyContainerElement();if(!r)throw new Error("mainContentBodyContainerElement not found");var n=r.parentElement;if(!n)throw new Error("mainContentBodyContainerElement has no parent element");this._widthManager=e=new A.default(n,t)}return e}},{key:"getReadyStream",value:function(){return this._readyStream}},{key:"_logAddonElementInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(o.default.mark(function e(){var t,r,n=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){var e=S.default.getAddonSidebarContainerElement();if(!e)return null;var t={parent:e.parentElement?"none"===e.parentElement.style.display:null,self:"none"===e.style.display,children:(0,i.default)(e.children).map(function(e){return e.style?"none"===e.style.display:null})},r=e.getBoundingClientRect();return{isDisplayNone:t,size:{width:r.width,height:r.height}}},!D){e.next=3;break}return e.abrupt("return");case 3:return r={time:{}},r.time[0]=t(),e.next=7,a.default.all([30,5e3].map(function(){var e=(0,u.default)(o.default.mark(function e(i){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.default)(i);case 2:if(!n._stopper.stopped){e.next=4;break}return e.abrupt("return");case 4:r.time[i]=t();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:if(!this._stopper.stopped){e.next=9;break}return e.abrupt("return");case 9:this._driver.getLogger().eventSdkPassive("gmailSidebarElementInfo",r),D=!0;case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"_listenToExpandCollapseAll",value:function(){var e=this,t=this._element.querySelector("img.gx");if(t){var r=(0,y.default)(t,function(e){return"button"===e.getAttribute("role")});r&&_.default.merge([_.default.fromEvents(r,"click"),_.default.fromEvents(r,"keydown").filter(function(e){return 13===e.which})]).takeUntilBy(this._stopper).onValue(function(){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,c.default)(e._customMessageViews);!(t=(i=o.next()).done);t=!0){i.value.expand()}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}})}var n=this._element.querySelector("img.gq");if(n){var i=(0,y.default)(n,function(e){return"button"===e.getAttribute("role")});i&&_.default.merge([_.default.fromEvents(i,"click"),_.default.fromEvents(i,"keydown").filter(function(e){return 13===e.which})]).takeUntilBy(this._stopper).onValue(function(){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,c.default)(e._customMessageViews);!(t=(i=o.next()).done);t=!0){i.value.collapse()}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}})}}}]),e}(),R=(0,b.defn)(t,M);r.default=R},{"../../../../common/find-parent":609,"../../../lib/delay-asap":803,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/idMap":835,"../../../views/SimpleElementView":872,"../../../views/conversations/custom-message-view":879,"../gmail-element-getter":655,"./gmail-message-view":700,"./gmail-thread-sidebar-view":708,"./gmail-thread-view/width-manager":711,"./gmail-toolbar-view":712,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/number/min-safe-integer":10,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/toConsumableArray":57,"@babel/runtime-corejs2/regenerator":59,asap:77,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/constant":451,pdelay:518,querystring:549,ud:597,util:600}],711:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/toConsumableArray")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=n(e("../../../../lib/idMap")),u=function(){function e(t,r){(0,o.default)(this,e),(0,s.default)(this,"_contentContainerEl",void 0),(0,s.default)(this,"_addonSidebarContainerEl",void 0),this._contentContainerEl=t,this._addonSidebarContainerEl=r}return(0,a.default)(e,[{key:"fixWidths",value:function(){var e=this._addonSidebarContainerEl.querySelector("[role=tablist]");if(e){if(this._addonSidebarContainerEl.classList.contains((0,l.default)("app_sidebar_in_use")))return void this._contentContainerEl.classList.remove((0,l.default)("container_app_sidebar_no_icons"));!(0,i.default)(e.children).some(function(e){return"none"!==e.style.display})?this._contentContainerEl.classList.add((0,l.default)("container_app_sidebar_no_icons")):this._contentContainerEl.classList.remove((0,l.default)("container_app_sidebar_no_icons"))}}}]),e}();r.default=u},{"../../../../lib/idMap":835,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/toConsumableArray":57}],712:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/objectSpread")),o=n(e("@babel/runtime-corejs2/core-js/object/assign")),a=n(e("@babel/runtime-corejs2/core-js/array/from")),s=n(e("@babel/runtime-corejs2/core-js/json/stringify")),l=n(e("@babel/runtime-corejs2/core-js/set")),u=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=n(e("@babel/runtime-corejs2/helpers/createClass")),d=n(e("@babel/runtime-corejs2/helpers/defineProperty")),f=(n(e("lodash/uniq")),n(e("lodash/escape"))),p=n(e("asap")),h=e("ud"),m=n(e("kefir")),b=n(e("kefir-stopper")),_=n(e("../../../lib/stream-wait-for")),v=n(e("../../../lib/dom/make-mutation-observer-stream")),g=n(e("../../../lib/dom/insert-element-in-order")),y=n(e("../../../../common/isElementVisible")),w=n(e("../gmail-element-getter")),k=n(e("../widgets/buttons/button-view")),j=n(e("../widgets/gmail-dropdown-view")),x=n(e("../../../widgets/buttons/basic-button-view-controller")),E=n(e("../../../widgets/buttons/dropdown-button-view-controller")),S=n(e("./gmail-thread-view")),C=n(e("./gmail-row-list-view")),I=e("../../../constants/toolbars"),T=n(e("../../../lib/logger")),A=function(){function e(t,r,n,i){var o=this;if((0,u.default)(this,e),(0,d.default)(this,"_element",void 0),(0,d.default)(this,"_driver",void 0),(0,d.default)(this,"_ready",void 0),(0,d.default)(this,"_stopper",void 0),(0,d.default)(this,"_routeViewDriver",void 0),(0,d.default)(this,"_buttonViewControllers",new l.default),(0,d.default)(this,"_moreMenuItems",[]),(0,d.default)(this,"_toolbarState",void 0),(0,d.default)(this,"_threadViewDriver",void 0),(0,d.default)(this,"_rowListViewDriver",void 0),(0,d.default)(this,"_isUpdateButtonClassesScheduled",!1),(0,d.default)(this,"_moreMenuItemsContainer",null),this._element=t,this._driver=r,this._stopper=(0,b.default)(),this._routeViewDriver=n,this._getMoveSectionElement()?this._ready=m.default.constant(this):this._ready=(0,_.default)(function(){return!!o._getMoveSectionElement()}).takeUntilBy(this._stopper).map(function(){return o}).toProperty(),this._ready.onValue(function(){o._startMonitoringMoreMenu(),o._determineToolbarState(),o._determineToolbarIconMode(),o._setupToolbarStateMonitoring()}),i instanceof S.default)this._threadViewDriver=i,this._ready.onValue(function(){o._element.setAttribute("data-thread-toolbar","true")});else{if(!(i instanceof C.default))throw new Error("Invalid parent");this._rowListViewDriver=i,this._ready.onValue(function(){o._element.setAttribute("data-rowlist-toolbar","true")})}}return(0,c.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"getElement",value:function(){return this._element}},{key:"getRouteViewDriver",value:function(){return this._routeViewDriver}},{key:"getThreadViewDriver",value:function(){return this._threadViewDriver}},{key:"isForRowList",value:function(){return null!=this._rowListViewDriver}},{key:"isForThread",value:function(){return null!=this._threadViewDriver}},{key:"getThreadRowViewDrivers",value:function(){return this._rowListViewDriver?this._rowListViewDriver.getThreadRowViewDrivers():(console.error("missing this._rowListViewDriver"),new l.default)}},{key:"addButton",value:function(e,t){var r=this,n=(0,b.default)();this._stopper.takeUntilBy(n).onValue(function(){n.destroy()});var i=(this._driver.getAppId(),I.SECTION_NAMES);return this._ready.takeUntilBy(n).onValue(function(){if(e.section===i.OTHER){var l={buttonDescriptor:e};r._moreMenuItems.push(l),r._addToOpenMoreMenu(e),n.onValue(function(){r._moreMenuItems=r._moreMenuItems.filter(function(e){return e!==l}),r._addMoreItems()})}else{var u=r._getSectionElement(e.section,i);if(u){var c=r._createButtonViewController(e);r._buttonViewControllers.add(c),n.onValue(function(){r._buttonViewControllers.delete(c),c.destroy()}),c.getView().getElement().__addButton_ownedByExtension=!0,c.getView().getElement().setAttribute("data-add-button-debug",(0,s.default)({id:t,title:e.title,hasThreadViewDriver:r.isForThread(),hasRowListViewDriver:r.isForRowList()})),c.getView().getElement().setAttribute("data-order-hint",String(e.orderHint||0)),(0,g.default)(u,c.getView().getElement()),m.default.merge([m.default.constant(-1),m.default.later(1e3,1e3)]).map(function(t){return{delay:t,duplicates:(0,a.default)(u.children).filter(function(e){return c.getView().getElement().getAttribute("data-rowlist-toolbar")===e.getAttribute("data-rowlist-toolbar")&&c.getView().getElement().getAttribute("data-toolbar-expanded")===e.getAttribute("data-toolbar-expanded")}).filter(function(e){return e.hasAttribute("data-add-button-debug")}).map(function(e){return(0,o.default)({ownedByExtension:!!e.__addButton_ownedByExtension},JSON.parse(e.getAttribute("data-add-button-debug")||"null"))}).filter(function(t){return t.title===e.title})}}).filter(function(e){return e.duplicates.length>1}).take(1).takeUntilBy(r._stopper).onValue(function(e){var t=e.delay,n=e.duplicates;T.default.error(new Error("Duplicate toolbar button"),{delay:t,duplicates:n,dataThreadToolbar:r._element.getAttribute("data-thread-toolbar"),dataRowlistToolbar:r._element.getAttribute("data-rowlist-toolbar")})}),r._updateButtonClasses(r._element),c.getView().setEnabled("EXPANDED"===r._toolbarState)}}}),{getStopper:function(){return n},destroy:function(){n.destroy()}}}},{key:"waitForReady",value:function(){return this._ready}},{key:"_createButtonViewController",value:function(e){var t=this._getButtonView(e);e.buttonView=t;return e.hasDropdown?new E.default({buttonView:t,dropdownViewDriverClass:j.default,dropdownShowFunction:e.onClick,dropdownPositionOptions:{position:"bottom",hAlign:"left"}}):new x.default(e)}},{key:"_getButtonView",value:function(e){var t=new k.default((0,i.default)({},e,this._driver.isUsingMaterialUI()?{noArrow:!0}:{}));return this._rowListViewDriver?(t.getElement().setAttribute("data-rowlist-toolbar","true"),t.getElement().setAttribute("data-toolbar-expanded","true")):this._threadViewDriver&&t.getElement().setAttribute("data-thread-toolbar","true"),t.getElement().setAttribute("role","button"),t}},{key:"_startMonitoringMoreMenu",value:function(){var e=this,t=this._element.querySelector(".nf[role=button]");t&&(0,v.default)(t,{attributes:!0,attributeFilter:["aria-expanded"]}).toProperty(function(){return null}).takeUntilBy(this._stopper).map(function(){return t.getAttribute("aria-expanded")}).onValue(function(t){"true"!==t?e._clearMoreItems():e._addMoreItems()})}},{key:"_determineToolbarState",value:function(){var e=this._getMoveSectionElement();if(!e)throw new Error("No move section element");"none"===e.style.display?this._toolbarState="COLLAPSED":this._toolbarState="EXPANDED"}},{key:"_determineToolbarIconMode",value:function(){var e=this._getMoveSectionElement();if(!e)throw new Error("No move section element");var t=(0,a.default)(e.querySelectorAll("[role=button]:not(.inboxsdk__button)")).some(function(e){return e.hasAttribute("title")||e.hasAttribute("data-tooltip")});this._element.setAttribute("data-toolbar-icononly",t?"true":"false")}},{key:"_setupToolbarStateMonitoring",value:function(){var e=this,t=this._getMoveSectionElement();if(!t)throw new Error("No move section element");(0,v.default)(t,{attributes:!0,attributeFilter:["style"]}).takeUntilBy(this._stopper).onValue(function(t){t.target instanceof HTMLElement&&"none"===t.target.style.display?e._toolbarState="COLLAPSED":e._toolbarState="EXPANDED",e._updateButtonClasses(e._element),e._updateButtonEnabledState()})}},{key:"_getSectionElement",value:function(e,t){switch(e){case t.INBOX_STATE:return this._getArchiveSectionElement();case t.METADATA_STATE:return this._getMoveSectionElement();default:return null}}},{key:"_getArchiveSectionElement",value:function(){return this._getSectionElementForButtonSelector(".ar9, .aFh, .aFj, .lR, .nN, .nX, .aFk")}},{key:"_getCheckboxSectionElement",value:function(){return this._getSectionElementForButtonSelector(".T-Jo-auh")}},{key:"_getMoveSectionElement",value:function(){return this._getSectionElementForButtonSelector(".asb, .ase, .ns, .mw")}},{key:"_getSectionElementForButtonSelector",value:function(e){for(var t=this._element.querySelectorAll(".G-Ni"),r=0;r<t.length;r++)if(t[r].querySelector(e))return t[r];return null}},{key:"_updateButtonClasses",value:function(e){var t=this;this._isUpdateButtonClassesScheduled||(this._isUpdateButtonClassesScheduled=!0,(0,p.default)(function(){"EXPANDED"===t._toolbarState?e.setAttribute("data-toolbar-expanded","true"):"COLLAPSED"===t._toolbarState&&e.setAttribute("data-toolbar-expanded","false");var r=e.querySelectorAll(".G-Ni > [role=button]");Array.prototype.forEach.call(r,function(e){for(var t=e,r=0;r<1e5;r++){if(!t.previousElementSibling){e.classList.remove("T-I-Js-Gs");break}if(!t.previousElementSibling.classList.contains("inboxsdk__button")){e.classList.add("T-I-Js-Gs");break}if((0,y.default)(t.previousElementSibling)){e.classList.add("T-I-Js-Gs");break}t=t.previousElementSibling}t=e;for(var n=0;n<1e5;n++){if(!t.nextElementSibling){e.classList.remove("T-I-Js-IF");break}if(!t.nextElementSibling.classList.contains("inboxsdk__button")){e.classList.add("T-I-Js-IF");break}if((0,y.default)(t.nextElementSibling)){e.classList.add("T-I-Js-IF");break}t=t.nextElementSibling}}),t._isUpdateButtonClassesScheduled=!1}))}},{key:"_updateButtonEnabledState",value:function(){var e="EXPANDED"===this._toolbarState;this._buttonViewControllers.forEach(function(t){t.getView().setEnabled(e)})}},{key:"_addMoreItems",value:function(){var e=this;this._clearMoreItems(),"EXPANDED"===this._toolbarState&&this._moreMenuItems.forEach(function(t){e._addToOpenMoreMenu(t.buttonDescriptor)})}},{key:"_clearMoreItems",value:function(){this._moreMenuItemsContainer&&(this._moreMenuItemsContainer.remove(),this._moreMenuItemsContainer=null)}},{key:"_addToOpenMoreMenu",value:function(e){var t=w.default.getActiveMoreMenu();if(t){var r=this._getMoreMenuItemsContainer(t),n=this._getMoreMenuItemElement(e);(0,g.default)(r,n)}}},{key:"_getMoreMenuItemsContainer",value:function(e){if(this._moreMenuItemsContainer)return this._moreMenuItemsContainer;var t=this._moreMenuItemsContainer=document.createElement("div");return t.setAttribute("data-group-order-hint",this._driver.getAppId()),t.innerHTML='<div class="J-Kh"></div>',(0,g.default)(e,t),t}},{key:"_getMoreMenuItemElement",value:function(e){var t=document.createElement("div");return t.setAttribute("class","J-N inboxsdk__menuItem"),t.setAttribute("role","menuitem"),t.setAttribute("data-order-hint",String(e.orderHint||0)),t.innerHTML=['<div class="J-N-Jz" style="-webkit-user-select: none;">',e.iconUrl?'<img class="J-N-JX" src="'+(0,f.default)(e.iconUrl)+'" />':"",e.iconClass?'<span class="inboxsdk__icon J-N-JX '+(0,f.default)(e.iconClass)+'"></span>':"",(0,f.default)(e.title),"</div>"].join(""),t.addEventListener("mouseenter",function(e){return t.classList.add("J-N-JT")}),t.addEventListener("mouseleave",function(e){return t.classList.remove("J-N-JT")}),t.addEventListener("click",function(t){e.onClick&&e.onClick({})}),t}},{key:"destroy",value:function(){var e=this._element;this._threadViewDriver?this._element.removeAttribute("data-thread-toolbar"):this._rowListViewDriver&&this._element.removeAttribute("data-rowlist-toolbar"),this._clearMoreItems(),this._stopper.destroy(),this._updateButtonClasses(e)}}]),e}(),D=(0,h.defn)(t,A);r.default=D},{"../../../../common/isElementVisible":615,"../../../constants/toolbars":622,"../../../lib/dom/insert-element-in-order":809,"../../../lib/dom/make-mutation-observer-stream":816,
"../../../lib/logger":843,"../../../lib/stream-wait-for":853,"../../../widgets/buttons/basic-button-view-controller":891,"../../../widgets/buttons/dropdown-button-view-controller":892,"../gmail-element-getter":655,"../widgets/buttons/button-view":716,"../widgets/gmail-dropdown-view":722,"./gmail-row-list-view":706,"./gmail-thread-view":710,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,asap:77,kefir:301,"kefir-stopper":300,"lodash/escape":456,"lodash/uniq":501,ud:597}],713:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/defineProperty")),l=i(e("kefir")),u=i(e("kefir-bus")),c=i(e("../../../lib/dom/get-insert-before-element")),d=i(e("../../../lib/dom/make-mutation-observer-chunked-stream")),f=(i(e("../../../lib/dom/make-mutation-observer-stream")),i(e("../../../lib/dom/querySelectorOrFail"))),p=i(e("../../../../common/find-parent")),h=(i(e("../gmail-element-getter")),n(e("./gmail-nav-item-view"))),m=function(){function e(t,r,n){var i=this;(0,o.default)(this,e),(0,s.default)(this,"_driver",void 0),(0,s.default)(this,"_element",void 0),(0,s.default)(this,"_navItemName",void 0),(0,s.default)(this,"_activeMarkerElement",null),(0,s.default)(this,"_eventStream",void 0),(0,s.default)(this,"_elementBus",void 0),(0,s.default)(this,"_elementStream",void 0),(0,s.default)(this,"_isActive",!1),(0,s.default)(this,"_itemContainerElement",null),this._driver=t,this._element=r,this._eventStream=(0,u.default)(),this._elementBus=(0,u.default)(),this._elementStream=this._elementBus.toProperty(function(){return r}),this._navItemName=n;var a=r.parentElement;a&&(0,d.default)(a,{childList:!0}).map(function(){return a.querySelector('.aim a[href*="#'.concat(i._navItemName,'"]'))}).filter(Boolean).map(function(e){return(0,p.default)(e,function(e){return e.classList.contains("aim")})}).filter(Boolean).filter(function(e){return e!==i._element}).onValue(function(e){if(e){var t=i._itemContainerElement;t&&(t.remove(),i._itemContainerElement=null),i._elementBus.emit(e)}}),this._elementStream.onValue(function(e){i._element=e,i._monitorElementForActiveChanges(),i.setActive(i._isActive)})}return(0,a.default)(e,[{key:"destroy",value:function(){this._element.classList.remove("inboxsdk__navItem_claimed"),this._eventStream.end(),this._elementBus.end(),this._activeMarkerElement&&this._activeMarkerElement.remove(),this._itemContainerElement&&this._itemContainerElement.remove()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"addNavItem",value:function(e,t){var r=this,n=new h.default(this._driver,e,1);return l.default.merge([n.getEventStream().filter(function(e){return"orderChanged"===e.eventName}),this._elementStream]).onValue(function(){return r._addNavItemElement(n)}),n.setNavItemDescriptor(t),n}},{key:"setActive",value:function(e){this._isActive=e;var t=(0,f.default)(this._element,".TO");e?(this._element.classList.add("ain"),t.classList.add("nZ"),t.classList.add("aiq")):(this._element.classList.remove("ain"),t.classList.remove("nZ"),t.classList.remove("aiq")),this._setHeights()}},{key:"toggleCollapse",value:function(){this._toggleCollapse()}},{key:"setCollapsed",value:function(e){localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]=e,this._element.querySelector(".inboxsdk__expando")&&(e?this._collapse():this._expand())}},{key:"remove",value:function(){}},{key:"_monitorElementForActiveChanges",value:function(){var e=this;this._element.classList.add("inboxsdk__navItem_claimed");var t=this._element,r=(0,d.default)(t,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null})).toProperty(function(){return[]}).map(function(){return t});r.filter(function(e){return e.classList.contains("ain")}).onValue(function(){return e._createActiveMarkerElement()}),r.filter(function(e){return!e.classList.contains("ain")}).onValue(function(){return e._removeActiveMarkerElement()})}},{key:"_addNavItemElement",value:function(e){var t=this._getItemContainerElement(),r=(0,c.default)(e.getElement(),t.children,["data-group-order-hint","data-order-hint","data-insertion-order-hint"]);t.insertBefore(e.getElement(),r);var n=e.getElement();this._driver.isUsingMaterialUI()?(0,f.default)(n,".TN").style.marginLeft=(0,h.getLeftIndentationPaddingValue)(this._driver)+"px":(0,f.default)(n,".TO").style.paddingLeft=(0,h.getLeftIndentationPaddingValue)(this._driver)+"px",this._setHeights()}},{key:"_getItemContainerElement",value:function(){var e=this._itemContainerElement;return e||(e=this._itemContainerElement=this._element.querySelector(".inboxsdk__navItem_container"))||(e=this._createItemContainerElement(),this._createExpando()),e}},{key:"_createItemContainerElement",value:function(){var e=this._itemContainerElement=document.createElement("div");return e.classList.add("inboxsdk__navItem_container"),this._element.appendChild(e),e}},{key:"_createExpando",value:function(){var e=this,t=this._element.querySelector("a"),r=document.createElement("div");if(r.setAttribute("class","TH aih J-J5-Ji inboxsdk__expando"),r.setAttribute("role","link"),r.title="Expand ".concat(t?t.title||t.textContent:""),r.addEventListener("click",function(t){e._toggleCollapse(),t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},!0),this._driver.isUsingMaterialUI()){var n=this._element.querySelector(".TN");n&&n.insertAdjacentElement("afterbegin",r)}else{var i=this._element.querySelector(".nU");i&&i.insertAdjacentElement("beforebegin",r)}"collapsed"===localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]?this._collapse():this._expand()}},{key:"_toggleCollapse",value:function(){if(!this._element.querySelector(".inboxsdk__expando"))return void("collapsed"===localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]?localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]="expanded":localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]="collapsed");"collapsed"===localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]?this._expand():this._collapse()}},{key:"_collapse",value:function(){var e=(0,f.default)(this._element,".inboxsdk__expando");e.classList.remove("aih"),e.classList.add("aii"),this._itemContainerElement&&(this._itemContainerElement.style.display="none"),localStorage.setItem("inboxsdk__nativeNavItem__state_"+this._navItemName,"collapsed"),this._eventStream.emit({eventName:"collapsed"}),this._setHeights()}},{key:"_expand",value:function(){var e=(0,f.default)(this._element,".inboxsdk__expando");e.classList.add("aih"),e.classList.remove("aii"),this._itemContainerElement&&(this._itemContainerElement.style.display=""),localStorage.setItem("inboxsdk__nativeNavItem__state_"+this._navItemName,"expanded"),this._eventStream.emit({eventName:"expanded"}),this._setHeights()}},{key:"_isExpanded",value:function(){return!!this._element.querySelector(".inboxsdk__expando.aih")}},{key:"_setHeights",value:function(){var e=(0,f.default)(this._element,".TO");if(this._element.classList.contains("ain")&&this._itemContainerElement){this._element.style.height="";var t=this._element.clientHeight,r=e.clientHeight;this._element.style.height=r+"px",this._element.style.overflow="visible",this._element.style.marginBottom=t-r+"px"}else this._element.style.height="",this._element.style.overflow="",this._element.style.marginBottom=""}},{key:"_createActiveMarkerElement",value:function(){this._removeActiveMarkerElement();var e=this._activeMarkerElement=document.createElement("div");e.classList.add("inboxsdk__navItem_marker"),e.classList.add("ain"),e.innerHTML="&nbsp;",this._element.insertBefore(e,this._element.firstElementChild)}},{key:"_removeActiveMarkerElement",value:function(){var e=this._activeMarkerElement;e&&(e.remove(),this._activeMarkerElement=null)}}]),e}();r.default=m},{"../../../../common/find-parent":609,"../../../lib/dom/get-insert-before-element":807,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/make-mutation-observer-stream":816,"../../../lib/dom/querySelectorOrFail":821,"../gmail-element-getter":655,"./gmail-nav-item-view":703,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301,"kefir-bus":298}],714:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/inherits")),u=n(e("../../../../lib/dom/generic-button-view")),c=function(e){function t(e){(0,i.default)(this,t);var r=document.createElement("img");return r.setAttribute("class","afM"),r.setAttribute("src","//ssl.gstatic.com/ui/v1/icons/mail/images/cleardot.gif"),r.addEventListener("mouseenter",function(){r.classList.add("afN")}),r.addEventListener("mouseleave",function(){r.classList.remove("afN")}),(0,a.default)(this,(0,s.default)(t).call(this,r))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"activate",value:function(){this.getElement().classList.add("afO")}},{key:"deactivate",value:function(){this.getElement().classList.remove("afO")}}]),t}(u.default);r.default=c},{"../../../../lib/dom/generic-button-view":806,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}],715:[function(e,t,r){"use strict";e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var n={default:{INACTIVE_CLASS:"T-I-ax7",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-Kq"},flatIcon:{INACTIVE_CLASS:"J-Z-I",HOVER_CLASS:"J-Z-I-JW",ACTIVE_CLASS:"J-Z-I-KO"},pureIcon:{INACTIVE_CLASS:"inboxsdk__button_pureIcon_inactive",HOVER_CLASS:"inboxsdk__button_pureIcon_hover",ACTIVE_CLASS:"inboxsdk__button_pureIcon_active"},blue:{INACTIVE_CLASS:"T-I-atl",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-JO"},red:{INACTIVE_CLASS:"T-I-KE",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-JO"},green:{INACTIVE_CLASS:"inboxsdk__button_green_inactive",HOVER_CLASS:"inboxsdk__button_green_hover",ACTIVE_CLASS:"inboxsdk__button_green_active"}},i=n;r.default=i},{"@babel/runtime-corejs2/core-js/object/define-property":14}],716:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/defineProperty")),l=i(e("lodash/includes")),u=n(e("kefir")),c=i(e("kefir-bus")),d=i(e("../../../../lib/logger")),f=e("../../../../lib/dom/simulate-mouse-event"),p=i(e("../../../../lib/dom/keyboard-shortcut-stream")),h=i(e("./button-color-classes")),m=function(){function e(t){(0,o.default)(this,e),(0,s.default)(this,"_element",document.createElement("div")),(0,s.default)(this,"_innerElement",document.createElement("div")),(0,s.default)(this,"_textElement",void 0),(0,s.default)(this,"_iconElement",void 0),(0,s.default)(this,"_iconImgElement",void 0),(0,s.default)(this,"_iconClass",void 0),(0,s.default)(this,"_iconUrl",void 0),(0,s.default)(this,"_title",void 0),(0,s.default)(this,"_tooltip",void 0),(0,s.default)(this,"_hasDropdown",void 0),(0,s.default)(this,"_buttonColor",void 0),(0,s.default)(this,"_isEnabled",void 0),(0,s.default)(this,"_keyboardShortcutHandle",void 0),(0,s.default)(this,"_eventStream",void 0),this._hasDropdown=!1,this._isEnabled=!1!==t.enabled,this._iconClass=t.iconClass,this._iconUrl=t.iconUrl,this._title=t.text||t.title,this._tooltip=t.tooltip||t.title,this._hasDropdown=!!t.hasDropdown,this._buttonColor=t.buttonColor||"default",this._keyboardShortcutHandle=t.keyboardShortcutHandle,this._createElement(t),this._eventStream=(0,c.default)(),this._setupEventStream(),this._setupAestheticEvents(),!1!==t.enabled&&this._setupKeyboardShortcutEvent()}return(0,a.default)(e,[{key:"destroy",value:function(){this._element.remove(),this._eventStream.end()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"activate",value:function(){this.addClass(h.default[this._buttonColor].ACTIVE_CLASS),this.addClass(h.default[this._buttonColor].HOVER_CLASS)}},{key:"deactivate",value:function(){this.removeClass(h.default[this._buttonColor].ACTIVE_CLASS),this.removeClass(h.default[this._buttonColor].HOVER_CLASS)}},{key:"addClass",value:function(e){this._element.classList.add(e)}},{key:"removeClass",value:function(e){this._element.classList.remove(e)}},{key:"simulateHover",value:function(){(0,f.simulateHover)(this._element)}},{key:"setEnabled",value:function(e){this._setEnabled(e)}},{key:"isEnabled",value:function(){return this._isEnabled}},{key:"update",value:function(e){if(!e)return void(this._element.style.display="none");"none"===this._element.style.display&&(this._element.style.display=""),e.buttonColor!=this._buttonColor&&this._buttonColor&&this._updateButtonColor(e.buttonColor),e.title!=this._title&&this._updateTitle(e.title),e.tooltip!=this._tooltip&&this._updateTooltip(e.tooltip),e.iconUrl!=this._iconUrl&&this._updateIconUrl(e.iconUrl),e.iconClass!=this._iconClass&&this._updateIconClass(e.iconClass),!1!==e.enabled&&!0!==e.enabled||this._setEnabled(e.enabled)}},{key:"_createElement",value:function(e){this._setupMainElement(e),this._setupInnerElement(e),this._createTextElement(),this._createIconElement()}},{key:"_setupMainElement",value:function(e){this._element.setAttribute("class","T-I J-J5-Ji ar7 L3 inboxsdk__button "+h.default[this._buttonColor].INACTIVE_CLASS),e.tooltip&&this._element.setAttribute("aria-label",e.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),e.hasButtonToRight&&this._element.classList.add("T-I-Js-IF"),e.hasButtonToLeft&&this._element.classList.add("T-I-Js-Gs"),(e.tooltip||e.title)&&this._element.setAttribute("data-tooltip",String(e.tooltip||e.title)),!1===e.enabled&&this._element.classList.add("inboxsdk__button_disabled")}},{key:"_setupInnerElement",value:function(e){this._innerElement.classList.add("asa"),this._hasDropdown&&!e.noArrow&&(this._innerElement.innerHTML='<div class="G-asx T-I-J3 - J-J5-Ji">&nbsp;</div>'),this._element.appendChild(this._innerElement)}},{key:"_createTextElement",value:function(){if(this._title)if(this._textElement=document.createElement("span"),this._textElement.setAttribute("class","inboxsdk__button_text"),this._textElement.textContent=this._title,this._iconElement){var e=this._iconElement.parentElement;if(!e)throw new Error("Could not find parent");e.insertBefore(this._textElement,this._iconElement.nextSibling)}else this._innerElement.insertBefore(this._textElement,this._innerElement.firstElementChild)}},{key:"_createIconElement",value:function(){if(this._iconClass||this._iconUrl){var e=this._iconElement=document.createElement("div");e.classList.add("inboxsdk__button_icon"),this._iconClass&&(e.innerHTML="&nbsp;",e.setAttribute("class","inboxsdk__button_icon "+this._iconClass)),this._iconUrl&&this._createIconImgElement(),this._innerElement.insertBefore(e,this._innerElement.firstElementChild)}}},{key:"_createIconImgElement",value:function(){this._iconElement||this._createIconElement();var e=this._iconElement;if(!e)throw new Error("Should not happen");""!==e.innerHTML&&(e.innerHTML="");var t=this._iconImgElement=document.createElement("img");t.classList.add("inboxsdk__button_iconImg"),this._iconUrl?t.src=this._iconUrl:d.default.error(new Error("_createIconImgElement should not be called with null _iconUrl")),e.appendChild(t)}},{key:"_updateButtonColor",value:function(e){this._element.classList.remove(h.default[this._buttonColor].INACTIVE_CLASS),this._buttonColor=e,this._element.classList.add(h.default[this._buttonColor].INACTIVE_CLASS)}},{key:"_updateTitle",value:function(e){!this._title&&e?(this._title=e,this._createTextElement()):this._title&&!e&&this._textElement?(this._textElement.remove(),this._textElement=void 0,this._title=e):this._textElement&&(this._textElement.textContent=e,this._title=e)}},{key:"_updateTooltip",value:function(e){this._tooltip=e,e?this._element.setAttribute("data-tooltip",e):this._element.removeAttribute("data-tooltip")}},{key:"_updateIconUrl",value:function(e){this._iconUrl=e,this._iconImgElement&&!e?(this._iconImgElement.remove(),this._iconImgElement=void 0):!this._iconImgElement&&e&&this._createIconImgElement(),this._iconImgElement&&e&&(this._iconImgElement.src=e)}},{key:"_updateIconClass",value:function(e){!this._iconElement||e||this._iconUrl?!this._iconElement&&e&&this._createIconElement():(this._iconElement.remove(),this._iconElement=void 0),this._iconClass=e,this._iconElement&&this._iconElement.setAttribute("class","inboxsdk__button_icon "+(e||""))}},{key:"_setEnabled",value:function(e){this._isEnabled!==e&&(this._isEnabled=e,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}),this._isEnabled&&this._setupKeyboardShortcutEvent())}},{key:"_setupEventStream",value:function(){var e=this,t=u.fromEvents(this._element,"click");t.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(t.filter(function(){return e.isEnabled()}).map(function(e){return{eventName:"click",domEvent:e}}));var r=function(e){return(0,l.default)([32,13],e.which)},n=u.fromEvents(this._element,"keydown").filter(function(){return e.isEnabled()}),i=n.filter(r);this._eventStream.plug(i.map(function(e){return{eventName:"click",domEvent:e}})),i.onValue(function(e){e.stopPropagation(),e.preventDefault()})}},{key:"_setupKeyboardShortcutEvent",value:function(){var e=this._keyboardShortcutHandle;e&&this._eventStream.plug((0,p.default)(e.chord).takeUntilBy(this._eventStream.filter(function(e){return"enabledChanged"===e.eventName&&!1===e.isEnabled})).map(function(e){return{eventName:"click",domEvent:e}}))}},{key:"_setupAestheticEvents",value:function(){var e=this;u.fromEvents(this._element,"mouseenter").filter(function(){return e.isEnabled()}).onValue(function(){e._element.classList.add(h.default[e._buttonColor].HOVER_CLASS),e._element.classList.add("inboxsdk__button_hover")}),u.fromEvents(this._element,"mouseleave").onValue(function(){e._element.classList.remove(h.default[e._buttonColor].HOVER_CLASS),e._element.classList.remove("inboxsdk__button_hover")}),u.fromEvents(this._element,"focus").onValue(function(){e._element.classList.add("T-I-JO")}),u.fromEvents(this._element,"blur").onValue(function(){e._element.classList.remove("T-I-JO")})}}]),e}();r.default=m},{"../../../../lib/dom/keyboard-shortcut-stream":811,"../../../../lib/dom/simulate-mouse-event":827,"../../../../lib/logger":843,"./button-color-classes":715,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301,"kefir-bus":298,"lodash/includes":466}],717:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/defineProperty")),l=n(e("kefir")),u=i(e("kefir-bus")),c=i(e("kefir-stopper")),d=function(){function e(){(0,o.default)(this,e),(0,s.default)(this,"_element",document.createElement("div")),(0,s.default)(this,"_eventStream",(0,u.default)()),(0,s.default)(this,"_stopper",(0,c.default)()),this._setupElement(),this._setupEventStream()}return(0,a.default)(e,[{key:"update",value:function(){}},{key:"setEnabled",value:function(){throw new Error("not implemented")}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy(),this._element.remove()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"activate",value:function(){var e=this._element.firstElementChild;e&&e.classList.add("aj1")}},{key:"deactivate",value:function(){var e=this._element.firstElementChild;e&&e.classList.remove("aj1")}},{key:"_setupElement",value:function(){this._element.setAttribute("class","nL aig"),this._element.setAttribute("style","left: 7px"),this._element.innerHTML=['<div class="pM aRw" style="display: inline-flex; margin-left: 16px;" role="button">','<div class="p6">','<div class="p8">▼</div>',"</div>","</div>"].join("")}},{key:"_setupEventStream",value:function(){var e=l.fromEvents(this._element,"click");e.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(e.map(function(e){return{eventName:"click",domEvent:e}}))}}]),e}();r.default=d},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301,"kefir-bus":298,"kefir-stopper":300}],718:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/inherits")),u=n(e("../../../../lib/dom/generic-button-view")),c=function(e){function t(){(0,i.default)(this,t);var e=document.createElement("div");return e.setAttribute("class","aAE qi J-J5-Ji J-JN-M-I"),e.innerHTML='<div class="J-J5-Ji J-JN-M-I-JG">&nbsp;</div>',e.addEventListener("mouseenter",function(){e.classList.add("J-JN-M-I-JW")}),e.addEventListener("mouseleave",function(){e.classList.remove("J-JN-M-I-JW")}),(0,a.default)(this,(0,s.default)(t).call(this,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"activate",value:function(){this.getElement().classList.add("J-JN-M-I-JO"),this.getElement().classList.add("J-JN-M-I-Kq")}},{key:"deactivate",value:function(){this.getElement().classList.remove("J-JN-M-I-JO"),this.getElement().classList.remove("J-JN-M-I-Kq")}}]),t}(u.default);r.default=c},{"../../../../lib/dom/generic-button-view":806,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}],719:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=n(e("kefir")),l=n(e("kefir-stopper")),u=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_element",void 0),(0,a.default)(this,"_eventStream",void 0),(0,a.default)(this,"_stopper",(0,l.default)()),this._setupElement(t.buttonBackgroundColor,t.buttonForegroundColor),this._setupEventStream()}return(0,o.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._element.remove()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"activate",value:function(){var e=this._element.firstElementChild;e&&e.classList.add("aj1")}},{key:"deactivate",value:function(){var e=this._element.firstElementChild;e&&e.classList.remove("aj1")}},{key:"_setupElement",value:function(e,t){this._element=document.createElement("div"),this._element.setAttribute("class","nL aig");var r=!e&&!t;e||(e="rgb(194, 194, 194)"),t||(t="rgb(255, 255, 255)"),this._element.innerHTML=['<div class="pM '+(r?"aj0":"")+'" style="color: '+t+"; background-color: "+e+"; border-color: "+e+'" role="button">','<div class="p6" style="background-color: '+e+'">','<div class="p8">▼</div>',"</div>","</div>"].join("")}},{key:"_setupEventStream",value:function(){var e=s.default.fromEvents(this._element,"click");e.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream=e.map(function(e){return{eventName:"click",domEvent:e}}).takeUntilBy(this._stopper)}}]),e}();r.default=u},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300}],720:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/defineProperty")),l=i(e("lodash/includes")),u=n(e("kefir")),c=i(e("kefir-bus")),d=function(){function e(t){(0,o.default)(this,e),(0,s.default)(this,"_element",document.createElement("button")),(0,s.default)(this,"_title",void 0),(0,s.default)(this,"_tooltip",void 0),(0,s.default)(this,"_buttonColor",void 0),(0,s.default)(this,"_eventStream",(0,c.default)()),(0,s.default)(this,"_isEnabled",void 0),this._isEnabled=!1!==t.enabled,this._title=t.text||t.title,this._tooltip=t.tooltip||t.title,this._buttonColor=t.buttonColor||"default",this._createElement(t),this._eventStream=(0,c.default)(),this._setupEventStream()}return(0,a.default)(e,[{key:"destroy",value:function(){this._element.remove(),this._eventStream.end()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"setEnabled",value:function(e){this._setEnabled(e)}},{key:"update",value:function(){throw new Error("not implemented")}},{key:"isEnabled",value:function(){return this._isEnabled}},{key:"_createElement",value:function(e){e.isPrimary&&this._element.classList.add("J-at1-auR"),this._element.innerText=e.text||e.title||"",e.tooltip&&this._element.setAttribute("aria-label",e.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),(e.tooltip||e.title)&&this._element.setAttribute("data-tooltip",String(e.tooltip||e.title))}},{key:"_setEnabled",value:function(e){this._isEnabled!==e&&(this._isEnabled=e,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}))}},{key:"_setupEventStream",value:function(){var e=this,t=u.fromEvents(this._element,"click");t.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(t.filter(function(){return e.isEnabled()}).map(function(e){return{eventName:"click",domEvent:e}}));var r=function(e){return(0,l.default)([32,13],e.which)},n=u.fromEvents(this._element,"keydown").filter(function(){return e.isEnabled()}),i=n.filter(r);this._eventStream.plug(i.map(function(e){return{eventName:"click",domEvent:e}})),i.onValue(function(e){e.stopPropagation(),e.preventDefault()})}}]),e}();r.default=d},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301,"kefir-bus":298,"lodash/includes":466}],721:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=e("ud"),l=n(e("lodash/isEqual")),u=n(e("../../../lib/dom/querySelectorOrFail")),c=function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"_element",void 0),(0,a.default)(this,"_actionDescriptor",void 0),this._element=document.createElement("div"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.className="inboxsdk__gmail_action ",this._element.innerHTML="\n\t\t\t<div>\n\t\t\t</div>",this._actionDescriptor=null}return(0,o.default)(e,[{key:"getElement",value:function(){return this._element}},{key:"updateDescriptor",value:function(e){if(!e)return void(this._actionDescriptor=e);(0,l.default)(this._actionDescriptor,e)||(this._updateTitle(e.title),this._element.className="inboxsdk__gmail_action "+(e.className||""),this._actionDescriptor=e)}},{key:"setOnClick",value:function(e){this._element.onclick=e}},{key:"_updateTitle",value:function(e){this._actionDescriptor&&this._actionDescriptor.title===e||((0,u.default)(this._element,"div").textContent=e)}}]),e}(),d=(0,s.defn)(t,c);r.default=d},{"../../../lib/dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/isEqual":474,ud:597}],722:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0
;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=n(e("../../../lib/dom/block-and-reemit-keyboard-events")),l=function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"_containerElement",void 0),(0,a.default)(this,"_contentElement",void 0),this._containerElement=document.createElement("div"),this._containerElement.setAttribute("class","inboxsdk__menu"),this._contentElement=document.createElement("div"),this._contentElement.setAttribute("class","inboxsdk__menuContent"),this._containerElement.appendChild(this._contentElement),(0,s.default)(this._containerElement)}return(0,o.default)(e,[{key:"destroy",value:function(){this._containerElement.remove()}},{key:"getContainerElement",value:function(){return this._containerElement}},{key:"getContentElement",value:function(){return this._contentElement}}]),e}();r.default=l},{"../../../lib/dom/block-and-reemit-keyboard-events":804,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],723:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/assign")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=n(e("lodash/isEqual")),c=n(e("../../../driver-common/update-icon")),d=n(e("../../../lib/dom/querySelectorOrFail")),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e),(0,s.default)(this,"_element",void 0),(0,s.default)(this,"_labelDescriptor",void 0),(0,s.default)(this,"_iconSettings",void 0),this._element=document.createElement("div"),this._element.className="inboxsdk__gmail_label ar as "+(t.classes||[]).join(" "),this._element.innerHTML='\n\t\t\t<div class="at">\n\t\t\t\t<div class="au">\n\t\t\t\t\t<div class="av"></div>\n\t\t\t\t</div>\n\t\t\t</div>',this._labelDescriptor={},this._iconSettings={}}return(0,a.default)(e,[{key:"getElement",value:function(){return this._element}},{key:"updateLabelDescriptor",value:function(e){this._handleNewLabelDescriptor(e)}},{key:"_handleNewLabelDescriptor",value:function(e){if(!e)return void(this._labelDescriptor={});e=(0,i.default)({foregroundColor:"rgb(102, 102, 102)",backgroundColor:"rgb(221, 221, 221)",maxWidth:"90px"},e),(0,u.default)(this._labelDescriptor,e)||((0,c.default)(this._iconSettings,(0,d.default)(this._element,".at"),!1,e.iconClass,e.iconUrl,void 0,e.iconHtml),e.iconClass||e.iconUrl||e.iconHtml?this._element.classList.add("inboxsdk__label_has_icon"):this._element.classList.remove("inboxsdk__label_has_icon"),this._updateBackgroundColor(e.backgroundColor),this._updateForegroundColor(e.foregroundColor),this._updateIconBackgroundColor(e.iconBackgroundColor),this._updateTitle(e.title),this._updateTextMaxWidth(e.maxWidth),this._labelDescriptor=e)}},{key:"_updateTextMaxWidth",value:function(e){this._labelDescriptor.maxWidth!==e&&((0,d.default)(this._element,".av").style.maxWidth=e)}},{key:"_updateBackgroundColor",value:function(e){if(this._labelDescriptor.backgroundColor!==e){var t=(0,d.default)(this._element,".at");t.style.backgroundColor=e,t.style.borderColor=e,(0,d.default)(this._element,".au").style.borderColor=e}}},{key:"_updateForegroundColor",value:function(e){this._labelDescriptor.foregroundColor!==e&&((0,d.default)(this._element,".at").style.color=e)}},{key:"_updateIconBackgroundColor",value:function(e){var t=this.getElement().querySelector(".inboxsdk__button_icon");t&&(t.style.backgroundColor=e||"")}},{key:"_updateTitle",value:function(e){this._labelDescriptor.title!==e&&((0,d.default)(this._element,".av").textContent=e,this._element.children[0].setAttribute("data-tooltip",e))}}]),e}(),p=(0,l.defn)(t,f);r.default=p},{"../../../driver-common/update-icon":795,"../../../lib/dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/isEqual":474,ud:597}],724:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/objectSpread")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=n(e("lodash/sortBy")),u=(n(e("kefir")),n(e("kefir-bus"))),c=e("ud"),d=n(e("./buttons/modal-button-view")),f=n(e("../../../widgets/buttons/basic-button-view-controller")),p=n(e("../../../lib/dom/querySelectorOrFail")),h=function(){function e(t){(0,o.default)(this,e),(0,s.default)(this,"_eventStream",void 0),(0,s.default)(this,"_modalContainerElement",void 0),this._setupModalContainerElement(t),this._processOptions(t),this._eventStream=(0,u.default)(),this._setupEventStream()}return(0,a.default)(e,[{key:"destroy",value:function(){this._modalContainerElement.remove(),this._eventStream.end()}},{key:"getModalContainerElement",value:function(){return this._modalContainerElement}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"_processOptions",value:function(e){this.setTitle(e.title),this.setContentElement(e.el),this.setButtons(e.buttons||[]),this.setChromeClass(e.chrome,e.showCloseButton,(e.buttons||[]).length>0)}},{key:"setTitle",value:function(e){var t=(0,p.default)(this._modalContainerElement,"[role=heading]");e?(t.style.display="",t.textContent=e):t.style.display="none"}},{key:"setContentElement",value:function(e){var t=(0,p.default)(this._modalContainerElement,".inboxsdk__modal_content");t.innerHTML="","string"==typeof e?t.innerHTML=e:e instanceof Element&&t.appendChild(e)}},{key:"setButtons",value:function(e){var t=(0,p.default)(this._modalContainerElement,".inboxsdk__modal_buttons");t.innerHTML="",0===e.length?(t.style.display="none",this._modalContainerElement.classList.add("inboxsdk__modal_content_no_buttons")):(t.style.display="",this._modalContainerElement.classList.remove("inboxsdk__modal_content_no_buttons")),(0,l.default)(e,function(e){return e.orderHint||0}).forEach(this._addButton.bind(this,t))}},{key:"setChromeClass",value:function(e,t,r){this._modalContainerElement.classList.remove("inboxsdk__modal_hideSides"),this._modalContainerElement.classList.remove("inboxsdk__modal_hideTop"),this._modalContainerElement.classList.remove("inboxsdk__modal_hideBottom"),!1===e&&(this._modalContainerElement.classList.add("inboxsdk__modal_hideSides"),t||this._modalContainerElement.classList.add("inboxsdk__modal_hideTop"),r||this._modalContainerElement.classList.add("inboxsdk__modal_hideBottom"))}},{key:"_setupModalContainerElement",value:function(e){var t=e.constrainTitleWidth?"inboxsdk__modal_toprow--constrain-title-width":"";this._modalContainerElement=document.createElement("div"),this._modalContainerElement.className="inboxsdk__modal_fullscreen";var r='\n    <div class="Kj-JD inboxsdk__modal_container" tabindex="0" role="alertdialog">\n      <div class="Kj-JD-K7 Kj-JD-K7-GIHV4 inboxsdk__modal_toprow '.concat(t,'">\n        <span class="Kj-JD-K7-K0" role="heading"></span>\n        <span class="Kj-JD-K7-Jq inboxsdk__modal_close" tabindex="0" role="button"></span>\n      </div>\n      <div class="Kj-JD-Jz inboxsdk__modal_content">\n      </div>\n      <div class="Kj-JD-Jl inboxsdk__modal_buttons"></div>\n    </div>\n    ');this._modalContainerElement.innerHTML=r}},{key:"_addButton",value:function(e,t){var r=(0,i.default)({},t);["blue","red","green"].includes(t.color)&&t.color;r.isPrimary="PRIMARY_ACTION"===t.type;var n=new d.default(r);r.buttonView=n;new f.default(r);"PRIMARY_ACTION"===t.type?e.insertBefore(n.getElement(),e.firstElementChild):e.appendChild(n.getElement())}},{key:"_setupEventStream",value:function(){var e=this;(0,p.default)(this._modalContainerElement,".inboxsdk__modal_close").addEventListener("click",function(t){e._eventStream.emit({eventName:"closeClick",domEvent:t})})}}]),e}(),m=(0,c.defn)(t,h);r.default=m},{"../../../lib/dom/querySelectorOrFail":821,"../../../widgets/buttons/basic-button-view-controller":891,"./buttons/modal-button-view":720,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,kefir:301,"kefir-bus":298,"lodash/sortBy":492,ud:597}],725:[function(e,t,r){"use strict";function n(e){return'\n    <div class="inboxsdk__mole_view_inner">\n      '.concat(i(e),'\n      <div class="inboxsdk__mole_view_content"></div>\n    </div>\n  ')}function i(e){return!1===e.chrome?"":'<div class="inboxsdk__mole_view_titlebar">\n    <div class="inboxsdk__mole_title_buttons">\n      <img class="Hl" src="images/cleardot.gif" alt="Minimize" aria-label="Minimize" data-tooltip-delay="800" data-tooltip="Minimize"><img class="Hk" id=":rp" src="images/cleardot.gif" alt="Minimize" aria-label="Maximize" data-tooltip-delay="800" data-tooltip="Maximize">\x3c!--<img class="Hq aUG" src="images/cleardot.gif" alt="Pop-out" aria-label="Full-screen (Shift for Pop-out)" data-tooltip-delay="800" data-tooltip="Full-screen (Shift for Pop-out)">--\x3e<img class="Ha" src="images/cleardot.gif" alt="Close" aria-label="Close" data-tooltip-delay="800" data-tooltip="Close">\n    </div>\n    <h2 class="inboxsdk__mole_default"></h2>\n    <h2 class="inboxsdk__mole_minimized"></h2>\n    </div>'}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/core-js/object/assign")),s=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=o(e("@babel/runtime-corejs2/helpers/createClass")),u=o(e("@babel/runtime-corejs2/helpers/defineProperty")),c=o(e("lodash/last")),d=e("ud"),f=o(e("kefir")),p=o(e("kefir-bus")),h=o(e("kefir-stopper")),m=o(e("../../../lib/stream-wait-for")),b=o(e("../../../lib/dom/querySelectorOrFail")),_=o(e("../../../../common/find-parent")),v=o(e("../gmail-element-getter")),g=function(){function e(t,r){var i=this;if((0,s.default)(this,e),(0,u.default)(this,"_driver",void 0),(0,u.default)(this,"_eventStream",(0,p.default)()),(0,u.default)(this,"_stopper",(0,h.default)()),(0,u.default)(this,"_element",void 0),this._driver=t,this._element=(0,a.default)(document.createElement("div"),{className:"inboxsdk__mole_view "+(r.className||""),innerHTML:n(r)}),!1===r.chrome)this._element.classList.add("inboxsdk__mole_view_chromeless");else{(0,b.default)(this._element,".inboxsdk__mole_view_titlebar").addEventListener("click",function(e){i.setMinimized(!i.getMinimized()),e.preventDefault(),e.stopPropagation()});(0,b.default)(this._element,".Hl").addEventListener("click",function(e){i.setMinimized(!0),e.preventDefault(),e.stopPropagation()});(0,b.default)(this._element,".Hk").addEventListener("click",function(e){i.setMinimized(!1),e.preventDefault(),e.stopPropagation()});(0,b.default)(this._element,".Ha").addEventListener("click",function(e){i.destroy(),e.preventDefault(),e.stopPropagation()}),r.titleEl?this._setTitleEl(r.titleEl):this.setTitle(r.title||""),r.minimizedTitleEl&&this._setMinimizedTitleEl(r.minimizedTitleEl);var o=r.titleButtons;if(o){var l=(0,b.default)(this._element,".inboxsdk__mole_title_buttons"),c=l.lastElementChild;o.forEach(function(e){var t=document.createElement("img");e.iconClass&&(t.className=e.iconClass),t.setAttribute("data-tooltip",e.title),t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.onClick.call(null)}),t.src=e.iconUrl,l.insertBefore(t,c)})}}(0,b.default)(this._element,".inboxsdk__mole_view_content").appendChild(r.el)}return(0,l.default)(e,[{key:"show",value:function(){var e=this,t=function(t){t.insertBefore(e._element,(0,c.default)(t.children));var r=(0,_.default)(t,function(e){return"DIV"===e.nodeName&&e.classList.contains("dw")});r&&r.classList.add("inboxsdk__moles_in_use")},r=v.default.getMoleParent();if(r)t(r);else{var n=(0,m.default)(function(){return v.default.getMoleParent()}).takeUntilBy(this._stopper).onValue(t);f.default.fromPromise(v.default.waitForGmailModeToSettle()).flatMap(function(){return e._driver.delayToTimeAfterReady(1e4)}).takeUntilBy(n).takeUntilBy(this._stopper).onValue(function(){e._driver.getLogger().eventSdkActive("mole parent force load"),e._driver.openNewComposeViewDriver().then(function(e){e.close()})})}}},{key:"setMinimized",value:function(e){if(e)this._element.classList.add("inboxsdk__minimized"),this._eventStream.emit({eventName:"minimize"});else{this._element.classList.remove("inboxsdk__minimized");var t=this._element.parentElement;t&&this._element.getBoundingClientRect().left<0&&t.insertBefore(this._element,(0,c.default)(t.children)),this._eventStream.emit({eventName:"restore"})}}},{key:"getMinimized",value:function(){return this._element.classList.contains("inboxsdk__minimized")}},{key:"setTitle",value:function(e){var t=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");t&&(t.textContent=e)}},{key:"_setTitleEl",value:function(e){var t=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");t&&(t.textContent="",t.appendChild(e))}},{key:"_setMinimizedTitleEl",value:function(e){var t=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_minimized");t&&(this._element.classList.add("inboxsdk__mole_use_minimize_title"),t.textContent="",t.appendChild(e))}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"destroy",value:function(){this._element.remove(),this._eventStream.end(),this._stopper.destroy()}}]),e}(),y=(0,d.defn)(t,g);r.default=y},{"../../../../common/find-parent":609,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/stream-wait-for":853,"../gmail-element-getter":655,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/last":484,ud:597}],726:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/assign")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=n(e("lodash/sortBy")),u=n(e("lodash/escape")),c=n(e("asap")),d=(n(e("kefir")),n(e("kefir-bus"))),f=n(e("kefir-stopper")),p=n(e("../../../lib/dom/querySelectorOrFail")),h=n(e("./buttons/button-view")),m=n(e("../../../widgets/buttons/basic-button-view-controller")),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e),(0,s.default)(this,"_element",void 0),(0,s.default)(this,"_eventStream",(0,d.default)()),(0,s.default)(this,"_stopper",(0,f.default)()),this._setupElement(t)}return(0,a.default)(e,[{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy(),this._element.remove()}},{key:"getElement",value:function(){return this._element}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"anchor",value:function(e,t){if(e&&this._element){var r,n=e.getBoundingClientRect(),i=this._element.getBoundingClientRect();if(t&&t.position)switch(t.position){case"top":r={type:"top",value:this._getTopPositionBoundingBox(n,i)};break;case"bottom":r={type:"bottom",value:this._getBottomPositionBoundingBox(n,i)}}r||(r=this._getAutomaticPlacementBoundingBox(n,i));var o=this._containBoundingBox(r.value,t&&t.offset);this._setPositionAtBoundingBox(o),this._setArrowPosition(r.type,o,n)}}},{key:"getContainerElement",value:function(){return this._element}},{key:"getContentElement",value:function(){return(0,p.default)(this._element,".aRM")}},{key:"close",value:function(){this.destroy()}},{key:"_setupElement",value:function(e){var t=this;if(this._element=document.createElement("div"),this._element.setAttribute("class","inboxsdk__tooltip"),e.el){this._element.innerHTML='<div class="T-P aRL">\n\t\t\t\t\t\t<div class="T-P-Jz-UR">\n\t\t\t\t\t\t\t<div class="aRM" tabindex="0">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">\n\t\t\t\t\t\t\t<div class="T-P-atD"></div>\n\t\t\t\t\t\t\t<div class="T-P-atC"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>',this._element.classList.add("inboxdk__tooltip_content"),(0,p.default)(this._element,".aRM").appendChild(e.el)}else{var r=['<div class="T-P aRL">','<div class="T-P-Jz-UR">','<div class="aRM" tabindex="0">','<div class="aVn inboxsdk__tooltip_image">',"</div>",'<div class="aRR">',(0,u.default)(e.title||""),"</div>",'<div class="aRQ">',(0,u.default)(e.subtitle||""),"</div>",'<div class="inboxsdk__tooltip_button">',"</div>","</div>","</div>",'<div class="T-P-aut-UR T-P-aut inboxsdk__tooltip_close" aria-label="Close" role="button"></div>','<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">','<div class="T-P-atD"></div>','<div class="T-P-atC"></div>',"</div>","</div>"].join("");this._element.innerHTML=r;var n=this._element.querySelector(".inboxsdk__tooltip_close");if(n&&n.addEventListener("click",function(e){t.destroy()}),e.imageUrl){var o=document.createElement("img");o.src=e.imageUrl,(0,p.default)(this._element,".inboxsdk__tooltip_image").appendChild(o),o.addEventListener("load",function(e){(0,c.default)(function(){t._eventStream.emit({eventName:"imageLoaded"})})})}if(e.button){var a=(0,i.default)({},e.button);a.buttonColor="blue";var s=a.onClick;a.onClick=function(){t.destroy(),s&&s()},a.buttonView=new h.default(a);new m.default(a);(0,p.default)(this._element,".inboxsdk__tooltip_button").appendChild(a.buttonView.getElement())}}}},{key:"_getAutomaticPlacementBoundingBox",value:function(e,t){var r=[{type:"top",value:this._getTopPositionBoundingBox(e,t)},{type:"left",value:this._getLeftPositionBoundingBox(e,t)},{type:"right",value:this._getRightPositionBoundingBox(e,t)},{type:"bottom",value:this._getBottomPositionBoundingBox(e,t)}];return this._figureOutBestBoundingBox(r)}},{key:"_getTopPositionBoundingBox",value:function(e,t){var r=e.top-t.height-9,n=e.left+e.width/2-t.width/2;return[{x:n,y:r},{x:n+t.width,y:r+t.height}]}},{key:"_getRightPositionBoundingBox",value:function(e,t){var r=e.right+9,n=e.top+e.height/2-t.height/2;return[{x:r,y:n},{x:r+t.width,y:n+t.height}]}},{key:"_getBottomPositionBoundingBox",value:function(e,t){var r=e.bottom+9,n=e.left+e.width/2-t.width/2;return[{x:n,y:r},{x:n+t.width,y:r+t.height}]}},{key:"_getLeftPositionBoundingBox",value:function(e,t){var r=e.left-9-t.width,n=e.top+e.height/2-t.height/2;return[{x:r,y:n},{x:r+t.width,y:n+t.height}]}},{key:"_figureOutBestBoundingBox",value:function(e){for(var t=0;t<e.length;t++)e[t].smallestDistance=this._getSmallestDistance(e[t]);return(0,l.default)(e,function(e){return e.smallestDistance}).reverse()[0]}},{key:"_getSmallestDistance",value:function(e){var t=[e.value[0].y,e.value[0].x,document.body.clientWidth-e.value[1].x,document.body.clientHeight-e.value[1].y];return(0,l.default)(t,function(e){return e})[0]}},{key:"_containBoundingBox",value:function(e,t){var r=e[1].y-e[0].y,n=e[1].x-e[0].x;return e[0].y<-1?(e[0].y=0,e[1].y=e[0].y+r):e[1].y>document.body.clientHeight&&(e[0].y=document.body.clientHeight-r,e[1].y=e[0].y+r),e[0].x<-1?(e[0].x=0,e[1].x=e[0].x+n):e[1].x>document.body.clientWidth&&(e[0].x=document.body.clientWidth-n-20,e[1].x=e[0].x+n),t&&(t.left&&(e[0].x+=t.left,e[1].x+=t.left),t.top&&(e[0].y+=t.top,e[1].y+=t.top)),e}},{key:"_setPositionAtBoundingBox",value:function(e){this._element.style.left=e[0].x+"px",this._element.style.top=e[0].y+"px"}},{key:"_setArrowPosition",value:function(e,t,r){var n={};switch(e){case"top":n.top=t[1].y,n.left=r.left+r.width/2;break;case"left":n.top=(t[0].y+t[1].y)/2-9,n.left=t[1].x;break;case"right":n.top=(t[0].y+t[1].y)/2-9,n.left=t[0].x-9+1;break;case"bottom":n.top=t[0].y-9+1,n.left=(t[0].x+t[1].x)/2}var i=(0,p.default)(this._element,".inboxsdk__tooltip_arrow");i.style.left=n.left+"px",i.style.top=n.top+"px"}}]),e}();r.default=b},{"../../../lib/dom/querySelectorOrFail":821,"../../../widgets/buttons/basic-button-view-controller":891,"./buttons/button-view":716,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,asap:77,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/escape":456,"lodash/sortBy":492}],727:[function(e,t,r){(function(t){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/toConsumableArray")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=(n(e("kefir")),n(e("kefir-bus"))),u=n(e("../../../lib/fake-window-resize")),c=function(){function e(r){var n=this;(0,o.default)(this,e),(0,s.default)(this,"_element",void 0),(0,s.default)(this,"_eventStream",void 0),(0,s.default)(this,"_resizeObserver",void 0),this._eventStream=(0,l.default)();var i=t.ResizeObserver;i&&(this._resizeObserver=new i(function(){n.setTopMessageBarHeight()})),r.takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null})).onValue(function(e){if(e){if(e){var t=n._element;t||(t=n._element=document.createElement("div"),t.classList.add("inboxsdk__topMessageBar"),document.body.insertBefore(t,document.body.firstChild),document.body.classList.add("inboxsdk__hasTopMessageBar"),(0,u.default)()),e.el!==t.children[0]&&(t.innerHTML="",e.el&&(t.appendChild(e.el),n._resizeObserver&&n._resizeObserver.observe(t),n.setTopMessageBarHeight()))}}else n._element&&(n._element.remove(),n._element=null)})}return(0,a.default)(e,[{key:"destroy",value:function(){this._element&&(this._element.remove(),this._element=null),this._eventStream.end(),this._resizeObserver&&this._resizeObserver.disconnect(),0===document.querySelectorAll(".inboxsdk__topMessageBar").length?document.body.classList.remove("inboxsdk__hasTopMessageBar"):this.setTopMessageBarHeight(),(0,u.default)()}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"remove",value:function(){this.destroy()}},{key:"setTopMessageBarHeight",value:function(){var e=(0,i.default)(document.querySelectorAll(".inboxsdk__topMessageBar")),t=e.reduce(function(e,t){return e+t.offsetHeight},0);document.body.style.setProperty("--inboxsdk__topMessageBar-height","".concat(t,"px"))}}]),e}();r.default=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../lib/fake-window-resize":830,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/toConsumableArray":57,kefir:301,"kefir-bus":298}],728:[function(e,t,r){"use strict";function n(e,t,r){var n=new o.default(e,0);return(0,l.default)(t).take(1).map(function(e){return e.el.getValue()}).onValue(function(e){if(n.getEventStream().filter(function(e){return"orderChanged"===e.eventName}).onValue(function(){return(0,a.default)(r,n.getElement())}),!e.contains(r)){var t=e.querySelectorAll(".inboxsdk__navItem_appContainer");if(t.length>0){t[t.length-1].insertAdjacentElement("afterend",r)}else{var i=(0,s.default)(e,'ul > li > img[src*="ic_draft"]'),o=i.parentElement&&i.parentElement.parentElement;if(!o)throw new Error("could not locate insertion point");o.insertAdjacentElement("afterend",r)}}(0,a.default)(r,n.getElement())}),n}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=(i(e("kefir")),i(e("./views/inboxNavItemView"))),a=i(e("../../lib/dom/insert-element-in-order")),s=i(e("../../lib/dom/querySelectorOrFail")),l=i(e("../../lib/toItemWithLifetimeStream"))},{"../../lib/dom/insert-element-in-order":809,"../../lib/dom/querySelectorOrFail":821,"../../lib/toItemWithLifetimeStream":854,"./views/inboxNavItemView":778,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],729:[function(e,t,r){"use strict";function n(e,t){var r=null,n=e.getBCCRow(),i=(0,o.default)();return t.takeUntilBy(e.getStopper()).takeUntilBy(i).onValue(function(e){r&&(r.remove(),r=null),e&&(r=a(e),n.insertAdjacentElement("afterend",r))}),i.merge(e.getStopper()).take(1).onValue(function(){r&&(r.remove(),r=null)}),function(){i.destroy()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=(i(e("closest-ng")),i(e("kefir")),i(e("kefir-stopper"))),a=function(e){var t=e.labelText,r=e.el,n=document.createElement("div"),i=document.createElement("span"),o=document.createElement("div");return n.classList.add("inboxsdk__recipient_row"),i.classList.add("inboxsdk__recipient_label"),o.classList.add("inboxsdk__recipient_content"),t&&(i.textContent=t,n.appendChild(i)),r&&(o.appendChild(r),n.appendChild(o)),n}},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"closest-ng":96,kefir:301,"kefir-stopper":300}],730:[function(e,t,r){"use strict";function n(e,t,r){if((0,a.default)((0,o.default)(l.NATIVE_ROUTE_IDS),t))throw new Error("NativeRouteIDs are not currently supported in Inbox");if(!e.getCustomRouteIDs().has(t))throw new Error("Invalid routeID: ".concat(t));return"#"+(0,s.default)(t,r)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/object/values")),a=i(e("lodash/includes")),s=i(e("../../lib/populateRouteID")),l=e("../../constants/router")},{"../../constants/router":621,"../../lib/populateRouteID":846,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/values":22,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/includes":466}],731:[function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!e.getElementById("inboxsdk__style")){var t=e.createElement("style");if(t.id="inboxsdk__style",s.onValue(function(e){t.textContent=(0,a.default)(e)}),!e.head)throw new Error("missing head");e.head.appendChild(t)}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("ud-kefir")),a=i(e("../../lib/rewriteCssWithIdMap")),s=(0,
o.default)(t,".inboxsdk__appButton_container {\n  position: absolute;\n  right: 192px;\n  top: 16px;\n  white-space: nowrap;\n}\n\n.inboxsdk__appButton {\n  position: relative;\n  line-height: 0;\n  margin-right: 16px;\n  display: inline-block;\n}\n\n.inboxsdk__appButton .inboxsdk__button_iconImg {\n  width: 24px;\n  height: 24px;\n}\n\n.inboxsdk__appButton.inboxsdk__button_icon.inboxsdk__active,\n.inboxsdk__appButton.inboxsdk__button_icon:focus {\n  outline: none;\n}\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon::before,\n.inboxsdk__list_toolbar > .inboxsdk__button_icon::before,\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon::before,\n.inboxsdk__appButton.inboxsdk__button_icon::before {\n  content: ' ';\n  position: absolute;\n  top: -4px;\n  bottom: -4px;\n  left: -4px;\n  right: -4px;\n  margin: auto;\n  padding: 4px;\n  border-radius: 50%;\n}\n.inboxsdk__appButton.inboxsdk__button_icon.inboxsdk__active::before,\n.inboxsdk__appButton.inboxsdk__button_icon:focus::before {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n.inboxsdk__list_toolbar > .inboxsdk__button_icon.inboxsdk__active::before,\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon:focus::before,\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon.inboxsdk__active::before,\n.inboxsdk__list_toolbar > .inboxsdk__button_icon:focus::before {\n  background-color: rgba(0, 0, 0, 0.12);\n}\n\n.inboxsdk__appButton_tooltip_container {\n  outline: none;\n  right: 30px;\n  position: fixed;\n  z-index: 25;\n  text-align: center;\n}\n\n.inboxsdk__appButton_tooltip {\n  display: inline-block;\n  max-width: 500px;\n  white-space: initial;\n  text-align: center;\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  background: white;\n}\n\n.inboxsdk__compose_actionToolbar {\n  display: inline-block;\n}\n\n/* custom view */\n\n.inboxsdk__custom_view {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  /* needs to take up the whole screen so that it blocks clicks to elements behind it. */\n  display: flex;\n  display: -webkit-flex;\n  min-height: 100%;\n  background: rgb(242, 242, 242);\n}\n\n.IDMAP_custom_view_container {\n  margin-top: 56px;\n}\n\n.IDMAP_custom_view_min_margins {\n  flex: 1;\n  -webkit-flex: 1;\n  min-width: 0;\n}\n\n/* sidebar */\n\n.IDMAP_app_sidebar {\n  background: #f2f2f2;\n  position: fixed;\n  top: 56px;\n  bottom: 0;\n  right: 0;\n  width: 232px;\n  z-index: 5;\n}\n\n.IDMAP_app_sidebar_main {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n}\n\n.IDMAP_app_sidebar_content_area {\n  padding: 12px 8px;\n}\n\n.IDMAP_app_sidebar_container[data-open='false'] {\n  display: none;\n}\n\n.IDMAP_app_sidebar_content_area_padding {\n  -webkit-flex: 1;\n  flex: 1;\n}\n\n.IDMAP_app_sidebar_content_panel {\n  background: #f2f2f2;\n}\n\n/* thread sidebar icon */\n\n.IDMAP_sidebar_iconArea {\n  position: absolute;\n  right: -16px;\n\n  /* needed to prevent rendering bug in chrome where the element is\n  visibly duplicated when the parent becomes position:fixed. */\n  will-change: top;\n}\n\n.IDMAP_sidebar_iconArea .IDMAP_sidebar_button_container {\n  position: relative;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon {\n  margin-top: 10px;\n  transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  transition-delay: 0.01s;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.14), 0 4px 8px rgba(0, 0, 0, 0.28);\n  border: none;\n  border-radius: 50%;\n  background: #fff;\n  height: 26px;\n  width: 26px;\n  overflow: hidden;\n  padding: 0;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:focus,\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover {\n  box-shadow: 0 0 6px rgba(0, 0, 0, 0.16), 0 6px 12px rgba(0, 0, 0, 0.32);\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_iconImg {\n  width: 26px;\n  height: 26px;\n}\n\n.inboxsdk__button_icon {\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n  cursor: pointer;\n  position: relative;\n}\n\n.inboxsdk__button_iconImg {\n  user-drag: none;\n  -moz-user-select: none;\n  -webkit-user-drag: none;\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon {\n  display: inline-block;\n  position: relative;\n  width: 24px;\n  height: 24px;\n  opacity: 0.6;\n  margin: 8px 12px 4px 2px;\n  vertical-align: middle;\n}\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon.inboxsdk__active,\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon:hover,\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon:focus {\n  opacity: 1;\n  outline: none;\n}\n.inboxsdk__compose_actionToolbar\n  .inboxsdk__button_icon.inboxsdk__active::before,\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon:focus::before {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg {\n  width: 24px;\n  height: 24px;\n  vertical-align: middle;\n}\n\n.inboxsdk__compose_customSendContainer {\n  display: inline-block;\n  margin: 0;\n  line-height: 2.8;\n}\n\n.inboxsdk__recipient_row {\n  padding: 0 20px;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex: 0 0 auto;\n  flex: 0 0 auto;\n}\n\n.inboxsdk__recipient_row > .inboxsdk__recipient_label {\n  color: #757575;\n  display: inline-block;\n  padding-right: 6px;\n  padding-top: 9px;\n  min-width: 34px;\n  -webkit-flex-grow: 0;\n  flex-grow: 0;\n}\n\n.inboxsdk__recipient_row > .inboxsdk__recipient_content {\n  display: flex;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  position: relative;\n  padding: 7px 0;\n  min-height: 35px;\n  box-sizing: border-box;\n}\n\n.inboxsdk__compose_forceRecipientRowHidden {\n  display: none !important;\n}\n\n.inboxsdk__list_toolbar > .inboxsdk__button_icon {\n  display: inline-block;\n  margin-left: 8px;\n  vertical-align: middle;\n  width: 24px;\n  height: 24px;\n  opacity: 0.6;\n  background-position: center;\n  -webkit-mask-position: center;\n  mask-position: center;\n}\n\n.inboxsdk__list_toolbar > .inboxsdk__button_icon.inboxsdk__active,\n.inboxsdk__list_toolbar > .inboxsdk__button_icon:focus,\n.inboxsdk__list_toolbar > .inboxsdk__button_icon:hover {\n  outline: none;\n  opacity: 1;\n}\n\n.inboxsdk__list_toolbar > .inboxsdk__button_icon > img {\n  max-width: 24px;\n  max-height: 24px;\n}\n\n.inboxsdk__dropdown {\n  padding: 0;\n  margin: 0;\n  overflow: visible;\n  z-index: 100;\n  outline: none;\n}\n.inboxsdk__dropdown_content {\n  background: #fff;\n  color: #212121;\n  min-width: 1em;\n  min-height: 1em;\n  padding: 0;\n  margin: 0;\n  box-shadow: 0 0 6px rgba(0, 0, 0, 0.16), 0 6px 12px rgba(0, 0, 0, 0.32);\n  border-radius: 2px;\n  position: relative;\n}\n\n.inboxsdk__tooltip {\n  z-index: 1300;\n  position: fixed;\n  /*transition: left 200ms ease, top 200ms ease;*/\n  background: white;\n  min-width: 1em;\n  min-height: 1em;\n  padding: 29px 36px 32px;\n  text-align: center;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n}\n\n.inboxsdk__tooltip.inboxsdk__tooltip_chromeless {\n  padding: 0;\n}\n\n.inboxsdk__tooltip > .inboxsdk__close_button {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n}\n\n.inboxsdk__tooltip h1 {\n  color: #333;\n  font-size: 18px;\n  font-weight: normal;\n  margin: 13px 0 0;\n}\n\n.inboxsdk__tooltip .inboxsdk__subtitle {\n  color: #777;\n  font-size: 13px;\n  margin: 3px 0 14px 0;\n}\n\n.inboxsdk__tooltip_arrow {\n  z-index: 1301;\n  position: fixed;\n  width: 0;\n  height: 0;\n  border: none;\n  border-color: white; /* You can override this to change the tooltip's color! */\n}\n.inboxsdk__tooltip_arrow::before {\n  content: ' ';\n  position: absolute;\n  border: 8px solid;\n}\n.inboxsdk__tooltip_arrow::after {\n  content: ' ';\n  position: absolute;\n  border: 7px solid;\n  border-color: transparent;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__top::before {\n  border-bottom-width: 0;\n  border-color: rgba(0, 0, 0, 0.2) transparent;\n  left: -9px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__top::after {\n  border-bottom-width: 0;\n  border-top-color: inherit;\n  border-bottom-color: inherit;\n  left: -8px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__bottom::before {\n  border-top-width: 0;\n  border-color: rgba(0, 0, 0, 0.2) transparent;\n  top: -8px;\n  left: -9px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__bottom::after {\n  border-top-width: 0;\n  border-top-color: inherit;\n  border-bottom-color: inherit;\n  top: -7px;\n  left: -8px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__left {\n}\n.inboxsdk__tooltip_arrow.inboxsdk__left::before {\n  border-right-width: 0;\n  border-color: transparent rgba(0, 0, 0, 0.2);\n  top: -8px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__left::after {\n  border-right-width: 0;\n  border-left-color: inherit;\n  border-right-color: inherit;\n  top: -7px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__right {\n}\n.inboxsdk__tooltip_arrow.inboxsdk__right::before {\n  border-left-width: 0;\n  border-color: transparent rgba(0, 0, 0, 0.2);\n  top: -8px;\n  left: -8px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__right::after {\n  border-left-width: 0;\n  border-left-color: inherit;\n  border-right-color: inherit;\n  top: -7px;\n  left: -7px;\n}\n\n.inboxsdk__tooltip_img {\n  max-width: 500px;\n  max-height: 300px;\n}\n\n/* modal */\n.inboxsdk__modal_fullscreen {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 503;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-justify-content: center;\n  justify-content: center;\n  -webkit-align-items: center;\n  align-items: center;\n  padding: 110px 50px 50px 50px;\n  pointer-events: none;\n}\n.inboxsdk__modal_container {\n  position: relative;\n  background: #fff;\n  color: #000;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(0, 0, 0, 0.333);\n  outline: 0;\n  padding: 30px 42px;\n  pointer-events: auto;\n}\n.inboxsdk__modal_toprow [role='heading'] {\n  font-size: 16px;\n  line-height: 24px;\n  margin: 0 0 16px;\n  font: bold 1em arial, sans-serif;\n  padding-right: 20px;\n}\n.inboxsdk__modal_content {\n  margin: 30px 0;\n  line-height: 1.4em;\n  word-wrap: break-word;\n  font: normal 0.8em arial, sans-serif;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless\n  .inboxsdk__modal_container {\n  padding-left: 0;\n  padding-right: 0;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless\n  .inboxsdk__modal_content {\n  margin-left: 0;\n  margin-right: 0;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_showCloseButton)\n  .inboxsdk__modal_container {\n  padding-top: 0;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_showCloseButton)\n  .inboxsdk__modal_content {\n  margin-top: 0;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_hasButtons)\n  .inboxsdk__modal_container {\n  padding-bottom: 0;\n}\n.inboxsdk__modal_fullscreen:not(.inboxsdk__modal_hasButtons)\n  .inboxsdk__modal_content {\n  margin-bottom: 0;\n}\n.inboxsdk__modal_buttons input {\n  margin-right: 5px;\n}\n.inboxsdk__modal_buttons input.inboxsdk__primary {\n  margin-right: 7px;\n}\n.inboxsdk__modal_toprow .inboxsdk__close_button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  margin: 17px;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_showCloseButton)\n  .inboxsdk__modal_toprow\n  .inboxsdk__close_button {\n  display: none;\n}\n.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width {\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__modal_toprow--constrain-title-width > span[role='heading'] {\n  -webkit-flex: 1;\n  flex: 1;\n  width: 0;\n}\n\n.inboxsdk__attachment_card {\n  cursor: pointer;\n  display: inline-block;\n  position: relative;\n  text-decoration: none;\n  vertical-align: top;\n  margin-right: 12px;\n  margin-bottom: 12px;\n\n  box-shadow: 0 0 1px rgba(0, 0, 0, 0.11), 0 1px 2px rgba(0, 0, 0, 0.22);\n  box-sizing: border-box;\n  overflow: hidden;\n  height: 88px;\n  width: 132px;\n  z-index: 0;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.03);\n  border-radius: 2px;\n  transition: background-color 0.15s cubic-bezier(0.4, 0, 0.2, 1),\n    box-shadow 0.15s cubic-bezier(0.4, 0, 0.2, 1),\n    outline-color 0.15s cubic-bezier(0.4, 0, 0.2, 1);\n  border: 1px solid transparent;\n  outline: 1px solid transparent;\n}\n.inboxsdk__attachment_card:hover {\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.13), 0 3px 6px rgba(0, 0, 0, 0.26);\n}\n.inboxsdk__attachment_card:active,\n.inboxsdk__attachment_card:focus {\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.15), 0 5px 10px rgba(0, 0, 0, 0.3);\n  border-color: #f2f2f2;\n  outline-color: #4285f4;\n}\n.inboxsdk__attachment_card_nohover,\n.inboxsdk__attachment_card_hover_overlay {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 12px;\n}\n.inboxsdk__attachment_card .inboxsdk__attachment_card_hover_overlay {\n  background: rgba(255, 255, 255, 0.7);\n}\n.inboxsdk__attachment_card .inboxsdk__attachment_card_hover_overlay,\n.inboxsdk__attachment_card:hover .inboxsdk__attachment_card_nohover {\n  display: none;\n}\n.inboxsdk__attachment_card:hover .inboxsdk__attachment_card_hover_overlay {\n  display: block;\n}\n.inboxsdk__attachment_card_buttons {\n  line-height: normal;\n  position: absolute;\n  bottom: 6px;\n  left: 12px;\n  right: 6px;\n}\n.inboxsdk__attachment_card_button {\n  cursor: pointer;\n  background: rgba(0, 0, 0, 0.6);\n  border: 1px solid #c6c6c6;\n  border-radius: 3px;\n  margin-right: 3px;\n  box-sizing: content-box;\n  width: 30px;\n  height: 24px;\n  padding: 0;\n  color: #333;\n  vertical-align: top;\n  text-align: center;\n}\n.inboxsdk__attachment_card_button:hover {\n  background: rgba(0, 0, 0, 0.8);\n  border-color: rgba(0, 0, 0, 0.8);\n}\n.inboxsdk__attachment_card_button > div {\n  height: 21px;\n  width: 21px;\n  display: inline-block;\n  vertical-align: middle;\n}\n.inboxsdk__attachment_card_button > img {\n  max-height: 16px;\n  max-width: 16px;\n}\n.inboxsdk__attachment_card_title {\n  margin-top: 2px;\n  line-height: 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: #212121;\n}\n.inboxsdk__attachment_card_description {\n  color: #757575;\n  line-height: 16px;\n  margin-top: 23px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.inboxsdk__attachment_card_description > img {\n  display: inline-block;\n  margin-right: 8px;\n  vertical-align: middle;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 16px;\n  height: 16px;\n  width: 16px;\n}\n.inboxsdk__attachment_card_description > span {\n  vertical-align: middle;\n}\n\n.inboxsdk__attachment_overlay_button {\n  border: none;\n  cursor: pointer;\n  margin-left: 8px;\n  background-color: rgba(255, 255, 255, 0);\n  box-sizing: border-box;\n  border-radius: 2px;\n  height: 40px;\n  min-width: 40px;\n  padding: 8px 0;\n  color: #333;\n  vertical-align: middle;\n  text-align: center;\n  opacity: 0.87;\n  transition: background-color 0.1s, opacity 0.1s;\n}\n.inboxsdk__attachment_overlay_button:hover,\n.inboxsdk__attachment_overlay_button:focus {\n  outline: none;\n  opacity: 1;\n  color: rgba(255, 255, 255, 1);\n  background-color: rgba(255, 255, 255, 0.25);\n}\n.inboxsdk__attachment_overlay_button > img {\n  display: inline-block;\n  vertical-align: middle;\n  height: 24px;\n  width: 24px;\n}\n\n.inboxsdk__search_suggestion_group {\n  border-top: 1px solid #ddd;\n  margin-top: 6px;\n  padding-top: 6px;\n}\n\n/*\nWhen we're displaying custom results alongside Inbox's native results,\nwe need to put some padding/margin/border above the first group of custom results\nto separate them from the native ones. When Inbox doesn't have any results to show,\nhowever, we need to remove all that visual separation. Since the first group\nof custom results will also be the first element in the container in that case\nfirst-child will do the trick.\n*/\n.inboxsdk__search_suggestion_group:first-child {\n  border-top: 0;\n  margin-top: 0;\n  padding-top: 0;\n}\n\n.inboxsdk__search_suggestion {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  min-height: 37px;\n  padding: 5px 24px;\n  box-sizing: border-box;\n  cursor: pointer;\n  overflow: hidden;\n}\n\n.inboxsdk__search_suggestion.inboxsdk__selected {\n  background-color: rgba(0, 0, 0, 0.03);\n}\n\n.inboxsdk__search_suggestion > img {\n  opacity: 0.6;\n  flex-shrink: 0;\n  border-radius: 12px;\n  height: 24px;\n  width: 24px;\n  margin-right: 24px;\n  -webkit-user-drag: none;\n}\n\n.inboxsdk__search_suggestion > span {\n  display: flex;\n  flex-direction: column;\n  min-width: 0;\n}\n\n.inboxsdk__search_suggestion_name {\n  font-weight: bold;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.inboxsdk__search_suggestion_desc {\n  color: #757575;\n  font-size: 0.95em;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.inboxsdk__thread_row_force_toolbar_visible {\n  display: block !important;\n}\n\n.inboxsdk__inbox_thread_row_label {\n  border-radius: 2px;\n  display: -webkit-flex;\n  font-size: 11px;\n  display: flex;\n  margin-right: 0.333em;\n  outline: 1px solid transparent;\n  padding: 0 8px;\n  -webkit-flex: 0 0 auto;\n  flex: 0 0 auto;\n  -webkit-align-items: center;\n  align-items: center;\n}\n\n.inboxsdk__inbox_thread_row_label .inboxsdk__button_icon,\n.inboxsdk__inbox_thread_row_label .inboxsdk__button_iconImg {\n  height: 11px;\n  width: 11px;\n}\n\n.inboxsdk__inbox_thread_row_label .inboxsdk__button_icon {\n  margin-right: 5px;\n}\n\n.inboxsdk__inbox_thread_row_label .inboxsdk__button_iconImg {\n  position: absolute;\n}\n\n.inboxsdk__thread_row_icon_wrapper {\n  width: 20px;\n  min-width: 20px;\n  min-height: 20px;\n  margin-right: 5px;\n  position: relative;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon {\n  height: 20px;\n  width: 20px;\n  margin-top: -10px;\n  position: absolute;\n  top: 50%;\n  overflow: hidden;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  height: 20px;\n  width: 20px;\n}\n\n.inboxsdk__thread_row_draft_label_replaced\n  > span:not(.inboxsdk__thread_row_custom_draft_label) {\n  display: none;\n}\n\n.inboxsdk__thread_row_custom_draft_label {\n  color: rgb(210, 63, 49);\n}\n\n.inboxsdk__thread_row_draft_count_replaced\n  span:not(.inboxsdk__thread_row_custom_draft_count) {\n  display: none;\n}\n\n.inboxsdk__thread_row_custom_draft_count {\n  color: rgb(117, 117, 117);\n  font-weight: normal;\n  -webkit-flex-shrink: 0;\n  flex-shrink: 0;\n}\n\n.inboxsdk__navItem_appContainer {\n  border-bottom: 1px solid #ddd;\n  box-sizing: border-box;\n  list-style: none;\n  padding: 0 0 8px 0;\n  margin: 13px 0;\n  position: relative;\n}\n\n.inboxsdk__navItem_appContainer:empty {\n  display: none;\n}\n\n.inboxsdk__navItem_appContainer:focus,\n.inboxsdk__navItem_wrapper:focus,\n.inboxsdk__navItem_name:focus,\n.inboxsdk__navItem_subNav:focus {\n  outline: none;\n}\n\n.inboxsdk__navItem_wrapper:not(.inboxsdk__navItem_hasChildren)\n  > .inboxsdk__navItem_subNav,\n.inboxsdk__navItem_wrapper:not(.inboxsdk__navItem_hasChildren):not(.inboxsdk__navItem_hasColor)\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_expander,\n.inboxsdk__navItem_wrapper:not(.inboxsdk__navItem_hasChildren)\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_expander\n  > svg {\n  display: none;\n}\n\n.inboxsdk__navItem {\n  cursor: pointer;\n  align-items: center;\n  -webkit-align-items: center;\n  display: -webkit-flex;\n  display: flex;\n  padding-left: 16px;\n  padding-right: 12px;\n}\n\n.inboxsdk__navItem:not(.inboxsdk__navItem_link):hover {\n  background-color: rgba(0, 0, 0, 0.03);\n  border-radius: 2px;\n}\n\n.inboxsdk__navItem:focus {\n  background-color: rgba(0, 0, 0, 0.05);\n  outline: 2px solid transparent;\n}\n\n.inboxsdk__navItem.inboxsdk__navItem_active {\n  background-color: rgba(0, 0, 0, 0.05);\n  border-radius: 2px;\n  color: #212121;\n  font-weight: bold;\n}\n\n.inboxsdk__navItem_expander {\n  position: relative;\n  width: 24px;\n  height: 24px;\n  margin-right: 24px;\n  border-radius: 50%;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n}\n\n.inboxsdk__navItem_expander:hover {\n  background-color: rgba(0, 0, 0, 0.12);\n}\n\n.inboxsdk__navItem_expander > svg {\n  width: 100%;\n  height: 100%;\n  transition: transform 150ms ease-out;\n}\n\n.inboxsdk__navItem_expander > svg > polygon {\n  fill: #616161;\n}\n\n.inboxsdk__navItem_wrapper.inboxsdk__navItem_collapsed\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_expander\n  > svg {\n  transform: rotate(-90deg);\n}\n\n.inboxsdk__navItem_name {\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  -webkit-flex: 1;\n  flex: 1;\n}\n\n.inboxsdk__navItem_hasIcon > .inboxsdk__navItem_name {\n  padding-left: 24px;\n}\n\n.inboxsdk__navItem_level0:not(.inboxsdk__navItem_disabled):not(.inboxsdk__navItem_hasChildren):not(.inboxsdk__navItem_hasColor)\n  > .inboxsdk__navItem:not(.inboxsdk__navItem_hasIcon),\n.inboxsdk__navItem_level1:not(.inboxsdk__navItem_hasChildren):not(.inboxsdk__navItem_hasColor)\n  > .inboxsdk__navItem:not(.inboxsdk__navItem_hasIcon) {\n  padding-left: 64px;\n}\n\n.inboxsdk__navItem_link > .inboxsdk__navItem_name {\n  color: #3c80f6;\n}\n\n.inboxsdk__navItem_link:hover > .inboxsdk__navItem_name,\n.inboxsdk__navItem_link:focus > .inboxsdk__navItem_name,\n.inboxsdk__navItem_link:active > .inboxsdk__navItem_name {\n  color: #1c3aa9;\n}\n\n.inboxsdk__navItem .inboxsdk__button_icon,\n.inboxsdk__navItem .inboxsdk__button_iconImg {\n  width: 24px;\n  height: 24px;\n}\n\n.inboxsdk__navItem > .inboxsdk__navItem_accessory .inboxsdk__button_icon,\n.inboxsdk__navItem > .inboxsdk__navItem_accessory .inboxsdk__button_iconImg {\n  width: 18px;\n  height: 18px;\n}\n\n.inboxsdk__navItem > .inboxsdk__navItem_accessory {\n  line-height: 18px;\n  display: none;\n}\n\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon:focus {\n  outline: 2px solid transparent;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled > .inboxsdk__navItem,\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled > .inboxsdk__navItem:hover,\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled > .inboxsdk__navItem:focus,\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled\n  > .inboxsdk__navItem:active {\n  background-color: transparent;\n  border-radius: 0;\n  outline: none;\n  font-size: 0.9em;\n  font-weight: normal;\n  line-height: 24px;\n  white-space: normal;\n  outline: none;\n  cursor: default;\n  padding-left: 16px;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled {\n  border-top: 1px solid #ddd;\n  margin: 13px 0;\n  padding-top: 13px;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled:first-child {\n  border-top: none;\n  margin-top: 0;\n  padding-top: 0;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled:last-child {\n  margin-bottom: 0;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled\n  > .inboxsdk__navItem\n  > .inboxsdk__button_icon {\n  display: none;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_expander {\n  display: none;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem:hover\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem:focus\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem:active\n  > .inboxsdk__navItem_name {\n  color: #616161;\n}\n\n.inboxsdk__navItem_wrapper.inboxsdk__navItem_hasAccessory\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_accessory {\n  display: block;\n  position: relative;\n}\n\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon {\n  opacity: 0;\n}\n\n.inboxsdk__navItem:hover\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon,\n.inboxsdk__navItem.inboxsdk__navItem_active\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon {\n  opacity: 0.6;\n}\n\n.inboxsdk__navItem\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon:hover,\n.inboxsdk__navItem\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon:focus,\n.inboxsdk__navItem\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon.inboxsdk__active {\n  opacity: 1;\n}\n\n.inboxsdk__navItem_subNav,\n.inboxsdk__navItem_subNavInner {\n  overflow: hidden;\n}\n\n.inboxsdk__navItem_subNav {\n  transition: height 150ms ease-in-out;\n}\n\n.inboxsdk__navItem_level1.inboxsdk__navItem_hasChildren\n  .inboxsdk__navItem_subNav {\n  padding-left: 48px;\n}\n\n.inboxsdk__navItem_level2.inboxsdk__navItem_hasChildren\n  .inboxsdk__navItem_subNav {\n  padding-left: 34px;\n}\n\n.inboxsdk__navItem_level1.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem_subNav {\n  padding-left: 48px;\n}\n\n.inboxsdk__navItem_level2 {\n  line-height: 26px;\n}\n\n.inboxsdk__navItem_level2 .inboxsdk__navItem_expander {\n  margin-right: 10px;\n}\n\n.inboxsdk__navItem_level1.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem_hasIcon\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level2\n  > .inboxsdk__navItem_hasIcon\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level3\n  > .inboxsdk__navItem_hasIcon\n  > .inboxsdk__navItem_name {\n  padding-left: 10px;\n}\n\n.inboxsdk__navItem_level2 > .inboxsdk__navItem .inboxsdk__button_icon,\n.inboxsdk__navItem_level2 > .inboxsdk__navItem .inboxsdk__button_iconImg,\n.inboxsdk__navItem_level3 > .inboxsdk__navItem .inboxsdk__button_icon,\n.inboxsdk__navItem_level3 > .inboxsdk__navItem .inboxsdk__button_iconImg {\n  width: 18px;\n  height: 18px;\n}\n\n/* appid warning inbox specific parts */\n.inboxsdk__appid_warning {\n  margin: 68px 240px -68px;\n}\n.inboxsdk__appid_warning .inboxsdk__close_button {\n  float: right;\n}\n\n/* mole */\n\n.inboxsdk__mole_view {\n  box-sizing: border-box;\n  direction: ltr;\n  margin-right: 15px;\n  display: table-cell;\n}\n\n.inboxsdk__mole_view_mid {\n  position: relative;\n}\n\n.inboxsdk__mole_view_inner {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  outline: none;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.45);\n  border-top-left-radius: 7.5px;\n  border-top-right-radius: 7.5px;\n  transform: translateZ(0);\n  background: white;\n  /* copied from the compose's CSS */\n  max-height: calc(100vh - 56px - 20px - 24px - 1px - 8px);\n}\n\n.inboxsdk__mole_view_titlebar {\n  background: #424242;\n  color: #fff;\n  height: 18px;\n  line-height: 18px;\n  outline: none;\n  padding: 11px 20px;\n  transform: translateZ(0);\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__mole_view_title {\n  display: inline-block;\n  flex: 1;\n  -webkit-flex: 1;\n  height: 18px;\n  overflow: hidden;\n  padding: 0 10px 0 0;\n  text-overflow: ellipsis;\n  vertical-align: top;\n  white-space: nowrap;\n\n  /* Because of flex, the title can become wider than this if the mole contents are */\n  width: 98px;\n}\n\n.inboxsdk__mole_title_buttons > button {\n  height: 24px;\n  width: 24px;\n  opacity: 0.6;\n  padding: 0 0 3px 7px;\n\n  margin-right: 4px;\n  vertical-align: top;\n\n  user-drag: none;\n  -webkit-user-drag: none;\n  user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  -moz-user-select: none;\n\n  outline: none;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n}\n\n.inboxsdk__mole_title_buttons > button:focus,\n.inboxsdk__mole_title_buttons > button:hover {\n  opacity: 1;\n  outline: none;\n}\n\n.inboxsdk__mole_title_buttons\n  > button.inboxsdk__mole_custom_title_button\n  > img {\n  width: 18px;\n  height: 18px;\n}\n\n.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content {\n  display: none;\n}\n")},{"../../lib/rewriteCssWithIdMap":848,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"ud-kefir":596}],732:[function(e,t,r){"use strict";function n(e){var t=new o.default("appToolbarLocation");return t.run("children check",function(){if(e.childElementCount<2)throw new Error("expected more children")}),t.run("position check",function(){var t=e.getBoundingClientRect();if(t.top>100)throw new Error("expected element to border top of screen");if(window.innerWidth-t.right>100)throw new Error("expected element to border right side of screen");if(t.width>500)throw new Error("expected element to span only the right of the screen");if(t.height>150)throw new Error("expected element to span only the right of the screen")}),{elements:{chatSidebarButton:t.run("chatSidebarButton",function(){return(0,a.default)(e,'div[role=button][jsaction*="global.toggle_chat_roster"]')})},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("../../../../lib/ErrorCollector")),a=i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],733:[function(e,t,r){"use strict";function n(e){var t=new o.default("attachmentCard");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});return{elements:{},attributes:{type:"FILE"},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("../../../../lib/ErrorCollector"));i(e("../../../../lib/dom/querySelectorOne")),i(e("bignumber.js"))},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"bignumber.js":92}],734:[function(e,t,r){(function(n){"use strict";function i(e){var t=new s.default("attachmentOverlay");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});var r=t.run("downloadButton",function(){var t=a.default.toArray(Array.prototype.slice.call(e.querySelectorAll("div[role=button][tabindex][data-tooltip]:not([aria-disabled=true]):not([aria-pressed]):not([aria-expanded])")),a.default.compose(a.default.filter(function(e){return 1===e.childElementCount&&0===e.firstElementChild.childElementCount}),a.default.filter(function(e){if(n.document){return!(e.getBoundingClientRect().top>100)}return e.parentElement.classList.contains("ndfHFb-c4YZDc-Wrql6b-C7uZwb-b0t70b")}),a.default.filter(function(e){var t=Array.prototype.indexOf.call(e.parentElement.children,e),r=Array.prototype.filter.call(e.parentElement.children,function(e,r){return r>t&&"DIV"===e.nodeName})[0];return r&&"true"===r.getAttribute("aria-haspopup")}),a.default.take(1)))[0];if(!t)throw new Error("Failed to find element");if("Print"===t.getAttribute("aria-label"))throw new Error("Found print button instead");return t});return{elements:{downloadButton:r,buttonContainer:r?r.parentElement:null},attributes:{},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("transducers.js")),s=o(e("../../../../lib/ErrorCollector")),l=(o(e("../../../../lib/dom/querySelectorOne")),e("ud")),u=(0,l.defn)(t,i);r.default=u
}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"transducers.js":595,ud:597}],735:[function(e,t,r){"use strict";function n(e){var t=new o.default("chatSidebar");return t.run("position:fixed",function(){if("fixed"!==getComputedStyle(e.parentElement).position)throw new Error("expected position:fixed in parent")}),t.run("id",function(){if(!e.id)throw new Error("expected id")}),{elements:{},attributes:{},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("../../../../lib/ErrorCollector")),a=(i(e("../../../../lib/dom/querySelectorOne")),e("ud")),s=(0,a.defn)(t,n);r.default=s},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,ud:597}],736:[function(e,t,r){"use strict";function n(e){var t=new a.default("compose"),r="dialog"!==e.getAttribute("role"),n=t.run("send button",function(){return(0,s.default)(e,'div[jstcache] > div[role=button][jsaction$=".send"], div[jstcache] > div[role=button][disabled]:not([title]):not([data-tooltip])')}),i=t.run("attach button",function(){return(0,s.default)(e,'div[role=button][jsaction$=".attach"]')}),u=t.run("body",function(){return(0,s.default)(e,'div[contenteditable][g_editable], div[id][tabindex][aria-label][jsaction*=".quick_compose_handle_input"]')}),c=r?null:t.run("subject",function(){var t=(0,s.default)(e,'div[jstcache][jsan] > div > input[type=text][title][placeholder][jsaction*="input:"]');if(!(t instanceof HTMLInputElement))throw new Error("Wrong type");return t}),d=r?t.run("pop-out button",function(){return(0,s.default)(e,'button[jsaction$=".quick_compose_popout_mole"]')}):null,f=t.run("discard button",function(){return(0,s.default)(e,'button[jsaction$=".discard_draft"]')}),p=r?null:t.run("title bar",function(){return(0,s.default)(e,'div[jsaction$=".focus_mole"]')}),h=r?null:t.run("fullscreen button",function(){return(0,s.default)(e,'button[jsaction$=".toggle_full_screen"]')}),m=r?null:t.run("fullscreen button image",function(){return(0,s.default)(e,'button[jsaction$=".toggle_full_screen"] img')}),b=r?null:t.run("close button",function(){return(0,s.default)(e,'div[jstcache][jsan][jsaction] > button[jsaction$=".close_mole"]')}),_=r?null:t.run("minimize button",function(){return(0,s.default)(e,'div[jstcache][jsan][jsaction] > button[jsaction$=".minimize_mole"]')}),v=r?null:t.run("minimize button image",function(){return(0,s.default)(e,'div[jstcache][jsan][jsaction] > button[jsaction$=".minimize_mole"] img')}),g=r?null:t.run("body placeholder",function(){var e=u&&u.previousElementSibling;if(!(e instanceof HTMLElement)||"LABEL"!==e.nodeName)throw new Error("compose body placeholder wrong type ".concat(e?e.nodeName:"undefined"));return e}),y=e.querySelector("div[role=button][jsaction*=toggle_custom_from_menu]"),w=y?t.run("from picker email span",function(){return(0,s.default)(y,"span")}):null,k=r?null:t.run("recipient fields",function(){var t=e.querySelectorAll("input[type=text][role=combobox]");if(3!=t.length)throw new Error("Found ".concat(t.length," recipient fields, expected 3"));return t}),j=k||[],x=(0,o.default)(j,3),E=x[0],S=x[1],C=x[2],I=r?null:t.run("toggle cc/bcc button",function(){return(0,s.default)(e,'button[jsaction*=".toggle_cc_bcc"]')}),T=r?null:t.run("to row",function(){if(!E)throw new Error("Could not locate To input");var e=(0,l.default)(E,'div > button[jsaction$=".toggle_cc_bcc"] + div'),t=e&&e.parentElement;if(!(t instanceof HTMLElement))throw new Error("Could not locate To row");return t}),A=r?null:t.run("cc row",function(){if(!S)throw new Error("Could not locate CC input");var e=(0,l.default)(S,"div[class] > label + div"),t=e&&e.parentElement;if(!(t instanceof HTMLElement))throw new Error("Could not locate CC row");return t}),D=r?null:t.run("bcc row",function(){if(!C)throw new Error("Could not locate BCC input");var e=(0,l.default)(C,"div[class] > label + div"),t=e&&e.parentElement;if(!(t instanceof HTMLElement))throw new Error("Could not locate BCC row");return t});return{elements:{sendBtn:n,attachBtn:i,body:u,subject:c,popOutBtn:d,discardBtn:f,titleBar:p,toggleFullscreenButton:h,toggleFullscreenButtonImage:m,closeBtn:b,minimizeBtn:_,minimizeBtnImage:v,bodyPlaceholder:g,fromPicker:y,fromPickerEmailSpan:w,toInput:E,ccInput:S,bccInput:C,toRow:T,ccRow:A,bccRow:D,toggleCcBccButton:I},attributes:{isInline:r},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/slicedToArray")),a=i(e("../../../../lib/ErrorCollector")),s=i(e("../../../../lib/dom/querySelectorOne")),l=i(e("closest-ng")),u=e("ud"),c=(0,u.defn)(t,n);r.default=c},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/slicedToArray":54,"closest-ng":96,ud:597}],737:[function(e,t,r){"use strict";function n(e){var t=new a.default("compose");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});var r=t.run("message id",function(){var t=/msg-[^:]+:[^:\d]*\d+/.exec(e.getAttribute("data-msg-id")||"");if(!t)throw new Error("message id regex failed");return t[0]}),n=t.run("heading",function(){var t=e.querySelector("div[role=heading]");if(!t)throw new Error("failed to find heading");return t}),i=e.querySelector("div[role=heading] ~ div:not(:empty)"),l=e.querySelector('div[jsaction$=".message_toggle_collapse"]'),u=null!=i&&(null==l||"heading"===l.getAttribute("role")),c=u?"EXPANDED":null!=i?"COLLAPSED":"HIDDEN",d=u&&n&&!n.querySelector("span[email]"),f=!d&&n&&i?t.run("sender",function(){return(0,s.default)(n,"[email]:first-child")}):null,p=d?null:e.querySelectorAll("[role=heading] [email]:not(:first-child), [role=heading] + div [email]"),h=d||!i||"EXPANDED"!==c?null:t.run("attachments area",function(){var e=(0,o.default)(i.parentElement.querySelectorAll("section:last-child"));if(!e)throw new Error("element not found");return e});return{elements:{heading:n,body:i,sender:f,toggleCollapse:l,attachmentsArea:h},attributes:{loaded:u,viewState:c,inboxMessageId:r,recipientElements:p,isDraft:d},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("lodash/last")),a=i(e("../../../../lib/ErrorCollector")),s=i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/last":484}],738:[function(e,t,r){"use strict";function n(e){var t=[];e.childElementCount<2&&t.push("expected more children");var r=e.getBoundingClientRect();return r.top>100&&t.push("expected element to border top of screen"),window.innerWidth-r.right>100&&t.push("expected element to border right side of screen"),window.innerHeight-r.bottom>100&&t.push("expected element to border bottom side of screen"),{elements:{},score:0===t.length?1:0,errors:t}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;i(e("../../../../lib/ErrorCollector")),i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],739:[function(e,t,r){"use strict";function n(e){var t=new o.default("searchBar"),r=e.getBoundingClientRect();return t.run("position check",function(){if(r.top>100)throw new Error("expected element to border top of screen")}),{elements:{searchInput:t.run("searchInput",function(){return(0,a.default)(e,"div[role=search] input[role=combobox]")})},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("../../../../lib/ErrorCollector")),a=i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],740:[function(e,t,r){"use strict";function n(e){var t=new s.default("threadRow"),r=!e.hasAttribute("aria-multiselectable");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});var n=t.run("subject",function(){return(0,l.default)(e,'div[jsaction][jslog] > div:not(:first-child):not(:last-child) > div > div[class]:not([style]):not(:first-child) > div:not(:first-child):not(:last-child) > div:not([style]):not(:first-child):not(:last-child):not([class*="inboxsdk"])')}),i=t.run("checkbox",function(){return(0,l.default)(e,"div[jsaction] > div > div[jsaction] > div[role=checkbox]")}),c=t.run("recipients",function(){return e.querySelectorAll("div[jsaction] > div:not(:first-child):not(:last-child) > div > div > span[email]")}),d=t.run("isOnlyDraft",function(){return!(c&&c.length>0)}),f=t.run("draftLabels",function(){var t=e.querySelectorAll("div[jsaction] > div:not(:first-child):not(:last-child) > div > div > span");return(0,a.default)(t).filter(function(e){var t=getComputedStyle(e).getPropertyValue("color"),r=u.exec(t);if(!r)throw new Error("Failed to read color string");var n=+r[1],i=+r[2],o=+r[3];return n>200&&i<100&&o<100})}),p=t.run("recipientParent",function(){if(c&&c.length>0)return c[0].parentElement;if(!(f&&f.length>0))throw new Error("Could not locate draft labels");return f[0].parentElement}),h=t.run("thread id",function(){var t=/thread-[^:]+:[^:\d]*(\d+)/.exec(e.getAttribute("data-item-id")||"");if(!t)throw new Error("thread row id regex failed");return t[0]}),m=t.run("messageCountParent",function(){return p&&p.nextElementSibling}),b=t.run("visibleMessageCount",function(){var e=m&&m.querySelector("span"),t=e&&/^\((\d+)\)$/.exec(e.textContent);return t?(0,o.default)(t[1]):1}),_=t.run("visibleDraftCount",function(){if(d&&b)return b;if(!f)throw new Error("Could not locate draft labels");return f.length}),v=t.run("contacts",function(){return c?(0,a.default)(c).map(function(e){var t=e.getAttribute("email");return t?{name:null,emailAddress:t}:null}).filter(Boolean):null}),g=t.run("labelParent",function(){return(0,l.default)(e,"div[jsaction][jslog] > div:not(:first-child):not(:last-child) > div > div[class]:not([style]):not(:first-child) > div:not(:first-child):not(:last-child)")}),y=t.run("toolbar",function(){return(0,l.default)(e,"div[jsaction] div[jsaction] > ul[aria-label]")}),w={subject:n,checkbox:i,labelParent:g,toolbar:y,recipientParent:p,messageCountParent:m},k=1-t.errorCount()/t.runCount();return{elements:w,attributes:{isOnlyDraft:d,inBundle:r,inboxThreadId:h,visibleMessageCount:b,visibleDraftCount:_,contacts:v},score:k,errors:t.getErrorLogs()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/parse-int")),a=i(e("@babel/runtime-corejs2/core-js/array/from")),s=i(e("../../../../lib/ErrorCollector")),l=i(e("../../../../lib/dom/querySelectorOne")),u=/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],741:[function(e,t,r){"use strict";function n(e){var t=new o.default("thread"),r=!e.hasAttribute("aria-multiselectable");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});var n=t.run("thread id",function(){var t=/thread-[^:]+:[^:\d]*(\d+)/.exec(e.getAttribute("data-item-id")||"");if(!t)throw new Error("thread id regex failed");return t[0]}),i=t.run("heading",function(){return e.querySelector("div[role=heading]")}),s=i?t.run("stickyHeading",function(){var e=i.firstElementChild;if(e instanceof HTMLDivElement)return e;throw new Error("child missing")}):null,l=s?t.run("toolbar",function(){return(0,a.default)(s,"ul")}):null,u=t.run("list",function(){return e.querySelector("div[role=list]")});return{elements:{heading:i,stickyHeading:s,toolbar:l,list:u},attributes:{inBundle:r,inboxThreadId:n},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("../../../../lib/ErrorCollector")),a=i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":796,"../../../../lib/dom/querySelectorOne":820,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],742:[function(e,t,r){"use strict";function n(e,t){var r=function(e){var t=e.el,r=e.removalStream;return{el:t.getValue(),removalStream:r}},n=(0,d.default)(t.getAllByTag("inlineCompose")).map(r),i=(0,d.default)(t.getAllByTag("regularCompose")).map(r),h=(0,d.default)(t.getAllByTag("fullscreenCompose")).map(r),m=s.default.merge([n,i.merge(h).flatMap((0,f.default)())]),b=m.map(function(t){var r=t.el,n=t.removalStream,i=(0,p.default)(r);i.errors.length&&e.getLogger().errorSite(new Error("parse errors (compose)"),{score:i.score,errors:i.errors,html:(0,u.default)(r)});var o=new c.default(e,r,i);return n.take(1).onValue(function(){return o.removedFromDOM()}),o});return new l.default({scheduler:t.getAllByTag("inlineCompose").getScheduler(),read:function(){return new a.default},listen:function(t,r){t(new a.default);var n=b.observe({value:function(e){r.add(e),e.getStopper().onValue(function(){r.remove(e)})},error:function(t){function r(){return{mainLength:document.querySelectorAll("[role=main]").length,regularLength:document.querySelectorAll("body > div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id]").length,noJsActionLength:document.querySelectorAll("body > div[id] > div[id][class]:not([role]) > div[class] > div[id]").length,noNotLength:document.querySelectorAll("body > div[id][jsaction] > div[id][class] > div[class] > div[id]").length,noBodyDirectChildLength:document.querySelectorAll("body div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id]").length,noBodyLength:document.querySelectorAll("div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id]").length,classLength:document.querySelectorAll("div.ek div.md > div").length,classEkLength:document.querySelectorAll(".ek").length,classMdLength:document.querySelectorAll(".md").length,composeHtml:(0,o.default)(document.querySelectorAll("body > div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id], div.ek div.md > div")).map(function(e){return(0,u.default)(e)})}}var n=r();e.getLogger().error(t,n),setTimeout(function(){var t=r();e.getLogger().eventSdkPassive("waitfor compose data",{startStatus:n,waitTime:18e4,laterStatus:t})},18e4)}});return function(){n.unsubscribe()}}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/array/from")),a=i(e("@babel/runtime-corejs2/core-js/set")),s=i(e("kefir")),l=i(e("live-set")),u=i(e("../../../common/censorHTMLtree")),c=i(e("./views/inbox-compose-view")),d=i(e("../../lib/toItemWithLifetimeStream")),f=i(e("../../lib/dom/make-element-stream-merger")),p=i(e("./detection/compose/parser"))},{"../../../common/censorHTMLtree":607,"../../lib/dom/make-element-stream-merger":813,"../../lib/toItemWithLifetimeStream":854,"./detection/compose/parser":736,"./views/inbox-compose-view":767,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"live-set":306}],743:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,u.default)(a.default.mark(function e(t,r){var n,i,o,u,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d.default,e.t1="https://inbox.google.com/sync".concat((0,f.default)(),"/i/fd"),e.next=4,t.getPageCommunicator().getXsrfToken();case 4:return e.t2=e.sent,e.next=7,t.getPageCommunicator().getBtaiHeader();case 7:return e.t3=e.sent,e.t4={"Content-Type":"application/json","X-Framework-Xsrf-Token":e.t2,"X-Gmail-BTAI":e.t3,"X-Google-BTD":"1"},e.t5=(0,l.default)({1:[{1:r,3:[]}]}),e.t6={method:"POST",url:e.t1,headers:e.t4,data:e.t5},e.next=13,(0,e.t0)(e.t6);case 13:if(n=e.sent,i=n.text,o=(0,p.extractMessageIdsFromThreadResponse)(i),u=(0,s.default)(o,1),c=u[0],c){e.next=18;break}throw new Error("Failed to find inbox message ID for thread");case 18:return e.abrupt("return",c);case 19:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/slicedToArray")),l=o(e("@babel/runtime-corejs2/core-js/json/stringify")),u=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=e("ud"),d=o(e("../../driver-common/inboxAjax")),f=o(e("../../driver-common/getAccountUrlPart")),p=e("./inboxResponseProcessor"),h=(0,c.defn)(t,n);r.default=h},{"../../driver-common/getAccountUrlPart":782,"../../driver-common/inboxAjax":790,"./inboxResponseProcessor":749,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/slicedToArray":54,"@babel/runtime-corejs2/regenerator":59,ud:597}],744:[function(e,t,r){"use strict";function n(e){return e instanceof window.CSSMediaRule?(0,u.default)(e.cssRules,n):e instanceof window.CSSStyleRule?[e]:[]}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/parse-float")),a=i(e("@babel/runtime-corejs2/core-js/array/from")),s=i(e("lodash/difference")),l=i(e("lodash/once")),u=i(e("lodash/flatMap")),c=i(e("lodash/last")),d=i(e("transducers.js")),f=i(e("postcss-selector-parser")),p=i(e("../../lib/logger")),h=i(e("../../lib/dom/querySelectorOrFail")),m=(0,f.default)(),b=(0,l.default)(function(){function e(t){switch(t.type){case"root":case"selector":return(0,u.default)(t.nodes,e);case"class":return[t.value];default:return[]}}var t=(0,a.default)((0,h.default)(document,"[role=application]").classList).map(function(e){return new RegExp("\\."+e+"\\b")});if(0===t.length)throw new Error("no class names on element");var r=d.default.toArray(Array.prototype.slice.call(document.styleSheets),d.default.compose(d.default.filter(function(e){try{return e.cssRules&&e.cssRules.length}catch(e){return!1}}),d.default.mapcat(function(e){return Array.prototype.slice.call(e.cssRules||[])}),d.default.mapcat(n),d.default.filter(function(e){return t.some(function(t){return t.test(e.selectorText)})}),d.default.filter(function(e){return e.style["margin-left"]&&e.style["margin-right"]}))),i=d.default.toArray(Array.prototype.slice.call(r),d.default.compose(d.default.filter(function(e){return(0,o.default)(e.style["margin-left"])>(0,o.default)(e.style["margin-right"])}),d.default.take(1)))[0],l=d.default.toArray(Array.prototype.slice.call(r),d.default.compose(d.default.filter(function(e){return(0,o.default)(e.style["margin-left"])<(0,o.default)(e.style["margin-right"])}),d.default.take(1)))[0];if(!i||!l){var f=new Error("Failed to parse element CSS rules");throw p.default.error(f,{rulesCount:r.length,hasOnlyNavSidebarRule:!!i,hasOnlyChatSidebarRule:!!l}),f}var b=e(m.process(i.selectorText).res),_=e(m.process(l.selectorText).res),v=(0,s.default)(_,b),g=(0,s.default)(b,_),y=(0,c.default)(b)===(0,c.default)(_)?(0,c.default)(b):null;return 1===v.length&&1===g.length&&y||p.default.error(new Error("Failed to find sidebar classnames"),{onlyNavSidebarRuleClassNames:b,onlyChatSidebarRuleClassNames:_,chatSidebarClassNames:v,navSidebarClassNames:g,centerListClassName:y}),{chat:v[0],nav:g[0],centerList:y}}),_=b;r.default=_},{"../../lib/dom/querySelectorOrFail":821,"../../lib/logger":843,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-float":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/difference":454,"lodash/flatMap":461,"lodash/last":484,"lodash/once":489,"postcss-selector-parser":520,"transducers.js":595}],745:[function(e,t,r){"use strict";function n(e,t,r){if((0,s.default)((0,a.default)(c.NATIVE_ROUTE_IDS),t))throw new Error("NativeRouteIDs are not currently supported in Inbox");if(!e.getCustomRouteIDs().has(t)){var n="#"===t[0];n&&(t=t.slice(1));var i=!1;if(!r){var d=!0,f=!1,p=void 0;try{for(var h,m=(0,o.default)(e.getCustomRouteIDs());!(d=(h=m.next()).done);d=!0){var b=h.value;if((0,u.default)(b,t)){i=!0;break}}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}}if(!i)throw new Error("Invalid routeID: ".concat(t));n||e.getLogger().deprecationWarning('Router.goto resolved routeID without "#" prefix')}document.location.hash=(0,l.default)(t,r)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/get-iterator")),a=i(e("@babel/runtime-corejs2/core-js/object/values")),s=i(e("lodash/includes")),l=i(e("../../lib/populateRouteID")),u=i(e("../../lib/routeIDmatchesHash")),c=e("../../constants/router")},{"../../constants/router":621,"../../lib/populateRouteID":846,"../../lib/routeIDmatchesHash":849,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/values":22,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/includes":466}],746:[function(e,t,r){"use strict";function n(e,t,r){(0,u.default)(r.style,{opacity:"0",transform:"",transition:"opacity 100ms"}),r.removeAttribute("data-inboxsdk-id"),c.default.fromEvents(r,"transitionend").merge(c.default.later(200)).takeUntilBy(h.filter(function(e){return null!=e})).onValue(function(){(0,u.default)(r.style,{display:"none",opacity:"",transition:""})})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/date/now")),a=i(e("@babel/runtime-corejs2/core-js/json/stringify")),s=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=i(e("@babel/runtime-corejs2/helpers/createClass")),u=i(e("@babel/runtime-corejs2/core-js/object/assign")),c=i(e("kefir")),d=i(e("../../lib/stream-wait-for")),f=(i(e("../../lib/dom/querySelectorOrFail")),i(e("../../lib/dom/make-mutation-observer-chunked-stream"))),p=(0,d.default)(function(){return document.querySelector("body > div[id][jsaction] > div[id] > div[class][jsaction][aria-hidden]")}).map(function(e){var t=e.parentElement;if(!t)throw new Error("Should not happen");var r=t.querySelector(".inboxsdk__butterbar");return r||(r=document.createElement("div"),r.className=e.className+" inboxsdk__butterbar",r.style.display="none",t.insertBefore(r,e.nextSibling)),{noticeContainer:t,googleNotice:e,sdkNotice:r}}).toProperty(),h=p.flatMapLatest(function(e){var t=e.sdkNotice;return(0,f.default)(t,{attributes:!0,attributeFilter:["data-inboxsdk-id"]}).map(function(){return t.getAttribute("data-inboxsdk-id")})}),m=h.filter(function(e){return null==e}),b=m,_=function(){function e(){(0,s.default)(this,e),b.onValue(function(){})}return(0,l.default)(e,[{key:"getNoticeAvailableStream",value:function(){return b}},{key:"getSharedMessageQueue",value:function(){var e=document.head.getAttribute("data-inboxsdk-butterbar-queue");return e?JSON.parse(e):[]}},{key:"setSharedMessageQueue",value:function(e){var t=(0,a.default)(e);document.head.setAttribute("data-inboxsdk-butterbar-queue",t)}},{key:"showMessage",value:function(e){var t=(0,o.default)()+"-"+Math.random();return p.take(1).onValue(function(r){var n=(r.noticeContainer,r.googleNotice),i=r.sdkNotice;i.className=n.className,i.classList.add("inboxsdk__butterbar"),e.html?i.innerHTML=e.html:e.el?(i.innerHTML="",i.appendChild(e.el)):i.textContent=e.text,e.className&&i.classList.add(e.className),"block"===i.style.display&&"1"===getComputedStyle(i).opacity?((0,u.default)(i.style,{opacity:"0",transform:"none",transition:"none"}),i.offsetHeight,(0,u.default)(i.style,{opacity:"1",transition:""})):((0,u.default)(i.style,{opacity:"0",transform:"",transition:"",display:"block"}),i.offsetHeight,(0,u.default)(i.style,{opacity:"1",transform:"none"})),i.setAttribute("data-inboxsdk-id",t)}),{destroy:function(){p.take(1).onValue(function(r){var i=r.noticeContainer,o=r.googleNotice,a=r.sdkNotice;a.getAttribute("data-inboxsdk-id")===t&&(e.className&&a.classList.remove(e.className),n(i,o,a))})}}}},{key:"hideGmailMessage",value:function(){}}]),e}();r.default=_},{"../../lib/dom/make-mutation-observer-chunked-stream":815,"../../lib/dom/querySelectorOrFail":821,"../../lib/stream-wait-for":853,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],747:[function(e,t,r){(function(n){"use strict";var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/get-iterator")),a=i(e("@babel/runtime-corejs2/helpers/objectSpread")),s=i(e("@babel/runtime-corejs2/core-js/promise")),l=i(e("@babel/runtime-corejs2/core-js/array/from")),u=i(e("@babel/runtime-corejs2/core-js/object/assign")),c=i(e("@babel/runtime-corejs2/regenerator")),d=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),f=i(e("@babel/runtime-corejs2/core-js/set")),p=i(e("@babel/runtime-corejs2/core-js/weak-map")),h=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),m=i(e("@babel/runtime-corejs2/helpers/createClass")),b=i(e("@babel/runtime-corejs2/helpers/defineProperty")),_=i(e("lodash/once")),v=(i(e("lodash/constant")),i(e("lodash/includes"))),g=(i(e("auto-html")),i(e("kefir"))),y=i(e("kefir-bus")),w=i(e("kefir-stopper")),k=e("ud"),j=i(e("live-set")),x=(i(e("live-set/filter")),i(e("live-set/merge"))),E=i(e("live-set/flatMap")),S=i(e("live-set/mapWithRemoval")),C=i(e("live-set/toValueObservable")),I=i(e("./makePageParserTree")),T=(i(e("../../lib/logger")),i(e("../../lib/toItemWithLifetimeStream"))),A=i(e("../../lib/inject-script")),D=i(e("../../lib/from-event-target-capture")),M=i(e("bimapcache")),R=i(e("./getInboxMessageIdForInboxThreadId")),L=i(e("../../driver-common/getGmailMessageIdForSyncMessageId")),O=i(e("../../driver-common/getThreadIdFromMessageId")),P=i(e("../../driver-common/gmailAjax")),V=i(e("../../driver-common/getAccountUrlPart")),N=i(e("../../lib/dom/simulate-key")),B=i(e("../../lib/dom/set-css")),q=i(e("../../lib/dom/querySelectorOrFail")),U=i(e("./custom-style")),F=(i(e("../../../common/censorHTMLstring")),i(e("../../../common/censorHTMLtree"))),H=i(e("./getComposeViewDriverLiveSet")),z=i(e("./addNavItem")),W=i(e("../../lib/dom/querySelectorOne")),G=i(e("../../lib/idMap")),K=i(e("../../lib/dom/make-mutation-observer-chunked-stream")),$=i(e("./getSidebarClassnames")),J=i(e("./inbox-butter-bar-driver")),Y=i(e("./createLink")),Q=i(e("./gotoView")),X=i(e("./detection/thread/parser")),Z=i(e("./detection/thread-row/parser")),ee=i(e("./detection/message/parser")),te=i(e("./detection/attachmentCard/parser")),re=i(e("./detection/attachmentOverlay/parser")),ne=i(e("./detection/nativeDrawer/parser")),ie=i(e("./detection/searchBar/parser")),oe=i(e("./detection/chatSidebar/parser")),ae=i(e("./detection/appToolbarLocation/parser")),se=i(e("./setupRouteViewDriverStream")),le=i(e("./views/inbox-thread-view")),ue=i(e("./views/inbox-thread-row-view")),ce=i(e("./views/inbox-message-view")),de=i(e("./views/inbox-attachment-card-view")),fe=i(e("./views/inbox-attachment-overlay-view")),pe=i(e("./views/inbox-chat-sidebar-view")),he=i(e("./views/InboxToolbarView")),me=i(e("./views/InboxMoleViewDriver")),be=i(e("./views/inbox-app-sidebar-view")),_e=i(e("./registerSearchSuggestionsProvider")),ve=i(e("./views/inbox-app-toolbar-button-view")),ge=i(e("./inbox-page-communicator")),ye=i(e("./views/inbox-modal-view")),we=i(e("./views/inbox-drawer-view")),ke=i(e("./views/inbox-backdrop")),je=function(){function e(t,r,i,o,a,s){var l=this;(0,h.default)(this,e),(0,b.default)(this,"_appId",void 0),(0,b.default)(this,"_logger",void 0),(0,b.default)(this,"_opts",void 0),(0,b.default)(this,"_envData",void 0),(0,b.default)(this,"_stopper",void 0),(0,b.default)(this,"onready",void 0),(0,b.default)(this,"_page",void 0),(0,b.default)(this,"_routeViewDriverStream",void 0),(0,b.default)(this,"_rowListViewDriverStream",void 0),(0,b.default)(this,"_composeViewDriverLiveSet",void 0),(0,b.default)(this,"_threadRowViewDriverLiveSet",void 0),(0,b.default)(this,"_threadViewDriverLiveSet",void 0),(0,b.default)(this,"_messageViewDriverLiveSet",void 0),(0,b.default)(this,"_attachmentCardViewDriverLiveSet",void 0),(0,b.default)(this,"_attachmentOverlayViewDriverLiveSet",void 0),(0,b.default)(this,"_chatSidebarViewLiveSet",void 0),(0,b.default)(this,"_toolbarViewDriverLiveSet",void 0),(0,b.default)(this,"_currentRouteViewDriver",void 0),(0,b.default)(this,"_threadViewElements",new p.default),(0,b.default)(this,"_messageViewElements",new p.default),(0,b.default)(this,"_butterBarDriver",new J.default),(0,b.default)(this,"_butterBar",void 0),(0,b.default)(this,"_pageCommunicator",void 0),(0,b.default)(this,"_lastInteractedAttachmentCardView",null),(0,b.default)(this,"_lastInteractedAttachmentCardViewSet",(0,y.default)()),(0,b.default)(this,"_appSidebarView",null),(0,b.default)(this,"_customRouteIDs",new f.default),(0,b.default)(this,"_navMenuContainer",void 0),(0,b.default)(this,"_threadIdStats",void 0),(0,b.default)(this,"getGmailMessageIdForSyncMessageId",void 0),(0,b.default)(this,"getInboxMessageIdForInboxThreadId",void 0),(0,b.default)(this,"getThreadIdFromMessageId",void 0),(0,b.default)(this,"getGmailActionToken",(0,_.default)((0,d.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,
P.default)({url:"https://mail.google.com/mail".concat((0,V.default)(),"/"),xhrFields:{withCredentials:!0},canRetry:!0});case 2:if(t=e.sent,r=t.text.match(/var GM_ACTION_TOKEN=("[^"]+")/)){e.next=6;break}throw new Error("Could not find GM_ACTION_TOKEN");case 6:return e.abrupt("return",JSON.parse(r[1]));case 7:case"end":return e.stop()}},e)})))),(0,U.default)(),this._appId=t,this._logger=o,this._opts=a,this._envData=s,this._stopper=(0,w.default)(),this._pageCommunicator=new ge.default,this._page=(0,I.default)(this,document),this._stopper.onValue(function(){return l._page.dump()}),this.onready=(0,A.default)().then(function(){l._logger.setUserEmailAddress(l.getUserEmailAddress())}),this._setupThreadIdStats(),n.localStorage&&n.localStorage.removeItem("inboxsdk__cached_gmail_and_inbox_message_ids");var u=new M.default({key:"inboxsdk__cached_gmail_and_inbox_message_ids_2",getAfromB:function(e){return(0,L.default)(l,e)},getBfromA:function(){throw new Error("should not happen")}});this.getGmailMessageIdForSyncMessageId=function(e){return u.getAfromB(e)};var m=new M.default({key:"inboxsdk__cached_inbox_message_and_inbox_thread_ids",getAfromB:function(e){return l._threadIdStats.threadRows.threadsWithFetch+=1,(0,R.default)(l,e)},getBfromA:function(){throw new Error("should not happen")}});this.getInboxMessageIdForInboxThreadId=function(e){return m.getAfromB(e)};var v=new M.default({key:"inboxsdk__cached_thread_and_message_ids",getAfromB:function(e){return(0,O.default)(l,e)},getBfromA:function(){throw new Error("should not happen")}});this.getThreadIdFromMessageId=function(e){return v.getAfromB(e)},this._threadRowViewDriverLiveSet=(0,S.default)(this._page.tree.getAllByTag("collapsedThreadRow"),function(e,t){var r=e.getValue(),n=(0,Z.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (threadRow)"),{score:n.score,errors:n.errors,html:(0,F.default)(r)});var i=new ue.default(r,l,n);return t.then(function(){i.destroy()}),i}),this._threadViewDriverLiveSet=(0,E.default)(this._page.tree.getAllByTag("thread"),function(e){var t=e.getValue(),r=(0,X.default)(t);return r.errors.length&&l._logger.errorSite(new Error("parse errors (thread)"),{score:r.score,errors:r.errors,html:(0,F.default)(t)}),new j.default({read:function(){throw new Error},listen:function(e,n){e(new f.default);var i=(0,w.default)();return function e(o){o||(r=(0,X.default)(t),r.errors.length>0&&l._logger.errorSite(new Error("thread reparse errors"),{score:r.score,errors:r.errors,html:(0,F.default)(t)}));var a=new le.default(t,l,r);a.getStopper().takeUntilBy(i).onValue(function(){n.remove(a),e(!1)}),i.takeUntilBy(a.getStopper()).onValue(function(){a.destroy()}),n.add(a)}(!0),function(){i.destroy()}}})}),this._messageViewDriverLiveSet=(0,E.default)(this._page.tree.getAllByTag("message"),function(e){var t=e.getValue(),r=(0,ee.default)(t);return r.errors.length>0&&l._logger.errorSite(new Error("parse errors (message)"),{score:r.score,errors:r.errors,html:(0,F.default)(t)}),r.attributes.isDraft?j.default.constant(new f.default):new j.default({read:function(){throw new Error},listen:function(e,n){e(new f.default);var i=(0,w.default)();return function e(o){o||(r=(0,ee.default)(t),r.errors.length>0&&l._logger.errorSite(new Error("message reparse errors"),{score:r.score,errors:r.errors,html:(0,F.default)(t)}));var a=new ce.default(t,l,r);a.getStopper().takeUntilBy(i).onValue(function(){n.remove(a),e(!1)}),i.takeUntilBy(a.getStopper()).onValue(function(){a.destroy()}),n.add(a)}(!0),function(){i.destroy()}}})}),this._attachmentCardViewDriverLiveSet=(0,S.default)(this._page.tree.getAllByTag("attachmentCard"),function(e,t){var r=e.getValue(),n=(0,te.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (attachmentCard)"),{score:n.score,errors:n.errors,html:(0,F.default)(r)});var i=new de.default({element:r,parsed:n},l);return t.then(function(){i.destroy()}),i}),this._attachmentOverlayViewDriverLiveSet=(0,E.default)(this._page.tree.getAllByTag("attachmentOverlay"),function(e){var t=e.getValue(),r=(0,re.default)(t);r.errors.length&&l._logger.errorSite(new Error("parse errors (attachmentOverlay)"),{score:r.score,errors:r.errors,html:(0,F.default)(t)});var n=l.getLastInteractedAttachmentCardView();return n?new j.default({read:function(){throw new Error},listen:function(e){var i=new fe.default(l,t,r,n);return e(new f.default([i])),function(){i.destroy()}}}):(l._logger.error(new Error("Encountered overlay without knowing cardView")),j.default.constant(new f.default))}),this._attachmentOverlayViewDriverLiveSet.subscribe({}),this._composeViewDriverLiveSet=(0,H.default)(this,this._page.tree),this._chatSidebarViewLiveSet=(0,S.default)(this._page.tree.getAllByTag("chatSidebar"),function(e,t){var r=e.getValue(),n=(0,oe.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (chatSidebar)"),{score:n.score,errors:n.errors,html:(0,F.default)(r)});var i=new pe.default(r,n);return t.then(function(){i.destroy()}),i}),this._chatSidebarViewLiveSet.subscribe({}),this._routeViewDriverStream=(0,se.default)(this),this._routeViewDriverStream.takeUntilBy(this._stopper).onValue(function(e){l._currentRouteViewDriver=e}),this._rowListViewDriverStream=g.default.never(),g.default.later(3e4).takeUntilBy((0,T.default)(this._page.tree.getAllByTag("appToolbarLocation"))).onValue(function(){l._logger.errorSite(new Error("Failed to find appToolbarLocation"))}),(0,C.default)(this._page.tree.getAllByTag("searchBar")).subscribe(function(e){var t=e.value,r=t.getValue(),n=(0,ie.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (searchBar)"),{score:n.score,errors:n.errors,html:(0,F.default)(r)})}),g.default.later(3e4).takeUntilBy((0,T.default)(this._page.tree.getAllByTag("searchBar"))).onValue(function(){l._logger.errorSite(new Error("Failed to find searchBar"))}),(0,C.default)(this._page.tree.getAllByTag("nativeDrawer")).subscribe(function(e){var t=e.value,r=t.getValue(),n=(0,ne.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (nativeDrawer)"),{score:n.score,errors:n.errors,html:(0,F.default)(r)})});var k=null;this._threadViewDriverLiveSet.subscribe(function(e){e.forEach(function(e){if("add"===e.type){var t=e.value;k&&k.removePanels(),k=t}})}),this._toolbarViewDriverLiveSet=(0,x.default)([(0,S.default)(this._page.tree.getAllByTag("listToolBar"),function(e,t){var r=e.getValue(),n=new he.default(r,l,null);return t.then(function(){n.destroy()}),n}),(0,S.default)(this._threadViewDriverLiveSet,function(e,t){var r=e.getToolbarElement(),n=new he.default(r,l,e);return t.then(function(){n.destroy()}),n})])}return(0,m.default)(e,[{key:"_setupThreadIdStats",value:function(){var e=this;this._resetThreadIdStats(),setInterval(function(){if(0!==e._threadIdStats.threadRows.totalCalls){var t=e._threadIdStats.threadRows,r={};r.threadRows=(0,u.default)({},t,{totalThreads:t.totalThreads.size,threadsWithoutGmailId:t.threadsWithoutGmailId.size}),e._logger.eventSdkPassive("inboxThreadIdStats",r),e._resetThreadIdStats()}},36e5)}},{key:"_resetThreadIdStats",value:function(){this._threadIdStats={threadRows:{totalThreads:new f.default,totalCalls:0,threadsWithoutGmailId:new f.default,callsWithoutGmailId:0,threadsWithFetch:0}}}},{key:"trackThreadRowIdCall",value:function(e,t){this._threadIdStats.threadRows.totalCalls+=1,this._threadIdStats.threadRows.totalThreads.add(t),e||(this._threadIdStats.threadRows.callsWithoutGmailId+=1,this._threadIdStats.threadRows.threadsWithoutGmailId.add(t))}},{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getAppId",value:function(){return this._appId}},{key:"getOpts",value:function(){return this._opts}},{key:"getLogger",value:function(){return this._logger}},{key:"getStopper",value:function(){return this._stopper}},{key:"getRouteViewDriverStream",value:function(){return this._routeViewDriverStream}},{key:"getCurrentRouteViewDriver",value:function(){return this._currentRouteViewDriver}},{key:"getRowListViewDriverStream",value:function(){return g.default.never()}},{key:"getComposeViewDriverLiveSet",value:function(){return this._composeViewDriverLiveSet}},{key:"getComposeViewDriverStream",value:function(){return(0,T.default)(this._composeViewDriverLiveSet).map(function(e){return e.el})}},{key:"getThreadRowViewDriverLiveSet",value:function(){return this._threadRowViewDriverLiveSet}},{key:"getThreadRowViewDriverStream",value:function(){return(0,T.default)(this._threadRowViewDriverLiveSet).map(function(e){return e.el})}},{key:"getThreadViewDriverStream",value:function(){return(0,T.default)(this._threadViewDriverLiveSet).map(function(e){return e.el})}},{key:"getMessageViewDriverStream",value:function(){return(0,T.default)(this._messageViewDriverLiveSet).map(function(e){return e.el})}},{key:"getAttachmentCardViewDriverStream",value:function(){return(0,T.default)(this._attachmentCardViewDriverLiveSet).map(function(e){return e.el})}},{key:"getButterBarDriver",value:function(){return this._butterBarDriver}},{key:"getButterBar",value:function(){return this._butterBar}},{key:"setButterBar",value:function(e){this._butterBar=e}},{key:"getPageCommunicator",value:function(){return this._pageCommunicator}},{key:"getThreadViewElementsMap",value:function(){return this._threadViewElements}},{key:"getMessageViewElementsMap",value:function(){return this._messageViewElements}},{key:"getTagTree",value:function(){return this._page.tree}},{key:"getCustomRouteIDs",value:function(){return this._customRouteIDs}},{key:"getCurrentChatSidebarView",value:function(){var e=(0,l.default)(this._chatSidebarViewLiveSet.values())[0];if(!e)throw new Error("No chat sidebar found");return e}},{key:"getAppSidebarView",value:function(){return this._appSidebarView||(this._appSidebarView=new be.default(this)),this._appSidebarView}},{key:"getChatSidebarButton",value:function(){var e=(0,l.default)(this._page.tree.getAllByTag("appToolbarLocation").values())[0],t=e?(0,ae.default)(e.getValue()):null,r=t?t.elements.chatSidebarButton:null;if(!r)throw new Error("No chat sidebar button found");return r}},{key:"getLastInteractedAttachmentCardView",value:function(){return this._lastInteractedAttachmentCardView}},{key:"setLastInteractedAttachmentCardView",value:function(e){var t=this;this._lastInteractedAttachmentCardViewSet.emit(),this._lastInteractedAttachmentCardView=e,e&&e.getStopper().merge((0,D.default)(document.body,"click")).take(1).takeUntilBy(this._lastInteractedAttachmentCardViewSet).takeUntilBy(this._stopper).onValue(function(){t._lastInteractedAttachmentCardView=null})}},{key:"openNewComposeViewDriver",value:function(){var e=this.getNextComposeViewDriver();return(0,W.default)(document.body,'nav[role=banner] ~ div[aria-expanded] button:not([tabindex="-1"])').click(),e}},{key:"getNextComposeViewDriver",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return g.default.stream(function(t){var r=e._composeViewDriverLiveSet.subscribe({next:function(e){var r=e.filter(function(e){return"add"===e.type})[0];if(r){if("add"!==r.type)throw new Error("should not happen");t.value(r.value)}},complete:t.end});return function(){return r.unsubscribe()}}).merge(g.default.later(t,new Error("Reached timeout while waiting for getNextComposeViewDriver"))).beforeEnd(function(){return new Error("Driver was shut down before a new compose was found")}).flatMap(function(e){return e instanceof Error?g.default.constantError(e):g.default.constant(e)}).take(1).takeErrors(1).toPromise()}},{key:"activateShortcut",value:function(e,t,r){console.warn("activateShortcut not implemented")}},{key:"getUserEmailAddress",value:function(){var e=document.head.getAttribute("data-inboxsdk-user-email-address");if(null==e)throw new Error("should not happen");return e}},{key:"isConversationViewDisabled",value:function(){return s.default.resolve(!1)}},{key:"isUsingMaterialUI",value:function(){return!1}},{key:"getUserLanguage",value:function(){return this._pageCommunicator.getUserLanguage()}},{key:"getUserContact",value:function(){return{emailAddress:this.getUserEmailAddress(),name:this.getUserEmailAddress()}}},{key:"getAccountSwitcherContactList",value:function(){return console.log("getAccountSwitcherContactList not implemented"),[this.getUserContact()]}},{key:"registerThreadButton",value:function(e){var t=this,r=(0,w.default)(),n=function(e){r.takeUntilBy(e.getStopper()).onValue(function(){e.destroy()})},i=(0,C.default)(this._toolbarViewDriverLiveSet).subscribe(function(r){var i=r.value;if(i.isForThread()){if(!e.positions||(0,v.default)(e.positions,"THREAD")){if("OTHER"===e.threadSection)return void console.warn("registerThreadButton does not support OTHER section items in Inbox yet.");n(i.addButton((0,a.default)({},e,{onClick:function(t){e.onClick({position:"THREAD",dropdown:t.dropdown,selectedThreadViewDrivers:[i.getThreadViewDriver()],selectedThreadRowViewDrivers:[]})}})))}}else if(i.isForRowList()&&(!e.positions||(0,v.default)(e.positions,"LIST"))){if("OTHER"===e.listSection)return void console.warn("registerThreadButton does not support OTHER section items in Inbox yet.");n(i.addButton((0,a.default)({},e,{onClick:function(r){e.onClick({position:"LIST",dropdown:r.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:t.getSelectedThreadRowViewDrivers()})}})))}});if(r.onValue(function(){i.unsubscribe()}),!e.positions||(0,v.default)(e.positions,"ROW")){var o=(0,C.default)(this._threadRowViewDriverLiveSet).subscribe(function(t){var r=t.value;n(r.addToolbarButton((0,a.default)({},e,{onClick:function(t){e.onClick({position:"ROW",dropdown:t.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:[r]})}})))});r.onValue(function(){o.unsubscribe()})}return function(){r.destroy()}}},{key:"getSelectedThreadRowViewDrivers",value:function(){return(0,l.default)(this.getThreadRowViewDriverLiveSet().values()).filter(function(e){return e.isSelected()})}},{key:"addNavItem",value:function(e,t){return this._navMenuContainer||(this._navMenuContainer=document.createElement("div"),this._navMenuContainer.classList.add("inboxsdk__navItem_appContainer")),(0,z.default)(t,this._page.tree.getAllByTag("leftNav"),this._navMenuContainer)}},{key:"getSentMailNativeNavItem",value:function(){return new s.default(function(e,t){})}},{key:"createLink",value:function(e,t){return(0,Y.default)(this,e,t)}},{key:"goto",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,r){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,Q.default)(this,t,r);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"addCustomRouteID",value:function(e){var t=this;return this._customRouteIDs.add(e),this._pageCommunicator.registerAllowedHashLinkStartTerm(e.split("/")[0]),function(){t._customRouteIDs.delete(e)}}},{key:"addCustomListRouteID",value:function(e,t){return console.log("addCustomListRouteID not implemented"),function(){}}},{key:"showCustomRouteView",value:function(e){var t=document.querySelector("body > .inboxsdk__custom_view");if(!t){var r=t=document.createElement("div");t.className="inboxsdk__custom_view";var n=(0,$.default)(),i=n.chat,o=n.nav;(0,B.default)("custom_view_base_margins","\n        .inboxsdk__custom_view.".concat(o||"nav_sidebar"," >\n        .").concat((0,G.default)("custom_view_container"),".").concat((0,G.default)("custom_view_min_margins")," {\n          margin-left: 232px;\n        }\n        .inboxsdk__custom_view.").concat(i||"chat_sidebar"," >\n        .").concat((0,G.default)("custom_view_container"),".").concat((0,G.default)("custom_view_min_margins")," {\n          margin-right: 232px;\n        }\n      "));var a=(0,q.default)(document,"body > div[class][id][jsaction][jslog]");(0,K.default)(a,{attributes:!0,attributeFilter:["class"]}).toProperty(function(){return null}).onValue(function(){[i,o].filter(Boolean).forEach(function(e){a.classList.contains(e)?r.classList.add(e):r.classList.remove(e)})}),document.body.appendChild(t)}t.innerHTML="",t.appendChild(e),t.style.display="",document.body.classList.add("inboxsdk__custom_view_active");var s=document.querySelector("[id][jsaction] > div[token][class]");s&&(s.style.display="none")}},{key:"showNativeRouteView",value:function(){document.body.classList.remove("inboxsdk__custom_view_active");var e=document.querySelector("body > .inboxsdk__custom_view");e&&(e.style.display="none",e.innerHTML="");var t=document.querySelector("[id][jsaction] > div[token][class]");t&&(t.style.display="")}},{key:"setShowNativeNavMarker",value:function(e){}},{key:"setShowNativeAddonSidebar",value:function(e){}},{key:"registerSearchSuggestionsProvider",value:function(e){(0,_e.default)(this,e)}},{key:"registerSearchQueryRewriter",value:function(e){console.log("registerSearchQueryRewriter not implemented")}},{key:"addToolbarButtonForApp",value:function(e){return new ve.default(e,this._page.tree.getAllByTag("appToolbarLocation"),this._page.tree.getAllByTag("searchBar")).waitForReady()}},{key:"addGlobalSidebarContentPanel",value:function(e){return s.default.resolve(null)}},{key:"isRunningInPageContext",value:function(){return!(!n.gbar||!n.gbar._CONFIG)}},{key:"showAppIdWarning",value:function(){var e=document.createElement("div");e.className="inboxsdk__appid_warning",e.innerHTML='\n  <button type="button" value="" title="Close" class="inboxsdk__close_button"></button>\n  <div class="inboxsdk__appid_warning_main">\n    <div class="topline">InboxSDK Developer Warning: Invalid AppId</div>\n    <div>You\'ve loaded the InboxSDK with an unregistered appId. Registration is free but necessary to load the SDK.</div>\n  </div>\n  <a class="inboxsdk__appid_register" target="_blank" href="https://www.inboxsdk.com/register">Register Your App</a>\n  ',document.body.insertBefore(e,document.body.firstChild);var t=e.querySelector(".inboxsdk__close_button");if(!t)throw new Error("Should not happen");t.addEventListener("click",function(t){e.remove()})}},{key:"openDraftByMessageID",value:function(e){throw new Error("Not implemented")}},{key:"createMoleViewDriver",value:function(e){return new me.default(e,this)}},{key:"createModalViewDriver",value:function(e){return new ye.default(e)}},{key:"createTopMessageBarDriver",value:function(e){throw new Error("Not implemented")}},{key:"createDrawerViewDriver",value:function(e){var t=new we.default(e);return g.default.fromESObservable(this._page.tree.getAllByTag("nativeDrawer")).takeUntilBy(t.getClosingStream()).onValue(function(e){var r=!0,n=!1,i=void 0;try{for(var a,s=(0,o.default)(e);!(r=(a=s.next()).done);r=!0){if("add"===a.value.type){t.close();break}}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}),t}},{key:"createBackdrop",value:function(e,t){return new ke.default(e,t)}},{key:"closeOpenThread",value:function(){(0,N.default)(document.body,27,27)}},{key:"registerThreadRowViewSelectionHandler",value:function(e){return function(){}}}]),e}(),xe=(0,k.defn)(t,je);r.default=xe}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/censorHTMLstring":606,"../../../common/censorHTMLtree":607,"../../driver-common/getAccountUrlPart":782,"../../driver-common/getGmailMessageIdForSyncMessageId":783,"../../driver-common/getThreadIdFromMessageId":788,"../../driver-common/gmailAjax":789,"../../lib/dom/make-mutation-observer-chunked-stream":815,"../../lib/dom/querySelectorOne":820,"../../lib/dom/querySelectorOrFail":821,"../../lib/dom/set-css":823,"../../lib/dom/simulate-key":826,"../../lib/from-event-target-capture":831,"../../lib/idMap":835,"../../lib/inject-script":838,"../../lib/logger":843,"../../lib/toItemWithLifetimeStream":854,"./addNavItem":728,"./createLink":730,"./custom-style":731,"./detection/appToolbarLocation/parser":732,"./detection/attachmentCard/parser":733,"./detection/attachmentOverlay/parser":734,"./detection/chatSidebar/parser":735,"./detection/message/parser":737,"./detection/nativeDrawer/parser":738,"./detection/searchBar/parser":739,"./detection/thread-row/parser":740,"./detection/thread/parser":741,"./getComposeViewDriverLiveSet":742,"./getInboxMessageIdForInboxThreadId":743,"./getSidebarClassnames":744,"./gotoView":745,"./inbox-butter-bar-driver":746,"./inbox-page-communicator":748,"./makePageParserTree":750,"./registerSearchSuggestionsProvider":752,"./setupRouteViewDriverStream":754,"./views/InboxMoleViewDriver":756,"./views/InboxToolbarView":758,"./views/inbox-app-sidebar-view":759,"./views/inbox-app-toolbar-button-view":760,"./views/inbox-attachment-card-view":762,"./views/inbox-attachment-overlay-view":763,"./views/inbox-backdrop":764,"./views/inbox-chat-sidebar-view":765,"./views/inbox-drawer-view":769,"./views/inbox-message-view":772,"./views/inbox-modal-view":773,"./views/inbox-thread-row-view":775,"./views/inbox-thread-view":776,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/regenerator":59,"auto-html":83,bimapcache:93,kefir:301,"kefir-bus":298,"kefir-stopper":300,"live-set":306,"live-set/filter":303,"live-set/flatMap":304,"live-set/mapWithRemoval":307,"live-set/merge":308,"live-set/toValueObservable":311,"lodash/constant":451,"lodash/includes":466,"lodash/once":489,ud:597}],748:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/assign")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("kefir")),d=n(e("../../lib/common-page-communicator")),f=function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(0,l.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,a.default)(t,[{key:"getDraftIDForComposeView",value:function(e){e.hasAttribute("data-inboxsdk-draft-id")||e.dispatchEvent(new CustomEvent("inboxSDKgetDraftIDforComposeView",{bubbles:!0,cancelable:!1,detail:null}));var t=e.getAttribute("data-inboxsdk-draft-id");if(!t)throw new Error("could not find draft ID");return t}},{key:"notifyEmailSending",value:function(){document.dispatchEvent(new CustomEvent("inboxSDKcomposeViewIsSending",{bubbles:!1,cancelable:!1,detail:null}))}},{key:"notifyEmailSendCanceled",value:function(){document.dispatchEvent(new CustomEvent("inboxSDKcomposeViewSendCanceled",{bubbles:!1,cancelable:!1,detail:null}))}},{key:"clickAndGetNewIframeSrc",value:function(e){var t=c.default.fromEvents(e,"inboxSDKclickAndGetNewIframeSrcResult").take(1).flatMap(function(e){var t=e.detail;return"success"===t.type?c.default.constant(t.src):c.default.constantError((0,i.default)(new Error(t.message),{stack:t.stack}))}).toPromise();return e.dispatchEvent(new CustomEvent("inboxSDKclickAndGetNewIframeSrc",{bubbles:!0,cancelable:!1,detail:null})),t}},{key:"fakeWindowResize",value:function(){document.dispatchEvent(new CustomEvent("inboxSDKinboxFakeWindowResize",{bubbles:!1,cancelable:!1,detail:null}))}}]),t}(d.default);r.default=f},{"../../lib/common-page-communicator":800,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301}],749:[function(e,t,r){"use strict";function n(e){var t=JSON.parse(e),r=t&&t[2]&&t[2][0]&&t[2][0][3];if(!r)throw new Error("Failed to process thread response");return r.map(function(e){return e[1]}).filter(Boolean)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.extractMessageIdsFromThreadResponse=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],750:[function(e,t,r){"use strict";function n(e,t){function r(e){return n?(0,o.default)({},e,{logError:function(e,t){var r={el:t,html:t?(0,u.default)(t):null};n.getLogger().errorSite(e,r)}}):e}var n=e,i=new a.default(t,r(l.default));return c.changes().onValue(function(e){console.log("replacing PageParserTree options"),i.replaceOptions(r(e))}),i}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/helpers/objectSpread")),a=i(e("page-parser-tree")),s=i(e("ud-kefir")),l=i(e("./pageParserOptions")),u=i(e("../../../common/censorHTMLtree")),c=(0,s.default)(t,l.default)},{"../../../common/censorHTMLtree":607,"./pageParserOptions":751,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"page-parser-tree":516,"ud-kefir":596}],751:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("../../lib/logger")),o=n(e("../../../common/censorHTMLtree")),a=n(e("transducers.js")),s=n(e("lodash/find")),l=n(e("lodash/uniq")),u=n(e("closest-ng")),c={tags:{message:{ownedBy:["thread"]},attachmentCard:{ownedBy:["message","threadRow","bundleRow"]},inlineCompose:{ownedBy:["thread"]}},finders:{leftNav:{interval:function(e,t){return 0===e&&t<6e4?300:12e4},fn:function(e){return e.querySelectorAll("nav[aria-hidden]:not([role]) div[role=menu]")}},thread:{fn:function(e){return e.querySelectorAll('div[aria-expanded=true][data-item-id*="thread-"], div.scroll-list-item-open[data-item-id*="thread-"]')}},message:{fn:function(e){return e.querySelectorAll('div[role=listitem][aria-expanded][data-msg-id*="msg-"]')}},attachmentCard:{fn:function(e){return e.querySelectorAll('\n          div[data-msg-id] section > div > div[tabindex][title],\n          div[jsaction*="update_chip_carousel_arrows"] div[role=listitem][tabindex][jsaction]\n        ')}},attachmentOverlay:{fn:function(){var e=a.default.compose(a.default.filter(function(e){return"none"!==e.style.display}),a.default.mapcat(function(e){return Array.prototype.slice.call(e.contentDocument.querySelectorAll("div[role=dialog]:not([aria-hidden=true])"))}));return function(t){return a.default.toArray(Array.prototype.slice.call(t.querySelectorAll("iframe[frameborder]:not([src])")),e)}}()},nativeDrawer:{fn:function(e){var t=e.querySelector('div[jsaction="global.exit_full_screen"] div[role=dialog][aria-busy=true] div[role=link][jsaction$=".open_local_file_picker"]');if(t){var r=(0,u.default)(t,"[role=dialog]");if(r)return[r]}return[]}},searchBar:{interval:function(e,t){return 0===e&&t<6e4?300:12e4},fn:function(e){return e.querySelectorAll('nav[role=banner] div[jsaction*="scroll_to_top"] > :last-child > div:empty + div:not(:empty)')}},searchAutocompleteResults:{fn:function(e){return e.querySelectorAll('div[jsaction*="clickonly:global.empty_space_click"] div[role=listbox] ul:last-of-type')}},chatSidebar:{interval:function(e){return 0===e?5e3:12e4},fn:function(e){return[e.querySelector("#in")].filter(Boolean)}},appToolbarLocation:{interval:function(e,t){return 0===e&&t<6e4?300:12e4},fn:function(e){var t=e.querySelector('div[role=button][jsaction*="global.toggle_chat_roster"]'),r=t?t.parentElement.parentElement.parentElement:null;return r?[r]:[]}},inlineCompose:{fn:function(e){var t=Array.prototype.filter.call(e.querySelectorAll('div[role=main] div[role=list] div[role=listitem] div[jsvs] button[jsaction$=".quick_compose_popout_mole"]'),function(e){return"none"!==e.style.display}).map(function(e){return(0,u.default)(e,"[jsvs]")}),r=Array.prototype.map.call(e.querySelectorAll('div[role=main] div[role=list] ~ div div[jsvs] div[role=textbox][contenteditable=true][tabindex="0"], div[role=main] div[role=listitem][aria-multiselectable] div[jsvs] div[role=textbox][contenteditable=true][tabindex="0"]'),function(e){return(0,u.default)(e,"[jsvs]")});return(0,l.default)(t.concat(r))}},regularCompose:{fn:function(e){return Array.prototype.filter.call(e.querySelectorAll("div[role=dialog]:not(.inboxsdk__mole_view)"),function(e){return e.querySelector('div[jsaction^="compose"][jsaction$=".focus_mole"]')&&!(0,u.default)(e,'div[tabindex][jsaction*="exit_full_screen"]')})}},fullscreenCompose:{fn:function(e){return Array.prototype.filter.call(e.querySelectorAll('div[tabindex][jsaction*="exit_full_screen"] div[role=dialog]'),function(e){return e.querySelector('div[jsaction^="compose"][jsaction$=".focus_mole"]')})}}},watchers:[{sources:[null],tag:"leftNav",selectors:["body","[id][jsaction]","nav[aria-hidden]:not([role])","div[role=menu]"]},{sources:[null],tag:"topRow",selectors:["body","[id][jsaction]","div[jsaction]:not([role])","*",{$or:[["[role=main]"],[":not([role])","*","[role=main]"]]},"[role=application]","[role=list]","*","*",".scroll-list-section-body","[role=listitem]"]},{sources:["topRow"],tag:"bundleRow",selectors:[{$filter:function(e){return!/thread-/.test(e.getAttribute("data-item-id")||"")}}]},{sources:["topRow"],tag:"threadRow",selectors:[{$filter:function(e){return/thread-/.test(e.getAttribute("data-item-id")||"")}}]},{sources:["bundleRow"],tag:"threadRow",selectors:[{$watch:{attributeFilter:["aria-expanded"],cond:"[aria-expanded=true]"}},"[role=list]","*",":not([id])","*","*","[role=listitem]"]},{sources:["threadRow"],tag:"collapsedThreadRow",selectors:[{$watch:{attributeFilter:["class"],cond:":not(.scroll-list-item-open), .scroll-list-item-measuring-open"}},":first-child",{$map:function(e){return e.parentElement}}]},{sources:["threadRow"],tag:"thread",selectors:[{$watch:{attributeFilter:["class"],cond:".scroll-list-item-open"}}]},{sources:["thread"],tag:"message",selectors:["*",":not([role=heading])","[role=list]","div",{$watch:{attributeFilter:["role","data-msg-id"],cond:"[role=listitem][data-msg-id]"}}]},{sources:["message"],tag:"attachmentCard",selectors:["*","*","section","*",{$filter:function(e){return"none"!==e.style.display}},"div[tabindex]",{$filter:function(e){return"none"!==e.style.display}}]},{sources:["bundleRow","threadRow"],tag:"attachmentCard",selectors:["*","[jsaction]","[role=list][jsaction]","*","div[role=listitem]",{$watch:{attributeFilter:["tabindex"],cond:"[tabindex]"}},{$filter:function(e){return"none"!==e.style.display}}]},{sources:[null],tag:"attachmentOverlay",selectors:["body","iframe[id][frameborder]:not([src])",{$map:function(e){return e.contentDocument&&e.contentDocument.body}},"div[aria-label][role=dialog]",{$watch:{attributeFilter:["aria-hidden"],cond:":not([aria-hidden=true])"}}]},{sources:[null],tag:"chatSidebar",selectors:["body","[id][jsaction]","div[id]","div[class]","div.in#in"]},{sources:[null],tag:"searchAutocompleteResults",selectors:["body","[id][jsaction]","[id][jsaction]","div[class]","div[class]","[role=listbox]","ul:last-of-type"]},{sources:["thread"],tag:"inlineCompose",selectors:["*",":not([role=heading])",":not([role=list])","*","[jsvs]",{$map:function(e){var t=(0,s.default)(e.children,function(e){return"BUTTON"===e.nodeName});if(t)return t;var r=e.querySelector('div[jsaction="global.none"] > div[role=button]')
;if(r)return r.parentElement;i.default.error(new Error("inline compose button not found"),{el:e,html:(0,o.default)(e)})}},{$watch:{attributeFilter:["style"],cond:function(e){return"none"!==e.style.display}}},{$map:function(e){return e.parentElement}}]},{sources:[null],tag:"regularCompose",selectors:["body","div[id][jsaction]","div[id][class]:not([role])","div[class]","div[id]","div[jstcache][class]:not([aria-hidden]):not([tabindex])",{$map:function(e){var t=e.querySelector("div[role=dialog]:not(.inboxsdk__mole_view)");return t||i.default.error(new Error("compose dialog element not found"),{html:(0,o.default)(e)}),t}}]},{sources:[null],tag:"fullscreenCompose",selectors:["body","[id][jsaction]","div[id]:not([jsaction])",'div[tabindex][jsaction*="exit_full_screen"]',"*","*","*","*","*","[role=dialog]:not(.inboxsdk__drawer_view)"]},{sources:["searchBar"],tag:"listToolBar",selectors:[{$map:function(e){return e.parentElement}},"div:empty + div:not(:empty) + div","ul[jsaction]"]}]},d=c;r.default=d},{"../../../common/censorHTMLtree":607,"../../lib/logger":843,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"closest-ng":96,"lodash/find":458,"lodash/uniq":501,"transducers.js":595}],752:[function(e,t,r){"use strict";function n(){var e=(0,c.default)(['\n      <img src="','">\n      <span>\n        <span class="inboxsdk__search_suggestion_name" role="option">\n          ',"\n        </span>\n        ","\n      </span>\n    "]);return n=function(){return e},e}function i(){var e=(0,c.default)(['\n      <span class="inboxsdk__search_suggestion_desc">\n        ',"\n      </span>\n    "]);return i=function(){return e},e}function o(e,t){var r=(0,p.default)(),n=w();return(0,h.default)(e.getTagTree().getAllByTag("searchBar")).flatMap(function(e){var t=e.el,r=e.removalStream,n=(0,_.default)(t.getValue()).elements.searchInput;return n instanceof HTMLInputElement?f.default.constant({searchInput:n,searchInputRemovalStream:r}):f.default.never()}).flatMap(function(t){var r=t.searchInput,n=t.searchInputRemovalStream;return(0,h.default)(e.getTagTree().getAllByTag("searchAutocompleteResults")).takeUntilBy(n).map(function(e){var t=e.el,i=e.removalStream;return{searchInput:r,searchInputRemovalStream:n,resultsEl:t.getValue(),resultsElRemovalStream:i}})}).flatMap(function(e){var t=e.searchInput,r=e.searchInputRemovalStream,n=e.resultsEl,i=e.resultsElRemovalStream,o=f.default.fromEvents(t,"input").takeUntilBy(r).takeUntilBy(i),a=f.default.fromEvents(t,"keydown").filter(function(e){var t=e.keyCode;return 13===t||9===t}).takeUntilBy(r).takeUntilBy(i);return o.map(function(e){return{event:e,searchInput:t,resultsEl:n,inputStream:o,enterAndTabPresses:a,resultsElRemovalStream:i}})}).flatMapLatest(function(r){var n=e.getPageCommunicator().ajaxInterceptStream.filter(function(e){return"searchSuggestionsReceieved"===e.type}),i=f.default.merge([r.inputStream.take(1).flatMap(function(){return n}),r.inputStream.filter(function(e){return""===e.target.value}),r.resultsElRemovalStream]).take(1);return f.default.combine([f.default.fromPromise(u.default.resolve(t(r.event.target.value))),n.take(1)]).takeUntilBy(i).map(function(e){var t=(0,l.default)(e,2),n=t[0];t[1];return(0,s.default)({},r,{removalStream:i,results:n})})}).takeUntilBy(r).flatMap(function(t){var r=t.resultsEl,n=t.searchInput,i=t.resultsElRemovalStream,o=t.removalStream,a=t.enterAndTabPresses,s=t.results;try{var l=(0,v.default)(e,s);return f.default.constant({resultsEl:r,searchInput:n,resultsElRemovalStream:i,removalStream:o,enterAndTabPresses:a,results:l})}catch(e){return f.default.constantError(e)}}).filter(function(e){return e.results.length>0}).onError(function(t){return e.getLogger().error(t)}).onValue(function(t){var r=t.resultsEl,i=t.searchInput,o=t.resultsElRemovalStream,a=t.removalStream,s=t.enterAndTabPresses,l=t.results;(0,g.default)({resultsEl:r,resultsElRemovalStream:o,searchInput:i});var u=j({driver:e,searchInput:i,removalStream:a,results:l,providerOrder:n});(0,b.default)(r,u),r.style.display="block",r.style.padding="6px 0",a.onValue(function(){u.remove(),(""===i.value||r.matches(":empty"))&&(r.style.display="none")}),s.takeUntilBy(a).take(1).onValue(function(){r.style.display="none"}),(0,m.default)(r,{childList:!0}).takeUntilBy(s).takeUntilBy(a).onValue(function(){r.style.display="block",u.parentElement!==r&&(0,b.default)(r,u)})}),function(){return r.destroy()}}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=o;var s=a(e("@babel/runtime-corejs2/helpers/objectSpread")),l=a(e("@babel/runtime-corejs2/helpers/slicedToArray")),u=a(e("@babel/runtime-corejs2/core-js/promise")),c=a(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),d=a(e("@babel/runtime-corejs2/core-js/parse-int")),f=a(e("kefir")),p=(a(e("kefir-bus")),a(e("kefir-stopper"))),h=a(e("../../lib/toItemWithLifetimeStream")),m=a(e("../../lib/dom/make-mutation-observer-chunked-stream")),b=(a(e("../../lib/from-event-target-capture")),a(e("../../lib/dom/insert-element-in-order"))),_=a(e("./detection/searchBar/parser")),v=a(e("../../lib/copyAndValidateAutocompleteResults")),g=a(e("./setupCustomAutocompleteSelectionHandling")),y=a(e("auto-html")),w=function(){var e=document,t=e.documentElement;if(!t)throw new Error;var r=t.getAttribute("data-inboxsdk-search-provider-count"),n=(r?(0,d.default)(r)+1:0).toString();return t.setAttribute("data-inboxsdk-search-provider-count",n),n},k=function(e){var t=e.driver,r=e.searchInput,n=e.result;e.event;"function"==typeof n.onClick&&n.onClick(),"string"==typeof n.externalURL&&window.open(n.externalURL),n.routeName&&n.routeParams&&t.goto(n.routeName,n.routeParams),"string"==typeof n.searchTerm&&(r.value=n.searchTerm,r.dispatchEvent(new Event("input")))},j=function(e){var t=e.driver,r=e.searchInput,o=e.removalStream,a=e.results,s=e.providerOrder,l=document.createElement("div");return l.setAttribute("data-order-hint",s),l.classList.add("inboxsdk__search_suggestion_group"),a.forEach(function(e){var a=document.createElement("li"),s=e.description||e.descriptionHTML?(0,y.default)(i(),e.description||{__html:e.descriptionHTML}):"";a.classList.add("inboxsdk__search_suggestion"),a.innerHTML=(0,y.default)(n(),e.iconUrl||"//www.gstatic.com/images/icons/material/system/2x/search_black_24dp.png",e.name||{__html:e.nameHTML},{__html:s}),f.default.fromEvents(a,"click").takeUntilBy(o).onValue(function(n){return k({driver:t,searchInput:r,result:e,event:n})}),l.appendChild(a)}),l}},{"../../lib/copyAndValidateAutocompleteResults":801,"../../lib/dom/insert-element-in-order":809,"../../lib/dom/make-mutation-observer-chunked-stream":815,"../../lib/from-event-target-capture":831,"../../lib/toItemWithLifetimeStream":854,"./detection/searchBar/parser":739,"./setupCustomAutocompleteSelectionHandling":753,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/slicedToArray":54,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"auto-html":83,kefir:301,"kefir-bus":298,"kefir-stopper":300}],753:[function(e,t,r){"use strict";function n(e){var t=e.resultsEl,r=e.resultsElRemovalStream,n=e.searchInput;if(!t.hasAttribute(c)){t.setAttribute(c,"true");var i=n.parentElement;if(!i)throw new Error;var o=(0,l.default)(i,"keydown").takeUntilBy(r),a=o.filter(function(e){return 38===e.keyCode}),s=o.filter(function(e){return 40===e.keyCode}),b=o.filter(function(e){return 13===e.keyCode});a.onValue(function(e){var r=p(t),n=t.querySelector(".inboxsdk__search_suggestion.inboxsdk__selected"),i=n&&(0,u.default)(n,".inboxsdk__search_suggestion_group");if(!r)if(n&&i&&n.matches(":first-child")&&i.matches(":first-of-type"))n.classList.remove("inboxsdk__selected");else if(f(t)&&!n){e.stopPropagation();var o=t.querySelector(".inboxsdk__search_suggestion_group:last-of-type > .inboxsdk__search_suggestion:last-child");o&&o.classList.add("inboxsdk__selected")}else if(n&&i)if(e.stopPropagation(),n.classList.remove("inboxsdk__selected"),n.matches(":first-child")){var a=i.previousElementSibling,s=a&&a.querySelector(".inboxsdk__search_suggestion:last-child");s&&s.classList.add("inboxsdk__selected")}else{var l=n.previousElementSibling;l&&l.classList.add("inboxsdk__selected")}}),s.onValue(function(e){var r=p(t),n=t.querySelector(".inboxsdk__search_suggestion.inboxsdk__selected"),i=n&&(0,u.default)(n,".inboxsdk__search_suggestion_group");if(!r||r.matches(":last-of-type"))if(r)h(t);else if(n&&i&&n.matches(":last-child")&&i.matches(":last-of-type"))e.stopPropagation(),n.classList.remove("inboxsdk__selected");else if(n){if(n&&i)if(e.stopPropagation(),n.classList.remove("inboxsdk__selected"),n.matches(":last-child")){var o=i.nextElementSibling,a=o&&o.querySelector(".inboxsdk__search_suggestion:first-child");a&&a.classList.add("inboxsdk__selected")}else{var s=n.nextElementSibling;s&&s.classList.add("inboxsdk__selected")}}else{if(d(t))return;h(t)}}),b.onValue(function(e){var r=t.querySelector(".inboxsdk__search_suggestion.inboxsdk__selected");r&&(e.stopPropagation(),r.dispatchEvent(new MouseEvent("click")))}),o.onEnd(function(){return t.removeAttribute(c)}),m(t,r)}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/parse-float")),a=i(e("@babel/runtime-corejs2/core-js/array/from")),s=i(e("kefir")),l=i(e("../../lib/from-event-target-capture")),u=i(e("closest-ng")),c="data-inboxsdk-selection-master-claimed",d=function(e){return e.querySelectorAll("li:not(.inboxsdk__search_suggestion)").length>0},f=function(e){return e.querySelectorAll(".inboxsdk__search_suggestion").length>0},p=function(e){var t=e.querySelectorAll("li:not(.inboxsdk__search_suggestion)");return(0,a.default)(t).find(function(e){var t=getComputedStyle(e),r=t.backgroundColor,n=r.match(/([\d.]+)/g);return n&&(0,o.default)(n[3])>0})},h=function(e){var t=e.querySelector(".inboxsdk__search_suggestion_group:first-of-type > .inboxsdk__search_suggestion:first-child");t&&t.classList.add("inboxsdk__selected")},m=function(e,t){s.default.fromEvents(e,"mouseover").takeUntilBy(t).map(function(e){var t=e.target;return(0,u.default)(t,".inboxsdk__search_suggestion:not(.inboxsdk__selected)")}).filter(Boolean).onValue(function(t){var r=e.querySelectorAll(".inboxsdk__search_suggestion.inboxsdk__selected");(0,a.default)(r).forEach(function(e){return e.classList.remove("inboxsdk__selected")}),t.classList.add("inboxsdk__selected")}),s.default.fromEvents(e,"mouseout").takeUntilBy(t).map(function(e){var t=e.target;return(0,u.default)(t,".inboxsdk__search_suggestion.inboxsdk__selected")}).filter(Boolean).onValue(function(e){return e.classList.remove("inboxsdk__selected")})}},{"../../lib/from-event-target-capture":831,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-float":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"closest-ng":96,kefir:301}],754:[function(e,t,r){"use strict";function n(e){var t=e.getCustomRouteIDs(),r=null;return e.getStopper().onValue(function(){r&&r.destroy()}),a.default.merge([a.default.merge([a.default.fromEvents(document,"inboxSDKpushState"),a.default.fromEvents(window,"popstate")]).map(function(e){return document.location.href}),a.default.fromEvents(window,"hashchange").map(function(e){return e.newURL}).filter(function(e){return/#/.test(e)})]).toProperty(function(){return document.location.href}).map(function(e){var r=/#([^?]*)/.exec(e);if(!r)return{type:"NATIVE"};var n=r[1],i=!0,a=!1,s=void 0;try{for(var l,c=(0,o.default)(t);!(i=(l=c.next()).done);i=!0){var d=l.value,f=(0,u.default)(d,n);if(f)return{hash:n,type:"CUSTOM",routeID:f}}}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}return{type:"OTHER_APP_CUSTOM"}}).map(function(t){return"CUSTOM"===t.type?new s.default(t.routeID,t.hash):"NATIVE"===t.type?(e.showNativeRouteView(),new l.default("NATIVE")):"OTHER_APP_CUSTOM"===t.type?new l.default("OTHER_APP_CUSTOM"):(e.getLogger().error(new Error("should not happen")),new l.default("UNKNOWN"))}).map(function(e){return r&&r.destroy(),r=e,e})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/get-iterator")),a=i(e("kefir")),s=(i(e("./inbox-driver")),i(e("./views/inbox-route-view")),i(e("./views/inbox-custom-route-view"))),l=i(e("./views/inbox-dummy-route-view")),u=i(e("../../lib/routeIDmatchesHash"))},{"../../lib/routeIDmatchesHash":849,"./inbox-driver":747,"./views/inbox-custom-route-view":768,"./views/inbox-dummy-route-view":771,"./views/inbox-route-view":774,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],755:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/assign")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=n(e("lodash/isEqual")),c=n(e("../../../driver-common/update-icon")),d=n(e("../../../lib/dom/querySelectorOrFail")),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e),(0,s.default)(this,"_element",void 0),(0,s.default)(this,"_labelDescriptor",void 0),(0,s.default)(this,"_iconSettings",void 0),this._element=document.createElement("div"),this._element.className="inboxsdk__inbox_thread_row_label "+(t.classes||[]).join(" "),this._element.innerHTML="<span></span>",this._labelDescriptor={},this._iconSettings={}}return(0,a.default)(e,[{key:"getElement",value:function(){return this._element}},{key:"updateLabelDescriptor",value:function(e){this._handleNewLabelDescriptor(e)}},{key:"_handleNewLabelDescriptor",value:function(e){if(!e)return void(this._labelDescriptor={});e=(0,i.default)({foregroundColor:"rgb(102, 102, 102)",backgroundColor:"rgb(221, 221, 221)"},e),(0,u.default)(this._labelDescriptor,e)||((0,c.default)(this._iconSettings,this._element,!1,e.iconClass,e.iconUrl),e.iconClass||e.iconUrl?this._element.classList.add("inboxsdk__label_has_icon"):this._element.classList.remove("inboxsdk__label_has_icon"),this._updateBackgroundColor(e.backgroundColor),this._updateForegroundColor(e.foregroundColor),this._updateIconBackgroundColor(e.iconBackgroundColor),this._updateTitle(e.title),this._labelDescriptor=e)}},{key:"_updateBackgroundColor",value:function(e){this._labelDescriptor.backgroundColor!==e&&(this._element.style.backgroundColor=e)}},{key:"_updateForegroundColor",value:function(e){this._labelDescriptor.foregroundColor!==e&&(this._element.style.color=e)}},{key:"_updateIconBackgroundColor",value:function(e){var t=this.getElement().querySelector(".inboxsdk__button_icon");t&&(t.style.backgroundColor=e||"")}},{key:"_updateTitle",value:function(e){this._labelDescriptor.title!==e&&((0,d.default)(this._element,"span").textContent=e)}}]),e}(),p=(0,l.defn)(t,f);r.default=p},{"../../../driver-common/update-icon":795,"../../../lib/dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/isEqual":474,ud:597}],756:[function(e,t,r){"use strict";function n(e){return!e.classList.contains("inboxsdk__mole_view")&&e.hasAttribute("jsaction")}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),a=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),s=i(e("@babel/runtime-corejs2/helpers/inherits")),l=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=i(e("@babel/runtime-corejs2/helpers/createClass")),c=i(e("@babel/runtime-corejs2/helpers/defineProperty")),d=i(e("asap")),f=e("ud"),p=i(e("lodash/find")),h=i(e("react")),m=i(e("react-dom")),b=i(e("kefir")),_=i(e("kefir-stopper")),v=i(e("../../../lib/dom/make-mutation-observer-chunked-stream")),g=i(e("../../../lib/dom/querySelectorOrFail")),y=i(e("../../../lib/from-event-target-capture")),w=i(e("../../../lib/react/ElementContainer")),k=i(e("../../../lib/dom/reemitClickEventForReact")),j=i(e("kefir-bus")),x=function(){function e(t,r){(0,l.default)(this,e),(0,c.default)(this,"_driver",void 0),(0,c.default)(this,"_options",void 0),(0,c.default)(this,"_stopper",(0,_.default)()),(0,c.default)(this,"_eventStream",(0,j.default)()),(0,c.default)(this,"_element",void 0),(0,c.default)(this,"_title",void 0),this._options=t,this._driver=r,this._element=document.createElement("div"),this._element.className="inboxsdk__mole_view "+(t.className||""),this._element.setAttribute("jsaction","global.none"),this._title=String(this._options.title||""),this._render(),this._element.firstElementChild.style.zIndex="1",b.default.fromEvents(this._element,"click").takeUntilBy(this._stopper).onValue(function(e){(0,k.default)(e)})}return(0,u.default)(e,[{key:"_render",value:function(){var e=this;m.default.render(h.default.createElement(S,{title:this._title,titleEl:this._options.titleEl,el:this._options.el,chrome:this._options.chrome,titleButtons:this._options.titleButtons,minimized:this.getMinimized(),onClose:function(){(0,d.default)(function(){e.destroy()})},onSetMinimize:function(t){return e.setMinimized(t)}}),this._element)}},{key:"show",value:function(){var e=this;if(this._element.parentElement)throw new Error("show was called twice");var t=document.getElementById("OPOhoe");if(!t){var r=new Error("could find element to insert moleview into");throw this._driver.getLogger().error(r),r}t.insertBefore(this._element,t.firstElementChild),(0,d.default)(function(){e._setupWidth()}),(0,v.default)(t,{childList:!0}).takeUntilBy(this._stopper).onValue(function(r){r.some(function(e){return Array.prototype.some.call(e.addedNodes,function(e){return 1===e.nodeType&&!e.classList.contains("inboxsdk__mole_view")})})&&t.insertBefore(e._element,t.firstElementChild),e._setupWidth()}),(0,v.default)(this._options.el,{attributes:!0,attributeFilter:["class","style"]}).takeUntilBy(this._stopper).onValue(function(){e._setupWidth()}),b.default.fromEvents(this._element,"click").merge((0,y.default)(this._element,"focus")).takeUntilBy(this._stopper).onValue(function(){e._bringToFront()})}},{key:"_setupWidth",value:function(){var e=this,t=(0,g.default)(this._element,".inboxsdk__mole_view_inner").getBoundingClientRect().width;(0,d.default)(function(){e._element.style.width=t+"px";var r=e._element.parentElement;r&&Array.prototype.indexOf.call(r.children,e._element)===r.children.length-2?e._element.style.paddingLeft=t+"px":e._element.style.paddingLeft=""})}},{key:"_bringToFront",value:function(){var e=this;if(!this._element.classList.contains("inboxsdk__mole_at_front")){this._element.classList.add("inboxsdk__mole_at_front");var t=this._element.parentElement;if(!(t instanceof HTMLElement))throw new Error("mole not in document");var r=Array.prototype.indexOf.call(t.children,this._element);if(r<0)throw new Error("should not happen");var i=t.children.length,o=(0,p.default)(t.children,n);o&&o.dispatchEvent(new FocusEvent("focus")),Array.prototype.forEach.call(t.children,function(t,n){if(t.classList.contains("inboxsdk__mole_view")){t!==e._element&&t.classList.remove("inboxsdk__mole_at_front");var o=(0,p.default)(t.children,function(e){return e.style.zIndex});o&&(o.style.zIndex=String(n>r?i-(n-r):i))}}),b.default.merge([o?(0,y.default)(o,"focus"):null,(0,v.default)(t,{childList:!0}).filter(function(e){return e.some(function(e){return e.addedNodes.length>0})})].concat(Array.prototype.map.call(t.children,function(e){var t=(0,p.default)(e.children,function(e){return e.style.zIndex});if(!t)return null;var r=t.style.zIndex;return(0,v.default)(t,{attributes:!0,attributeFilter:["style"]}).filter(function(){return t.style.zIndex!==r})})).filter(Boolean)).takeUntilBy(this._stopper).take(1).onValue(function(){e._element.classList.contains("inboxsdk__mole_at_front")&&(e._element.classList.remove("inboxsdk__mole_at_front"),Array.prototype.forEach.call(t.children,function(e){if(!n(e)){var t=(0,p.default)(e.children,function(e){return e.style.zIndex});t&&(t.style.zIndex="1")}}))})}}},{key:"setTitle",value:function(e){this._title=String(e),this._render()}},{key:"setMinimized",value:function(e){e?(this._element.classList.add("inboxsdk__minimized"),this._render(),this._eventStream.emit({eventName:"minimize"})):(this._element.classList.remove("inboxsdk__minimized"),this._render(),this._eventStream.emit({eventName:"restore"}))}},{key:"getMinimized",value:function(){return this._element.classList.contains("inboxsdk__minimized")}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"destroy",value:function(){m.default.unmountComponentAtNode(this._element),this._stopper.destroy(),this._eventStream.end(),this._element.remove()}}]),e}(),E=(0,f.defn)(t,x);r.default=E;var S=function(e){function t(){return(0,l.default)(this,t),(0,o.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,s.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=null;if(!1!==this.props.chrome){var r;r=this.props.minimized&&this.props.minimizedTitleEl?h.default.createElement(w.default,{className:"inboxsdk__mole_view_title",el:this.props.minimizedTitleEl}):this.props.titleEl?h.default.createElement(w.default,{className:"inboxsdk__mole_view_title",el:this.props.titleEl}):h.default.createElement("div",{className:"inboxsdk__mole_view_title"},this.props.title);var n=(this.props.titleButtons||[]).map(function(e,t){return h.default.createElement("button",{type:"button",key:t,title:e.title,className:"inboxsdk__mole_custom_title_button",onClick:function(t){t.stopPropagation(),e.onClick()}},h.default.createElement("img",{className:e.iconClass,src:e.iconUrl,alt:"","aria-hidden":"true"}))});t=h.default.createElement("div",{className:"inboxsdk__mole_view_titlebar",onClick:function(){e.props.minimized&&e.props.onSetMinimize(!1)}},r,h.default.createElement("div",{className:"inboxsdk__mole_title_buttons"},h.default.createElement("button",{type:"button",style:{display:this.props.minimized?"none":""},title:"Minimize",onClick:function(){return e.props.onSetMinimize(!0)}},h.default.createElement("img",{srcSet:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/btw_ic_minimize_white_18dp_2x.png 2x",alt:"","aria-hidden":"true",src:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/1x/btw_ic_minimize_white_18dp.png"})),h.default.createElement("button",{type:"button",style:{display:this.props.minimized?"":"none"},title:"Expand",onClick:function(){return e.props.onSetMinimize(!1)}},h.default.createElement("img",{srcSet:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/btw_ic_maximize_white_18dp_2x.png 2x",alt:"","aria-hidden":"true",src:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/1x/btw_ic_maximize_white_18dp.png"})),n,h.default.createElement("button",{type:"button",title:"Close",onClick:function(){return e.props.onClose()}},h.default.createElement("img",{srcSet:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/btw_ic_close_white_12dp_2x.png 2x",alt:"","aria-hidden":"true",src:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/1x/btw_ic_close_white_12dp.png"}))))}return h.default.createElement("div",{className:"inboxsdk__mole_view_mid"},h.default.createElement("div",{className:"inboxsdk__mole_view_inner"},t,h.default.createElement(w.default,{className:"inboxsdk__mole_view_content",el:this.props.el})))}}]),t}(h.default.Component)},{"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/dom/reemitClickEventForReact":822,"../../../lib/from-event-target-capture":831,"../../../lib/react/ElementContainer":847,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,asap:77,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/find":458,react:580,"react-dom":553,ud:597}],757:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=e("ud"),l=n(e("lodash/includes")),u=n(e("kefir")),c=n(e("kefir-stopper")),d=n(e("../../../lib/from-event-target-capture")),f=n(e("../../../widgets/buttons/dropdown-view")),p=n(e("./inbox-dropdown-view")),h=n(e("../../../lib/dom/insert-element-in-order")),m=0,b=function(){function e(t,r,n){var o=this;(0,i.default)(this,e),(0,a.default)(this,"_stopper",(0,c.default)()),(0,a.default)(this,"_buttonEl",void 0);var s=this._buttonEl=document.createElement("li");s.setAttribute("role","button"),s.setAttribute("data-insertion-order-hint",String(m++)),s.setAttribute("data-group-order-hint",r),s.tabIndex=0,s.className="inboxsdk__button_icon";var b=document.createElement("img");b.className="inboxsdk__button_iconImg";var _=function(e){},v=!1,g=null;u.default.merge([u.default.fromEvents(s,"click"),(0,d.default)(s,"keyup").filter(function(e){return(0,l.default)([32,13],e.which)})]).onValue(function(e){if(e.preventDefault(),e.stopPropagation(),v){if(g)return void g.close();o._buttonEl.classList.add("inboxsdk__active"),g=new f.default(new p.default,s),g.setPlacementOptions({position:"bottom",hAlign:"right",vAlign:"top",buffer:10}),g.on("destroy",function(){o._buttonEl.classList.remove("inboxsdk__active"),g=null})}_({dropdown:g})});var y=null;v=t.hasDropdown,s.title=t.title,s.className="inboxsdk__button_icon "+(t.iconClass||""),_=t.onClick,t.iconUrl?(b.src=t.iconUrl,s.appendChild(b)):b.remove();var w=t.orderHint||0;y!==w&&(y=w,s.setAttribute("data-order-hint",String(w)),(0,h.default)(n,s,void 0,!0)),this._stopper.onValue(function(){s.remove(),g&&g.close()})}return(0,o.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}}]),e}(),_=(0,s.defn)(t,b);r.default=_},{"../../../lib/dom/insert-element-in-order":809,"../../../lib/from-event-target-capture":831,"../../../widgets/buttons/dropdown-view":893,"./inbox-dropdown-view":770,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300,"lodash/includes":466,ud:597}],758:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=e("ud"),l=(n(e("kefir")),n(e("kefir-stopper"))),u=n(e("./InboxToolbarButtonView")),c=function(){function e(t,r,n){(0,i.default)(this,e),(0,a.default)(this,"_stopper",(0,l.default)()),(0,a.default)(this,"_el",void 0),(0,a.default)(this,"_driver",void 0),(0,a.default)(this,"_inboxThreadView",void 0),this._el=t,this._driver=r,this._inboxThreadView=n,this._el.classList.add("inboxsdk__list_toolbar")}return(0,o.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getThreadRowViewDrivers",value:function(){return this._driver.getThreadRowViewDriverLiveSet().values()}},{key:"getRouteViewDriver",value:function(){return this._driver.getCurrentRouteViewDriver()}},{key:"isForRowList",value:function(){return null==this._inboxThreadView}},{key:"isForThread",value:function(){return null!=this._inboxThreadView}},{key:"getThreadViewDriver",value:function(){if(!this._inboxThreadView)throw new Error("this toolbarview is not for a thread");return this._inboxThreadView}},{key:"addButton",value:function(e,t){var r=new u.default(e,this._driver.getAppId(),this._el);return this._stopper.takeUntilBy(r.getStopper()).onValue(function(){r.destroy()}),r}}]),e}(),d=(0,s.defn)(t,c);r.default=d},{"./InboxToolbarButtonView":757,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300,ud:597}],759:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/json/stringify")),o=n(e("@babel/runtime-corejs2/core-js/set")),a=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=n(e("@babel/runtime-corejs2/helpers/createClass")),l=n(e("@babel/runtime-corejs2/helpers/defineProperty")),u=n(e("lodash/findIndex")),c=e("ud"),d=(n(e("auto-html")),n(e("kefir"))),f=n(e("kefir-stopper")),p=n(e("react")),h=n(e("react-dom")),m=(n(e("../../../lib/fake-window-resize")),n(e("../../../../common/find-parent"))),b=n(e("../getSidebarClassnames")),_=(n(e("../../../lib/delay-asap")),n(e("../waitForAnimationClickBlockerGone"))),v=n(e("../../../lib/dom/make-mutation-observer-chunked-stream")),g=n(e("../../../lib/from-event-target-capture")),y=n(e("order-manager")),w=n(e("../../../lib/idMap")),k=n(e("../../../lib/dom/querySelectorOrFail")),j=n(e("../../../lib/incrementName")),x=n(e("../../../driver-common/sidebar/AppSidebar")),E=n(e("../../../driver-common/sidebar/ContentPanelViewDriver")),S=function(){function e(t){var r=this;(0,a.default)(this,e),(0,l.default)(this,"_stopper",(0,f.default)()),(0,l.default)(this,"_driver",void 0),(0,l.default)(this,"_el",void 0),(0,l.default)(this,"_mainParent",void 0),(0,l.default)(this,"_openOrOpeningProp",void 0),this._driver=t;var n=document.querySelector("."+(0,w.default)("app_sidebar_container"));n?this._el=n:this._createElement();var i=(0,m.default)((0,k.default)(document,"[role=application]"),function(e){return e.parentElement===document.body});if(!i){var o=new Error("Failed to find main parent");throw this._driver.getLogger().errorSite(o),o}this._mainParent=i,this._openOrOpeningProp=(0,v.default)(this._el,{attributes:!0,attributeFilter:["data-open","data-is-opening"]}).toProperty(function(){return null}).map(function(){return"true"===r._el.getAttribute("data-open")||"true"===r._el.getAttribute("data-is-opening")}).skipDuplicates()}return(0,s.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"open",value:function(){this._setShouldAppSidebarOpen(!0),this._setOpenedNow(!0)}
},{key:"close",value:function(){this._setShouldAppSidebarOpen(!1),this._setOpenedNow(!1)}},{key:"getOpenOrOpeningStream",value:function(){return this._openOrOpeningProp}},{key:"_getShouldAppSidebarOpen",value:function(){return"true"===localStorage.getItem("inboxsdk__app_sidebar_should_open")}},{key:"_setShouldAppSidebarOpen",value:function(e){try{localStorage.setItem("inboxsdk__app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_createElement",value:function(){var e=this,t=this._el=document.createElement("div");if(t.className=(0,w.default)("app_sidebar_container"),t.setAttribute("data-open","false"),t.setAttribute("data-is-opening","false"),document.body.appendChild(t),!document.body.querySelector("."+(0,w.default)("app_sidebar_waiting_platform"))){var r=document.createElement("div");r.className=(0,w.default)("app_sidebar_waiting_platform"),document.body.appendChild(r)}(0,g.default)(this._driver.getChatSidebarButton(),"click").filter(function(){return"true"===t.getAttribute("data-open")&&"SIDEBAR"===e._driver.getCurrentChatSidebarView().getMode()}).takeUntilBy(this._stopper).onValue(function(t){t.stopImmediatePropagation(),e._setShouldAppSidebarOpen(!1),e._setOpenedNow(!1)}),this._driver.getCurrentChatSidebarView().getModeStream().changes().takeUntilBy(this._stopper).onValue(function(r){"SIDEBAR"===r?(e._setShouldAppSidebarOpen(!1),e._setOpenedNow(!1)):"true"===t.getAttribute("data-open")&&e._setOpenedNow(!0)});var n,a=new o.default,s=new y.default({get:function(){try{return JSON.parse(localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch(e){console.error("failed to read sidebar order data",e)}},set:function(e){try{localStorage.setItem("inboxsdk__sidebar_ordering",(0,i.default)(e))}catch(e){console.error("failed to set sidebar order data",e)}}}),l=function(e){e&&(n=e)},c=function r(){h.default.render(p.default.createElement(x.default,{ref:l,panels:s.getOrderedItems().map(function(e){return e.value}),onClose:function(){e._setShouldAppSidebarOpen(!1),e._setOpenedNow(!1)},onOutsideClick:function(){e._driver.closeOpenThread()},onMoveEnd:function(e,t,n,i){s.moveItem(n,i),r()}}),t)};c(),d.default.fromEvents(window,"storage").filter(function(e){return"inboxsdk__sidebar_ordering"===e.key}).takeUntilBy(this._stopper).onValue(function(){s.reload(),c()}),this._stopper.onValue(function(){h.default.unmountComponentAtNode(t),t.remove()}),d.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").takeUntilBy(this._stopper).onValue(function(e){for(var t=e.detail.id;a.has(t);)t=(0,j.default)(t);a.add(t),s.addItem({groupId:e.detail.appId,id:t,orderHint:e.detail.orderHint,value:{id:t,appId:e.detail.appId,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}}),c()}),d.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").takeUntilBy(this._stopper).onValue(function(e){var t=s.getOrderedItems(),r=(0,u.default)(t,function(t){return t.value.instanceId===e.detail.instanceId});if(-1===r)throw new Error("should not happen: failed to find orderItem");s.updateItemValueByIndex(r,{id:t[r].value.id,appId:e.detail.appId,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}),c()}),d.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").takeUntilBy(this._stopper).onValue(function(t){var r=s.getOrderedItems(),n=(0,u.default)(r,function(e){return e.value.instanceId===t.detail.instanceId});if(-1===n)throw new Error("should not happen: failed to find orderItem");a.delete(r[n].id),s.removeItemByIndex(n),0===s.getOrderedItems().length&&e._setOpenedNow(!1),c()}),d.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").takeUntilBy(this._stopper).onValue(function(e){n.scrollPanelIntoView(e.detail.instanceId)})}},{key:"_setOpenedNow",value:function(e){this._el.setAttribute("data-open",String(e));var t=(0,b.default)(),r=t.chat;r&&(e?"SIDEBAR"===this._driver.getCurrentChatSidebarView().getMode()||this._mainParent.classList.contains(r)||(this._mainParent.classList.add(r),this._driver.getPageCommunicator().fakeWindowResize()):"SIDEBAR"!==this._driver.getCurrentChatSidebarView().getMode()&&this._mainParent.classList.contains(r)&&(this._mainParent.classList.remove(r),this._driver.getPageCommunicator().fakeWindowResize()))}},{key:"_setOpenedAfterAnimation",value:function(e){var t=this;this._el.setAttribute("data-is-opening","true"),(0,_.default)().takeUntilBy(this._stopper).takeUntilBy((0,v.default)(this._el,{attributes:!0,attributeFilter:["data-open"]})).onValue(function(){t._setOpenedNow(e)}).onEnd(function(){t._el.setAttribute("data-is-opening","false")})}},{key:"addSidebarContentPanel",value:function(e){var t=new E.default(this._driver,e,"inbox");return("SIDEBAR"===this._driver.getCurrentChatSidebarView().getMode()||this._getShouldAppSidebarOpen())&&this._setOpenedAfterAnimation(!0),this._stopper.takeUntilBy(t.getStopper()).onValue(function(){t.remove()}),t}}]),e}(),C=(0,c.defn)(t,S);r.default=C},{"../../../../common/find-parent":609,"../../../driver-common/sidebar/AppSidebar":793,"../../../driver-common/sidebar/ContentPanelViewDriver":794,"../../../lib/delay-asap":803,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/fake-window-resize":830,"../../../lib/from-event-target-capture":831,"../../../lib/idMap":835,"../../../lib/incrementName":837,"../getSidebarClassnames":744,"../waitForAnimationClickBlockerGone":779,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"auto-html":83,kefir:301,"kefir-stopper":300,"lodash/findIndex":459,"order-manager":510,react:580,"react-dom":553,ud:597}],760:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/promise")),o=n(e("@babel/runtime-corejs2/core-js/parse-int")),a=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=n(e("@babel/runtime-corejs2/helpers/createClass")),l=n(e("@babel/runtime-corejs2/helpers/defineProperty")),u=n(e("lodash/find")),c=n(e("lodash/includes")),d=e("ud"),f=n(e("kefir")),p=n(e("kefir-stopper")),h=n(e("../../../widgets/buttons/dropdown-view")),m=n(e("./inbox-app-toolbar-tooltip-view")),b=n(e("../../../lib/toItemWithLifetimeStream")),_=n(e("../../../lib/dom/set-css")),v=function(){function e(t,r,n){var i=this;(0,a.default)(this,e),(0,l.default)(this,"_buttonDescriptor",null),(0,l.default)(this,"_buttonDescriptorStream",void 0),(0,l.default)(this,"_buttonEl",null),(0,l.default)(this,"_activeDropdown",null),(0,l.default)(this,"_stopper",(0,p.default)()),(0,l.default)(this,"_ready",(0,p.default)()),this._buttonDescriptorStream=t.toProperty().takeUntilBy(this._stopper),f.default.combine([(0,b.default)(n).take(1),(0,b.default)(r).take(1)],[],function(e){return e}).map(function(e){return e.el.getValue()}).takeUntilBy(this._stopper).onValue(function(e){return i._adjustSearchBarMargin(e)}),(0,b.default)(r).take(1).map(function(e){return e.el.getValue()}).takeUntilBy(this._stopper).onValue(function(e){return i._setupButton(e)})}return(0,s.default)(e,[{key:"_setupButton",value:function(e){var t=this,r=(0,u.default)(e.children,function(e){return e.classList.contains("inboxsdk__appButton_container")});r||(r=document.createElement("div"),r.className="inboxsdk__appButton_container",e.insertBefore(r,e.firstChild));var n=document.createElement("div");n.tabIndex=0,n.setAttribute("role","button"),n.className="inboxsdk__appButton inboxsdk__button_icon";var i=document.createElement("img");i.className="inboxsdk__button_iconImg",n.appendChild(i),this._buttonDescriptorStream.onValue(function(e){n.title=e.title,i.src=e.iconUrl,i.className="inboxsdk__button_iconImg ".concat(e.iconClass||""),t._buttonDescriptor=e}),f.default.merge([f.default.fromEvents(n,"click"),f.default.fromEvents(n,"keypress").filter(function(e){return(0,c.default)([32,13],e.which)})]).takeUntilBy(this._stopper).onValue(function(e){e.preventDefault(),e.stopPropagation(),t._activeDropdown?t.close():t._buttonDescriptor&&!1===t._buttonDescriptor.hasDropdown?t._buttonDescriptor&&t._buttonDescriptor.onClick&&t._buttonDescriptor.onClick():t.open()}),r.insertBefore(n,r.firstChild),this._buttonEl=n,this._ready.destroy(),this._stopper.onValue(function(){n.remove()})}},{key:"_adjustSearchBarMargin",value:function(e){function t(e){if(document.documentElement.setAttribute(n,String(e)),e<=0)return void(0,_.default)("dynamic_resize_searchbar","");var t=e>r?"!important":"",i=1394+3.575*e,o="\n@media (max-width: ".concat(i,"px) {\n  .").concat(a," {\n    margin-right: ").concat(e,"px").concat(t,";\n  }\n}\n.inboxsdk__appButton_container + * + * ~ *:not(.inboxsdk_escape_mod) {\n  margin-right: ").concat(e,"px").concat(t,";\n}\n");(0,_.default)("dynamic_resize_searchbar",o)}var r=70,n="data-inboxsdk-searchbar-min-margin-right",i=40+(0,o.default)(document.documentElement.getAttribute(n)||"0"),a="inboxsdk__dynamic_resize_searchbar";t(i),e.classList.add(a);var s=e.nextElementSibling;s&&s.classList.add(a),this._stopper.onValue(function(){t((0,o.default)(document.documentElement.getAttribute(n)||"0")-40)})}},{key:"open",value:function(){var e=this;if(!this._activeDropdown){var t=this._buttonEl;if(!t)throw new Error("should not happen");t.classList.add("inboxsdk__active");var r=this._buttonDescriptor||{},n=r.arrowColor,i=this._activeDropdown=new h.default(new m.default(t,n),t);i.once("destroy",function(){e._activeDropdown=null,t.classList.remove("inboxsdk__active")});var o={dropdown:i};this._buttonDescriptor&&this._buttonDescriptor.onClick&&this._buttonDescriptor.onClick.call(null,o)}}},{key:"close",value:function(){this._activeDropdown&&this._activeDropdown.close()}},{key:"waitForReady",value:function(){var e=this;return this._ready.map(function(){return e}).merge(this._stopper.flatMap(function(){return f.default.constantError(new Error("InboxAppToolbarButtonView was destroyed early"))})).take(1).takeErrors(1).toPromise(i.default)}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._stopper.destroy()}}]),e}(),g=(0,d.defn)(t,v);r.default=g},{"../../../lib/dom/set-css":823,"../../../lib/toItemWithLifetimeStream":854,"../../../widgets/buttons/dropdown-view":893,"./inbox-app-toolbar-tooltip-view":761,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300,"lodash/find":458,"lodash/includes":466,ud:597}],761:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=e("ud"),l=(n(e("kefir")),n(e("kefir-stopper"))),u=function(){function e(t,r){(0,i.default)(this,e),(0,a.default)(this,"_stopper",(0,l.default)()),(0,a.default)(this,"_anchorElement",void 0),(0,a.default)(this,"_el",void 0),(0,a.default)(this,"_containerEl",void 0),(0,a.default)(this,"_arrowEl",void 0),this._anchorElement=t,this._arrowEl=document.createElement("div"),this._arrowEl.className="inboxsdk__tooltip_arrow inboxsdk__bottom",document.body.appendChild(this._arrowEl),r&&(this._arrowEl.style.borderColor=r),this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__appButton_tooltip_container",this._el=document.createElement("div"),this._el.className="inboxsdk__appButton_tooltip",this._el.setAttribute("role","region"),this._containerEl.appendChild(this._el),document.body.appendChild(this._containerEl),this._reposition()}return(0,o.default)(e,[{key:"_reposition",value:function(){var e=this._anchorElement.getBoundingClientRect(),t=e.left+e.width/2;this._arrowEl.style.top="".concat(e.bottom+18,"px"),this._arrowEl.style.right="".concat(window.innerWidth-e.right+e.width/2-this._arrowEl.offsetWidth/2-1,"px"),this._containerEl.style.top="".concat(e.bottom+17,"px"),this._containerEl.style.minWidth="".concat(2*(window.innerWidth-t-30),"px")}},{key:"getDropdownOptions",value:function(){return{manualPosition:!0,extraElementsToIgnore:[this._arrowEl]}}},{key:"getContentElement",value:function(){return this._el}},{key:"getContainerElement",value:function(){return this._containerEl}},{key:"destroy",value:function(){this._containerEl.remove(),this._arrowEl.remove(),this._stopper.destroy()}}]),e}(),c=(0,s.defn)(t,u);r.default=c},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300,ud:597}],762:[function(e,t,r){"use strict";function n(){var e=(0,c.default)(['\n          <img src="','">\n        ']);return n=function(){return e},e}function i(){var e=(0,c.default)(['\n          <div class="inboxsdk__attachment_card_nohover">\n            <div class="inboxsdk__attachment_card_title">','</div>\n            <div class="inboxsdk__attachment_card_description">\n              <img alt="" aria-hidden="true" src="','">\n              <span>','</span>\n            </div>\n          </div>\n          <div class="inboxsdk__attachment_card_hover_overlay">\n            <div class="inboxsdk__attachment_card_title">','</div>\n            <div class="inboxsdk__attachment_card_buttons"></div>\n          </div>\n        ']);return i=function(){return e},e}function o(){var e=(0,c.default)(['\n          <img alt="" aria-hidden="true"\n            style="width: 100%"\n            src="','"\n            >\n          <div class="inboxsdk__attachment_card_hover_overlay">\n            <div class="inboxsdk__attachment_card_title">','</div>\n            <div class="inboxsdk__attachment_card_buttons"></div>\n          </div>\n        ']);return o=function(){return e},e}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=a(e("@babel/runtime-corejs2/helpers/objectSpread")),c=a(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),d=a(e("@babel/runtime-corejs2/helpers/classCallCheck")),f=a(e("@babel/runtime-corejs2/helpers/createClass")),p=a(e("@babel/runtime-corejs2/helpers/defineProperty")),h=a(e("lodash/includes")),m=e("ud"),b=a(e("auto-html")),_=a(e("kefir")),v=(a(e("kefir-bus")),a(e("kefir-stopper"))),g=a(e("../../../../common/find-parent")),y=a(e("../../../lib/dom/querySelectorOrFail")),w=function(){function e(t,r){var n=this;(0,d.default)(this,e),(0,p.default)(this,"_stopper",(0,v.default)()),(0,p.default)(this,"_previewClicks",_.default.pool()),(0,p.default)(this,"_element",void 0),(0,p.default)(this,"_driver",void 0),(0,p.default)(this,"_type",void 0),(0,p.default)(this,"_p",void 0),(0,p.default)(this,"_messageViewDriver",void 0),(0,p.default)(this,"_addedButtonDescriptors",[]),(0,p.default)(this,"_overlayView",null),this._driver=r,t.element?(this._element=t.element,this._p=t.parsed,this._type=t.parsed.attributes.type,_.default.merge([_.default.fromEvents(this._element,"click"),_.default.fromEvents(this._element,"keydown")]).takeUntilBy(this._stopper).onValue(function(){n._driver.setLastInteractedAttachmentCardView(n)})):(this._type="CUSTOM",this._createNewElement(t)),this._messageViewDriver=this._findMessageView(),this._messageViewDriver&&this._messageViewDriver.addAttachmentCardViewDriver(this)}return(0,f.default)(e,[{key:"destroy",value:function(){this._p||this._element.remove(),this._stopper.destroy()}},{key:"_findMessageView",value:function(){var e=this._driver.getMessageViewElementsMap(),t=(0,g.default)(this._element,function(t){return e.has(t)});return t?e.get(t):null}},{key:"_createNewElement",value:function(e){var t=this;e.previewUrl?(this._element=document.createElement("a"),this._element.href=e.previewUrl):(this._element=document.createElement("div"),this._element.tabIndex=0),this._element.title=e.title;!function e(r){r.previewThumbnailUrl?(t._element.className="inboxsdk__attachment_card inboxsdk__attachment_card_with_preview",t._element.innerHTML=(0,b.default)(o(),r.previewThumbnailUrl,r.title),r.failoverPreviewIconUrl&&_.default.fromEvents((0,y.default)(t._element,"img"),"error").take(1).takeUntilBy(t._stopper).onValue(function(){e((0,u.default)({},r,{previewThumbnailUrl:null,iconThumbnailUrl:r.failoverPreviewIconUrl}))})):(t._element.className="inboxsdk__attachment_card",t._element.innerHTML=(0,b.default)(i(),r.title,r.fileIconImageUrl,r.description||"",r.title)),r.buttons.forEach(function(e){t.addButton(e)})}(e),this._previewClicks.plug(_.default.merge([_.default.fromEvents(this._element,"click"),_.default.fromEvents(this._element,"keypress").filter(function(e){return(0,h.default)([32,13],e.which)})])),e.container.appendChild(this._element)}},{key:"getElement",value:function(){return this._element}},{key:"getMessageViewDriver",value:function(){return this._messageViewDriver}},{key:"getStopper",value:function(){return this._stopper}},{key:"getPreviewClicks",value:function(){return this._previewClicks.takeUntilBy(this._stopper)}},{key:"getAttachmentType",value:function(){return this._type}},{key:"getAddedButtonDescriptors",value:function(){return this._addedButtonDescriptors}},{key:"addButton",value:function(e){if(this._addedButtonDescriptors.push(e),!this._p){var t=(0,y.default)(this._element,".inboxsdk__attachment_card_buttons"),r=document.createElement("button");r.className="inboxsdk__attachment_card_button",e.downloadUrl?(r.setAttribute("data-inboxsdk-download-url",e.downloadUrl),r.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault();var r=!1;if(e.onClick&&e.onClick({preventDefault:function(){r=!0}}),!r){var n=document.createElement("a");n.href=e.downloadUrl,e.downloadFilename&&(n.download=e.downloadFilename),n.addEventListener("click",function(e){e.stopPropagation()},!0),e.openInNewTab&&n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),n.remove()}}),r.innerHTML='\n          <div style="background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYElEQVQ4y+2UMQ6AQAgEwfhQnnJP4adjc4UxB0ehhXqbULE7BRAUkLu1yQP6OXQveEab1DXTD0O9b53kIui+QReicnJ5lM2gArQA2LLcDCqAXYA2y1SgZ7BV/Lr+6TugB0K2GxxDXjEZAAAAAElFTkSuQmCC)"></div>\n        '):(r.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.onClick&&e.onClick({getDownloadURL:function(){throw new Error("not implemented for artificial sdk-added cardViews!")}})}),r.innerHTML=(0,b.default)(n(),e.iconUrl),r.title=e.tooltip),t.appendChild(r)}}},{key:"getTitle",value:function(){return this._element.title}},{key:"getDownloadURL",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._overlayView){e.next=3;break}throw new Error("This method only works during a button onClick callback in Inbox");case 3:return e.abrupt("return",t.getDownloadURL());case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"setOverlay",value:function(e){this._overlayView=e}}]),e}(),k=(0,m.defn)(t,w);r.default=k},{"../../../../common/find-parent":609,"../../../lib/dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"@babel/runtime-corejs2/regenerator":59,"auto-html":83,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/includes":466,ud:597}],763:[function(e,t,r){"use strict";function n(){var e=(0,s.default)(['\n      <img src="','">\n    ']);return n=function(){return e},e}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/regenerator")),a=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),s=i(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),l=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=i(e("@babel/runtime-corejs2/helpers/createClass")),c=i(e("@babel/runtime-corejs2/helpers/defineProperty")),d=e("ud"),f=(i(e("kefir")),i(e("kefir-stopper"))),p=i(e("auto-html")),h=i(e("../../../lib/shared-style")),m=i(e("../../../dom-driver/inbox/custom-style")),b=(e("../../../lib/dom/simulate-mouse-event"),i(e("../../../../common/ajax"))),_=function(){function e(t,r,n,i){var o=this;(0,l.default)(this,e),(0,c.default)(this,"_driver",void 0),(0,c.default)(this,"_el",void 0),(0,c.default)(this,"_p",void 0),(0,c.default)(this,"_cardView",void 0),(0,c.default)(this,"_stopper",(0,f.default)()),this._driver=t,this._el=r,this._p=n,this._cardView=i,(0,h.default)(r.ownerDocument),(0,m.default)(r.ownerDocument),this._cardView.setOverlay(this),this._cardView.getAddedButtonDescriptors().forEach(function(e){o.addButton(e)})}return(0,u.default)(e,[{key:"destroy",value:function(){this._cardView.setOverlay(null),this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}},{key:"addButton",value:function(e){var t=this,r=this._p.elements,i=r.downloadButton,o=r.buttonContainer;if(!o)throw new Error("Missing buttonContainer, can not add button");var a=document.createElement("button");a.className="inboxsdk__attachment_overlay_button",a.addEventListener("click",function(r){r.stopPropagation(),r.preventDefault(),e.onClick&&e.onClick({getDownloadURL:function(){return t.getDownloadURL()}})}),a.innerHTML=(0,p.default)(n(),e.iconUrl),a.setAttribute("data-tooltip-delay","500"),a.setAttribute("data-tooltip-unhoverable","true"),i&&(a.setAttribute("data-tooltip-class",i.getAttribute("data-tooltip-class")||""),a.setAttribute("data-tooltip-align",i.getAttribute("data-tooltip-align")||"")),a.setAttribute("aria-label",e.tooltip),a.setAttribute("data-tooltip",e.tooltip),o.insertBefore(a,o.lastElementChild),this._stopper.onValue(function(){a.remove()})}},{key:"getDownloadURL",value:function(){function e(){return t.apply(this,arguments)}var t=(0,a.default)(o.default.mark(function e(){var t,r,n,i,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.elements.downloadButton){e.next=3;break}throw new Error("Could not find download button element");case 3:return e.next=5,this._driver.getPageCommunicator().clickAndGetNewIframeSrc(t);case 5:return r=e.sent,e.next=8,(0,b.default)({url:r,method:"HEAD"});case 8:return n=e.sent,i=n.xhr,a=i.responseURL,e.abrupt("return",a);case 12:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),v=(0,d.defn)(t,_);r.default=v},{"../../../../common/ajax":604,"../../../dom-driver/inbox/custom-style":731,"../../../lib/dom/simulate-mouse-event":827,"../../../lib/shared-style":851,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"@babel/runtime-corejs2/regenerator":59,"auto-html":83,kefir:301,"kefir-stopper":300,ud:597}],764:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=e("ud"),l=n(e("kefir")),u=n(e("kefir-bus")),c=n(e("kefir-stopper")),d=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;(0,i.default)(this,e),(0,a.default)(this,"_preAutoCloseStream",(0,u.default)()),(0,a.default)(this,"_stopper",(0,c.default)()),(0,a.default)(this,"_el",void 0);var o=this._el=document.createElement("div");if(o.className="inboxsdk__inbox_backdrop",o.style.zIndex=String(r),l.default.fromEvents(o,"click").filter(function(e){var r=!1,n={type:"outsideInteraction",cause:e,cancel:function(){r=!0}};return t._preAutoCloseStream.emit(n),!r}).onValue(function(e){t.destroy()}),!n)throw new Error("no target");n.appendChild(o),this._stopper.onValue(function(){o.classList.remove("inboxsdk__active"),l.default.fromEvents(o,"transitionend").merge(l.default.later(200)).take(1).onValue(function(){o.remove()})}),o.offsetHeight,o.classList.add("inboxsdk__active")}return(0,o.default)(e,[{key:"getElement",value:function(){return this._el}},{key:"getPreAutoCloseStream",value:function(){return this._preAutoCloseStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._preAutoCloseStream.end(),this._stopper.destroy()}}]),e}(),f=(0,s.defn)(t,d);r.default=f},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298,"kefir-stopper":300,ud:597}],765:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/parse-int")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=n(e("lodash/once")),c=(n(e("kefir")),n(e("kefir-stopper"))),d=n(e("../../../lib/dom/make-mutation-observer-chunked-stream")),f=function(){function e(t,r){var n=this;(0,o.default)(this,e),(0,s.default)(this,"_el",void 0),(0,s.default)(this,"_p",void 0),(0,s.default)(this,"_stopper",(0,c.default)()),(0,s.default)(this,"getModeStream",(0,u.default)(function(){var e=n._el.parentElement;return(0,d.default)(e,{attributes:!0,attributeFilter:["class"]}).toProperty(function(){return null}).map(function(){return n.getMode()}).skipDuplicates().takeUntilBy(n._stopper)})),this._el=t,this._p=r}return(0,a.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getMode",value:function(){var e=this._el.parentElement,t=window.getComputedStyle(e);return 0===(0,i.default)(t.bottom)?"SIDEBAR":(0,i.default)(t.top)>0?"DROPDOWN":"HIDDEN"}}]),e}(),p=(0,l.defn)(t,f);r.default=p},{"../../../lib/dom/make-mutation-observer-chunked-stream":815,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300,"lodash/once":489,ud:597}],766:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/assign")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=n(e("lodash/includes")),u=e("ud"),c=n(e("kefir")),d=n(e("../../../lib/from-event-target-capture")),f=n(e("../../../lib/dom/insert-element-in-order")),p=n(e("../../../widgets/buttons/dropdown-view")),h=n(e("./inbox-dropdown-view")),m=n(e("./inbox-tooltip-view")),b=0,_=function(){function e(t,r,n,a){var u=this;(0,o.default)(this,e),(0,s.default)(this,"_composeView",void 0),(0,s.default)(this,"_buttonEl",void 0),(0,s.default)(this,"_tooltip",void 0),this._tooltip=null,this._composeView=t;var m=this._buttonEl=document.createElement("div");m.setAttribute("role","button"),m.setAttribute("data-insertion-order-hint",String(b++)),m.setAttribute("data-group-order-hint",n),m.tabIndex=0,m.className="inboxsdk__button_icon";var _=document.createElement("img");_.className="inboxsdk__button_iconImg";var v=function(e){},g=!1,y=null;c.default.merge([c.default.fromEvents(m,"click"),(0,d.default)(m,"keyup").filter(function(e){return(0,l.default)([32,13],e.which)})]).onValue(function(e){if(e.preventDefault(),e.stopPropagation(),u.closeTooltip(),g){if(y)return void y.close();u._buttonEl.classList.add("inboxsdk__active"),y=new p.default(new h.default,m),y.setPlacementOptions({position:"top",hAlign:"left",vAlign:"bottom",buffer:5}),y.on("destroy",function(){u._buttonEl.classList.remove("inboxsdk__active"),y=null})}v((0,i.default)({dropdown:y},a))});var w=null;r.takeUntilBy(t.getStopper()).onValue(function(e){if(!e)return m.remove(),void(w=null);g=e.hasDropdown,m.title=e.title,m.className="inboxsdk__button_icon "+(e.iconClass||""),v=e.onClick,e.iconUrl?(_.src=e.iconUrl,m.appendChild(_)):_.remove();var r=e.orderHint||0;w!==r&&(w=r,m.setAttribute("data-order-hint",String(r)),(0,f.default)(t.getModifierButtonContainer(),m))}),t.getStopper().onValue(function(){u.closeTooltip(),m.remove(),y&&y.close()})}return(0,a.default)(e,[{key:"showTooltip",value:function(e){var t=this;this._composeView.isInlineReplyForm()&&this._composeView.getElement().focus(),this._tooltip&&this.closeTooltip();var r=this._tooltip=new m.default(this._buttonEl,e);r.getStopper().onValue(function(){t._tooltip===r&&(t._tooltip=null)})}},{key:"closeTooltip",value:function(){this._tooltip&&this._tooltip.destroy()}}]),e}(),v=(0,u.defn)(t,_);r.default=v},{"../../../lib/dom/insert-element-in-order":809,"../../../lib/from-event-target-capture":831,"../../../widgets/buttons/dropdown-view":893,"./inbox-dropdown-view":770,"./inbox-tooltip-view":777,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"lodash/includes":466,ud:597}],767:[function(e,t,r){"use strict";function n(){var e=(0,a.default)(['<a href="','">',"</a>"]);return n=function(){return e},e}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0
;var o=i(e("@babel/runtime-corejs2/core-js/promise")),a=i(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),s=i(e("@babel/runtime-corejs2/core-js/array/from")),l=i(e("@babel/runtime-corejs2/core-js/object/define-property")),u=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=i(e("@babel/runtime-corejs2/helpers/createClass")),d=i(e("@babel/runtime-corejs2/helpers/defineProperty")),f=i(e("lodash/escape")),p=i(e("lodash/find")),h=e("ud"),m=(i(e("closest-ng")),i(e("kefir"))),b=i(e("kefir-stopper")),_=i(e("kefir-bus")),v=i(e("auto-html")),g=(i(e("../../../../common/censorHTMLstring")),i(e("../../../lib/delay-asap"))),y=i(e("../../../lib/array-to-lifetimes")),w=i(e("../../../lib/dom/querySelectorOrFail")),k=i(e("../../../lib/dom/make-mutation-observer-chunked-stream")),j=e("../../../lib/dom/simulate-mouse-event"),x=i(e("../../../lib/dom/simulate-key")),E=i(e("../../../lib/dom/insert-html-at-cursor")),S=(i(e("../../../lib/dom/querySelectorOne")),i(e("../../../lib/ErrorCollector")),i(e("../../../lib/handle-compose-link-chips"))),C=i(e("../../../lib/insert-link-chip-into-body")),I=i(e("../../../driver-common/compose/getPresendingStream")),T=i(e("../../../driver-common/compose/getDiscardStream")),A=i(e("../addRecipientRow")),D=i(e("./inbox-compose-button-view")),M=e("../../../lib/dom/get-selection"),R=i(e("../../../driver-common/getGmailThreadIdForRfcMessageId")),L=null,O=function(){function e(t,r,n){var i=this;(0,u.default)(this,e),(0,d.default)(this,"_element",void 0),(0,d.default)(this,"_driver",void 0),(0,d.default)(this,"_eventStream",(0,_.default)()),(0,d.default)(this,"_ajaxInterceptStream",void 0),(0,d.default)(this,"_sendingStream",void 0),(0,d.default)(this,"_stopper",(0,b.default)()),(0,d.default)(this,"_queueDraftSave",void 0),(0,d.default)(this,"_modifierButtonContainer",void 0),(0,d.default)(this,"_lastBodySelectionRange",void 0),(0,d.default)(this,"_draftID",void 0),(0,d.default)(this,"_isMinimized",!1),(0,d.default)(this,"_isFullscreenMode",!1),(0,d.default)(this,"_isPresending",!1),(0,d.default)(this,"_closedProgrammatically",!1),(0,d.default)(this,"_p",void 0),(0,d.default)(this,"_els",void 0),this._element=r,this._driver=t,this._modifierButtonContainer=null,this._lastBodySelectionRange=null,this._p=n,this._els=n.elements;var o=this._els.sendBtn&&this._els.sendBtn.parentElement&&this._els.sendBtn.parentElement.childElementCount;this._driver.getLogger().eventSite("compose open",{errorCount:this._p.errors.length,bottomAreaElementCount:o,isInline:this._p.attributes.isInline});var a=(0,_.default)();this._queueDraftSave=function(){a.emit(null)};var s=this._els.body;s&&(a.bufferBy(a.flatMap(function(){return(0,g.default)(null)})).filter(function(e){return e.length>0}).takeUntilBy(this._stopper).onValue(function(){var e=i._driver.getPageCommunicator().silenceGmailErrorsForAMoment();try{(0,x.default)(s,13,0)}finally{e()}}),m.default.merge([m.default.fromEvents(document.body,"mousedown"),m.default.fromEvents(document.body,"keydown")]).takeUntilBy(this.getStopper()).onValue(function(e){var t=document.getSelection();t.rangeCount>0&&s.contains(t.anchorNode)&&(i._lastBodySelectionRange=t.getRangeAt(0))}),this._eventStream.plug((0,k.default)(s,{childList:!0,subtree:!0,characterData:!0}).map(function(){return{eventName:"bodyChanged"}}))),m.default.fromEvents(this._element,"closedProgrammatically").takeUntilBy(this._stopper).onValue(function(){i._closedProgrammatically=!0}),this._draftID=this._driver.getPageCommunicator().getDraftIDForComposeView(this.getElement()),this._ajaxInterceptStream=this._driver.getPageCommunicator().ajaxInterceptStream.takeUntilBy(this._stopper).filter(function(e){return e.draftID===i._draftID}),this._setupStreams(),this.getEventStream().takeUntilBy(this._stopper).onValue(function(e){var t=e.eventName;if("presending"===t){i._isPresending=!0;var r=i.getEventStream().filter(function(e){return"sendCanceled"===e.eventName});i._sendingStream=m.default.merge([m.default.combine([i.getEventStream().filter(function(e){return"sending"===e.eventName}),i.getEventStream().filter(function(e){return"sent"===e.eventName})]),i._ajaxInterceptStream.filter(function(e){return"emailSendFailed"===e.type}),m.default.later(6e4).flatMap(function(){return m.default.constantError(new Error("Timed out waiting for ComposeView send"))})]).takeUntilBy(r).takeUntilBy(i._stopper).take(1).takeErrors(1),i._sendingStream.onValue(function(){i._isPresending=!1}).onError(function(e){i._driver.getLogger().error(e)}),i._driver.getPageCommunicator().notifyEmailSending(),i._p.attributes.isInline||m.default.later(5e3).takeUntilBy(i.getEventStream().filter(function(e){return-1!==["sendCanceled","presending"].indexOf(e.eventName)})).onValue(function(){document.contains(i._element)&&i._eventStream.emit({eventName:"sendCanceled"})})}else"sendCanceled"===t&&(i._isPresending=!1,i._driver.getPageCommunicator().notifyEmailSendCanceled())}),(0,S.default)(this);var l=this._els.fromPickerEmailSpan;l&&this._eventStream.plug((0,k.default)(l,{childList:!0,subtree:!0,characterData:!0}).map(function(){return{eventName:"fromContactChanged",data:{contact:i.getFromContact()}}}));var c=this._els.minimizeBtnImage;if(c){var f=function(){return/_maximize_/.test(c.src)},p=(0,k.default)(c,{attributes:!0});p.toProperty(function(){return null}).takeUntilBy(this._stopper).onValue(function(){i._isMinimized=f()}),this._eventStream.plug(p.map(function(){return{eventName:f()?"minimized":"restored"}}))}var h=this._els.toggleFullscreenButtonImage;if(h){var v=function(){return!/_enter_full_screen/.test(h.src)},y=(0,k.default)(h,{attributes:!0});y.toProperty(function(){return null}).takeUntilBy(this._stopper).onValue(function(){i._isFullscreenMode=v()}),this._eventStream.plug(y.map(function(){return{eventName:"fullscreenChanged",data:{fullscreen:v()}}}))}}return(0,c.default)(e,[{key:"removedFromDOM",value:function(){var e=this;this._element.removeAttribute("data-inboxsdk-draft-id");var t=function(){e._eventStream.emit({eventName:"destroy",data:{closedByInboxSDK:e._closedProgrammatically}}),e._eventStream.end(),e._stopper.destroy()};this._isPresending?this._sendingStream&&this._sendingStream.onEnd(t):t()}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"getElement",value:function(){return this._element}},{key:"_informBodyChanged",value:function(){this._els.bodyPlaceholder&&this._els.body&&this._els.body.textContent.length>0&&(this._els.bodyPlaceholder.style.display="none"),this._queueDraftSave()}},{key:"_getAddressChangesStream",value:function(){function e(e,t,r){if(!t)return m.default.never();var n=(0,k.default)(t.parentElement,{childList:!0,attributes:!0,subtree:!0}).merge(m.default.later(0)).map(r);return(0,y.default)(n,function(e){return e.emailAddress}).flatMap(function(t){var r=t.el,n=t.removalStream;return m.default.constant({eventName:e+"ContactAdded",data:{contact:r}}).merge(n.map(function(){return{eventName:e+"ContactRemoved",data:{contact:r}}}))})}var t=this,r=this._els,n=r.toInput,i=r.ccInput,o=r.bccInput;return m.default.merge([e("to",n,function(){return t.getToRecipients()}),e("cc",i,function(){return t.getCcRecipients()}),e("bcc",o,function(){return t.getBccRecipients()})]).takeUntilBy(this._stopper)}},{key:"_setupStreams",value:function(){var e=this;this._eventStream.plug(this._getAddressChangesStream()),this._eventStream.plug((0,I.default)({element:this.getElement(),sendButton:this.getSendButton()})),this._eventStream.plug((0,T.default)({element:this.getElement(),discardButton:this.getDiscardButton()})),this._eventStream.plug(m.default.fromEvents(this.getElement(),"inboxSDKsendCanceled").map(function(){return{eventName:"sendCanceled"}})),this._eventStream.plug(m.default.fromEvents(this.getElement(),"inboxSDKdiscardCanceled").map(function(){return{eventName:"discardCanceled"}})),this._eventStream.plug(this._ajaxInterceptStream.filter(function(e){return"emailSending"===e.type}).map(function(){return{eventName:"sending"}})),this._eventStream.plug(this._ajaxInterceptStream.filter(function(e){return"emailSent"===e.type}).map(function(t){var r={getThreadID:function(){return(0,R.default)(e._driver,t.rfcID)},getMessageID:function(){return e._driver.getGmailMessageIdForSyncMessageId("msg-a:".concat(t.draftID))}};return["gmailThreadId","gmailMessageId","threadID","messageID"].forEach(function(t){(0,l.default)(r,t,{get:function(){throw e._driver.getLogger().deprecationWarning("ComposeView sent event.".concat(t),"ComposeView sent event.getThreadID() or event.getMessageID()"),new Error("Not supported")}})}),{eventName:"sent",data:r}}))}},{key:"getFromContact",value:function(){var e=this._els.fromPickerEmailSpan;if(!e)return this._driver.getUserContact();var t=e.textContent,r=(0,p.default)(this.getFromContactChoices(),function(e){return e.emailAddress===t});if(!r)throw new Error("Failed to find from contact");return r}},{key:"getFromContactChoices",value:function(){if(this._p.attributes.isInline)throw new Error("Can't get from values of inline compose");if(L)return L;var e=this._els.fromPicker;if(!e)return L=[this._driver.getUserContact()];var t=document.activeElement,r=this._element.parentElement.parentElement.firstElementChild,n=r.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'),i=0===n.length;try{if(i&&((0,j.simulateClick)(e),n=r.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]')),0===n.length)return L=[this._driver.getUserContact()];L=(0,s.default)(n).map(function(e){return{name:(0,w.default)(e,"span[title]").title,emailAddress:(0,w.default)(e,"span:not([title])").textContent}})}finally{i&&(0,j.simulateClick)(document.body),t&&t.focus()}return L}},{key:"setFromEmail",value:function(e){if(this._p.attributes.isInline)throw new Error("Can't set from value of inline compose");if(this.getFromContact().emailAddress!==e){var t=this._els.fromPicker;if(!t)throw new Error("from picker element not found");var r=document.activeElement,n=this._element.parentElement.parentElement.firstElementChild,i=n.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'),o=0===i.length;try{o&&((0,j.simulateClick)(t),i=n.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'));var a=(0,p.default)(i,function(t){return t.querySelector("span:not([title])").textContent===e});if(!a)throw new Error("Failed to find from contact to set");(0,j.simulateClick)(a)}finally{o&&(0,j.simulateClick)(t),r&&r.focus()}}}},{key:"focus",value:function(){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.focus();var e=document.getSelection(),t=this._lastBodySelectionRange;t&&e&&(e.removeAllRanges(),e.addRange(t))}},{key:"insertBodyTextAtCursor",value:function(e){return this.insertBodyHTMLAtCursor((0,f.default)(e).replace(/\n/g,"<br>"))}},{key:"insertBodyHTMLAtCursor",value:function(e){var t=(0,E.default)(this.getBodyElement(),e,this._lastBodySelectionRange);return this._informBodyChanged(),t}},{key:"insertLinkIntoBody",value:function(e,t){var r=(0,v.default)(n(),t,e);return this.insertBodyHTMLAtCursor(r)}},{key:"insertLinkChipIntoBody",value:function(e){var t=(0,C.default)(this,e);return this._informBodyChanged(),t}},{key:"setBodyHTML",value:function(e){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.innerHTML=e,this._informBodyChanged()}},{key:"setBodyText",value:function(e){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.textContent=e,this._informBodyChanged()}},{key:"_setRecipients",value:function(e,t){var r=e.parentElement;if(!r)throw new Error("Should not happen");for(var n=document.activeElement,i=r.querySelectorAll('[role=button][jsaction*="remove_chip"]').length,o=0;o<i;o++){var a=r.querySelector('[role=button][jsaction*="remove_chip"]');if(!a)break;(0,j.simulateClick)(a)}t.forEach(function(t){e.value=t,e.dispatchEvent(new window.FocusEvent("blur"))}),n&&n.focus()}},{key:"setToRecipients",value:function(e){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");var t=this._els.toInput;if(!t)throw new Error("Compose View missing recipient input");this._setRecipients(t,e)}},{key:"setCcRecipients",value:function(e){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");var t=this._els.ccInput;if(!t)throw new Error("Compose View missing recipient input");this._setRecipients(t,e);var r=this._els.toggleCcBccButton;e.length&&r&&"none"!==r.style.display&&(0,j.simulateClick)(r)}},{key:"setBccRecipients",value:function(e){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");var t=this._els.bccInput;if(!t)throw new Error("Compose View missing recipient input");this._setRecipients(t,e);var r=this._els.toggleCcBccButton;e.length&&r&&"none"!==r.style.display&&(0,j.simulateClick)(r)}},{key:"replaceSendButton",value:function(e){var t=this,r=this._p.elements.sendBtn;if(!r)throw new Error("Could not locate send button");r.style.display="none";var n=document.createElement("div");n.classList.add("inboxsdk__compose_customSendContainer"),n.appendChild(e),this._element.setAttribute("data-inboxsdk-send-replaced",""),r.insertAdjacentElement("afterend",n);var i=(0,b.default)();return function(){i.destroy(),n.remove(),t._element.removeAttribute("data-inboxsdk-send-replaced"),r.style.display=""}}},{key:"hideDiscardButton",value:function(){var e=this._p.elements.discardBtn;if(!e)throw new Error("Could not locate discard button");var t=e.previousElementSibling;if(!(t instanceof HTMLElement))throw new Error("Could not locate discard button divider");return e.style.display="none",t.style.display="none",function(){e.style.display="",t.style.display=""}}},{key:"close",value:function(){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose");var e=this._els.closeBtn;e&&(this._element.dispatchEvent(new CustomEvent("closedProgrammatically",{bubbles:!1,cancelable:!1,detail:null})),(0,j.simulateClick)(e))}},{key:"send",value:function(e){e.sendAndArchive;if(!this._els.sendBtn)throw new Error("Compose View missing send element");(0,j.simulateClick)(this._els.sendBtn)}},{key:"discard",value:function(){(0,j.simulateClick)(this.getDiscardButton())}},{key:"setMinimized",value:function(e){if(e!==this.isMinimized()){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose views");var t=this._els.minimizeBtn;if(!t)throw new Error("Could not find minimize button");t.click()}}},{key:"setFullscreen",value:function(e){if(e!==this.isFullscreen()){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose views");var t=this._els.toggleFullscreenButton;if(!t)throw new Error("Could not find fullscreen button");t.click()}}},{key:"setTitleBarColor",value:function(e){if(this._p.attributes.isInline)throw new Error("Cannot set title bar of inline compose");var t=this._p.elements.titleBar;if(!t)throw new Error("Could not locate compose title bar");return t.style.backgroundColor=e,function(){t.style.backgroundColor=""}}},{key:"setTitleBarText",value:function(e){throw new Error("Not supported in Inbox")}},{key:"addButton",value:function(e,t,r){var n=new D.default(this,e,t,r);return o.default.resolve({buttonViewController:n,buttonDescriptor:{}})}},{key:"getModifierButtonContainer",value:function(){if(this._modifierButtonContainer)return this._modifierButtonContainer;if(this._modifierButtonContainer=this._element.querySelector(".inboxsdk__compose_actionToolbar"),this._modifierButtonContainer)return this._modifierButtonContainer;var e=document.createElement("div");if(e.className="inboxsdk__compose_actionToolbar",!this._p.attributes.isInline){var t=this._els.attachBtn?this._els.attachBtn.nextSibling:null;t instanceof HTMLElement&&"absolute"===t.style.position?t.style.display="none":this._driver.getLogger().error(new Error("Didn't find hiddenAttachBtn"))}var r=this._els.sendBtn;if(!r)throw new Error("Compose View missing send element");var n=r.parentElement;if(!n)throw new Error("Could not find send button parent");return n.insertBefore(e,r.nextSibling),this._modifierButtonContainer=e,e}},{key:"addRecipientRow",value:function(e){if(this._p.attributes.isInline)throw new Error("Cannot add recipient rows to inline compose views");return(0,A.default)(this,e)}},{key:"forceRecipientRowsOpen",value:function(){return console.warn("ComposeView.forceRecipientRowsOpen() is a no-op in Inbox"),function(){}}},{key:"hideNativeRecipientRows",value:function(){if(this._p.attributes.isInline)throw new Error("Cannot hide recipient rows on inline compose views");var e=[this.getToRow(),this.getCCRow(),this.getBCCRow()];return e.forEach(function(e){e.classList.add("inboxsdk__compose_forceRecipientRowHidden")}),function(){e.forEach(function(e){e.classList.remove("inboxsdk__compose_forceRecipientRowHidden")})}}},{key:"hideRecipientArea",value:function(){throw new Error("Not implemented")}},{key:"addOuterSidebar",value:function(e){throw new Error("Not implemented")}},{key:"addInnerSidebar",value:function(e){throw new Error("Not implemented")}},{key:"addComposeNotice",value:function(e){throw new Error("Not implemented")}},{key:"addStatusBar",value:function(e){throw new Error("Not implemented")}},{key:"hideNativeStatusBar",value:function(){throw new Error("Not Implemented")}},{key:"isForward",value:function(){throw new Error("Not Implemented")}},{key:"isReply",value:function(){if(this._p.attributes.isInline)return!0;throw new Error("Not implemented")}},{key:"isInlineReplyForm",value:function(){return this._p.attributes.isInline}},{key:"popOut",value:function(){if(!this._p.attributes.isInline)throw new Error("Can only pop out inline reply compose views");if(!this._els.popOutBtn)throw new Error("Should not happen");(0,j.simulateClick)(this._els.popOutBtn)}},{key:"registerRequestModifier",value:function(e){throw new Error("Not implemented")}},{key:"attachFiles",value:function(e){throw new Error("Not implemented")}},{key:"attachInlineFiles",value:function(e){throw new Error("Not implemented")}},{key:"isFullscreen",value:function(){return this._isFullscreenMode}},{key:"isMinimized",value:function(){return this._isMinimized}},{key:"getSubjectInput",value:function(){return this._els.subject}},{key:"getMetadataFormElement",value:function(){throw new Error("Not supported in Inbox.")}},{key:"getToRow",value:function(){var e=this._els.toRow;if(!e)throw new Error("Could not locate To row");return e}},{key:"getCCRow",value:function(){var e=this._els.ccRow;if(!e)throw new Error("Could not locate CC row");return e}},{key:"getBCCRow",value:function(){var e=this._els.bccRow;if(!e)throw new Error("Could not locate BCC row");return e}},{key:"getBodyElement",value:function(){if(!this._els.body)throw new Error("Compose View missing body element");return this._els.body}},{key:"getHTMLContent",value:function(){return this.getBodyElement().innerHTML}},{key:"getTextContent",value:function(){return this.getBodyElement().textContent}},{key:"getSelectedBodyHTML",value:function(){return(0,M.getSelectedHTMLInElement)(this.getBodyElement(),this._lastBodySelectionRange)}},{key:"getSelectedBodyText",value:function(){return(0,M.getSelectedTextInElement)(this.getBodyElement(),this._lastBodySelectionRange)}},{key:"getSubject",value:function(){var e=this._els.subject;if(!e)throw new Error("InboxSDK: Could not locate subject field");return e.value}},{key:"setSubject",value:function(e){if(this._p.attributes.isInline)throw new Error("setSubject is not supported for inline compose views");if(!this._els.subject)throw new Error("InboxSDK: Could not locate subject field");this._els.subject.value=e}},{key:"_getRecipients",value:function(e){var t=e.parentElement;if(!t)throw new Error("Should not happen");return(0,s.default)(t.children).filter(function(e){return"DIV"===e.nodeName&&e.hasAttribute("email")&&"none"!==e.style.display}).map(function(e){return{emailAddress:e.getAttribute("email")||"",name:e.textContent}})}},{key:"getToRecipients",value:function(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");var e=this._els.toInput;if(!e)throw new Error("Compose View missing recipient input");return this._getRecipients(e)}},{key:"getCcRecipients",value:function(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");var e=this._els.ccInput;if(!e)throw new Error("Compose View missing recipient input");return this._getRecipients(e)}},{key:"getBccRecipients",value:function(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");var e=this._els.bccInput;if(!e)throw new Error("Compose View missing recipient input");return this._getRecipients(e)}},{key:"getComposeID",value:function(){throw new Error("This method was discontinued")}},{key:"getInitialMessageID",value:function(){throw new Error("composeView.getInitialMessageID is not implemented in Inbox")}},{key:"getMessageID",value:function(){throw new Error("composeView.getMessageID is not implemented in Inbox")}},{key:"getThreadID",value:function(){return null}},{key:"getCurrentDraftID",value:function(){return o.default.resolve(this._draftID)}},{key:"getDraftID",value:function(){return o.default.resolve(this._draftID)}},{key:"addTooltipToButton",value:function(e,t,r){e.showTooltip(r)}},{key:"closeButtonTooltip",value:function(e){e.closeTooltip()}},{key:"getDiscardButton",value:function(){if(!this._els.discardBtn)throw new Error("Compose View missing discard button");return this._els.discardBtn}},{key:"getSendButton",value:function(){if(!this._els.sendBtn)throw new Error("Compose View missing send button");return this._els.sendBtn}},{key:"ensureAppButtonToolbarsAreClosed",value:function(){}},{key:"ensureFormattingToolbarIsHidden",value:function(){}}]),e}(),P=(0,h.defn)(t,O);r.default=P},{"../../../../common/censorHTMLstring":606,"../../../driver-common/compose/getDiscardStream":780,"../../../driver-common/compose/getPresendingStream":781,"../../../driver-common/getGmailThreadIdForRfcMessageId":784,"../../../lib/ErrorCollector":796,"../../../lib/array-to-lifetimes":799,"../../../lib/delay-asap":803,"../../../lib/dom/get-selection":808,"../../../lib/dom/insert-html-at-cursor":810,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOne":820,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/dom/simulate-key":826,"../../../lib/dom/simulate-mouse-event":827,"../../../lib/handle-compose-link-chips":833,"../../../lib/insert-link-chip-into-body":839,"../addRecipientRow":729,"./inbox-compose-button-view":766,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"auto-html":83,"closest-ng":96,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/escape":456,"lodash/find":458,ud:597}],768:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=(n(e("kefir")),n(e("kefir-stopper"))),l=n(e("kefir-bus")),u=n(e("classnames")),c=n(e("../../../lib/idMap")),d=n(e("../../../lib/parseParamsFromRouteID")),f=n(e("../getSidebarClassnames")),p=function(){function e(t,r){(0,i.default)(this,e),(0,a.default)(this,"_routeID",void 0),(0,a.default)(this,"_params",void 0),(0,a.default)(this,"_eventStream",(0,l.default)()),(0,a.default)(this,"_stopper",(0,s.default)()),(0,a.default)(this,"_customViewElement",void 0),this._routeID=t,this._params=(0,d.default)(t,r),this._customViewElement=document.createElement("div"),this.setFullWidth(!0)}return(0,o.default)(e,[{key:"setFullWidth",value:function(e){var t,r=(0,f.default)().centerList||"UNKNOWN_centerList";this._customViewElement.className=(0,u.default)((0,c.default)("custom_view_container"),(t={},(0,a.default)(t,(0,c.default)("custom_view_min_margins"),e),(0,a.default)(t,r,!e),t))}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy(),this._customViewElement.remove()}},{key:"getElement",value:function(){throw new Error("should not happen")}},{key:"getType",value:function(){return"CUSTOM"}},{key:"getRouteType",value:function(){return"CUSTOM"}},{key:"getRouteID",value:function(){return this._routeID}},{key:"getParams",value:function(){return this._params}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getCustomViewElement",value:function(){return this._customViewElement}},{key:"refresh",value:function(){throw new Error("should not happen")}},{key:"getHash",value:function(){throw new Error("should not happen")}},{key:"addCollapsibleSection",value:function(e,t){throw new Error("should not happen")}},{key:"addSection",value:function(e,t){throw new Error("should not happen")}}]),e}();r.default=p},{"../../../lib/idMap":835,"../../../lib/parseParamsFromRouteID":844,"../getSidebarClassnames":744,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,classnames:95,kefir:301,"kefir-bus":298,"kefir-stopper":300}],769:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/parse-int")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=n(e("kefir")),c=n(e("kefir-stopper")),d=n(e("kefir-bus")),f=n(e("./inbox-backdrop")),p=n(e("../../../lib/from-event-target-capture")),h=n(e("../../../../common/find-parent")),m="inboxSDKdrawerViewTakingOver",b=function(){function e(t){var r=this;(0,o.default)(this,e),(0,s.default)(this,"_chrome",void 0),(0,s.default)(this,"_exitEl",void 0),(0,s.default)(this,"_containerEl",void 0),(0,s.default)(this,"_el",void 0),(0,s.default)(this,"_backdrop",null),(0,s.default)(this,"_slideAnimationDone",void 0),(0,s.default)(this,"_closing",(0,c.default)()),(0,s.default)(this,"_closed",(0,c.default)()),(0,s.default)(this,"_composeChanges",(0,d.default)()),(0,s.default)(this,"_preAutoCloseStream",(0,d.default)()),this._chrome="boolean"!=typeof t.chrome||t.chrome;var n=document.body,i=null,a=t.composeView,l=t.closeWithCompose;if(a){var f=this._setupComposeInsertionTarget(a,l);n=f.insertionTarget,i=f.composeRect}this._setupElement(t,n);var h=0;if(a){if(!i)throw new Error("should not happen");h=this._setupComposeAnimation(a,i,!0)}this._el.offsetHeight,this._el.classList.add("inboxsdk__active"),this._slideAnimationDone=u.default.fromEvents(this._el,"transitionend").take(1).takeUntilBy(this._closing).map(function(){return null}),a&&this._positionCompose(a,h),(0,p.default)(document,"keydown").filter(function(e){return e.key?"Escape"===e.key:27===e.which}).takeUntilBy(this._closing).onValue(function(e){var t=e.preventDefault;e.preventDefault=function(){return this._defaultPreventedInContext=!0,t.call(this)}}),u.default.fromEvents(document,"keydown").filter(function(e){return e.key?"Escape"===e.key:27===e.which}).filter(function(e){return!e._defaultPreventedInContext}).filter(function(e){var t=!1,n={type:"escape",cause:e,cancel:function(){t=!0}};return r._preAutoCloseStream.emit(n),!t}).takeUntilBy(this._closing).onValue(function(){r.close()})}return(0,a.default)(e,[{key:"_setupComposeInsertionTarget",value:function(e,t){var r=this;if(e.isMinimized())throw new Error("Can't attach DrawerView to minimized ComposeView");if(e.isInlineReplyForm())throw new Error("Can't attach DrawerView to inline ComposeView");e.isFullscreen()&&e.setFullscreen(!1);var n=[u.default.fromEvents(e,"restored"),u.default.later(10).flatMap(function(){return u.default.fromEvents(e,"fullscreenChanged")})];t&&n.push(u.default.fromEvents(e,"destroy"),u.default.fromEvents(e,"minimized")),u.default.merge(n).takeUntilBy(this._closing.merge(this._composeChanges)).onValue(function(){return r.close()});var i=e.getElement(),o=i.getBoundingClientRect(),a=i.offsetParent;if(!(a instanceof HTMLElement))throw new Error("should not happen");var s=(0,h.default)(a,function(e){return"auto"!==window.getComputedStyle(e).getPropertyValue("z-index")&&0===e.getBoundingClientRect().left})||document.body;return i.dispatchEvent(new CustomEvent(m,{bubbles:!1,cancelable:!1,detail:null})),a.dispatchEvent(new CustomEvent(m,{bubbles:!1,cancelable:!1,detail:null})),s.dispatchEvent(new CustomEvent(m,{bubbles:!1,cancelable:!1,detail:null})),s.classList.add("inboxsdk__drawers_in_use"),s.style.zIndex=String(500),a.hasAttribute("data-drawer-old-zindex")||a.setAttribute("data-drawer-old-zindex",a.style.zIndex),a.style.zIndex=String(502),this._closed.takeUntilBy(u.default.fromEvents(s,m)).onValue(function(){s.style.zIndex=""}),this._closed.merge(this._composeChanges).takeUntilBy(u.default.fromEvents(a,m)).onValue(function(){a.style.zIndex=a.getAttribute("data-drawer-old-zindex")||"",a.removeAttribute("data-drawer-old-zindex")}),{composeRect:o,insertionTarget:s}}},{key:"_setupElement",value:function(e,t){var r=this,n=this._backdrop=new f.default(500,t);if(this._preAutoCloseStream.plug(n.getPreAutoCloseStream()),n.getStopper().takeUntilBy(this._closing).onValue(function(){r.close()}),this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__drawer_view_container",this._containerEl.style.zIndex=String(501),this._el=document.createElement("div"),this._el.setAttribute("role","dialog"),this._el.tabIndex=0,this._el.className="inboxsdk__drawer_view",this._containerEl.appendChild(this._el),this._chrome){var i=document.createElement("div");i.className="inboxsdk__drawer_title_bar";var o=document.createElement("button");o.type="button",o.title="Close",o.className="inboxsdk__close_button",o.addEventListener("click",function(e){r.close()}),i.appendChild(o);var a=document.createElement("div");a.className="inboxsdk__drawer_title",a.setAttribute("role","heading"),a.textContent=e.title||"",i.appendChild(a),this._el.appendChild(i)}this._el.appendChild(e.el),t.appendChild(this._containerEl),this._closing.onValue(function(){r._backdrop&&r._backdrop.destroy(),r._el.classList.remove("inboxsdk__active"),u.default.fromEvents(r._el,"transitionend").merge(u.default.later(200)).take(1).onValue(function(){r._closed.destroy(),r._containerEl.remove()})})}},{key:"_setupComposeAnimation",value:function(e,t,r){var n=e.getElement(),o=n.parentElement,a=this._el.getBoundingClientRect(),s=(0,i.default)(o.style.left)||0,l=t.right-s-(window.innerWidth-a.width-24);return l>0&&(o.style.position="relative",o.style.transition="left 150ms cubic-bezier(.4,0,.2,1)",o.style.left="0",r&&o.offsetHeight),l}},{key:"_positionCompose",value:function(e,t){if(t>0){var r=e.getElement(),n=r.parentElement;n.style.left="".concat(-t,"px"),this._closing.takeUntilBy(this._composeChanges).takeUntilBy(u.default.fromEvents(r,m)).onValue(function(){n.style.left="0"}).flatMap(function(){return u.default.fromEvents(n,"transitionend").merge(u.default.later(200))}).merge(this._composeChanges).take(1).takeUntilBy(u.default.fromEvents(r,m)).onValue(function(){n.style.position="",n.style.left="",n.style.transition=""})}}},{key:"associateComposeView",value:function(e,t){
this._composeChanges.emit(null);var r=this._setupComposeInsertionTarget(e,t),n=r.insertionTarget,i=r.composeRect;this._backdrop&&n.appendChild(this._backdrop.getElement()),this._containerEl.parentElement!==n&&n.appendChild(this._containerEl);var o=this._setupComposeAnimation(e,i,!1);this._positionCompose(e,o)}},{key:"disassociateComposeView",value:function(){this._composeChanges.emit(null)}},{key:"getSlideAnimationDone",value:function(){return this._slideAnimationDone}},{key:"getClosingStream",value:function(){return this._closing}},{key:"getClosedStream",value:function(){return this._closed}},{key:"getPreAutoCloseStream",value:function(){return this._preAutoCloseStream}},{key:"close",value:function(){this._closing.destroy()}}]),e}(),_=(0,l.defn)(t,b);r.default=_},{"../../../../common/find-parent":609,"../../../lib/from-event-target-capture":831,"./inbox-backdrop":764,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-int":24,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298,"kefir-stopper":300,ud:597}],770:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_containerEl",void 0),(0,a.default)(this,"_contentEl",void 0),this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__dropdown "+(t||""),this._contentEl=document.createElement("div"),this._contentEl.className="inboxsdk__dropdown_content",this._containerEl.appendChild(this._contentEl)}return(0,o.default)(e,[{key:"getContentElement",value:function(){return this._contentEl}},{key:"getContainerElement",value:function(){return this._containerEl}},{key:"destroy",value:function(){this._containerEl.remove()}}]),e}();r.default=s},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],771:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=(n(e("kefir")),n(e("kefir-stopper"))),l=n(e("kefir-bus")),u=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_type",void 0),(0,a.default)(this,"_eventStream",(0,l.default)()),(0,a.default)(this,"_stopper",(0,s.default)()),this._type=t}return(0,o.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy()}},{key:"getElement",value:function(){throw new Error("Should not happen")}},{key:"getType",value:function(){return this._type}},{key:"getRouteType",value:function(){return"UNKNOWN"}},{key:"getRouteID",value:function(){return"UNKNOWN"}},{key:"getParams",value:function(){return{}}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getCustomViewElement",value:function(){return null}},{key:"refresh",value:function(){}},{key:"getHash",value:function(){throw new Error("should not happen")}},{key:"addCollapsibleSection",value:function(e,t){throw new Error("should not happen")}},{key:"addSection",value:function(e,t){throw new Error("should not happen")}},{key:"setFullWidth",value:function(e){throw new Error("should not happen")}}]),e}();r.default=u},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298,"kefir-stopper":300}],772:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/objectSpread")),o=n(e("@babel/runtime-corejs2/regenerator")),a=n(e("@babel/runtime-corejs2/core-js/get-iterator")),s=n(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=n(e("@babel/runtime-corejs2/core-js/array/from")),u=n(e("@babel/runtime-corejs2/helpers/createClass")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),f=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),h=n(e("@babel/runtime-corejs2/helpers/inherits")),m=e("ud"),b=(n(e("asap")),n(e("kefir"))),_=n(e("kefir-bus")),v=n(e("bignumber.js")),g=n(e("../../../lib/delay-asap")),y=n(e("../../../../common/censorHTMLtree")),w=n(e("../../../lib/dom/make-mutation-observer-chunked-stream")),k=n(e("./inbox-attachment-card-view")),j=n(e("../../../../common/find-parent")),x=n(e("../detection/message/parser")),E=n(e("../../../lib/safe-event-emitter")),S=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(0,p.default)(t).apply(this,arguments))}return(0,h.default)(t,e),t}(E.default),C=function(){function e(t,r,n){var i=this;(0,d.default)(this,e),(0,c.default)(this,"_element",void 0),(0,c.default)(this,"_driver",void 0),(0,c.default)(this,"_p",void 0),(0,c.default)(this,"_stopper",void 0),(0,c.default)(this,"_eventStream",(0,_.default)()),(0,c.default)(this,"_threadViewDriver",void 0),(0,c.default)(this,"_attachmentCardViews",[]),this._element=t,this._driver=r,this._p=n,this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}),(0,w.default)(this._element,{attributes:!0,attributeFilter:["data-msg-id"]}).toProperty(function(){return null}).map(function(){return i._element.getAttribute("data-msg-id")}).skipDuplicates().changes().onValue(function(){i.destroy()}),(0,w.default)(this._element,{attributes:!0,attributeFilter:["aria-expanded"]}).toProperty(function(){return null}).map(function(){return"true"===i._element.getAttribute("aria-expanded")}).skipDuplicates().changes().takeUntilBy(this._stopper).onValue(function(e){e?i._reparse():i.destroy()}),this._threadViewDriver=this._findThreadView(),this._threadViewDriver&&this._threadViewDriver.addMessageViewDriver(this),this._driver.getMessageViewElementsMap().set(this._element,this),this._monitorEmailAddressHovering()}return(0,u.default)(e,[{key:"_findThreadView",value:function(){var e=this._driver.getThreadViewElementsMap(),t=(0,j.default)(this._element,function(t){return e.has(t)});return t?e.get(t):null}},{key:"_reparse",value:function(){var e=this._p;this._p=(0,x.default)(this._element),this._p.errors.length>0&&this._driver.getLogger().errorSite(new Error("message reparse errors"),{score:this._p.score,errors:this._p.errors,html:(0,y.default)(this._element)}),!e.attributes.loaded&&this._p.attributes.loaded&&this._eventStream.emit({type:"internal",eventName:"messageLoad"}),e.attributes.viewState!==this._p.attributes.viewState&&this._eventStream.emit({eventName:"viewStateChange",oldValue:e.attributes.viewState,newValue:this._p.attributes.viewState})}},{key:"_monitorEmailAddressHovering",value:function(){var e=this;this._eventStream.plug(b.default.fromEvents(this._element,"mouseover").map(function(e){return e.target}).filter(function(e){return e&&e.getAttribute("email")}).map(function(t){var r,n={name:t.textContent,emailAddress:t.getAttribute("email")};if(e._p.elements.sender&&e._p.elements.sender.contains(t))r="sender";else{if(!e._p.attributes.recipientElements||!(0,l.default)(e._p.attributes.recipientElements).some(function(e){return e.contains(t)}))return null;r="recipient"}return{eventName:"contactHover",messageViewDriver:e,contact:n,contactType:r}}).filter())}},{key:"addAttachmentCardViewDriver",value:function(e){var t=this;this._attachmentCardViews.push(e),e.getStopper().takeUntilBy(this._stopper).onValue(function(){t._attachmentCardViews=t._attachmentCardViews.filter(function(t){return t!==e})})}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"isLoaded",value:function(){return this._p.attributes.loaded}},{key:"hasOpenReply",value:function(){return!1}},{key:"getMessageID",value:function(){var e=this._p.attributes.inboxMessageId;if(!e)throw new Error("Failed to find message id");/^msg-a:/.test(e)&&console.warn("MessageView.getMessageID() returned an incorrect message ID. This method will be deprecated soon. Use getMessageIDAsync() instead which does not have this problem.");var t=/\d+$/.exec(e);if(!t)throw new Error("Should not happen");return new v.default(t[0]).toString(16)}},{key:"getMessageIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,r,n,i,s,l,u,c,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.attributes.inboxMessageId){e.next=3;break}throw new Error("Failed to find message id");case 3:if(!/^msg-a:/.test(t)){e.next=40;break}r=!0,n=!1,i=void 0,e.prev=7,s=(0,a.default)(this._driver.getComposeViewDriverLiveSet().values());case 9:if(r=(l=s.next()).done){e.next=21;break}return u=l.value,e.next=13,u.getDraftID();case 13:if(!(c=e.sent)||"msg-a:".concat(c)!==t){e.next=18;break}return e.next=17,u.getStopper().take(1).toPromise();case 17:return e.abrupt("break",21);case 18:r=!0,e.next=9;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(7),n=!0,i=e.t0;case 27:e.prev=27,e.prev=28,r||null==s.return||s.return();case 30:if(e.prev=30,!n){e.next=33;break}throw i;case 33:return e.finish(30);case 34:return e.finish(27);case 35:return e.next=37,this._driver.getGmailMessageIdForSyncMessageId(t);case 37:return e.abrupt("return",e.sent);case 40:if(d=/\d+$/.exec(t)){e.next=43;break}throw new Error("Should not happen");case 43:return e.abrupt("return",new v.default(d[0]).toString(16));case 44:case"end":return e.stop()}},e,this,[[7,23,27,35],[28,,30,34]])}));return e}()},{key:"getContentsElement",value:function(){if(!this._p.elements.body)throw new Error("Could not find body element");return this._p.elements.body}},{key:"getLinks",value:function(){throw new Error("not implemented yet")}},{key:"isElementInQuotedArea",value:function(e){return null!=(0,j.default)(e,function(e){return e.classList.contains("gmail_extra")})}},{key:"addMoreMenuItem",value:function(e){throw new Error("not implemented yet")}},{key:"addAttachmentIcon",value:function(e){return console.warn("MessageView.addAttachmentIcon is not implemented yet in Inbox"),new S}},{key:"getAttachmentCardViewDrivers",value:function(){return this._attachmentCardViews}},{key:"addAttachmentCard",value:function(e){var t=this._p.elements.attachmentsArea;if(!t)throw new Error("Could not find attachments area");var r=t.lastElementChild;return r||(t.style.display="",t.style.margin="16px 0 0",t.style.paddingTop="16px",r=document.createElement("div"),t.appendChild(r)),new k.default((0,i.default)({},e,{element:null,container:r}),this._driver)}},{key:"addButtonToDownloadAllArea",value:function(e){}},{key:"getViewState",value:function(){return this._p.attributes.viewState}},{key:"getDateString",value:function(){throw new Error("not implemented yet")}},{key:"getSender",value:function(){var e=this._p.elements.sender;if(!e)throw new Error("could not find sender element");var t=e.getAttribute("email");if(!t)throw new Error("could not find email address");return{emailAddress:t,name:e.textContent}}},{key:"getRecipients",value:function(){var e=this._driver.getUserContact();return Array.prototype.map.call(this._p.attributes.recipientElements,function(t){var r=t.getAttribute("email");return r===e.emailAddress?e:{emailAddress:r,name:t.textContent}})}},{key:"getRecipientEmailAddresses",value:function(){return this.getRecipients().map(function(e){return e.emailAddress})}},{key:"getRecipientsFull",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getRecipients());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getThreadViewDriver",value:function(){if(!this._threadViewDriver)throw new Error("failed to find threadView");return this._threadViewDriver}},{key:"getReadyStream",value:function(){return b.default.repeat(function(e){return e>10?null:(0,g.default)(null)}).ignoreValues().beforeEnd(function(){return null})}},{key:"destroy",value:function(){this._eventStream.end(),this._attachmentCardViews.slice().forEach(function(e){e.destroy()})}}]),e}(),I=(0,m.defn)(t,C);r.default=I},{"../../../../common/censorHTMLtree":607,"../../../../common/find-parent":609,"../../../lib/delay-asap":803,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/safe-event-emitter":850,"../detection/message/parser":737,"./inbox-attachment-card-view":762,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,"@babel/runtime-corejs2/regenerator":59,asap:77,"bignumber.js":92,kefir:301,"kefir-bus":298,ud:597}],773:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=e("ud"),l=n(e("lodash/sortBy")),u=(n(e("kefir")),n(e("kefir-bus"))),c=(n(e("../../../lib/dom/insert-element-in-order")),n(e("../../../lib/dom/querySelectorOrFail"))),d=function(){function e(t){var r=this;(0,i.default)(this,e),(0,a.default)(this,"_eventStream",(0,u.default)()),(0,a.default)(this,"_modalContainerElement",void 0),this._setupModalContainerElement(t),this._processOptions(t),(0,c.default)(this._modalContainerElement,".inboxsdk__close_button").addEventListener("click",function(e){r._eventStream.emit({eventName:"closeClick",domEvent:e})})}return(0,o.default)(e,[{key:"destroy",value:function(){this._modalContainerElement.remove(),this._eventStream.end()}},{key:"getModalContainerElement",value:function(){return this._modalContainerElement}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"_processOptions",value:function(e){this.setTitle(e.title),this.setContentElement(e.el),this.setButtons(e.buttons||[]),this.setChromeClasses(e.chrome,e.showCloseButton)}},{key:"setTitle",value:function(e){var t=(0,c.default)(this._modalContainerElement,"[role=heading]");e?(t.style.display="",t.textContent=e):t.style.display="none"}},{key:"setContentElement",value:function(e){var t=(0,c.default)(this._modalContainerElement,".inboxsdk__modal_content");t.innerHTML="","string"==typeof e?t.innerHTML=e:e instanceof Element&&t.appendChild(e)}},{key:"setButtons",value:function(e){var t=(0,c.default)(this._modalContainerElement,".inboxsdk__modal_buttons");e.length>0?this._modalContainerElement.classList.add("inboxsdk__modal_hasButtons"):this._modalContainerElement.classList.remove("inboxsdk__modal_hasButtons"),t.innerHTML="",(0,l.default)(e,[function(e){return"PRIMARY_ACTION"===e.type?0:1},function(e){return e.orderHint||0}]).forEach(function(e){var r=document.createElement("input");r.className="PRIMARY_ACTION"===e.type?"inboxsdk__primary":"",r.type="button",r.value=e.text,r.addEventListener("click",function(t){t.preventDefault(),e.onClick.call(null)}),t.appendChild(r)})}},{key:"setChromeClasses",value:function(e,t){!1===e?this._modalContainerElement.classList.add("inboxsdk__modal_chromeless"):this._modalContainerElement.classList.remove("inboxsdk__modal_chromeless"),t?this._modalContainerElement.classList.add("inboxsdk__modal_showCloseButton"):this._modalContainerElement.classList.remove("inboxsdk__modal_showCloseButton")}},{key:"_setupModalContainerElement",value:function(e){var t=e.constrainTitleWidth?"inboxsdk__modal_toprow--constrain-title-width":"";this._modalContainerElement=document.createElement("div"),this._modalContainerElement.className="inboxsdk__modal_fullscreen";var r='\n    <div class="inboxsdk__modal_container" tabindex="0" role="alertdialog">\n      <div class="inboxsdk__modal_toprow '.concat(t,'">\n        <span role="heading"></span>\n        <button title="Close" class="inboxsdk__close_button"></button>\n      </div>\n      <div class="inboxsdk__modal_content">\n      </div>\n      <div class="inboxsdk__modal_buttons"></div>\n    </div>\n    ');this._modalContainerElement.innerHTML=r}}]),e}(),f=(0,s.defn)(t,d);r.default=f},{"../../../lib/dom/insert-element-in-order":809,"../../../lib/dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298,"lodash/sortBy":492,ud:597}],774:[function(e,t,r){"use strict";function n(e){return""===e?f.NATIVE_ROUTE_IDS.INBOX:(0,u.default)(["snoozed","reminders","done","spam","trash"],e)?f.NATIVE_ROUTE_IDS[e.toUpperCase()]:/search\//.test(e)?f.NATIVE_ROUTE_IDS.SEARCH:"UNKNOWN"}function i(e){var t=e.split("/");return t.length<2?{}:{query:decodeURIComponent(t[1])}}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=o(e("lodash/includes")),c=(o(e("kefir")),o(e("kefir-stopper"))),d=o(e("kefir-bus")),f=e("../../../constants/router"),p=function(){function e(t,r){(0,a.default)(this,e),(0,l.default)(this,"_element",void 0),(0,l.default)(this,"_type",void 0),(0,l.default)(this,"_routeType",void 0),(0,l.default)(this,"_routeID",void 0),(0,l.default)(this,"_params",void 0),(0,l.default)(this,"_eventStream",(0,d.default)()),(0,l.default)(this,"_stopper",(0,c.default)()),this._element=t,this._type=r;var o=document.location.pathname.slice(1);this._routeID=n(o),this._params=i(o),this._routeType="UNKNOWN"===this._routeID?"UNKNOWN":"LIST"}return(0,s.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy()}},{key:"getElement",value:function(){return this._element}},{key:"getType",value:function(){return this._type}},{key:"getRouteType",value:function(){return this._routeType}},{key:"getRouteID",value:function(){return this._routeID}},{key:"getParams",value:function(){return this._params}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"refresh",value:function(){}},{key:"getHash",value:function(){throw new Error("should not happen")}},{key:"getCustomViewElement",value:function(){throw new Error("should not happen")}},{key:"addCollapsibleSection",value:function(e,t){throw new Error("not implemented yet")}},{key:"addSection",value:function(e,t){throw new Error("not implemented yet")}},{key:"setFullWidth",value:function(e){throw new Error("should not happen")}}]),e}();r.default=p},{"../../../constants/router":621,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/includes":466}],775:[function(e,t,r){"use strict";function n(){var e=(0,a.default)(["&nbsp;(",")"]);return n=function(){return e},e}function i(){var e=(0,a.default)(["(",")"]);return i=function(){return e},e}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),s=o(e("@babel/runtime-corejs2/core-js/array/is-array")),l=o(e("@babel/runtime-corejs2/regenerator")),u=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=o(e("@babel/runtime-corejs2/helpers/objectSpread")),d=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),f=o(e("@babel/runtime-corejs2/helpers/createClass")),p=o(e("@babel/runtime-corejs2/helpers/defineProperty")),h=e("ud"),m=o(e("../../../driver-common/update-icon")),b=o(e("auto-html")),_=o(e("kefir")),v=o(e("kefir-bus")),g=(o(e("kefir-stopper")),o(e("kefir-cast"))),y=o(e("bignumber.js")),w=o(e("./InboxLabelView")),k=o(e("./InboxToolbarButtonView")),j=function(){function e(t,r,n){(0,d.default)(this,e),(0,p.default)(this,"_element",void 0),(0,p.default)(this,"_driver",void 0),(0,p.default)(this,"_p",void 0),(0,p.default)(this,"_userView",void 0),(0,p.default)(this,"_eventStream",(0,v.default)()),(0,p.default)(this,"_stopper",void 0),(0,p.default)(this,"_isDestroyed",!1),this._element=t,this._driver=r,this._p=n,this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}).toProperty()}return(0,f.default)(e,[{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"setUserView",value:function(e){this._userView=e}},{key:"isSelected",value:function(){if(!this._p.elements.checkbox)throw new Error("Did not find checkbox element");return"true"===this._p.elements.checkbox.getAttribute("aria-checked")}},{key:"addToolbarButton",value:function(e){var t=this._p.elements.toolbar;if(!t)throw new Error("could not find toolbar element");t.classList.add("inboxsdk__list_toolbar");var r=new k.default((0,c.default)({},e,{onClick:function(r){r.dropdown&&(t.classList.add("inboxsdk__thread_row_force_toolbar_visible"),r.dropdown.once("destroy",function(){t.classList.remove("inboxsdk__thread_row_force_toolbar_visible")})),e.onClick&&e.onClick(r)}}),this._driver.getAppId(),t);return this._stopper.takeUntilBy(r.getStopper()).onValue(function(){r.destroy()}),r}},{key:"addAttachmentIcon",value:function(e){throw new Error("Not supported in Inbox")}},{key:"addButton",value:function(e){throw new Error("Not supported in Inbox")}},{key:"addActionButton",value:function(e){throw new Error("not yet implemented")}},{key:"addImage",value:function(e){if(this._isDestroyed)return void console.warn("addImage called on destroyed thread row");var t=this._p.elements.labelParent;if(!t)throw new Error("Could not find label parent element");var r=(0,g.default)(_.default,e).takeUntilBy(this._stopper).toProperty(),n=null;r.onValue(function(e){if(e){n||(n={iconSettings:{},iconWrapper:document.createElement("div"),remove:function(){this.iconWrapper.remove()}},n.iconWrapper.className="inboxsdk__thread_row_icon_wrapper");var r=n,i=r.iconSettings,o=r.iconWrapper;if((0,m.default)(i,o,!1,e.imageClass,e.imageUrl),e.tooltip&&o.setAttribute("title",e.tooltip),t!==o.parentElement){var a=t.querySelectorAll(".inboxsdk__inbox_thread_row_label"),s=a.length>0?a[a.length-1].nextElementSibling:t.firstChild;t.insertBefore(o,s)}}else n&&(n.remove(),n=null)}),this._stopper.onEnd(function(){n&&n.remove()})}},{key:"addLabel",value:function(e){if(this._isDestroyed)return void console.warn("addLabel called on destroyed thread row");var t=this._p.elements.labelParent;if(!t)throw new Error("Could not find label parent element");var r=(0,g.default)(_.default,e).takeUntilBy(this._stopper).toProperty(),n=null;r.onValue(function(e){if(e){if(!n){var r=new w.default,i=r.getElement();n={inboxLabelView:r,remove:i.remove.bind(i)}}if(n.inboxLabelView.updateLabelDescriptor(e),t!==n.inboxLabelView.getElement().parentElement){var o=t.querySelectorAll(".inboxsdk__inbox_thread_row_label"),a=o.length>0?o[o.length-1].nextElementSibling:t.firstChild;t.insertBefore(n.inboxLabelView.getElement(),a)}}else n&&(n.remove(),n=null)}),this._stopper.onEnd(function(){n&&n.remove()})}},{key:"getDateString",value:function(){throw new Error("Not supported in Inbox")}},{key:"getSubject",value:function(){if(!this._p.elements.subject)throw new Error("Failed to find subject");return this._p.elements.subject.textContent}},{key:"getThreadID",value:function(){throw new Error("Not supported in Inbox. Please use getThreadIDAsync() instead")}},{key:"getThreadIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){var t,r,n,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.attributes.inboxThreadId){e.next=3;break}throw new Error("Failed to find thread id");case 3:if(!/^thread-a:/.test(t)){e.next=16;break}return this._driver.trackThreadRowIdCall(!1,t),e.next=7,this._driver.getInboxMessageIdForInboxThreadId(t);case 7:return r=e.sent,e.next=10,this._driver.getGmailMessageIdForSyncMessageId(r);case 10:return n=e.sent,e.next=13,this._driver.getThreadIdFromMessageId(n);case 13:return e.abrupt("return",e.sent);case 16:if(this._driver.trackThreadRowIdCall(!0,t),i=/\d+$/.exec(t)){e.next=20;break}throw new Error("Should not happen");case 20:return e.abrupt("return",new y.default(i[0]).toString(16));case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDraftID",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){var t,r,n,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.attributes,r=t.isOnlyDraft,n=t.inboxThreadId,!r||!n){e.next=8;break}if(i=/\d+$/.exec(n)){e.next=5;break}throw new Error("Should not happen");case 5:return e.abrupt("return",i[0]);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"getVisibleDraftCount",value:function(){var e=this._p.attributes.visibleDraftCount;if("number"!=typeof e)throw new Error("Failed to find visible draft count");return e}},{key:"getVisibleMessageCount",value:function(){var e=this._p.attributes.visibleMessageCount;if("number"!=typeof e)throw new Error("Failed to find visible message count");return e}},{key:"getContacts",value:function(){var e=this._p.attributes.contacts;if(!(0,s.default)(e))throw new Error("Failed to find contacts");return e}},{key:"replaceDate",value:function(e){throw new Error("Not supported in Inbox")}},{key:"replaceDraftLabel",value:function(e){var t=this;if(this._isDestroyed)return void console.warn("addLabel called on destroyed thread row");if(0!==this._p.attributes.visibleDraftCount){var r=this._p.elements,o=r.recipientParent,a=r.messageCountParent;if(!o||!a)throw new Error("Could not find necessary parent elements");var s=(0,g.default)(_.default,e).takeUntilBy(this._stopper).toProperty(),l=null;s.onValue(function(e){if(e){var r=e.text,s=e.count;l||(l={countEl:document.createElement("span"),draftEl:document.createElement("span"),remove:function(){this.countEl.remove(),this.draftEl.remove(),o.classList.remove("inboxsdk__thread_row_draft_label_replaced"),a.classList.remove("inboxsdk__thread_row_draft_count_replaced"),a.querySelector("span:not(.inboxsdk__thread_row_custom_draft_count)")||(a.style.display="none")}},l.draftEl.className="inboxsdk__thread_row_custom_draft_label",l.countEl.className="inboxsdk__thread_row_custom_draft_count",o.classList.add("inboxsdk__thread_row_draft_label_replaced")),l.draftEl.textContent=r,o!==l.draftEl.parentElement&&o.appendChild(l.draftEl);var u=a.querySelector("span:not(.inboxsdk__thread_row_custom_draft_count)");s&&s>1?(a.classList.add("inboxsdk__thread_row_draft_count_replaced"),a.style.display="inline",l.countEl.innerHTML=u?(0,b.default)(i(),s):(0,b.default)(n(),s),a!==l.countEl.parentElement&&a.appendChild(l.countEl)):(a.classList.remove("inboxsdk__thread_row_draft_count_replaced"),u||(a.style.display="none"),l.countEl.remove())}else l&&(l.remove(),l=null);t._stopper.onEnd(function(){l&&l.remove()})})}}},{key:"destroy",value:function(){this._isDestroyed=!0,this._eventStream.end()}}]),e}(),x=(0,h.defn)(t,j);r.default=x},{"../../../driver-common/update-icon":795,"./InboxLabelView":755,"./InboxToolbarButtonView":757,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"@babel/runtime-corejs2/regenerator":59,"auto-html":83,"bignumber.js":92,kefir:301,"kefir-bus":298,"kefir-cast":299,"kefir-stopper":300,ud:597}],776:[function(e,t,r){"use strict";function n(){var e=(0,o.default)(['\n            <button class="inboxsdk__button_icon" type="button" title="','">\n              <img class="inboxsdk__button_iconImg" src="','">\n            </button>\n          ']);return n=function(){return e},e}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),a=i(e("@babel/runtime-corejs2/regenerator")),s=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=i(e("@babel/runtime-corejs2/core-js/set")),u=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=i(e("@babel/runtime-corejs2/helpers/createClass")),d=i(e("@babel/runtime-corejs2/helpers/defineProperty")),f=i(e("lodash/find")),p=e("ud"),h=i(e("auto-html")),m=i(e("kefir")),b=i(e("kefir-bus")),_=i(e("kefir-stopper")),v=i(e("bignumber.js")),g=i(e("../../../lib/delay-asap")),y=i(e("../../../lib/idMap")),w=i(e("../../../lib/dom/querySelectorOrFail")),k=i(e("../../../lib/dom/make-mutation-observer-chunked-stream")),j=i(e("../../../views/SimpleElementView")),x=(i(e("../../../views/conversations/custom-message-view")),i(e("../detection/thread/parser"))),E=function(){function e(t,r,n){var i=this;(0,u.default)(this,e),(0,d.default)(this,"_element",void 0),(0,d.default)(this,"_driver",void 0),(0,d.default)(this,"_p",void 0),(0,d.default)(this,"_eventStream",(0,b.default)()),(0,d.default)(this,"_messageViews",[]),(0,d.default)(this,"_receivedMessageView",(0,_.default)()),(0,d.default)(this,"_stopper",void 0),(0,d.default)(this,"_ready",void 0),(0,d.default)(this,"_sidebarPanels",new l.default),this._element=t,this._driver=r,this._p=n,this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}).toProperty(),this._driver.getThreadViewElementsMap().set(this._element,this),this._ready=this._receivedMessageView.flatMap(function(){return(0,g.default)()}).onValue(function(){i._p=(0,x.default)(i._element)}).toProperty(),this.isLoadingStub()&&(0,k.default)(this._element,{attributes:!0,attributeFilter:["aria-busy"]
}).takeUntilBy(this._stopper).onValue(function(){i.isLoadingStub()||i.destroy()})}return(0,c.default)(e,[{key:"isLoadingStub",value:function(){return"true"===this._element.getAttribute("aria-busy")}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"addMessageViewDriver",value:function(e){var t=this;this._messageViews.push(e),this._eventStream.plug(e.getEventStream().filter(function(e){return"contactHover"===e.eventName})),e.getStopper().takeUntilBy(this._stopper).onValue(function(){t._messageViews=t._messageViews.filter(function(t){return t!==e})}),this._receivedMessageView.destroy()}},{key:"getMessageViewDrivers",value:function(){return this._messageViews}},{key:"getToolbarElement",value:function(){if(!this._p.elements.toolbar)throw new Error("Failed to find toolbar");return this._p.elements.toolbar}},{key:"getSubject",value:function(){if(!this._p.elements.heading)throw new Error("Failed to find subject");return this._p.elements.heading.textContent}},{key:"getThreadID",value:function(){var e=this._p.attributes.inboxThreadId;if(!e)throw new Error("Failed to find thread id");/^msg-a:/.test(e)&&console.warn("ThreadView.getThreadID() returned an incorrect thread ID. This method will be deprecated soon. Use getThreadIDAsync() instead which does not have this problem.");var t=/\d+$/.exec(e);if(!t)throw new Error("Should not happen");return new v.default(t[0]).toString(16)}},{key:"getThreadIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(a.default.mark(function e(){var t,r,n,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.attributes.inboxThreadId){e.next=3;break}throw new Error("Failed to find message id");case 3:if(!/^thread-a:/.test(t)){e.next=15;break}if(r=this._messageViews[0]){e.next=7;break}throw new Error("Should not happen");case 7:return e.next=9,r.getMessageIDAsync();case 9:return n=e.sent,e.next=12,this._driver.getThreadIdFromMessageId(n);case 12:return e.abrupt("return",e.sent);case 15:if(i=/\d+$/.exec(t)){e.next=18;break}throw new Error("Should not happen");case 18:return e.abrupt("return",new v.default(i[0]).toString(16));case 19:case"end":return e.stop()}},e,this)}));return e}()},{key:"registerHiddenCustomMessageNoticeProvider",value:function(e){throw new Error("not supported")}},{key:"addCustomMessage",value:function(e){throw new Error("not supported")}},{key:"addSidebarContentPanel",value:function(e){var t=this,r=this._driver.getAppSidebarView().addSidebarContentPanel(e);return this._sidebarPanels.add(r),r.getStopper().onValue(function(){t._sidebarPanels.delete(r)}),this._stopper.takeUntilBy(r.getStopper()).onValue(function(){r.remove()}),e.takeUntilBy(this._stopper).takeUntilBy(r.getStopper()).take(1).onValue(function(e){var i=t._p.elements.stickyHeading;if(i){var o=i.querySelector("."+(0,y.default)("sidebar_iconArea"));if(!o){var a=o=document.createElement("div");o.className=(0,y.default)("sidebar_iconArea"),t._driver.getAppSidebarView().getOpenOrOpeningStream().takeUntilBy(t._stopper).onValue(function(e){a.style.display=e?"none":""}),i.appendChild(o)}var s,l=e.appName||t._driver.getOpts().appName||e.title,u=e.appIconUrl||t._driver.getOpts().appIconUrl||e.iconUrl,c=(0,f.default)(o.querySelectorAll("."+(0,y.default)("sidebar_button_container")),function(e){var t=e.querySelector("button");if(!t||t.title!==l)return!1;var r=t.querySelector("img");return!(!r||r.src!==u)});if(c){var d=Number(c.getAttribute("data-count"))||1;c.setAttribute("data-count",d+1),s=c}else s=document.createElement("div"),s.className=(0,y.default)("sidebar_button_container"),s.innerHTML=(0,h.default)(n(),l,u),(0,w.default)(s,"button").addEventListener("click",function(e){e.stopPropagation(),t._driver.getAppSidebarView().open(),r.scrollIntoView()},!0),o.appendChild(s);r.getStopper().onValue(function(){var e=Number(s.getAttribute("data-count"));e<=1?s.remove():2===e?s.removeAttribute("data-count"):s.setAttribute("data-count",String(e-1))})}}),r}},{key:"removePanels",value:function(){this._sidebarPanels.forEach(function(e){e.remove()})}},{key:"addNoticeBar",value:function(){var e=document.createElement("div");e.className=(0,y.default)("thread_noticeBar");var t=this._p.elements.heading;if(!t)throw new Error("Failed to find subject");t.insertAdjacentElement("afterend",e);var r=new j.default(e);return this._stopper.takeUntilBy(m.default.fromEvents(r,"destroy")).onValue(function(){return r.destroy()}),r}},{key:"addLabel",value:function(){throw new Error("not supported")}},{key:"getReadyStream",value:function(){return this._ready}},{key:"destroy",value:function(){this._driver.getThreadViewElementsMap().delete(this._element),this._eventStream.end()}}]),e}(),S=(0,p.defn)(t,E);r.default=S},{"../../../lib/delay-asap":803,"../../../lib/dom/make-mutation-observer-chunked-stream":815,"../../../lib/dom/querySelectorOrFail":821,"../../../lib/idMap":835,"../../../views/SimpleElementView":872,"../../../views/conversations/custom-message-view":879,"../detection/thread/parser":741,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"@babel/runtime-corejs2/regenerator":59,"auto-html":83,"bignumber.js":92,kefir:301,"kefir-bus":298,"kefir-stopper":300,"lodash/find":458,ud:597}],777:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=e("ud"),l=n(e("kefir")),u=n(e("kefir-stopper")),c=n(e("contain-by-screen")),d=function(){function e(t,r){var n=this;if((0,i.default)(this,e),(0,a.default)(this,"_target",void 0),(0,a.default)(this,"_el",void 0),(0,a.default)(this,"_contentEl",void 0),(0,a.default)(this,"_arrowEl",void 0),(0,a.default)(this,"_stopper",(0,u.default)()),this._target=t,this._arrowEl=document.createElement("div"),this._arrowEl.className="inboxsdk__tooltip_arrow",this._contentEl=document.createElement("div"),this._contentEl.className="inboxsdk__tooltip_content",this._el=document.createElement("div"),this._el.style.position="fixed",this._el.className="inboxsdk__tooltip",this._el.appendChild(this._contentEl),r.el)this._contentEl.appendChild(r.el),this._el.classList.add("inboxsdk__tooltip_chromeless");else{var o=document.createElement("button");if(o.type="button",o.title="Close",o.className="inboxsdk__close_button",o.addEventListener("click",function(e){n.destroy()}),this._el.appendChild(o),r.imageUrl){var s=r.imageUrl,c=document.createElement("img");c.className="inboxsdk__tooltip_img",c.src=s,this._contentEl.appendChild(c)}if(r.title){var d=r.title,f=document.createElement("h1");f.textContent=d,this._contentEl.appendChild(f)}if(r.subtitle){var p=r.subtitle,h=document.createElement("div");h.className="inboxsdk__subtitle",h.textContent=p,this._contentEl.appendChild(h)}if(r.button){var m=r.button,b=document.createElement("input");b.type="button",b.value=m.title,b.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),m.onClick&&m.onClick.call(null)}),this._contentEl.appendChild(b)}}document.body.appendChild(this._el),document.body.appendChild(this._arrowEl),this._updatePosition(!0),this._el.addEventListener("load",function(e){n._updatePosition(!0)},!0),l.default.interval(200).takeUntilBy(this._stopper).map(function(){return t.getBoundingClientRect()}).skipDuplicates(function(e,t){return e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}).onValue(function(){n._updatePosition()})}return(0,o.default)(e,[{key:"destroy",value:function(){this._el.remove(),this._arrowEl.remove(),this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}},{key:"_updatePosition",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this._el.classList.add("inboxsdk__notransition"),this._arrowEl.classList.add("inboxsdk__notransition"));var r=(0,c.default)(this._el,this._target,{position:"top",hAlign:"center",vAlign:"center",buffer:10}),n=r.position;(0,c.default)(this._arrowEl,this._target,{position:n,forcePosition:!0,hAlign:"center",forceHAlign:!0,vAlign:"center",forceVAlign:!0,buffer:11}),["top","bottom","left","right"].forEach(function(t){e._arrowEl.classList.remove("inboxsdk__"+t)}),this._arrowEl.classList.add("inboxsdk__"+n),t&&(this._el.offsetHeight,this._arrowEl.offsetHeight,this._el.classList.remove("inboxsdk__notransition"),this._arrowEl.classList.remove("inboxsdk__notransition"))}}]),e}(),f=(0,s.defn)(t,d);r.default=f},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"contain-by-screen":129,kefir:301,"kefir-stopper":300,ud:597}],778:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/number/max-safe-integer")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=n(e("kefir")),u=n(e("kefir-bus")),c=n(e("kefir-stopper")),d=n(e("../../../lib/dom/insert-element-in-order")),f=n(e("../../../lib/dom/querySelectorOrFail")),p=n(e("../../../widgets/buttons/dropdown-view")),h=n(e("./inbox-dropdown-view")),m=n(e("../../../constants/nav-item-types")),b=n(e("../../../driver-common/update-icon")),_=function(){function e(t,r){var n=this;(0,o.default)(this,e),(0,s.default)(this,"_eventStream",(0,u.default)()),(0,s.default)(this,"_level",void 0),(0,s.default)(this,"_stopper",void 0),(0,s.default)(this,"_transitionResetter",(0,u.default)()),(0,s.default)(this,"_navItemDescriptor",void 0),(0,s.default)(this,"_children",0),(0,s.default)(this,"_name",""),(0,s.default)(this,"_type",null),(0,s.default)(this,"_orderHint",i.default),(0,s.default)(this,"_disabled",!1),(0,s.default)(this,"_isCollapsed",!1),(0,s.default)(this,"_iconSettings",{}),(0,s.default)(this,"_accessory",null),(0,s.default)(this,"_accessoryView",null),(0,s.default)(this,"_elements",void 0),this._level=r||0,this._elements={wrapper:document.createElement("div"),expander:document.createElement("div"),navItem:document.createElement("div"),name:document.createElement("span"),subNav:document.createElement("div"),subNavInner:document.createElement("div"),accessory:document.createElement("div")},this._level>2&&console.warn("Adding NavItems more than 3 levels deep is not supported"),this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}).toProperty(),this._setupElements(),t.takeUntilBy(this._stopper).onValue(function(e){n._update(e),n._navItemDescriptor=e})}return(0,a.default)(e,[{key:"addNavItem",value:function(t,r){var n=this,i=new e(r,this._level+1);return i.getEventStream().filter(function(e){return"orderChanged"===e.eventName}).onValue(function(){return(0,d.default)(n._elements.subNavInner,i.getElement())}),(0,d.default)(this._elements.subNavInner,i.getElement()),this._children+=1,i.getStopper().onValue(function(){n._children-=1,n._updateChildrenClass(),n._updateDisabledState(n._navItemDescriptor||{}),n._updateAccessory(n._accessory,!0)}),this._updateChildrenClass(),this._updateDisabledState(this._navItemDescriptor||{}),this._updateAccessory(this._accessory,!0),i}},{key:"setActive",value:function(e){this._elements.navItem.classList.toggle("inboxsdk__navItem_active",e)}},{key:"toggleCollapse",value:function(){this._isCollapsed=!this._isCollapsed,this._isCollapsed?this._collapse():this._expand()}},{key:"setCollapsed",value:function(e){this._isCollapsed!==e&&(this._isCollapsed=e,this._isCollapsed?this._collapse():this._expand())}},{key:"isCollapsed",value:function(){return this._isCollapsed}},{key:"getElement",value:function(){return this._elements.wrapper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._elements.wrapper.remove()}},{key:"_setupElements",value:function(){var e=this,t=this._elements,r=t.wrapper,n=t.expander,i=t.navItem,o=t.name,a=t.subNav,s=t.subNavInner,u=t.accessory;r.className="inboxsdk__navItem_wrapper inboxsdk__navItem_level".concat(this._level),r.setAttribute("tabindex","-1"),r.setAttribute("data-order-hint",String(this._orderHint)),i.setAttribute("role","menuitem"),n.classList.add("inboxsdk__navItem_expander"),i.classList.add("inboxsdk__navItem"),o.classList.add("inboxsdk__navItem_name"),u.classList.add("inboxsdk__navItem_accessory"),a.classList.add("inboxsdk__navItem_subNav"),s.classList.add("inboxsdk__navItem_subNavInner"),n.innerHTML='<svg><polygon points="16.59 8.59 12 13.17 7.41 8.59 6 10 12 16 18 10"></polygon></svg>',i.appendChild(n),i.appendChild(o),i.appendChild(u),r.appendChild(i),a.appendChild(s),r.appendChild(a),this._eventStream.plug(l.default.fromEvents(i,"click").filter(function(){return!e._disabled}).map(function(e){return e.stopPropagation(),e.preventDefault(),{eventName:"click",domEvent:e}})),l.default.fromEvents(n,"click").takeUntilBy(this._stopper).filter(function(){return e._children>0}).onValue(function(t){e.toggleCollapse(),t.stopPropagation()})}},{key:"_collapse",value:function(){var e=this._elements,t=e.subNav,r=e.subNavInner;this._transitionResetter.emit(null),this._elements.wrapper.classList.add("inboxsdk__navItem_collapsed"),t.style.height="".concat(r.clientHeight,"px"),t.clientHeight,t.style.height="0",l.default.merge([l.default.fromEvents(t,"transitionend"),l.default.later(750)]).takeUntilBy(this._transitionResetter).take(1).onValue(function(){t.style.display="none"}),this._eventStream.emit({eventName:"collapsed"})}},{key:"_expand",value:function(){var e=this._elements,t=e.subNav,r=e.subNavInner;this._transitionResetter.emit(null),this._elements.wrapper.classList.remove("inboxsdk__navItem_collapsed"),t.style.display="",t.style.height="".concat(r.clientHeight,"px"),l.default.merge([l.default.fromEvents(t,"transitionend"),l.default.later(750)]).takeUntilBy(this._transitionResetter).take(1).onValue(function(){t.style.height=""}),this._eventStream.emit({eventName:"expanded"})}},{key:"_update",value:function(e){this._updateName(e.name),this._updateType(e.type),this._updateExpander(e),this._updateDisabledState(e),this._updateIcon(e),this._updateAccessory(e.accessory),this._updateOrder(e.orderHint||0===e.orderHint?e.orderHint:i.default)}},{key:"_updateName",value:function(e){this._name!==e&&(this._elements.name.textContent=e,this._elements.name.setAttribute("title",e),this._name=e)}},{key:"_updateType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.default.NAVIGATION;this._type!==e&&(this._elements.navItem.classList.toggle("inboxsdk__navItem_link",e===m.default.LINK),this._type=e)}},{key:"_updateExpander",value:function(e){var t=e.backgroundColor,r=e.expanderForegroundColor;this._elements.expander.style.backgroundColor=t||"",(0,f.default)(this._elements.expander,"polygon").style.fill=r||"",this._elements.wrapper.classList.toggle("inboxsdk__navItem_hasColor","string"==typeof t)}},{key:"_updateIcon",value:function(e){this._elements.navItem.classList.toggle("inboxsdk__navItem_hasIcon",(!this._disabled||this._level>0)&&Boolean(e.iconUrl||e.iconClass)),(0,b.default)(this._iconSettings,this._elements.navItem,!1,e.iconClass,e.iconUrl,this._elements.name)}},{key:"_updateAccessory",value:function(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this._accessory!==e)&&(this._accessoryView&&(this._accessoryView.destroy(),this._accessoryView=null),e&&!this._disabled&&(this._accessoryView=this._createAccessory(e)),this._accessory=e)}},{key:"_updateDisabledState",value:function(e){this._disabled=!(e.routeID||e.onClick)||0===this._level&&this._children>0,this._elements.wrapper.classList.toggle("inboxsdk__navItem_disabled",this._disabled)}},{key:"_updateOrder",value:function(e){this._orderHint!==e&&(this._elements.wrapper.setAttribute("data-order-hint",String(e)),this._orderHint=e,this._eventStream.emit({eventName:"orderChanged"}))}},{key:"_updateChildrenClass",value:function(){this._elements.wrapper.classList.toggle("inboxsdk__navItem_hasChildren",this._children>0)}},{key:"_createAccessory",value:function(e){switch(e.type){case"CREATE":return this._createCreateAccessory(e);case"ICON_BUTTON":return this._createIconButtonAccessory(e);case"DROPDOWN_BUTTON":return this._createDropdownButtonAccessory(e);default:throw new Error("A type must be specified for NavItem accessories")}}},{key:"_createCreateAccessory",value:function(e){var t=e.onClick;return this._createIconButtonAccessory({onClick:t,iconUrl:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/ic_add-cluster_24px_g60_r3_2x.png"})}},{key:"_createDropdownButtonAccessory",value:function(e){var t=e.onClick;return this._createIconButtonAccessory({onClick:t,iconUrl:"//www.gstatic.com/images/icons/material/system/2x/settings_black_18dp.png"},!0)}},{key:"_createIconButtonAccessory",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.onClick)throw new Error("An onClick handler is required");this._elements.wrapper.classList.add("inboxsdk__navItem_hasAccessory"),(0,b.default)({},this._elements.accessory,!1,e.iconClass,e.iconUrl);var n=(0,f.default)(this._elements.accessory,".inboxsdk__button_icon");n.setAttribute("tabindex","-1");var i=(0,c.default)(),o=null;return l.default.fromEvents(this._elements.accessory,"click").takeUntilBy(this._stopper).takeUntilBy(i).onValue(function(i){if(i.preventDefault(),i.stopPropagation(),r){if(o)return void o.close();n.classList.add("inboxsdk__active"),o=new p.default(new h.default,t._elements.accessory),o.setPlacementOptions({position:"right",hAlign:"left",vAlign:"top",buffer:10}),o.on("destroy",function(){n.classList.remove("inboxsdk__active"),o=null})}e.onClick({dropdown:o})}),l.default.merge([this._stopper,i]).take(1).onValue(function(){o&&o.close()}),{destroy:function(){t._elements.wrapper.classList.remove("inboxsdk__navItem_hasAccessory"),t._elements.accessory.innerHTML="",i.destroy()}}}}]),e}();r.default=_},{"../../../constants/nav-item-types":620,"../../../driver-common/update-icon":795,"../../../lib/dom/insert-element-in-order":809,"../../../lib/dom/querySelectorOrFail":821,"../../../widgets/buttons/dropdown-view":893,"./inbox-dropdown-view":770,"@babel/runtime-corejs2/core-js/number/max-safe-integer":9,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298,"kefir-stopper":300}],779:[function(e,t,r){"use strict";function n(){var e=c();return(0,u.default)(e,{attributes:!0}).toProperty(function(){}).filter(function(){return"none"!==window.getComputedStyle(e).display}).merge(l.default.later(150)).take(1).flatMap(function(){return(0,u.default)(e,{attributes:!0}).toProperty(function(){})}).filter(function(){return"none"===window.getComputedStyle(e).display}).map(function(){}).take(1)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/parse-float")),a=i(e("lodash/once")),s=i(e("lodash/find")),l=i(e("kefir")),u=i(e("../../lib/dom/make-mutation-observer-chunked-stream")),c=(0,a.default)(function(){return(0,s.default)(document.body.children,function(e){var t=window.getComputedStyle(e);return"fixed"===t.position&&0===(0,o.default)(t.top)&&0===(0,o.default)(t.bottom)&&0===(0,o.default)(t.left)&&0===(0,o.default)(t.right)})})},{"../../lib/dom/make-mutation-observer-chunked-stream":815,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-float":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"lodash/find":458,"lodash/once":489}],780:[function(e,t,r){"use strict";function n(e){var t=e.element,r=e.discardButton;return a.default.merge([(0,s.default)(t,"keydown").filter(function(e){return[13,32].indexOf(e.which)>-1||[13,32].indexOf(e.keyCode)>-1}).filter(function(e){return r&&r.contains(e.target)}),(0,s.default)(t,"click").filter(function(e){return r&&r.contains(e.target)})]).map(function(e){return{eventName:"discard",data:{cancel:function(){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),l(t)}}}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("asap")),a=i(e("kefir")),s=i(e("../../lib/from-event-target-capture")),l=function(e){return(0,o.default)(function(){return e.dispatchEvent(new CustomEvent("inboxSDKdiscardCanceled",{bubbles:!1,cancelable:!1,detail:null}))})}},{"../../lib/from-event-target-capture":831,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,asap:77,kefir:301}],781:[function(e,t,r){"use strict";function n(e){var t=e.element,r=e.sendButton,n=e.sendAndArchive;return a.default.merge([(0,s.default)(t,"keydown").filter(function(e){return e.ctrlKey||e.metaKey}).filter(function(e){return 13===e.which||13===e.keyCode}),(0,s.default)(t,"keydown").filter(function(e){return[13,32].indexOf(e.which)>-1||[13,32].indexOf(e.keyCode)>-1}).filter(function(e){return r&&r.contains(e.target)||n&&n.contains(e.target)}),(0,s.default)(t,"click").filter(function(e){return r&&r.contains(e.target)||n&&n.contains(e.target)})]).filter(function(e){return!t.hasAttribute("data-inboxsdk-send-replaced")||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1)}).map(function(e){return{eventName:"presending",data:{cancel:function(){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),l(t)}}}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("asap")),a=i(e("kefir")),s=i(e("../../lib/from-event-target-capture")),l=function(e){return(0,o.default)(function(){return e.dispatchEvent(new CustomEvent("inboxSDKsendCanceled",{bubbles:!1,cancelable:!1,detail:null}))})}},{"../../lib/from-event-target-capture":831,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,asap:77,kefir:301}],782:[function(e,t,r){"use strict";function n(){var e=document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/);if(e){var t=e[1];return"/u/".concat(e[2],"/d/").concat(t)}var r=document.location.pathname.match(/(\/u\/\d+)\//i);return r?r[1]:"/u/0"}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],783:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,s.default)(a.default.mark(function e(t,r){var n,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.default)(t,{syncMessageID:r});case 2:if(n=e.sent,i=n.match(/<a\b[^<>]+\bhref="\/mail[^"]*(?:\?|&(?:amp;)?)view=att&(?:amp;)?th=([a-f0-9]+)&/i)){e.next=6;break}throw new Error("Failed to find gmail message id for inbox message id");case 6:return e.abrupt("return",i[1]);case 7:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=e("ud"),u=o(e("./getOriginalMessagePage")),c=(0,l.defn)(t,n);r.default=c},{"./getOriginalMessagePage":785,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,ud:597}],784:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,u.default)(l.default.mark(function e(t,r){var n,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isUsingSyncAPI||!t.isUsingSyncAPI()){e.next=8;break}return e.next=3,(0,f.default)(t,"rfc822msgid:"+r);case 3:return n=e.sent,i=n.threads,e.abrupt("return",i[0].oldGmailThreadID);case 8:return e.abrupt("return",o(t,r));case 9:case"end":return e.stop()}},e)})),i.apply(this,arguments)}function o(e,t){return a.apply(this,arguments)}function a(){return a=(0,u.default)(l.default.mark(function e(t,r){var n,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p.default,e.t1="https://mail.google.com/mail".concat((0,h.default)(),"/"),e.t2=t.getPageCommunicator().getIkValue(),e.next=5,t.getGmailActionToken();case 5:return e.t3=e.sent,e.t4="rfc822msgid:".concat(r),e.t5={ik:e.t2,at:e.t3,ui:"2",view:"tl",start:"0",num:"1",rt:"c",search:"query",q:e.t4},e.t6={withCredentials:!0},e.t7={"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},e.t8={method:"POST",url:e.t1,data:e.t5,xhrFields:e.t6,canRetry:!0,headers:e.t7},e.next=13,(0,e.t0)(e.t8);case 13:if(n=e.sent,i=(0,d.extractThreads)(n.text),1===i.length){e.next=17;break}throw new Error("Failed to find gmail thread id for rfc message id. Message may not exist in user's account.");case 17:return e.abrupt("return",i[0].gmailThreadId);case 18:case"end":return e.stop()}},e)})),a.apply(this,arguments)}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/regenerator")),u=s(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=e("ud"),d=e("../dom-driver/gmail/gmail-response-processor"),f=s(e("./getSyncThreadsForSearch")),p=s(e("./gmailAjax")),h=s(e("./getAccountUrlPart")),m=(0,c.defn)(t,n);r.default=m},{"../dom-driver/gmail/gmail-response-processor":659,"./getAccountUrlPart":782,"./getSyncThreadsForSearch":787,"./gmailAjax":789,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,ud:597}],785:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,s.default)(a.default.mark(function e(t,r){var n,i,o,s,l,c,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={ik:t.getPageCommunicator().getIkValue(),view:"om"},r.oldGmailMessageID?n.th=r.oldGmailMessageID:r.syncMessageID&&(n.permmsgid=r.syncMessageID),o=document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/),o?i=document.location.origin+document.location.pathname:(s=document.location.pathname.match(/(\/u\/\d+)\//i),l=s?s[1]:"/u/0",i="https://mail.google.com/mail".concat(l)),e.next=6,(0,u.default)({url:i,method:"GET",canRetry:!0,data:n});case 6:return c=e.sent,d=c.text,e.abrupt("return",d);case 9:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=e("ud"),u=o(e("./gmailAjax")),c=(o(e("./getAccountUrlPart")),(0,l.defn)(t,n));r.default=c},{"./getAccountUrlPart":782,"./gmailAjax":789,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,ud:597}],786:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,s.default)(a.default.mark(function e(t,r){var n,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.default)(t,{syncMessageID:r});case 2:if(n=e.sent,i=n.match(/^Message-ID:\s+(\S+)\s*$/im)){e.next=6;break}throw new Error("Failed to find rfc id for gmail thread id. Message may not exist in user's account.");case 6:return e.abrupt("return",(0,c.default)(i[1]));case 7:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=e("ud"),u=o(e("./getOriginalMessagePage")),c=o(e("../../common/html-to-text")),d=(0,l.defn)(t,n);r.default=d},{"../../common/html-to-text":614,"./getOriginalMessagePage":785,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,ud:597}],787:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,l.default)(a.default.mark(function e(t,r){var n,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d.default,e.t1="https://mail.google.com/sync".concat((0,f.default)(),"/i/bv"),e.next=4,t.getPageCommunicator().getXsrfToken();case 4:return e.t2=e.sent,e.next=7,t.getPageCommunicator().getBtaiHeader();case 7:return e.t3=e.sent,e.t4={"Content-Type":"application/json","X-Framework-Xsrf-Token":e.t2,"X-Gmail-BTAI":e.t3,"X-Google-BTD":"1"},e.t5=(0,s.default)({1:{2:1,4:r}}),e.t6={method:"POST",url:e.t1,headers:e.t4,data:e.t5},e.next=13,(0,e.t0)(e.t6);case 13:return n=e.sent,i=n.text,e.abrupt("return",{threads:(0,c.extractThreadsFromSearchResponse)(i),_text:i});case 16:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/core-js/json/stringify")),l=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=e("ud"),c=(e("../dom-driver/gmail/gmail-response-processor"),e("../dom-driver/gmail/gmail-sync-response-processor")),d=o(e("./gmailAjax")),f=o(e("./getAccountUrlPart")),p=(0,u.defn)(t,n);r.default=p},{"../dom-driver/gmail/gmail-response-processor":659,"../dom-driver/gmail/gmail-sync-response-processor":660,"./getAccountUrlPart":782,"./gmailAjax":789,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,ud:597}],788:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,s.default)(a.default.mark(function e(t,r){var n,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getPageCommunicator().getIkValue(),e.next=3,(0,u.default)(n,r);case 3:if(i=e.sent,o=(0,
c.extractGmailThreadIdFromMessageIdSearch)(i)){e.next=7;break}throw new Error("Failed to find thread id for given message id");case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=e("ud"),u=o(e("./requestGmailThread")),c=e("../dom-driver/gmail/gmail-response-processor"),d=(0,l.defn)(t,n);r.default=d},{"../dom-driver/gmail/gmail-response-processor":659,"./requestGmailThread":792,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,ud:597}],789:[function(e,t,r){"use strict";function n(e){return i.apply(this,arguments)}function i(){return i=(0,l.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(/^https:\/\/mail\.google\.com(?:$|\/)/.test(t.url)){e.next=2;break}throw new Error("Should not happen: gmailAjax called with non-gmail url");case 2:if("https://mail.google.com"!==document.location.origin){e.next=6;break}return e.next=5,m(t);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.next=9,m((0,s.default)({},t,{canRetry:!1}));case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(6),!e.t0||0!==e.t0.status){e.next=27;break}return e.prev=15,e.next=18,c.default.fromPromise((0,d.default)("https://mail.google.com/mail/u/0/")).merge(c.default.later(h)).take(1).takeErrors(1).toPromise();case 18:e.next=22;break;case 20:e.prev=20,e.t1=e.catch(15);case 22:return e.next=24,m(t);case 24:return e.abrupt("return",e.sent);case 27:if(!(e.t0&&"number"==typeof e.t0.status&&e.t0.status>=500)){e.next=33;break}return e.next=30,m(t);case 30:return e.abrupt("return",e.sent);case 33:throw e.t0;case 34:case"end":return e.stop()}},e,null,[[6,12],[15,20]])})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/objectSpread")),l=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=e("ud"),c=o(e("kefir")),d=o(e("../lib/imageRequest")),f=o(e("../../common/rate-limit-queuer")),p=o(e("../../common/ajax")),h=6e4,m=(0,f.default)(p.default,1e3,7),b=(0,u.defn)(t,n);r.default=b},{"../../common/ajax":604,"../../common/rate-limit-queuer":617,"../lib/imageRequest":836,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/regenerator":59,kefir:301,ud:597}],790:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=e("ud"),o=n(e("../../common/rate-limit-queuer")),a=n(e("../../common/ajax")),s=(0,i.defn)(t,(0,o.default)(a.default,1e3,7)),l=s;r.default=l},{"../../common/ajax":604,"../../common/rate-limit-queuer":617,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,ud:597}],791:[function(e,t,r){"use strict";function n(e,t,r,n){var i=e.querySelector(".inboxsdk__button_icon");i||(i=document.createElement("div"),i.classList.add("inboxsdk__button_icon"),i.appendChild(t)),r?e.appendChild(i):e.insertBefore(e,n||e.firstElementChild)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],792:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,s.default)(a.default.mark(function e(t,r){var n,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={ui:2,ik:t,view:"cv",th:r,pcd:1,mb:0,rt:"c",search:"inbox",type:r},e.next=3,(0,c.default)({method:"POST",url:"https://mail.google.com/mail".concat((0,d.default)(),"?").concat(u.default.stringify(n)),canRetry:!0});case 3:return i=e.sent,o=i.text,e.abrupt("return",o);case 6:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=e("ud"),u=o(e("querystring")),c=o(e("./gmailAjax")),d=o(e("./getAccountUrlPart")),f=(0,l.defn)(t,n);r.default=f},{"./getAccountUrlPart":782,"./gmailAjax":789,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,querystring:549,ud:597}],793:[function(e,t,r){(function(t){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/extends")),o=n(e("@babel/runtime-corejs2/core-js/json/stringify")),a=n(e("@babel/runtime-corejs2/helpers/slicedToArray")),s=n(e("@babel/runtime-corejs2/core-js/object/keys")),l=n(e("@babel/runtime-corejs2/core-js/date/now")),u=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=n(e("@babel/runtime-corejs2/helpers/createClass")),d=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),f=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),p=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),h=n(e("@babel/runtime-corejs2/helpers/inherits")),m=n(e("@babel/runtime-corejs2/helpers/defineProperty")),b=n(e("lodash/flatMap")),_=n(e("lodash/sortBy")),v=n(e("classnames")),g=n(e("kefir")),y=n(e("kefir-stopper")),w=n(e("react")),k=n(e("react-draggable-list")),j=n(e("react-smooth-collapse")),x=(n(e("../../../common/get-or-fail")),n(e("../../lib/idMap"))),E=n(e("../../lib/react/ElementContainer")),S={stiffness:400,damping:50},C=function(e){function r(e){var t;return(0,u.default)(this,r),t=(0,d.default)(this,(0,f.default)(r).call(this,e)),(0,m.default)((0,p.default)(t),"_list",void 0),(0,m.default)((0,p.default)(t),"_main",void 0),(0,m.default)((0,p.default)(t),"_stopper",(0,y.default)()),t.state={expansionSettings:t._readExpansionSettings()},t}return(0,h.default)(r,e),(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this;g.default.fromEvents(window,"storage").filter(function(e){return"inboxsdk__sidebar_expansion_settings"===e.key}).takeUntilBy(this._stopper).onValue(function(){e.setState({expansionSettings:e._readExpansionSettings()})})}},{key:"componentWillUnmount",value:function(){this._stopper.destroy()}},{key:"scrollPanelIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._list.getItemInstance(e),n=this.props.container;r.scrollIntoView(t,n&&n())}},{key:"closePanel",value:function(e){var t=this.props.panels.find(function(t){return t.instanceId===e});t&&this._expandedToggle(t.appId,t.id,!1)}},{key:"openPanel",value:function(e){var t=this.props.panels.find(function(t){return t.instanceId===e});t&&this._expandedToggle(t.appId,t.id,!0)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.panels!==e.panels||this.state.expansionSettings!==t.expansionSettings}},{key:"_expandedToggle",value:function(e,t,r){var n=this._readExpansionSettings();Object.prototype.hasOwnProperty.call(n.apps,e)||(n.apps[e]={ids:{}}),n.apps[e].ids[t]={lastUse:(0,l.default)(),expanded:r},this.setState({expansionSettings:n},this.props.onExpandedToggle),this._saveExpansionSettings(n)}},{key:"_readExpansionSettings",value:function(){var e;try{e=JSON.parse(t.localStorage.getItem("inboxsdk__sidebar_expansion_settings")||"null")}catch(e){console.error("Failed to read sidebar settings",e)}return e||{apps:{}}}},{key:"_saveExpansionSettings",value:function(e){var r=(0,b.default)((0,s.default)(e.apps),function(t){return(0,s.default)(e.apps[t].ids).map(function(e){return[t,e]})});if(r.length>200){(0,_.default)(r,function(t){var r=(0,a.default)(t,2),n=r[0],i=r[1];return e.apps[n].ids[i].lastUse}).slice(0,r.length-200).forEach(function(t){var r=(0,a.default)(t,2),n=r[0],i=r[1];delete e.apps[n].ids[i],0===(0,s.default)(e.apps[n].ids).length&&delete e.apps[n]})}try{t.localStorage.setItem("inboxsdk__sidebar_expansion_settings",(0,o.default)(e))}catch(e){console.error("Failed to save sidebar settings",e)}}},{key:"render",value:function(){var e=this,t=this.state.expansionSettings,r=this.props,n=r.panels,i=r.onClose,o=r.onOutsideClick,a=r.onMoveEnd,s=r.container,l=n.length>1,u=1===n.length&&n[0].hideTitleBar,c=n.map(function(r){var n=Object.prototype.hasOwnProperty.call(t.apps,r.appId)?t.apps[r.appId]:null,i=n?n.ids[r.id]:null,o=!i||i.expanded;return{panelDescriptor:r,showControls:l,expanded:o,onExpandedToggle:function(t){e._expandedToggle(r.appId,r.id,t)}}});return w.default.createElement("div",{className:(0,v.default)((0,x.default)("app_sidebar"),(0,m.default)({},(0,x.default)("hideTitleBar"),u))},w.default.createElement("div",{className:(0,x.default)("app_sidebar_main"),ref:function(t){t&&(e._main=t)}},w.default.createElement("div",{className:(0,x.default)("app_sidebar_content_area")},w.default.createElement(k.default,{padding:0,ref:function(t){t&&(e._list=t)},itemKey:function(e){return e.panelDescriptor.instanceId},template:I,list:c,onMoveEnd:function(e,t,r,n){a(e.map(function(e){return e.panelDescriptor}),t.panelDescriptor,r,n)},springConfig:S,container:s||function(){return e._main}})),o&&w.default.createElement("div",{className:(0,x.default)("app_sidebar_content_area_padding"),onClick:function(e){e.preventDefault(),o()}})),i&&w.default.createElement("button",{className:"inboxsdk__close_button",type:"button",title:"Close",onClick:i}))}}]),r}(w.default.Component);r.default=C;var I=function(e){function t(){var e,r;(0,u.default)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=(0,d.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(i))),(0,m.default)((0,p.default)(r),"_el",void 0),r}return(0,h.default)(t,e),(0,c.default)(t,[{key:"scrollIntoView",value:function(e,t){if(e&&t){var r=this._el.parentElement;r&&t.scrollTo({top:r.offsetTop,behavior:"smooth"})}else this._el.scrollIntoView({behavior:"smooth"})}},{key:"getDragHeight",value:function(){return 40}},{key:"componentDidMount",value:function(){(!this.props.item.showControls||this.props.item.expanded)&&document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}}))}},{key:"componentDidUpdate",value:function(e){var t=!e.item.showControls||e.item.expanded,r=!this.props.item.showControls||this.props.item.expanded;!t&&r?document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}})):t&&!r&&document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}}))}},{key:"shouldComponentUpdate",value:function(e){return this.props.itemSelected!==e.itemSelected||this.props.item.panelDescriptor!==e.item.panelDescriptor||this.props.item.showControls!==e.item.showControls||this.props.item.expanded!==e.item.expanded}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.dragHandleProps,o=r.itemSelected,a=r.item,s=a.panelDescriptor,l=s.title,u=s.appName,c=s.iconClass,d=s.iconUrl,f=s.el,p=a.showControls,h=a.expanded,b=a.onExpandedToggle,_=.01*o+1,g=4*o;return w.default.createElement("div",{ref:function(e){e&&(t._el=e)},className:(0,v.default)((0,x.default)("app_sidebar_content_panel"),(e={},(0,m.default)(e,(0,x.default)("dragged"),o>.2),(0,m.default)(e,(0,x.default)("expanded"),h),(0,m.default)(e,(0,x.default)("showControls"),p),e)),style:{transform:1===_?"none":"scale(".concat(_,")"),boxShadow:0===g?"none":"0px 0px ".concat(g,"px 0px rgba(0, 0, 0, 0.3)")}},w.default.createElement("div",{className:(0,x.default)("app_sidebar_content_panel_top_line"),"data-app-name":u},w.default.createElement("span",(0,i.default)({className:(0,x.default)("app_sidebar_content_panel_title")},p?n:null),w.default.createElement("div",{className:(0,x.default)("app_sidebar_content_panel_grip")}),w.default.createElement("span",{className:(0,x.default)("app_sidebar_content_panel_title_icon_container")},w.default.createElement("span",{className:(0,v.default)((0,x.default)("app_sidebar_content_panel_title_icon"),c)},d&&w.default.createElement("img",{src:d}))),w.default.createElement("span",{className:(0,x.default)("app_sidebar_content_panel_title_text")},l)),w.default.createElement("span",{className:(0,x.default)("app_sidebar_content_panel_toggle"),onClick:function(){return b(!h)}},w.default.createElement("button",{type:"button",className:(0,x.default)("app_sidebar_content_panel_toggle_button")}))),w.default.createElement(j.default,{expanded:!p||h,heightTransition:".15s ease"},w.default.createElement(E.default,{className:(0,x.default)("app_sidebar_content_panel_content"),el:f})))}}]),t}(w.default.Component)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/get-or-fail":611,"../../lib/idMap":835,"../../lib/react/ElementContainer":847,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/extends":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,"@babel/runtime-corejs2/helpers/slicedToArray":54,classnames:95,kefir:301,"kefir-stopper":300,"lodash/flatMap":461,"lodash/sortBy":492,react:580,"react-draggable-list":557,"react-smooth-collapse":577}],794:[function(e,t,r){(function(n){"use strict";var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/date/now")),a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/helpers/defineProperty")),u=e("ud"),c=(i(e("auto-html")),i(e("kefir"))),d=i(e("kefir-bus")),f=(i(e("kefir-stopper")),i(e("../../lib/delay-asap"))),p=i(e("../../lib/idMap")),h=i(e("../../lib/dom/querySelectorOrFail")),m=function(){function e(t,r,i,s){var u=this;(0,a.default)(this,e),(0,l.default)(this,"_driver",void 0),(0,l.default)(this,"_stopper",void 0),(0,l.default)(this,"_eventStream",(0,d.default)()),(0,l.default)(this,"_isActive",!1),(0,l.default)(this,"_instanceId","".concat((0,o.default)(),"-").concat(Math.random())),(0,l.default)(this,"_sidebarId",void 0),(0,l.default)(this,"_isGlobal",void 0),this._driver=t,this._sidebarId=i,this._isGlobal=Boolean(s),this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}).toProperty();var m=n.document;this._eventStream.plug(c.default.fromEvents(m.body,"inboxsdkSidebarPanelActivated").filter(function(e){return e.detail.instanceId===u._instanceId}).map(function(){return u._isActive=!0,{eventName:"activate"}})),this._eventStream.plug(c.default.fromEvents(m.body,"inboxsdkSidebarPanelDeactivated").filter(function(e){return e.detail.instanceId===u._instanceId}).map(function(){return u._isActive=!1,{eventName:"deactivate"}}));var b,_=(0,f.default)().toProperty().onValue(function(){}),v=!1,g=(0,h.default)(m.body,"."+(0,p.default)("app_sidebar_waiting_platform"));r.flatMap(function(e){return _.map(function(){return e})}).takeUntilBy(this._stopper).onValue(function(e){var r=e.el,n=e.iconUrl,i=e.iconClass,o=e.title,a=e.orderHint,l=e.id,c=e.hideTitleBar,d=e.appIconUrl,f=e.primaryColor,p=e.secondaryColor;b=e.appName||t.getOpts().appName||e.title,m.body.contains(r)||g.appendChild(r);var h=v?"inboxsdkUpdateSidebarPanel":"inboxsdkNewSidebarPanel";v=!0,r.dispatchEvent(new CustomEvent(h,{bubbles:!0,cancelable:!1,detail:{appIconUrl:d||u._driver.getOpts().appIconUrl||n,appId:u._driver.getAppId(),appName:b,hideTitleBar:Boolean(c),iconClass:i,iconUrl:n,id:String(l||o),instanceId:u._instanceId,isGlobal:s,orderHint:"number"==typeof a?a:0,primaryColor:f||u._driver.getOpts().primaryColor,secondaryColor:p||u._driver.getOpts().secondaryColor,sidebarId:u._sidebarId,title:o}}))}),this._stopper.onValue(function(){v&&m.body.dispatchEvent(new CustomEvent("inboxsdkRemoveSidebarPanel",{bubbles:!0,cancelable:!1,detail:{appName:b,sidebarId:u._sidebarId,instanceId:u._instanceId}}))})}return(0,s.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"scrollIntoView",value:function(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelScrollIntoView",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,sidebarId:this._sidebarId}}))}},{key:"close",value:function(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelClose",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,isGlobal:this._isGlobal,sidebarId:this._sidebarId}}))}},{key:"open",value:function(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelOpen",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,isGlobal:this._isGlobal,sidebarId:this._sidebarId}}))}},{key:"isActive",value:function(){return this._isActive}},{key:"remove",value:function(){this._eventStream.end()}}]),e}(),b=(0,u.defn)(t,m);r.default=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib/delay-asap":803,"../../lib/dom/querySelectorOrFail":821,"../../lib/idMap":835,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"auto-html":83,kefir:301,"kefir-bus":298,"kefir-stopper":300,ud:597}],795:[function(e,t,r){"use strict";function n(e,t,r){var n=document.createElement("div");return n.classList.add("inboxsdk__button_icon"),n.innerHTML="&nbsp;",t?e.appendChild(n):e.insertBefore(n,r||e.firstElementChild),n}function i(e,t,r,i){var o=n(t,r,i);o.innerHTML="";var a=document.createElement("img");return a.classList.add("inboxsdk__button_iconImg"),a.src=e,o.appendChild(a),o}function o(e,t,r,o,a,s,l){if(r&&s)throw new Error("append and insertBeforeEl should not be used together");if(l&&(o||a))throw new Error("iconHtml can not be used together with iconClass or iconUrl");l?(e.iconHtmlElement||(e.iconHtmlElement=n(t,r,s)),e.iconHtmlElement.innerHTML=l,e.iconImgElement&&(e.iconImgElement.remove(),e.iconImgElement=null),e.iconElement&&(e.iconElement.remove(),e.iconElement=null)):a?(e.iconImgElement?e.iconImgElement.firstElementChild.src=a:e.iconImgElement=i(a,t,r,s),e.iconImgElement.setAttribute("class","inboxsdk__button_icon ".concat(o||"")),e.iconHtmlElement&&(e.iconHtmlElement.remove(),e.iconHtmlElement=null),e.iconElement&&(e.iconElement.remove(),e.iconElement=null)):o?(e.iconElement||(e.iconElement=n(t,r,s)),e.iconElement.setAttribute("class","inboxsdk__button_icon "+o),e.iconHtmlElement&&(e.iconHtmlElement.remove(),e.iconHtmlElement=null),e.iconImgElement&&(e.iconImgElement.remove(),e.iconImgElement=null)):(e.iconElement&&(e.iconElement.remove(),e.iconElement=null),e.iconHtmlElement&&(e.iconHtmlElement.remove(),e.iconHtmlElement=null),e.iconImgElement&&(e.iconImgElement.remove(),e.iconImgElement=null))}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=o},{"@babel/runtime-corejs2/core-js/object/define-property":14}],796:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=n(e("./logger")),l=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_name",void 0),(0,a.default)(this,"_runCount",0),(0,a.default)(this,"_errorLogs",[]),(0,a.default)(this,"_hasReported",!1),this._name=t}return(0,o.default)(e,[{key:"run",value:function(e,t){if(this._hasReported)throw new Error("Has already reported");this._runCount++;try{return t()}catch(t){return this._errorLogs.push({name:e,message:t.message}),null}}},{key:"report",value:function(e){if(this._hasReported)throw new Error("Has already reported");this._hasReported=!0,this._errorLogs.length&&s.default.error(new Error("Error Collector: ".concat(this._name)),{errorLogs:this._errorLogs,extra:e()})}},{key:"getErrorLogs",value:function(){return this._errorLogs}},{key:"runCount",value:function(){return this._runCount}},{key:"errorCount",value:function(){return this._errorLogs.length}}]),e}();r.default=l},{"./logger":843,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],797:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/map")),o=n(e("@babel/runtime-corejs2/core-js/weak-map")),a=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=n(e("@babel/runtime-corejs2/helpers/createClass")),l=n(e("@babel/runtime-corejs2/helpers/defineProperty")),u=function(){function e(t){(0,a.default)(this,e),(0,l.default)(this,"_mappers",void 0),(0,l.default)(this,"_map",new o.default),this._mappers=new i.default(t)}return(0,s.default)(e,[{key:"get",value:function(e){var t=this._map.get(e);if(!t){var r=this._mappers.get(e.constructor);if(!r)throw new Error("Unknown class ".concat(e.constructor.name));t=r(e),this._map.set(e,t)}return t}}]),e}();r.default=u},{"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],798:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=n(e("contain-by-screen")),l=n(e("kefir")),u=n(e("kefir-bus")),c=n(e("kefir-stopper")),d=n(e("./fromEventsWithOptions")),f=function(){function e(t,r,n){(0,i.default)(this,e),(0,a.default)(this,"_manualRepositions",(0,u.default)()),(0,a.default)(this,"_stopper",(0,c.default)()),l.default.merge([this._manualRepositions,l.default.fromEvents(window,"resize"),(0,d.default)(window,"scroll",{capture:!0,passive:!0}).filter(function(e){return e.target.contains(r)})]).toProperty(function(){return null}).takeUntilBy(this._stopper).onValue(function(){(0,s.default)(t,r,n)})}return(0,o.default)(e,[{key:"reposition",value:function(){this._manualRepositions.emit(null)}},{key:"destroy",value:function(){this._stopper.destroy()}}]),e}();r.default=f},{"./fromEventsWithOptions":832,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"contain-by-screen":129,kefir:301,"kefir-bus":298,"kefir-stopper":300}],799:[function(e,t,r){"use strict";function n(e,t){return a.default.stream(function(r){function n(e){switch(e.type){case"value":var n=e.value,o=t?Array.prototype.map.call(n,t):n;i.forEach(function(e,t){var r=(e.el,e.removalStream);Array.prototype.indexOf.call(o,t)<0&&(i.delete(t),r.destroy())});for(var a=0,l=n.length;a<l;a++){var u=n[a],c=o[a];if(!i.has(c)){var d=(0,s.default)(),f={el:u,removalStream:d};i.set(c,f),r.emit(f)}}break;case"error":r.error(e.value);break;case"end":r.end()}}var i=new o.default;return e.onAny(n),function(){i.forEach(function(e){e.removalStream.destroy()}),e.offAny(n)}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/map")),a=i(e("kefir")),s=i(e("kefir-stopper"))},{"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-stopper":300}],800:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/object/assign")),a=i(e("@babel/runtime-corejs2/core-js/date/now")),s=i(e("@babel/runtime-corejs2/regenerator")),l=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=i(e("@babel/runtime-corejs2/helpers/createClass")),d=i(e("@babel/runtime-corejs2/helpers/defineProperty")),f=i(e("asap")),p=i(e("lodash/once")),h=n(e("kefir")),m=i(e("./logger")),b=function(){function e(){(0,u.default)(this,e),(0,d.default)(this,"ajaxInterceptStream",void 0),this.ajaxInterceptStream=h.fromEvents(document,"inboxSDKajaxIntercept").map(function(e){return e.detail})}return(0,c.default)(e,[{key:"getUserEmailAddress",value:function(){var e=document.head.getAttribute("data-inboxsdk-user-email-address");if("string"!=typeof e)throw new Error("should not happen");return e}},{key:"getUserLanguage",value:function(){var e=document.head.getAttribute("data-inboxsdk-user-language");if("string"!=typeof e)throw new Error("should not happen");return e}},{key:"getIkValue",value:function(){var e=document.head.getAttribute("data-inboxsdk-ik-value");if(e)return e;if(window.opener)return window.opener.document.head.getAttribute("data-inboxsdk-ik-value");throw new Error("Failed to look up 'ik' value")}},{key:"isUsingSyncAPI",value:function(){return!1}},{key:"getXsrfToken",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.head.getAttribute("data-inboxsdk-xsrf-token"))){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,this.ajaxInterceptStream.filter(function(e){return"xsrfTokenHeaderReceived"===e.type}).take(1).toPromise();case 7:if(r=document.head.getAttribute("data-inboxsdk-xsrf-token")){e.next=10;break}throw new Error("Failed to look up XSRF token");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"getBtaiHeader",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.head.getAttribute("data-inboxsdk-btai-header"))){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,this.ajaxInterceptStream.filter(function(e){return"btaiHeaderReceived"===e.type}).take(1).toPromise();case 7:if(r=document.head.getAttribute("data-inboxsdk-btai-header")){e.next=10;break}throw new Error("Failed to look up BTAI header");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"resolveUrlRedirects",value:function(e){return this.pageAjax({url:e,method:"HEAD"}).then(function(e){return e.responseURL})}},{key:"pageAjax",value:function(e){var t="".concat((0,a.default)(),"-").concat(Math.random()),r=h.fromEvents(document,"inboxSDKpageAjaxDone").filter(function(e){return e.detail&&e.detail.id===t}).take(1).flatMap(function(e){if(e.detail.error){var t=(0,o.default)(new Error(e.detail.message||"Connection error"),{status:e.detail.status});return e.detail.stack&&(t.stack=e.detail.stack),h.constantError(t)}return h.constant({text:e.detail.text,responseURL:e.detail.responseURL})}).toPromise();return document.dispatchEvent(new CustomEvent("inboxSDKpageAjax",{bubbles:!1,cancelable:!1,detail:(0,o.default)({},e,{id:t})})),r}},{key:"silenceGmailErrorsForAMoment",value:function(){document.dispatchEvent(new CustomEvent("inboxSDKsilencePageErrors",{bubbles:!1,cancelable:!1,detail:null}));var e=new Error("Forgot to unsilence page errors"),t=!1,r=(0,p.default)(function(){t=!0,document.dispatchEvent(new CustomEvent("inboxSDKunsilencePageErrors",{bubbles:!1,cancelable:!1,detail:null}))});return(0,f.default)(function(){t||(m.default.error(e),r())}),r}},{key:"registerAllowedHashLinkStartTerm",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKregisterAllowedHashLinkStartTerm",{bubbles:!1,cancelable:!1,detail:{term:e}}))}}]),e}();r.default=b},{"./logger":843,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"@babel/runtime-corejs2/regenerator":59,asap:77,kefir:301,"lodash/once":489}],801:[function(e,t,r){"use strict";function n(e,t){if(!(0,a.default)(t))throw new Error("suggestions must be an array");return t.map(function(t){var r=(0,o.default)({},t);if("string"!=typeof r.name&&"string"!=typeof r.nameHTML)throw new Error("suggestion must have name or nameHTML property");if("string"!=typeof r.routeName&&"string"!=typeof r.externalURL&&"string"!=typeof r.searchTerm&&"function"!=typeof r.onClick)throw new Error("suggestion must have routeName, externalURL, searchTerm, or onClick property");if("string"==typeof r.iconURL){var n=r.iconURL;e.getLogger().deprecationWarning('AutocompleteSearchResult "iconURL" property',"AutocompleteSearchResult.iconUrl"),r.iconUrl||(1===e.getOpts().REQUESTED_API_VERSION?r.iconUrl=n:console.error("Support for iconURL property was dropped after API version 1")),delete r.iconURL}return r})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n
;var o=i(e("@babel/runtime-corejs2/helpers/objectSpread")),a=i(e("@babel/runtime-corejs2/core-js/array/is-array"))},{"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49}],802:[function(e,t,r){"use strict";function n(e){if(0===e.length||/^-?[0-9]/.test(e))throw new Error("Invalid CSS selector");return e.replace(/[^a-z0-9]/g,"\\$&")}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],803:[function(e,t,r){"use strict";function n(e){return s.stream(function(t){(0,a.default)(function(){t.emit(e),t.end()})})}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("asap")),s=i(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,asap:77,kefir:301}],804:[function(e,t,r){"use strict";function n(e){a.default.merge([a.default.fromEvents(e,"keypress"),a.default.fromEvents(e,"keydown"),a.default.fromEvents(e,"keyup")]).onValue(function(e){e.stopPropagation();var t=new KeyboardEvent(e.type,{bubbles:!0});(0,o.default)(t,{cancelable:{value:e.cancelable},bubbles:{value:e.bubbles},target:{value:e.target},detail:{value:e.detail},key:{value:e.key},code:{value:e.code},location:{value:e.location},ctrlKey:{value:e.ctrlKey},shiftKey:{value:e.shiftKey},altKey:{value:e.altKey},metaKey:{value:e.metaKey},repeat:{value:e.repeat},isComposing:{value:e.isComposing},charCode:{value:e.charCode},keyCode:{value:e.keyCode},which:{value:e.which}}),document.dispatchEvent(t)})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/object/define-properties")),a=i(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-properties":13,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],805:[function(e,t,r){"use strict";function n(e){return function(t){var r=e(t.el);return t.removalStream.take(1).onValue(function(){r.destroy()}),r}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],806:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=n(e("kefir")),l=n(e("kefir-bus")),u=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_eventStream",void 0),(0,a.default)(this,"_element",void 0),this._eventStream=(0,l.default)(),this._element=t,this._setupEventStream()}return(0,o.default)(e,[{key:"destroy",value:function(){this._element.remove(),this._eventStream.end()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"activate",value:function(){}},{key:"deactivate",value:function(){}},{key:"_setupEventStream",value:function(){var e=s.default.fromEvents(this._element,"click");e.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(e.map(function(e){return{eventName:"click",domEvent:e}}))}}]),e}();r.default=u},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298}],807:[function(e,t,r){"use strict";function n(e,t,r){var n={},o=null;r.forEach(function(t){var r=e.getAttribute(t);n[t]=(0,s.default)(r)?(0,a.default)(r):r});for(var l=0;l<t.length;l++){var u=t[l];if(i(n,u,r)){o=u;break}}return o}function i(e,t,r){for(var n=0;n<r.length;n++){var i=r[n],o=t.getAttribute(i);if((o=(0,s.default)(o)?(0,a.default)(o):o)>e[i])return!0;if(o<e[i])return!1}return!1}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/core-js/parse-float")),s=o(e("isnumber"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-float":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,isnumber:297}],808:[function(e,t,r){"use strict";function n(e){return e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function i(e,t){return t.contains(e.startContainer)||t.contains(e.endContainer)}function o(e,t){return!n(e)&&i(e,t)}function a(e,t){var r=document.getSelection();return u.default.toArray([r&&r.rangeCount?r.getRangeAt(0):null,t],u.default.compose(u.default.keep(),u.default.filter(function(t){return o(t,e)}),u.default.map(function(e){return e.toString()}),u.default.take(1)))[0]}function s(e,t){var r=document.getSelection();return u.default.toArray([r&&r.rangeCount?r.getRangeAt(0):null,t],u.default.compose(u.default.keep(),u.default.filter(function(t){return o(t,e)}),u.default.map(function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.innerHTML}),u.default.take(1)))[0]}var l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.getSelectedTextInElement=a,r.getSelectedHTMLInElement=s;var u=l(e("transducers.js"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"transducers.js":595}],809:[function(e,t,r){"use strict";function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=s.default.toArray(Array.prototype.slice.call(e.children),s.default.compose(s.default.filter(function(e){var i=!1,s=!0,l=!1,u=void 0;try{for(var c,d=(0,a.default)(r);!(s=(c=d.next()).done);s=!0){var f=c.value,p=t.getAttribute(f),h=e.getAttribute(f);if(null!=p&&null!=h){i=!0;var m=void 0;if((m=isNaN((0,o.default)(p))||isNaN((0,o.default)(h))?h.localeCompare(p):(0,o.default)(h)-(0,o.default)(p))>0)return!0;if(m<0)return!1}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return!!n&&!i}),s.default.take(1)))[0];e.insertBefore(t,i)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/parse-float")),a=i(e("@babel/runtime-corejs2/core-js/get-iterator")),s=i(e("transducers.js")),l=["data-group-order-hint","data-order-hint","data-insertion-order-hint"]},{"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/parse-float":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"transducers.js":595}],810:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault"),i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("ud")),a=n(e("kefir")),s=o.defn(t,function(e,t,r){if(e.focus(),e instanceof HTMLTextAreaElement){var n=e.selectionStart;e.selectionStart<e.selectionEnd&&(e.value=e.value.substring(0,e.selectionStart)+e.value.substring(e.selectionEnd)),e.value=e.value.substring(0,n)+t+e.value.substring(n),e.selectionStart=n+t.length,e.selectionEnd=n+t.length}else{var i=null;if(e.getSelection?i=e:e.ownerDocument&&e.ownerDocument.getSelection&&(i=e.ownerDocument),i){var o=i.getSelection();if(o.getRangeAt&&o.rangeCount){var s=r||o.getRangeAt(0);s.deleteContents();var l;if(t instanceof DocumentFragment)l=t;else if(l=document.createDocumentFragment(),t instanceof HTMLElement)l.appendChild(t);else{var u=document.createElement("div");u.innerHTML=t;for(var c;c=u.firstChild;)l.appendChild(c)}var d=l.firstElementChild;s.insertNode(l);var f=document.createEvent("MouseEvents");f.initMouseEvent("mousedown",!1,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),f.preventDefault(),e.dispatchEvent(f),s.collapse(!1),o.removeAllRanges(),o.addRange(s);var p=a.default.merge([a.default.fromEvents(e,"mousedown"),a.default.fromEvents(e,"keypress")]);a.default.fromEvents(e,"focus").takeUntilBy(p).onValue(function(){o.removeAllRanges(),o.addRange(s)});return d}}}}),l=s;r.default=l},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301,ud:597}],811:[function(e,t,r){"use strict";function n(e){return a.stream(function(t){return l&&l.bind(e,function(e){return t.emit(e),!1},"keydown")})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault"),o=e("@babel/runtime-corejs2/helpers/interopRequireWildcard");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("kefir")),s=i(e("combokeys-capture")),l="undefined"!=typeof document&&new s.default(document.body,!0)},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"combokeys-capture":128,kefir:301}],812:[function(e,t,r){"use strict";function n(e){if(!e||!e.nodeType)throw new Error("Expected element, got "+String(e));return u.stream(function(t){function r(e){if(1===e.nodeType){o.has(e)&&i(new Error("Already had removalStream for element with class "+e.className));var r=(0,c.default)();o.set(e,r);try{t.emit({el:e,removalStream:r})}catch(e){i(e)}}}function n(e){if(1===e.nodeType){var t=o.get(e);if(o.delete(e),t)try{t.destroy()}catch(e){i(e)}else i(new Error("Could not find removalStream for element with class "+e.className))}}var o=new s.default,a=!1,u=new MutationObserver(function(e){e.forEach(function(e){Array.prototype.forEach.call(e.addedNodes,r),Array.prototype.forEach.call(e.removedNodes,n)})});return(0,l.default)(function(){a||(u.observe(e,{childList:!0}),Array.prototype.slice.call(e.children).forEach(r))}),function(){a=!0,u.disconnect(),(0,l.default)(function(){o.forEach(function(e){e.destroy()})})}})}function i(e){setTimeout(function(){throw e},1)}var o=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var s=a(e("@babel/runtime-corejs2/core-js/map")),l=a(e("asap")),u=o(e("kefir")),c=a(e("kefir-stopper"))},{"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,asap:77,kefir:301,"kefir-stopper":300}],813:[function(e,t,r){"use strict";function n(){var e=new a.default;return function(t){var r=e.get(t.el);return r?(r.getSize()>1&&console.warn("element is part of multiple element streams",r.getSize(),t.el),r.add(t.removalStream.flatMap(u.default)),s.never()):(r=new l.default(t.removalStream.flatMap(u.default)),r.stream.onValue(function(){e.delete(t.el)}),e.set(t.el,r),s.constant({el:t.el,removalStream:r.stream}))}}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/core-js/map")),s=i(e("kefir")),l=o(e("../stopper-pool")),u=o(e("../delay-asap"))},{"../delay-asap":803,"../stopper-pool":852,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301}],814:[function(e,t,r){"use strict";function n(e){return function(t){var r=e(t.el);return r?(t.removalStream.take(1).onValue(function(){r.destroy()}),o.constant(r)):o.never()}}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301}],815:[function(e,t,r){"use strict";function n(e,t){return s.stream(function(r){var n=new MutationObserver(function(e){r.emit(e instanceof Array?e:(0,a.default)(e))});return n.observe(e,t),function(){n.disconnect()}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/core-js/array/from")),s=i(e("kefir"))},{"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301}],816:[function(e,t,r){"use strict";function n(e,t){return(0,o.default)(e,t).flatten()}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("./make-mutation-observer-chunked-stream"))},{"./make-mutation-observer-chunked-stream":815,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],817:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("../from-event-target-capture")),o=e("ud"),a=(e("kefir"),(0,i.default)(document.body,"mouseup")),s=(0,o.defn)(t,function(e){return(0,i.default)(e,"mousedown").flatMapLatest(function(){return a.take(1).filter(function(t){return e.contains(t.target)})})}),l=s;r.default=l},{"../from-event-target-capture":831,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,ud:597}],818:[function(e,t,r){"use strict";function n(e){return s.merge([(0,l.default)(document,"click"),(0,l.default)(document.body,"focus")]).filter(function(t){return!t.shouldIgnore&&(t.isTrusted||!1)&&e.every(function(e){var r=!0,n=!1,i=void 0;try{for(var o,s=(0,a.default)((0,u.default)(t.target));!(r=(o=s.next()).done);r=!0){if(o.value===e)return!1}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return!0})}).map(function(e){return{type:"outsideInteraction",cause:e}}).merge(s.fromEvents(document,"keydown").filter(function(e){return e.key?"Escape"===e.key:27===e.which}).map(function(e){return e.preventDefault(),e.stopPropagation(),{type:"escape",cause:e}})).map(function(e){return e})}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/core-js/get-iterator")),s=i(e("kefir")),l=o(e("../from-event-target-capture")),u=o(e("./parentNodes"))},{"../from-event-target-capture":831,"./parentNodes":819,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301}],819:[function(e,t,r){"use strict";function n(e){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:if(e=e.rfaAnchor||e._logicalParent||e.parentNode){t.next=0;break}case 3:case"end":return t.stop()}},a)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/regenerator")),a=o.default.mark(n)},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59}],820:[function(e,t,r){"use strict";function n(e,t){var r=e.querySelectorAll(t);if(1!==r.length)throw new Error("Found ".concat(r.length," elements when expecting 1 using selector ").concat((0,o.default)(t)));return r[0]}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/json/stringify"))},{"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],821:[function(e,t,r){"use strict";function n(e,t){var r=e.querySelector(t);if(!r)throw new Error("Failed to find element with selector: ".concat(t));return r}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],822:[function(e,t,r){"use strict";function n(e){var t=new MouseEvent("click");(0,o.default)(t,{target:{value:e.target},detail:{value:e.detail},screenX:{value:e.screenX},screenY:{value:e.screenY},clientX:{value:e.clientX},clientY:{value:e.clientY},button:{value:e.button},buttons:{value:e.buttons},ctrlKey:{value:e.ctrlKey},shiftKey:{value:e.shiftKey},altKey:{value:e.altKey},metaKey:{value:e.metaKey}}),document.dispatchEvent(t)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/object/define-properties"))},{"@babel/runtime-corejs2/core-js/object/define-properties":13,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],823:[function(e,t,r){"use strict";function n(e,t){var r="inboxsdk__".concat(e),n=document.getElementById(r);if(!t)return void(n&&n.remove());if(!n){if(n=document.createElement("style"),n.className="inboxsdk__custom",n.id=r,!document.head)throw new Error("missing head");document.head.appendChild(n)}n.textContent=t}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],824:[function(e,t,r){"use strict";function n(e,t,r){e.value=t;var n=document.createEvent("Event");n.initEvent(r),e.dispatchEvent(n)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],825:[function(e,t,r){"use strict";function n(e){return{files:e,fileNames:(0,l.default)(e).map(function(e){return"string"==typeof e.name?e.name:void 0})}}function i(e,t){var r=n(t),i={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,u.default)(e,{type:"dragenter",bubbles:!0,cancelable:!1,props:i,dataTransfer:r}),(0,u.default)(e,{type:"dragover",bubbles:!0,cancelable:!1,props:i,dataTransfer:r})}function o(e,t){var r=n(t),i={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,u.default)(e,{type:"drop",bubbles:!0,cancelable:!1,props:i,dataTransfer:r})}function a(e,t){var r=n(t),i={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,u.default)(e,{type:"dragleave",bubbles:!0,cancelable:!1,props:i,dataTransfer:r}),(0,u.default)(e,{type:"dragend",bubbles:!0,cancelable:!1,props:i,dataTransfer:r})}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.simulateDragOver=i,r.simulateDrop=o,r.simulateDragEnd=a;var l=s(e("@babel/runtime-corejs2/core-js/array/from")),u=s(e("./trigger-relay-event"))},{"./trigger-relay-event":828,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],826:[function(e,t,r){"use strict";function n(e,t,r){(0,o.default)(e,{type:"keydown",bubbles:!0,cancelable:!0,props:{keyCode:t,charCode:r,ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1}}),(0,o.default)(e,{type:"keypress",bubbles:!0,cancelable:!0,props:{keyCode:t,charCode:r,ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1}}),(0,o.default)(e,{type:"keyup",bubbles:!0,cancelable:!0,props:{keyCode:t,charCode:r,ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("./trigger-relay-event"))},{"./trigger-relay-event":828,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],827:[function(e,t,r){"use strict";function n(e,t){var r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,0,e.offsetLeft,e.offsetTop,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}function i(e){n(e,"mouseover")}function o(e){n(e,"mousedown"),n(e,"mouseup"),n(e,"click"),n(e,"mouseleave"),n(e,"mouseout"),e.blur()}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n,r.simulateHover=i,r.simulateClick=o},{"@babel/runtime-corejs2/core-js/object/define-property":14}],828:[function(e,t,r){"use strict";function n(e,t){return i.apply(this,arguments)}function i(){return i=(0,s.default)(a.default.mark(function e(t,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatchEvent(new CustomEvent("inboxsdk_event_relay",{bubbles:!0,cancelable:!1,detail:r}));case 1:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59}],829:[function(e,t,r){"use strict";function n(e){var t=null,r=null,n=e.split("<"),i=n[0].replace(/\u202c/g,"").trim();if(n.length>1)t=i,r=n[1].split(">")[0].replace(/\u202c/g,"").trim();else{if(!(0,a.default)(i))throw(0,o.default)(new Error("Invalid email address"),{firstPartTrimmed:i});r=i}return{name:t,emailAddress:r}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/object/assign")),a=i(e("./is-valid-email"))},{"./is-valid-email":841,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],830:[function(e,t,r){"use strict";function n(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],831:[function(e,t,r){"use strict";function n(e,t){return o.stream(function(r){function n(e){r.value(e)}return e.addEventListener(t,n,!0),function(){e.removeEventListener(t,n,!0)}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301}],832:[function(e,t,r){"use strict";function n(e,t,r){return o.stream(function(n){return(0,a.addEventListener)(e,t,n.emit,r),function(){(0,a.removeEventListener)(e,t,n.emit,r)}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("kefir")),a=e("event-listener-with-options")},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"event-listener-with-options":288,kefir:301}],833:[function(e,t,r){"use strict";function n(e){var t=e.querySelectorAll("[hspace=inboxsdk__chip]");return[].concat((0,c.default)((0,u.default)(t).map(function(e){return e.parentElement})),(0,c.default)((0,u.default)(e.querySelectorAll("[hspace=inboxsdk__chip_main]"))))}function i(e){return d.default.later(0).merge((0,h.default)(e,{attributes:!0,attributeFilter:["class"]})).map(function(){return!e.classList.contains("inboxsdk__ensure_link_active")}).filter(Boolean).take(1)}function o(e){var t=e.getAttribute("data-sdk-linkchip-claimed");return m===t?!e._linkChipEnhancedByThisExtension:null==t}function a(e){return!!e._linkChipEnhancedByThisExtension}function s(e){var t=e.querySelector("a");t&&(t.addEventListener("mousedown",function(e){e.stopImmediatePropagation()},!0),t.addEventListener("click",function(e){e.stopImmediatePropagation()},!0));var r=document.createElement("img");r.src=b,r.setAttribute("style","opacity: 0.55; cursor: pointer; float: right; position: relative; top: -1px;"),r.addEventListener("mousedown",function(t){e.remove()},!0),r.addEventListener("click",function(e){e.stopImmediatePropagation(),e.preventDefault()},!0),e.addEventListener("mouseenter",function(){e.appendChild(r),(0,p.default)(e,"a > span").style.textDecoration="underline"}),e.addEventListener("mouseleave",function(){r.remove(),(0,p.default)(e,"a > span").style.textDecoration="none"}),e.addEventListener("mousedown",function(e){e.preventDefault()}),e.contentEditable="false",e.setAttribute("data-sdk-linkchip-claimed",m),e._linkChipEnhancedByThisExtension=!0}var l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/core-js/array/from")),c=l(e("@babel/runtime-corejs2/helpers/toConsumableArray")),d=(l(e("lodash/once")),l(e("kefir"))),f=e("ud"),p=l(e("./dom/querySelectorOrFail")),h=l(e("./dom/make-mutation-observer-chunked-stream")),m=""+Math.random(),b="https://ssl.gstatic.com/ui/v1/icons/common/x_8px.png",_=(0,f.defn)(t,function(e){try{e.getBodyElement()}catch(e){return}var t=e.getElement();i(t).takeUntilBy(e.getStopper()).onValue(function(){t.classList.add("inboxsdk__ensure_link_active"),e.getStopper().onValue(function(){t.classList.remove("inboxsdk__ensure_link_active")}),e.getEventStream().filter(function(e){return"bodyChanged"===e.eventName}).toProperty(function(){return null}).debounce(100,{immediate:!0}).takeUntilBy(e.getStopper()).onValue(function(){g(e)}),e.getEventStream().filter(function(e){return"presending"===e.eventName}).onValue(function(){y(e)})})}),v=_;r.default=v;var g=(0,f.defn)(t,function(e){n(e.getBodyElement()).filter(o).forEach(s)},"doFixing"),y=(0,f.defn)(t,function(e){n(e.getBodyElement()).filter(a).forEach(function(e){var t=e.querySelector('img[src="'.concat(b,'"]'));t&&t.remove();var r=e.querySelector("a > span");r&&(r.style.textDecoration="none")})},"doPresendFixing")},{"./dom/make-mutation-observer-chunked-stream":815,"./dom/querySelectorOrFail":821,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/toConsumableArray":57,kefir:301,"lodash/once":489,ud:597}],834:[function(e,t,r){"use strict";function n(e,t){try{e(t)}catch(e){d.default.error(e)}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/typeof")),a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/helpers/defineProperty")),u=i(e("lodash/remove")),c=i(e("asap")),d=i(e("./logger")),f=function(){function e(){(0,a.default)(this,e),(0,l.default)(this,"_targets",[]),(0,l.default)(this,"_pendingHandlers",[]),(0,l.default)(this,"_handlers",[])}return(0,s.default)(e,[{key:"registerHandler",value:function(e){var t=this;return-1===this._pendingHandlers.indexOf(e)&&(this._pendingHandlers.push(e),(0,c.default)(function(){for(var e=t._pendingHandlers.slice(),r=e.length-1;r>=0;r--){var n=e[r];-1===t._handlers.indexOf(n)&&(t._handlers.push(n),t._informHandlerOfTargets(n))}t._pendingHandlers=[]})),function(){(0,u.default)(t._pendingHandlers,function(t){return t===e}),(0,u.default)(t._handlers,function(t){return t===e})}}},{key:"addTarget",value:function(e){var t=this;this._targets.push(e),e&&"object"===(0,o.default)(e)&&"function"==typeof e.on&&e.on("destroy",function(){t.removeTarget(e)}),this._informHandlersOfTarget(e)}},{key:"removeTarget",value:function(e){(0,u.default)(this._targets,function(t){return t===e})}},{key:"dumpHandlers",value:function(){this._pendingHandlers=[],this._handlers=[]}},{key:"_informHandlerOfTargets",value:function(e){for(var t=this._targets.slice(),r=0;r<t.length;r++)n(e,t[r])}},{key:"_informHandlersOfTarget",value:function(e){for(var t=this._handlers.slice(),r=0;r<t.length;r++)n(t[r],e)}}]),e}();r.default=f},{"./logger":843,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/typeof":58,asap:77,"lodash/remove":491}],835:[function(e,t,r){"use strict";function n(e){var t=u.get(e);if(null!=t)return t;if(null==c){if(null==(c=document.documentElement.getAttribute("data-map-id"))){var r=new l.default;r.update("PWVe"+Math.floor((0,a.default)()/36e5)+"PYiE0"),c=r.digest("hex").slice(0,16)+"",document.documentElement.setAttribute("data-map-id",c)}d=/x$/.test(c)}var n;if(d){n="idm".concat(String(c.charCodeAt(0)%10),"_").concat(e)}else{var i=new l.default;i.update("4iYi29W"+e+":"+c+"jn2mPvTG"),n=i.digest("hex").slice(0,16).replace(/[0-9]/g,function(e){return String.fromCharCode("A".charCodeAt(0)+Number(e))})}return u.set(e,n),n}function i(){u.clear(),c=null}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n,r._reset=i;var a=o(e("@babel/runtime-corejs2/core-js/date/now")),s=o(e("@babel/runtime-corejs2/core-js/map")),l=o(e("sha.js/sha256")),u=new s.default,c=null,d=!1},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"sha.js/sha256":591}],836:[function(e,t,r){"use strict";function n(e){return new o.default(function(t,r){var n=new Image;n.addEventListener("load",function(){return t(n)}),
n.addEventListener("error",r),n.src=e})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],837:[function(e,t,r){"use strict";function n(e){var t=/ (\d+)$/.exec(e);return t?e.slice(0,e.length-t[0].length)+" "+(Number(t[1])+1):e+" 2"}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":14}],838:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("lodash/once")),o=n(e("kefir")),a=n(e("./dom/make-mutation-observer-chunked-stream")),s=(0,i.default)(function(){if(!document.head.hasAttribute("data-inboxsdk-script-injected")){var e=document.createElement("script");e.type="text/javascript"
;var t='!function(){function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module \'"+s+"\'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){return o(t[s][1][e]||e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}return e}()({1:[function(e,t,r){t.exports=e("core-js/library/fn/array/from")},{"core-js/library/fn/array/from":49}],2:[function(e,t,r){t.exports=e("core-js/library/fn/array/is-array")},{"core-js/library/fn/array/is-array":50}],3:[function(e,t,r){t.exports=e("core-js/library/fn/date/now")},{"core-js/library/fn/date/now":51}],4:[function(e,t,r){t.exports=e("core-js/library/fn/get-iterator")},{"core-js/library/fn/get-iterator":52}],5:[function(e,t,r){t.exports=e("core-js/library/fn/json/stringify")},{"core-js/library/fn/json/stringify":53}],6:[function(e,t,r){t.exports=e("core-js/library/fn/map")},{"core-js/library/fn/map":54}],7:[function(e,t,r){t.exports=e("core-js/library/fn/object/assign")},{"core-js/library/fn/object/assign":55}],8:[function(e,t,r){t.exports=e("core-js/library/fn/object/create")},{"core-js/library/fn/object/create":56}],9:[function(e,t,r){t.exports=e("core-js/library/fn/object/define-properties")},{"core-js/library/fn/object/define-properties":57}],10:[function(e,t,r){t.exports=e("core-js/library/fn/object/define-property")},{"core-js/library/fn/object/define-property":58}],11:[function(e,t,r){t.exports=e("core-js/library/fn/object/freeze")},{"core-js/library/fn/object/freeze":59}],12:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-descriptor")},{"core-js/library/fn/object/get-own-property-descriptor":60}],13:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-names")},{"core-js/library/fn/object/get-own-property-names":61}],14:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-symbols")},{"core-js/library/fn/object/get-own-property-symbols":62}],15:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-prototype-of")},{"core-js/library/fn/object/get-prototype-of":63}],16:[function(e,t,r){t.exports=e("core-js/library/fn/object/keys")},{"core-js/library/fn/object/keys":64}],17:[function(e,t,r){t.exports=e("core-js/library/fn/promise")},{"core-js/library/fn/promise":65}],18:[function(e,t,r){t.exports=e("core-js/library/fn/set")},{"core-js/library/fn/set":66}],19:[function(e,t,r){t.exports=e("core-js/library/fn/symbol")},{"core-js/library/fn/symbol":67}],20:[function(e,t,r){t.exports=e("core-js/library/fn/symbol/iterator")},{"core-js/library/fn/symbol/iterator":68}],21:[function(e,t,r){t.exports=e("core-js/library/fn/weak-map")},{"core-js/library/fn/weak-map":69}],22:[function(e,t,r){function n(e){if(o(e))return e}var o=e("../core-js/array/is-array");t.exports=n},{"../core-js/array/is-array":2}],23:[function(e,t,r){function n(e,t,r,n,o,s,a){try{var u=e[s](a),c=u.value}catch(e){return void r(e)}u.done?t(c):i.resolve(c).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new i(function(o,i){function s(e){n(u,o,i,s,a,"next",e)}function a(e){n(u,o,i,s,a,"throw",e)}var u=e.apply(t,r);s(void 0)})}}var i=e("../core-js/promise");t.exports=o},{"../core-js/promise":17}],24:[function(e,t,r){function n(e,t,r){return t in e?o(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("../core-js/object/define-property");t.exports=n},{"../core-js/object/define-property":10}],25:[function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}t.exports=n},{}],26:[function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=i&&o?o(e,r):{};n.get||n.set?i(t,r,n):t[r]=e[r]}return t.default=e,t}var o=e("../core-js/object/get-own-property-descriptor"),i=e("../core-js/object/define-property");t.exports=n},{"../core-js/object/define-property":10,"../core-js/object/get-own-property-descriptor":12}],27:[function(e,t,r){function n(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,u=o(e);!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw s}}return r}var o=e("../core-js/get-iterator");t.exports=n},{"../core-js/get-iterator":4}],28:[function(e,t,r){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}t.exports=n},{}],29:[function(e,t,r){function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=s(r);"function"==typeof i&&(n=n.concat(i(r).filter(function(e){return o(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}var o=e("../core-js/object/get-own-property-descriptor"),i=e("../core-js/object/get-own-property-symbols"),s=e("../core-js/object/keys"),a=e("./defineProperty");t.exports=n},{"../core-js/object/get-own-property-descriptor":12,"../core-js/object/get-own-property-symbols":14,"../core-js/object/keys":16,"./defineProperty":24}],30:[function(e,t,r){function n(e,t){return o(e)||i(e,t)||s()}var o=e("./arrayWithHoles"),i=e("./iterableToArrayLimit"),s=e("./nonIterableRest");t.exports=n},{"./arrayWithHoles":22,"./iterableToArrayLimit":27,"./nonIterableRest":28}],31:[function(e,t,r){function n(e,t){return t||(t=e.slice(0)),i(o(e,{raw:{value:i(t)}}))}var o=e("../core-js/object/define-properties"),i=e("../core-js/object/freeze");t.exports=n},{"../core-js/object/define-properties":9,"../core-js/object/freeze":11}],32:[function(e,t,r){function n(e){return(n="function"==typeof s&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof s&&e.constructor===s&&e!==s.prototype?"symbol":typeof e})(e)}function o(e){return"function"==typeof s&&"symbol"===n(i)?t.exports=o=function(e){return n(e)}:t.exports=o=function(e){return e&&"function"==typeof s&&e.constructor===s&&e!==s.prototype?"symbol":n(e)},o(e)}var i=e("../core-js/symbol/iterator"),s=e("../core-js/symbol");t.exports=o},{"../core-js/symbol":19,"../core-js/symbol/iterator":20}],33:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":388}],34:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.exports=n},{}],35:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}t.exports=o},{}],36:[function(e,t,r){arguments[4][25][0].apply(r,arguments)},{dup:25}],37:[function(e,t,r){t.exports=function(e,t){var r="number"==typeof e,n="number"==typeof t;r&&!n?(t=e,e=0):r||n||(e=0,t=0),e|=0,t|=0;var o=t-e;if(o<0)throw new Error("array length must be positive");for(var i=new Array(o),s=0,a=e;s<o;s++,a++)i[s]=a;return i}},{}],38:[function(e,t,r){"use strict";function n(){if(u.length)throw u.shift()}function o(e){var t;t=a.length?a.pop():new i,t.task=e,s(t)}function i(){this.task=null}var s=e("./raw"),a=[],u=[],c=s.makeRequestCallFromTimer(n);t.exports=o,i.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(u.push(e),c())}finally{this.task=null,a[a.length]=this}}},{"./raw":39}],39:[function(e,t,r){(function(e){"use strict";function r(e){s.length||(i(),a=!0),s[s.length]=e}function n(){for(;u<s.length;){var e=u;if(u+=1,s[e].call(),u>c){for(var t=0,r=s.length-u;t<r;t++)s[t]=s[t+u];s.length-=u,u=0}}s.length=0,u=0,a=!1}function o(e){return function(){function t(){clearTimeout(r),clearInterval(n),e()}var r=setTimeout(t,0),n=setInterval(t,50)}}t.exports=r;var i,s=[],a=!1,u=0,c=1024,l=void 0!==e?e:self,f=l.MutationObserver||l.WebKitMutationObserver;i="function"==typeof f?function(e){var t=1,r=new f(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}(n):o(n),r.requestFlush=i,r.makeRequestCallFromTimer=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(e,t,r){(function(r){"use strict";function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}function o(e){return r.Buffer&&"function"==typeof r.Buffer.isBuffer?r.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function i(e){return Object.prototype.toString.call(e)}function s(e){return!o(e)&&("function"==typeof r.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function a(e){if(w.isFunction(e)){if(S)return e.name;var t=e.toString(),r=t.match(k);return r&&r[1]}}function u(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function c(e){if(S||!w.isFunction(e))return w.inspect(e);var t=a(e);return"[Function"+(t?": "+t:"")+"]"}function l(e){return u(c(e.actual),128)+" "+e.operator+" "+u(c(e.expected),128)}function f(e,t,r,n,o){throw new A.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function p(e,t){e||f(e,!0,t,"==",A.ok)}function h(e,t,r,a){if(e===t)return!0;if(o(e)&&o(t))return 0===n(e,t);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(s(e)&&s(t)&&i(e)===i(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;a=a||{actual:[],expected:[]};var u=a.actual.indexOf(e);return-1!==u&&u===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),_(e,t,r,a))}return r?e===t:e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function _(e,t,r,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(w.isPrimitive(e)||w.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=d(e),i=d(t);if(o&&!i||!o&&i)return!1;if(o)return e=E.call(e),t=E.call(t),h(e,t,r);var s,a,u=T(e),c=T(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),a=u.length-1;a>=0;a--)if(u[a]!==c[a])return!1;for(a=u.length-1;a>=0;a--)if(s=u[a],!h(e[s],t[s],r,n))return!1;return!0}function b(e,t,r){h(e,t,!0)&&f(e,t,r,"notDeepStrictEqual",b)}function y(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function m(e){var t;try{e()}catch(e){t=e}return t}function v(e,t,r,n){var o;if("function"!=typeof t)throw new TypeError(\'"block" argument must be a function\');"string"==typeof r&&(n=r,r=null),o=m(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!o&&f(o,r,"Missing expected exception"+n);var i="string"==typeof n,s=!e&&w.isError(o),a=!e&&o&&!r;if((s&&i&&y(o,r)||a)&&f(o,r,"Got unwanted exception"+n),e&&o&&r&&!y(o,r)||!e&&o)throw o}function g(e,t){e||f(e,!0,t,"==",g)}var j=e("object-assign"),w=e("util/"),x=Object.prototype.hasOwnProperty,E=Array.prototype.slice,S=function(){return"foo"===function(){}.name}(),A=t.exports=p,k=/\\s*function\\s+([^\\(\\s]*)\\s*/;A.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=a(t),i=n.indexOf("\\n"+o);if(i>=0){var s=n.indexOf("\\n",i+1);n=n.substring(s+1)}this.stack=n}}},w.inherits(A.AssertionError,Error),A.fail=f,A.ok=p,A.equal=function(e,t,r){e!=t&&f(e,t,r,"==",A.equal)},A.notEqual=function(e,t,r){e==t&&f(e,t,r,"!=",A.notEqual)},A.deepEqual=function(e,t,r){h(e,t,!1)||f(e,t,r,"deepEqual",A.deepEqual)},A.deepStrictEqual=function(e,t,r){h(e,t,!0)||f(e,t,r,"deepStrictEqual",A.deepStrictEqual)},A.notDeepEqual=function(e,t,r){h(e,t,!1)&&f(e,t,r,"notDeepEqual",A.notDeepEqual)},A.notDeepStrictEqual=b,A.strictEqual=function(e,t,r){e!==t&&f(e,t,r,"===",A.strictEqual)},A.notStrictEqual=function(e,t,r){e===t&&f(e,t,r,"!==",A.notStrictEqual)},A.throws=function(e,t,r){v(!0,e,t,r)},A.doesNotThrow=function(e,t,r){v(!1,e,t,r)},A.ifError=function(e){if(e)throw e},A.strict=j(g,A,{equal:A.strictEqual,deepEqual:A.deepStrictEqual,notEqual:A.notStrictEqual,notDeepEqual:A.notDeepStrictEqual}),A.strict.strict=A.strict;var T=Object.keys||function(e){var t=[];for(var r in e)x.call(e,r)&&t.push(r);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":382,"util/":43}],41:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],42:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],43:[function(e,t,r){(function(t,n){function o(e,t){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(t)?n.showHidden=t:t&&r._extend(n,t),j(n.showHidden)&&(n.showHidden=!1),j(n.depth)&&(n.depth=2),j(n.colors)&&(n.colors=!1),j(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),u(n,e,n.depth)}function i(e,t){var r=o.styles[t];return r?"["+o.colors[r][0]+"m"+e+"["+o.colors[r][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return v(o)||(o=u(e,o,n)),o}var i=c(e,t);if(i)return i;var s=Object.keys(t),_=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),S(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(t);if(0===s.length){if(A(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(S(t))return l(t)}var y="",m=!1,g=["{","}"];if(d(t)&&(m=!0,g=["[","]"]),A(t)){y=" [Function"+(t.name?": "+t.name:"")+"]"}if(w(t)&&(y=" "+RegExp.prototype.toString.call(t)),E(t)&&(y=" "+Date.prototype.toUTCString.call(t)),S(t)&&(y=" "+l(t)),0===s.length&&(!m||0==t.length))return g[0]+y+g[1];if(n<0)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var j;return j=m?f(e,t,n,_,s):s.map(function(r){return p(e,t,n,_,r,m)}),e.seen.pop(),h(j,y,g)}function c(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="\'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/\'/g,"\\\\\'").replace(/\\\\"/g,\'"\')+"\'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)I(t,String(s))?i.push(p(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\\d+$/)||i.push(p(e,t,r,n,o,!0))}),i}function p(e,t,r,n,o,i){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),I(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=b(r)?u(e,c.value,null):u(e,c.value,r-1),a.indexOf("\\n")>-1&&(a=i?a.split("\\n").map(function(e){return"  "+e}).join("\\n").substr(2):"\\n"+a.split("\\n").map(function(e){return"   "+e}).join("\\n"))):a=e.stylize("[Circular]","special")),j(s)){if(i&&o.match(/^\\d+$/))return a;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/\'/g,"\\\\\'").replace(/\\\\"/g,\'"\').replace(/(^"|"$)/g,"\'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\\n")>=0&&n++,e+t.replace(/\\u001b\\[\\d\\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\\n ")+" "+e.join(",\\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function _(e){return"boolean"==typeof e}function b(e){return null===e}function y(e){return null==e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function g(e){return"symbol"==typeof e}function j(e){return void 0===e}function w(e){return x(e)&&"[object RegExp]"===T(e)}function x(e){return"object"==typeof e&&null!==e}function E(e){return x(e)&&"[object Date]"===T(e)}function S(e){return x(e)&&("[object Error]"===T(e)||e instanceof Error)}function A(e){return"function"==typeof e}function k(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function T(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;r.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(o(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,s=String(e).replace(D,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<i;a=n[++r])b(a)||!x(a)?s+=" "+a:s+=" "+o(a);return s},r.deprecate=function(e,o){function i(){if(!s){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),s=!0}return e.apply(this,arguments)}if(j(n.process))return function(){return r.deprecate(e,o).apply(this,arguments)};if(!0===t.noDeprecation)return e;var s=!1;return i};var R,M={};r.debuglog=function(e){if(j(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\\\b"+e+"\\\\b","i").test(R)){var n=t.pid;M[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else M[e]=function(){};return M[e]},r.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=_,r.isNull=b,r.isNullOrUndefined=y,r.isNumber=m,r.isString=v,r.isSymbol=g,r.isUndefined=j,r.isRegExp=w,r.isObject=x,r.isDate=E,r.isError=S,r.isFunction=A,r.isPrimitive=k,r.isBuffer=e("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",L(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!x(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":42,_process:384,inherits:41}],44:[function(e,t,r){"use strict";function n(e){var t=new Array(2*e.length-1);t[0]=e[0];for(var r=0,n=arguments.length<=1?0:arguments.length-1;r<n;r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];t[2*r+1]=i&&Object.prototype.hasOwnProperty.call(i,"__html")?i.__html:(0,o.default)(i),t[2*r+2]=e[r+1]}return t.join("")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash/escape"));t.exports=r.default,t.exports.default=r.default},{"lodash/escape":339}],45:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function o(e){var t=n(e),r=t[0],o=t[1];return 3*(r+o)/4-o}function i(e,t,r){return 3*(t+r)/4-r}function s(e){for(var t,r=n(e),o=r[0],s=r[1],a=new p(i(e,o,s)),u=0,c=s>0?o-4:o,l=0;l<c;l+=4)t=f[e.charCodeAt(l)]<<18|f[e.charCodeAt(l+1)]<<12|f[e.charCodeAt(l+2)]<<6|f[e.charCodeAt(l+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;return 2===s&&(t=f[e.charCodeAt(l)]<<2|f[e.charCodeAt(l+1)]>>4,a[u++]=255&t),1===s&&(t=f[e.charCodeAt(l)]<<10|f[e.charCodeAt(l+1)]<<4|f[e.charCodeAt(l+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t),a}function a(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function u(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(a(n));return o.join("")}function c(e){for(var t,r=e.length,n=r%3,o=[],i=0,s=r-n;i<s;i+=16383)o.push(u(e,i,i+16383>s?s:i+16383));return 1===n?(t=e[r-1],o.push(l[t>>2]+l[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),o.join("")}r.byteLength=o,r.toByteArray=s,r.fromByteArray=c;for(var l=[],f=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,_=h.length;d<_;++d)l[d]=h[d],f[h.charCodeAt(d)]=d;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],46:[function(e,t,r){!function(e){"use strict";function r(e){function t(e,r){var n,o,i,a,u,c,l,p,h=this;if(!(h instanceof t))return new t(e,r);if(null==r){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>P?h.c=h.e=null:e.e<q?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((c="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,u=e;u>=10;u/=10,a++);return void(a>P?h.c=h.e=null:(h.e=a,h.c=[e]))}p=String(e)}else{if(!f.test(p=String(e)))return O(h,p,c);h.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(a=p.indexOf("."))>-1&&(p=p.replace(".","")),(u=p.search(/e/i))>0?(a<0&&(a=u),a+=+p.slice(u+1),p=p.substring(0,u)):a<0&&(a=p.length)}else{if(s(r,2,U.length,"Base"),10==r)return h=new t(e),S(h,D+h.e+1,R);if(p=String(e),c="number"==typeof e){if(0*e!=0)return O(h,p,c,r);if(h.s=1/e<0?(p=p.slice(1),-1):1,t.DEBUG&&p.replace(/^0\\.0*|\\./,"").length>15)throw Error(b+e)}else h.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=U.slice(0,r),a=u=0,l=p.length;u<l;u++)if(n.indexOf(o=p.charAt(u))<0){if("."==o){if(u>a){a=l;continue}}else if(!i&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){i=!0,u=-1,a=0;continue}return O(h,String(e),c,r)}c=!1,p=T(p,r,10,h.s),(a=p.indexOf("."))>-1?p=p.replace(".",""):a=p.length}for(u=0;48===p.charCodeAt(u);u++);for(l=p.length;48===p.charCodeAt(--l););if(p=p.slice(u,++l)){if(l-=u,c&&t.DEBUG&&l>15&&(e>v||e!==d(e)))throw Error(b+h.s*e);if((a=a-u-1)>P)h.c=h.e=null;else if(a<q)h.c=[h.e=0];else{if(h.e=a,h.c=[],u=(a+1)%m,a<0&&(u+=m),u<l){for(u&&h.c.push(+p.slice(0,u)),l-=m;u<l;)h.c.push(+p.slice(u,u+=m));u=m-(p=p.slice(u)).length}else u-=l;for(;u--;p+="0");h.c.push(+p)}}else h.c=[h.e=0]}function l(e,r,n,i){var a,l,f,p,h;if(null==n?n=R:s(n,0,8),!e.c)return e.toString();if(a=e.c[0],f=e.e,null==r)h=o(e.c),h=1==i||2==i&&(f<=M||f>=C)?u(h,f):c(h,f,"0");else if(e=S(new t(e),r,n),l=e.e,h=o(e.c),p=h.length,1==i||2==i&&(r<=l||l<=M)){for(;p<r;h+="0",p++);h=u(h,l)}else if(r-=f,h=c(h,l,"0"),l+1>p){if(--r>0)for(h+=".";r--;h+="0");}else if((r+=l-p)>0)for(l+1==p&&(h+=".");r--;h+="0");return e.s<0&&a?"-"+h:h}function x(e,r){for(var n,o=1,i=new t(e[0]);o<e.length;o++){if(n=new t(e[o]),!n.s){i=n;break}r.call(i,n)&&(i=n)}return i}function E(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(r=n+r*m-1)>P?e.c=e.e=null:r<q?e.c=[e.e=0]:(e.e=r,e.c=t),e}function S(e,t,r,n){var o,i,s,a,u,c,l,f=e.c,p=g;if(f){e:{for(o=1,a=f[0];a>=10;a/=10,o++);if((i=t-o)<0)i+=m,s=t,u=f[c=0],l=u/p[o-s-1]%10|0;else if((c=h((i+1)/m))>=f.length){if(!n)break e;for(;f.length<=c;f.push(0));u=l=0,o=1,i%=m,s=i-m+1}else{for(u=a=f[c],o=1;a>=10;a/=10,o++);i%=m,s=i-m+o,l=s<0?0:u/p[o-s-1]%10|0}if(n=n||t<0||null!=f[c+1]||(s<0?u:u%p[o-s-1]),n=r<4?(l||n)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||n||6==r&&(i>0?s>0?u/p[o-s]:0:f[c-1])%10&1||r==(e.s<0?8:7)),t<1||!f[0])return f.length=0,n?(t-=e.e+1,f[0]=p[(m-t%m)%m],e.e=-t||0):f[0]=e.e=0,e;if(0==i?(f.length=c,a=1,c--):(f.length=c+1,a=p[m-i],f[c]=s>0?d(u/p[o-s]%p[s])*a:0),n)for(;;){if(0==c){for(i=1,s=f[0];s>=10;s/=10,i++);for(s=f[0]+=a,a=1;s>=10;s/=10,a++);i!=a&&(e.e++,f[0]==y&&(f[0]=1));break}if(f[c]+=a,f[c]!=y)break;f[c--]=0,a=1}for(i=f.length;0===f[--i];f.pop());}e.e>P?e.c=e.e=null:e.e<q&&(e.c=[e.e=0])}return e}function A(e){var t,r=e.e;return null===r?e.toString():(t=o(e.c),t=r<=M||r>=C?u(t,r):c(t,r,"0"),e.s<0?"-"+t:t)}var k,T,O,L=t.prototype={constructor:t,toString:null,valueOf:null},I=new t(1),D=20,R=4,M=-7,C=21,q=-1e7,P=1e7,B=!1,N=1,F=0,V={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz";return t.clone=r,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=t.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(_+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(r=e[t],s(r,0,w,t),D=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(r=e[t],s(r,0,8,t),R=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(r=e[t],r&&r.pop?(s(r[0],-w,0,t),s(r[1],0,w,t),M=r[0],C=r[1]):(s(r,-w,w,t),M=-(C=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)s(r[0],-w,-1,t),s(r[1],1,w,t),q=r[0],P=r[1];else{if(s(r,-w,w,t),!r)throw Error(_+t+" cannot be zero: "+r);q=-(P=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(_+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!r,Error(_+"crypto unavailable");B=r}else B=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(r=e[t],s(r,0,9,t),N=r),e.hasOwnProperty(t="POW_PRECISION")&&(r=e[t],s(r,0,w,t),F=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(_+t+" not an object: "+r);V=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\\s]|(.).*\\1/.test(r))throw Error(_+t+" invalid: "+r);U=r}}return{DECIMAL_PLACES:D,ROUNDING_MODE:R,EXPONENTIAL_AT:[M,C],RANGE:[q,P],CRYPTO:B,MODULO_MODE:N,POW_PRECISION:F,FORMAT:V,ALPHABET:U}},t.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!t.DEBUG)return!0;var r,n,o=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(o)){if((1===s||-1===s)&&i>=-w&&i<=w&&i===d(i)){if(0===o[0]){if(0===i&&1===o.length)return!0;break e}if(r=(i+1)%m,r<1&&(r+=m),String(o[0]).length==r){for(r=0;r<o.length;r++)if((n=o[r])<0||n>=y||n!==d(n))break e;if(0!==n)return!0}}}else if(null===o&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(_+"Invalid BigNumber: "+e)},t.maximum=t.max=function(){return x(arguments,L.lt)},t.minimum=t.min=function(){return x(arguments,L.gt)},t.random=function(){var e=9007199254740992*Math.random()&2097151?function(){return d(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(r){var n,o,i,a,u,c=0,l=[],f=new t(I);if(null==r?r=D:s(r,0,w),a=h(r/m),B)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(a*=2));c<a;)u=131072*n[c]+(n[c+1]>>>11),u>=9e15?(o=crypto.getRandomValues(new Uint32Array(2)),n[c]=o[0],n[c+1]=o[1]):(l.push(u%1e14),c+=2);c=a/2}else{if(!crypto.randomBytes)throw B=!1,Error(_+"crypto unavailable");for(n=crypto.randomBytes(a*=7);c<a;)u=281474976710656*(31&n[c])+1099511627776*n[c+1]+4294967296*n[c+2]+16777216*n[c+3]+(n[c+4]<<16)+(n[c+5]<<8)+n[c+6],u>=9e15?crypto.randomBytes(7).copy(n,c):(l.push(u%1e14),c+=7);c=a/7}if(!B)for(;c<a;)(u=e())<9e15&&(l[c++]=u%1e14);for(a=l[--c],r%=m,a&&r&&(u=g[m-r],l[c]=d(a/u)*u);0===l[c];l.pop(),c--);if(c<0)l=[i=0];else{for(i=-1;0===l[0];l.splice(0,1),i-=m);for(c=1,u=l[0];u>=10;u/=10,c++);c<m&&(i-=m-c)}return f.e=i,f.c=l,f}}(),t.sum=function(){for(var e=1,r=arguments,n=new t(r[0]);e<r.length;)n=n.plus(r[e++]);return n},T=function(){function e(e,t,r,n){for(var o,i,s=[0],a=0,u=e.length;a<u;){for(i=s.length;i--;s[i]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),o=0;o<s.length;o++)s[o]>r-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/r|0,s[o]%=r)}return s.reverse()}return function(r,n,i,s,a){var u,l,f,p,h,d,_,b,y=r.indexOf("."),m=D,v=R;for(y>=0&&(p=F,F=0,r=r.replace(".",""),b=new t(n),d=b.pow(r.length-y),F=p,b.c=e(c(o(d.c),d.e,"0"),10,i,"0123456789"),b.e=b.c.length),_=e(r,n,i,a?(u=U,"0123456789"):(u="0123456789",U)),f=p=_.length;0==_[--p];_.pop());if(!_[0])return u.charAt(0);if(y<0?--f:(d.c=_,d.e=f,d.s=s,d=k(d,b,m,v,i),_=d.c,h=d.r,f=d.e),l=f+m+1,y=_[l],p=i/2,h=h||l<0||null!=_[l+1],h=v<4?(null!=y||h)&&(0==v||v==(d.s<0?3:2)):y>p||y==p&&(4==v||h||6==v&&1&_[l-1]||v==(d.s<0?8:7)),l<1||!_[0])r=h?c(u.charAt(1),-m,u.charAt(0)):u.charAt(0);else{if(_.length=l,h)for(--i;++_[--l]>i;)_[l]=0,l||(++f,_=[1].concat(_));for(p=_.length;!_[--p];);for(y=0,r="";y<=p;r+=u.charAt(_[y++]));r=c(r,f,u.charAt(0))}return r}}(),k=function(){function e(e,t,r){var n,o,i,s,a=0,u=e.length,c=t%j,l=t/j|0;for(e=e.slice();u--;)i=e[u]%j,s=e[u]/j|0,n=l*i+s*c,o=c*i+n%j*j+a,a=(o/r|0)+(n/j|0)+l*s,e[u]=o%r;return a&&(e=[a].concat(e)),e}function r(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function o(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(i,s,a,u,c){var l,f,p,h,_,b,v,g,j,w,x,E,A,k,T,O,L,I=i.s==s.s?1:-1,D=i.c,R=s.c;if(!(D&&D[0]&&R&&R[0]))return new t(i.s&&s.s&&(D?!R||D[0]!=R[0]:R)?D&&0==D[0]||!R?0*I:I/0:NaN);for(g=new t(I),j=g.c=[],f=i.e-s.e,I=a+f+1,c||(c=y,f=n(i.e/m)-n(s.e/m),I=I/m|0),p=0;R[p]==(D[p]||0);p++);if(R[p]>(D[p]||0)&&f--,I<0)j.push(1),h=!0;else{for(k=D.length,O=R.length,p=0,I+=2,_=d(c/(R[0]+1)),_>1&&(R=e(R,_,c),D=e(D,_,c),O=R.length,k=D.length),A=O,w=D.slice(0,O),x=w.length;x<O;w[x++]=0);L=R.slice(),L=[0].concat(L),T=R[0],R[1]>=c/2&&T++;do{if(_=0,(l=r(R,w,O,x))<0){if(E=w[0],O!=x&&(E=E*c+(w[1]||0)),(_=d(E/T))>1)for(_>=c&&(_=c-1),b=e(R,_,c),v=b.length,x=w.length;1==r(b,w,v,x);)_--,o(b,O<v?L:R,v,c),v=b.length,l=1;else 0==_&&(l=_=1),b=R.slice(),v=b.length;if(v<x&&(b=[0].concat(b)),o(w,b,x,c),x=w.length,-1==l)for(;r(R,w,O,x)<1;)_++,o(w,O<x?L:R,x,c),x=w.length}else 0===l&&(_++,w=[0]);j[p++]=_,w[0]?w[x++]=D[A]||0:(w=[D[A]],x=1)}while((A++<k||null!=w[0])&&I--);h=null!=w[0],j[0]||j.splice(0,1)}if(c==y){for(p=1,I=j[0];I>=10;I/=10,p++);S(g,a+(g.e=p+f*m-1)+1,u,h)}else g.e=f,g.r=+h;return g}}(),O=function(){var e=/^(-?)0([xbo])(?=\\w[\\w.]*$)/i,r=/^([^.]+)\\.$/,n=/^\\.([^.]+)$/,o=/^-?(Infinity|NaN)$/,i=/^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g;return function(s,a,u,c){var l,f=u?a:a.replace(i,"");if(o.test(f))s.s=isNaN(f)?null:f<0?-1:1;else{if(!u&&(f=f.replace(e,function(e,t,r){return l="x"==(r=r.toLowerCase())?16:"b"==r?2:8,c&&c!=l?e:t}),c&&(l=c,f=f.replace(r,"$1").replace(n,"0.$1")),a!=f))return new t(f,l);if(t.DEBUG)throw Error(_+"Not a"+(c?" base "+c:"")+" number: "+a);s.s=null}s.c=s.e=null}}(),L.absoluteValue=L.abs=function(){var e=new t(this);return e.s<0&&(e.s=1),e},L.comparedTo=function(e,r){return i(this,new t(e,r))},L.decimalPlaces=L.dp=function(e,r){var o,i,a,u=this;if(null!=e)return s(e,0,w),null==r?r=R:s(r,0,8),S(new t(u),e+u.e+1,r);if(!(o=u.c))return null;if(i=((a=o.length-1)-n(this.e/m))*m,a=o[a])for(;a%10==0;a/=10,i--);return i<0&&(i=0),i},L.dividedBy=L.div=function(e,r){return k(this,new t(e,r),D,R)},L.dividedToIntegerBy=L.idiv=function(e,r){return k(this,new t(e,r),0,1)},\nL.exponentiatedBy=L.pow=function(e,r){var n,o,i,s,u,c,l,f,p=this;if(e=new t(e),e.c&&!e.isInteger())throw Error(_+"Exponent not an integer: "+A(e));if(null!=r&&(r=new t(r)),u=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return f=new t(Math.pow(+A(p),u?2-a(e):+A(e))),r?f.mod(r):f;if(c=e.s<0,r){if(r.c?!r.c[0]:!r.s)return new t(NaN);o=!c&&p.isInteger()&&r.isInteger(),o&&(p=p.mod(r))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return s=p.s<0&&a(e)?-0:0,p.e>-1&&(s=1/s),new t(c?1/s:s);F&&(s=h(F/m+2))}for(u?(n=new t(.5),c&&(e.s=1),l=a(e)):(i=Math.abs(+A(e)),l=i%2),f=new t(I);;){if(l){if(f=f.times(p),!f.c)break;s?f.c.length>s&&(f.c.length=s):o&&(f=f.mod(r))}if(i){if(0===(i=d(i/2)))break;l=i%2}else if(e=e.times(n),S(e,e.e+1,1),e.e>14)l=a(e);else{if(0===(i=+A(e)))break;l=i%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):o&&(p=p.mod(r))}return o?f:(c&&(f=I.div(f)),r?f.mod(r):s?S(f,F,R,void 0):f)},L.integerValue=function(e){var r=new t(this);return null==e?e=R:s(e,0,8),S(r,r.e+1,e)},L.isEqualTo=L.eq=function(e,r){return 0===i(this,new t(e,r))},L.isFinite=function(){return!!this.c},L.isGreaterThan=L.gt=function(e,r){return i(this,new t(e,r))>0},L.isGreaterThanOrEqualTo=L.gte=function(e,r){return 1===(r=i(this,new t(e,r)))||0===r},L.isInteger=function(){return!!this.c&&n(this.e/m)>this.c.length-2},L.isLessThan=L.lt=function(e,r){return i(this,new t(e,r))<0},L.isLessThanOrEqualTo=L.lte=function(e,r){return-1===(r=i(this,new t(e,r)))||0===r},L.isNaN=function(){return!this.s},L.isNegative=function(){return this.s<0},L.isPositive=function(){return this.s>0},L.isZero=function(){return!!this.c&&0==this.c[0]},L.minus=function(e,r){var o,i,s,a,u=this,c=u.s;if(e=new t(e,r),r=e.s,!c||!r)return new t(NaN);if(c!=r)return e.s=-r,u.plus(e);var l=u.e/m,f=e.e/m,p=u.c,h=e.c;if(!l||!f){if(!p||!h)return p?(e.s=-r,e):new t(h?u:NaN);if(!p[0]||!h[0])return h[0]?(e.s=-r,e):new t(p[0]?u:3==R?-0:0)}if(l=n(l),f=n(f),p=p.slice(),c=l-f){for((a=c<0)?(c=-c,s=p):(f=l,s=h),s.reverse(),r=c;r--;s.push(0));s.reverse()}else for(i=(a=(c=p.length)<(r=h.length))?c:r,c=r=0;r<i;r++)if(p[r]!=h[r]){a=p[r]<h[r];break}if(a&&(s=p,p=h,h=s,e.s=-e.s),(r=(i=h.length)-(o=p.length))>0)for(;r--;p[o++]=0);for(r=y-1;i>c;){if(p[--i]<h[i]){for(o=i;o&&!p[--o];p[o]=r);--p[o],p[i]+=y}p[i]-=h[i]}for(;0==p[0];p.splice(0,1),--f);return p[0]?E(e,p,f):(e.s=3==R?-1:1,e.c=[e.e=0],e)},L.modulo=L.mod=function(e,r){var n,o,i=this;return e=new t(e,r),!i.c||!e.s||e.c&&!e.c[0]?new t(NaN):!e.c||i.c&&!i.c[0]?new t(i):(9==N?(o=e.s,e.s=1,n=k(i,e,0,3),e.s=o,n.s*=o):n=k(i,e,0,N),e=i.minus(n.times(e)),e.c[0]||1!=N||(e.s=i.s),e)},L.multipliedBy=L.times=function(e,r){var o,i,s,a,u,c,l,f,p,h,d,_,b,v,g,w=this,x=w.c,S=(e=new t(e,r)).c;if(!(x&&S&&x[0]&&S[0]))return!w.s||!e.s||x&&!x[0]&&!S||S&&!S[0]&&!x?e.c=e.e=e.s=null:(e.s*=w.s,x&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(i=n(w.e/m)+n(e.e/m),e.s*=w.s,l=x.length,h=S.length,l<h&&(b=x,x=S,S=b,s=l,l=h,h=s),s=l+h,b=[];s--;b.push(0));for(v=y,g=j,s=h;--s>=0;){for(o=0,d=S[s]%g,_=S[s]/g|0,u=l,a=s+u;a>s;)f=x[--u]%g,p=x[u]/g|0,c=_*f+p*d,f=d*f+c%g*g+b[a]+o,o=(f/v|0)+(c/g|0)+_*p,b[a--]=f%v;b[a]=o}return o?++i:b.splice(0,1),E(e,b,i)},L.negated=function(){var e=new t(this);return e.s=-e.s||null,e},L.plus=function(e,r){var o,i=this,s=i.s;if(e=new t(e,r),r=e.s,!s||!r)return new t(NaN);if(s!=r)return e.s=-r,i.minus(e);var a=i.e/m,u=e.e/m,c=i.c,l=e.c;if(!a||!u){if(!c||!l)return new t(s/0);if(!c[0]||!l[0])return l[0]?e:new t(c[0]?i:0*s)}if(a=n(a),u=n(u),c=c.slice(),s=a-u){for(s>0?(u=a,o=l):(s=-s,o=c),o.reverse();s--;o.push(0));o.reverse()}for(s=c.length,r=l.length,s-r<0&&(o=l,l=c,c=o,r=s),s=0;r;)s=(c[--r]=c[r]+l[r]+s)/y|0,c[r]=y===c[r]?0:c[r]%y;return s&&(c=[s].concat(c),++u),E(e,c,u)},L.precision=L.sd=function(e,r){var n,o,i,a=this;if(null!=e&&e!==!!e)return s(e,1,w),null==r?r=R:s(r,0,8),S(new t(a),e,r);if(!(n=a.c))return null;if(i=n.length-1,o=i*m+1,i=n[i]){for(;i%10==0;i/=10,o--);for(i=n[0];i>=10;i/=10,o++);}return e&&a.e+1>o&&(o=a.e+1),o},L.shiftedBy=function(e){return s(e,-v,v),this.times("1e"+e)},L.squareRoot=L.sqrt=function(){var e,r,i,s,a,u=this,c=u.c,l=u.s,f=u.e,p=D+4,h=new t("0.5");if(1!==l||!c||!c[0])return new t(!l||l<0&&(!c||c[0])?NaN:c?u:1/0);if(l=Math.sqrt(+A(u)),0==l||l==1/0?(r=o(c),(r.length+f)%2==0&&(r+="0"),l=Math.sqrt(+r),f=n((f+1)/2)-(f<0||f%2),l==1/0?r="1e"+f:(r=l.toExponential(),r=r.slice(0,r.indexOf("e")+1)+f),i=new t(r)):i=new t(l+""),i.c[0])for(f=i.e,l=f+p,l<3&&(l=0);;)if(a=i,i=h.times(a.plus(k(u,a,p,1))),o(a.c).slice(0,l)===(r=o(i.c)).slice(0,l)){if(i.e<f&&--l,"9999"!=(r=r.slice(l-3,l+1))&&(s||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(S(i,i.e+D+2,1),e=!i.times(i).eq(u));break}if(!s&&(S(a,a.e+D+2,0),a.times(a).eq(u))){i=a;break}p+=4,l+=4,s=1}return S(i,i.e+D+1,R,e)},L.toExponential=function(e,t){return null!=e&&(s(e,0,w),e++),l(this,e,t,1)},L.toFixed=function(e,t){return null!=e&&(s(e,0,w),e=e+this.e+1),l(this,e,t)},L.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=V;else if("object"!=typeof r)throw Error(_+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var i,s=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,c=r.groupSeparator||"",l=s[0],f=s[1],p=o.s<0,h=p?l.slice(1):l,d=h.length;if(u&&(i=a,a=u,u=i,d-=i),a>0&&d>0){for(i=d%a||a,l=h.substr(0,i);i<d;i+=a)l+=c+h.substr(i,a);u>0&&(l+=c+h.slice(i)),p&&(l="-"+l)}n=f?l+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?f.replace(new RegExp("\\\\d{"+u+"}\\\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):l}return(r.prefix||"")+n+(r.suffix||"")},L.toFraction=function(e){var r,n,i,s,a,u,c,l,f,p,h,d,b=this,y=b.c;if(null!=e&&(c=new t(e),!c.isInteger()&&(c.c||1!==c.s)||c.lt(I)))throw Error(_+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+A(c));if(!y)return new t(b);for(r=new t(I),f=n=new t(I),i=l=new t(I),d=o(y),a=r.e=d.length-b.e-1,r.c[0]=g[(u=a%m)<0?m+u:u],e=!e||c.comparedTo(r)>0?a>0?r:f:c,u=P,P=1/0,c=new t(d),l.c[0]=0;p=k(c,r,0,1),s=n.plus(p.times(i)),1!=s.comparedTo(e);)n=i,i=s,f=l.plus(p.times(s=f)),l=s,r=c.minus(p.times(s=r)),c=s;return s=k(e.minus(n),i,0,1),l=l.plus(s.times(f)),n=n.plus(s.times(i)),l.s=f.s=b.s,a*=2,h=k(f,i,a,R).minus(b).abs().comparedTo(k(l,n,a,R).minus(b).abs())<1?[f,i]:[l,n],P=u,h},L.toNumber=function(){return+A(this)},L.toPrecision=function(e,t){return null!=e&&s(e,1,w),l(this,e,t,2)},L.toString=function(e){var r,n=this,i=n.s,a=n.e;return null===a?i?(r="Infinity",i<0&&(r="-"+r)):r="NaN":(null==e?r=a<=M||a>=C?u(o(n.c),a):c(o(n.c),a,"0"):10===e?(n=S(new t(n),D+a+1,R),r=c(o(n.c),n.e,"0")):(s(e,2,U.length,"Base"),r=T(c(o(n.c),a,"0"),10,e,i,!0)),i<0&&n.c[0]&&(r="-"+r)),r},L.valueOf=L.toJSON=function(){return A(this)},L._isBigNumber=!0,p&&(L[Symbol.toStringTag]="BigNumber",L[Symbol.for("nodejs.util.inspect.custom")]=L.valueOf),null!=e&&t.set(e),t}function n(e){var t=0|e;return e>0||e===t?t:t-1}function o(e){for(var t,r,n=1,o=e.length,i=e[0]+"";n<o;){for(t=e[n++]+"",r=m-t.length;r--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function i(e,t){var r,n,o=e.c,i=t.c,s=e.s,a=t.s,u=e.e,c=t.e;if(!s||!a)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=u==c,!o||!i)return n?0:!o^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=o.length)<(c=i.length)?u:c,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function s(e,t,r,n){if(e<t||e>r||e!==d(e))throw Error(_+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function a(e){var t=e.c.length-1;return n(e.e/m)==t&&e.c[t]%2!=0}function u(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function c(e,t,r){var n,o;if(t<0){for(o=r+".";++t;o+=r);e=o+e}else if(n=e.length,++t>n){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var l,f=/^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?$/i,p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,h=Math.ceil,d=Math.floor,_="[BigNumber Error] ",b=_+"Number primitive has more than 15 significant digits: ",y=1e14,m=14,v=9007199254740991,g=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],j=1e7,w=1e9;l=r(),l.default=l.BigNumber=l,"function"==typeof define&&define.amd?define(function(){return l}):void 0!==t&&t.exports?t.exports=l:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=l)}(this)},{}],47:[function(e,t,r){(function(t){"use strict";function n(e){if(e>W)throw new RangeError(\'The value "\'+e+\'" is invalid for option "size"\');var r=new Uint8Array(e);return r.__proto__=t.prototype,r}function t(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError(\'The "string" argument must be of type string. Received type number\');return a(e)}return o(e,t,r)}function o(e,r,n){if("string"==typeof e)return u(e,r);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer))return l(e,r,n);if("number"==typeof e)throw new TypeError(\'The "value" argument must not be of type number. Received type number\');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return t.from(o,r,n);var i=f(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function i(e){if("number"!=typeof e)throw new TypeError(\'"size" argument must be of type number\');if(e<0)throw new RangeError(\'The value "\'+e+\'" is invalid for option "size"\')}function s(e,t,r){return i(e),e<=0?n(e):void 0!==t?"string"==typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}function a(e){return i(e),n(e<0?0:0|p(e))}function u(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var o=0|d(e,r),i=n(o),s=i.write(e,r);return s!==o&&(i=i.slice(0,s)),i}function c(e){for(var t=e.length<0?0:0|p(e.length),r=n(t),o=0;o<t;o+=1)r[o]=255&e[o];return r}function l(e,r,n){if(r<0||e.byteLength<r)throw new RangeError(\'"offset" is outside of buffer bounds\');if(e.byteLength<r+(n||0))throw new RangeError(\'"length" is outside of buffer bounds\');var o;return o=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.__proto__=t.prototype,o}function f(e){if(t.isBuffer(e)){var r=0|p(e.length),o=n(r);return 0===o.length?o:(e.copy(o,0,0,r),o)}return void 0!==e.length?"number"!=typeof e.length||z(e.length)?n(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}function p(e){if(e>=W)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+W.toString(16)+" bytes");return 0|e}function h(e){return+e!=e&&(e=0),t.alloc(+e)}function d(e,r){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError(\'The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type \'+typeof e);var n=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(i)return o?-1:N(e).length;r=(""+r).toLowerCase(),i=!0}}function _(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,r,n,o,i){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,z(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof r&&(r=t.from(r,o)),t.isBuffer(r))return 0===r.length?-1:m(e,r,n,o,i);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):m(e,[r],n,o,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,o){function i(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}var c;if(o){var l=-1;for(c=r;c<a;c++)if(i(e,c)===i(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*s}else-1!==l&&(c-=c-l),l=-1}else for(r+u>a&&(r=a-u),c=r;c>=0;c--){for(var f=!0,p=0;p<u;p++)if(i(e,c+p)!==i(t,p)){f=!1;break}if(f)return c}return-1}function v(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(z(a))return s;e[r+s]=a}return s}function g(e,t,r,n){return G(N(t,e.length-r),e,r,n)}function j(e,t,r,n){return G(F(t),e,r,n)}function w(e,t,r,n){return j(e,t,r,n)}function x(e,t,r,n){return G(U(t),e,r,n)}function E(e,t,r,n){return G(V(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=r){var u,c,l,f;switch(a){case 1:i<128&&(s=i);break;case 2:u=e[o+1],128==(192&u)&&(f=(31&i)<<6|63&u)>127&&(s=f);break;case 3:u=e[o+1],c=e[o+2],128==(192&u)&&128==(192&c)&&(f=(15&i)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=e[o+1],c=e[o+2],l=e[o+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),o+=a}return k(n)}function k(e){var t=e.length;if(t<=J)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=J));return r}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function L(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=B(e[i]);return o}function I(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,r,n,o,i,s){if(!t.isBuffer(e))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(r>i||r<s)throw new RangeError(\'"value" argument is out of bounds\');if(n+o>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(e,t,r,n,o){return t=+t,r>>>=0,o||M(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,r,n,23,4),r+4}function q(e,t,r,n,o){return t=+t,r>>>=0,o||M(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,r,n,52,8),r+8}function P(e){if(e=e.split("=")[0],e=e.trim().replace(X,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function F(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function V(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function U(e){return K.toByteArray(P(e))}function G(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function z(e){return e!==e}var K=e("base64-js"),$=e("ieee754");r.Buffer=t,r.SlowBuffer=h,r.INSPECT_MAX_BYTES=50;var W=2147483647;r.kMaxLength=W,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,r){return o(e,t,r)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(e,t,r){return s(e,t,r)},t.allocUnsafe=function(e){return a(e)},t.allocUnsafeSlow=function(e){return a(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,r){if(H(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),H(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength)),!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError(\'The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array\');if(e===r)return 0;for(var n=e.length,o=r.length,i=0,s=Math.min(n,o);i<s;++i)if(e[i]!==r[i]){n=e[i],o=r[i];break}return n<o?-1:o<n?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!Array.isArray(e))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var o=t.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){var s=e[n];if(H(s,Uint8Array)&&(s=t.from(s)),!t.isBuffer(s))throw new TypeError(\'"list" argument must be an Array of Buffers\');s.copy(o,i),i+=s.length}return o},t.byteLength=d,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):_.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t.prototype.compare=function(e,r,n,o,i){if(H(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError(\'The "target" argument must be one of type Buffer or Uint8Array. Received type \'+typeof e);if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),r<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&r>=n)return 0;if(o>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,i>>>=0,this===e)return 0;for(var s=i-o,a=n-r,u=Math.min(s,a),c=this.slice(o,i),l=e.slice(r,n),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},t.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},t.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},t.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},t.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return g(this,e,t,r);case"ascii":return j(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;t.prototype.slice=function(e,r){var n=this.length;e=~~e,r=void 0===r?n:~~r,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),r<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e);var o=this.subarray(e,r);return o.__proto__=t.prototype,o},t.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},t.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},t.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},t.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},t.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),$.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),$.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),$.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),$.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},t.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},t.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);R(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},t.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);R(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},t.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,r){return C(this,e,t,!0,r)},t.prototype.writeFloatBE=function(e,t,r){return C(this,e,t,!1,r)},t.prototype.writeDoubleLE=function(e,t,r){return q(this,e,t,!0,r)},t.prototype.writeDoubleBE=function(e,t,r){return q(this,e,t,!1,r)},t.prototype.copy=function(e,r,n,o){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-n&&(o=e.length-r+n);var i=o-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,o);else if(this===e&&n<r&&r<o)for(var s=i-1;s>=0;--s)e[s+r]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,o),r);return i},t.prototype.fill=function(e,r,n,o){if("string"==typeof e){if("string"==typeof r?(o=r,r=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!t.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){var i=e.charCodeAt(0);("utf8"===o&&i<128||"latin1"===o)&&(e=i)}}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=r;s<n;++s)this[s]=e;else{var a=t.isBuffer(e)?e:t.from(e,o),u=a.length;if(0===u)throw new TypeError(\'The value "\'+e+\'" is invalid for argument "value"\');for(s=0;s<n-r;++s)this[s+r]=a[s%u]}return this};var X=/[^+\\/0-9A-Za-z-_]/g}).call(this,e("buffer").Buffer)},{"base64-js":45,buffer:47,ieee754:180}],48:[function(e,t,r){(function(n){"use strict";function o(e,t){if(a)return a.call(e,t);var r=e;do{if((0,i.default)(r,t))return r;r=r.parentNode}while(r&&r!==n.document);return null}r.__esModule=!0,r.default=o;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("matches-selector-ng")),s=n.Element&&n.Element.prototype,a=s&&s.closest;t.exports=r.default,t.exports.default=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"matches-selector-ng":381}],49:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":85,"../../modules/es6.array.from":149,"../../modules/es6.string.iterator":165}],50:[function(e,t,r){e("../../modules/es6.array.is-array"),t.exports=e("../../modules/_core").Array.isArray},{"../../modules/_core":85,"../../modules/es6.array.is-array":150}],51:[function(e,t,r){e("../../modules/es6.date.now"),t.exports=e("../../modules/_core").Date.now},{"../../modules/_core":85,"../../modules/es6.date.now":152}],52:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":148,"../modules/es6.string.iterator":165,"../modules/web.dom.iterable":178}],53:[function(e,t,r){var n=e("../../modules/_core"),o=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(e){return o.stringify.apply(o,arguments)}},{"../../modules/_core":85}],54:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),e("../modules/es7.map.of"),e("../modules/es7.map.from"),t.exports=e("../modules/_core").Map},{"../modules/_core":85,"../modules/es6.map":153,"../modules/es6.object.to-string":163,"../modules/es6.string.iterator":165,"../modules/es7.map.from":168,"../modules/es7.map.of":169,"../modules/es7.map.to-json":170,"../modules/web.dom.iterable":178}],55:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":85,"../../modules/es6.object.assign":154}],56:[function(e,t,r){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.create(e,t)}},{"../../modules/_core":85,"../../modules/es6.object.create":155}],57:[function(e,t,r){e("../../modules/es6.object.define-properties");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.defineProperties(e,t)}},{"../../modules/_core":85,"../../modules/es6.object.define-properties":156}],58:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":85,"../../modules/es6.object.define-property":157}],59:[function(e,t,r){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/_core").Object.freeze},{"../../modules/_core":85,"../../modules/es6.object.freeze":158}],60:[function(e,t,r){\ne("../../modules/es6.object.get-own-property-descriptor");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},{"../../modules/_core":85,"../../modules/es6.object.get-own-property-descriptor":159}],61:[function(e,t,r){e("../../modules/es6.object.get-own-property-names");var n=e("../../modules/_core").Object;t.exports=function(e){return n.getOwnPropertyNames(e)}},{"../../modules/_core":85,"../../modules/es6.object.get-own-property-names":160}],62:[function(e,t,r){e("../../modules/es6.symbol"),t.exports=e("../../modules/_core").Object.getOwnPropertySymbols},{"../../modules/_core":85,"../../modules/es6.symbol":166}],63:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":85,"../../modules/es6.object.get-prototype-of":161}],64:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":85,"../../modules/es6.object.keys":162}],65:[function(e,t,r){(function(e){t.exports=e.Promise}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],66:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),e("../modules/es7.set.of"),e("../modules/es7.set.from"),t.exports=e("../modules/_core").Set},{"../modules/_core":85,"../modules/es6.object.to-string":163,"../modules/es6.set":164,"../modules/es6.string.iterator":165,"../modules/es7.set.from":171,"../modules/es7.set.of":172,"../modules/es7.set.to-json":173,"../modules/web.dom.iterable":178}],67:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":85,"../../modules/es6.object.to-string":163,"../../modules/es6.symbol":166,"../../modules/es7.symbol.async-iterator":174,"../../modules/es7.symbol.observable":175}],68:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":145,"../../modules/es6.string.iterator":165,"../../modules/web.dom.iterable":178}],69:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/web.dom.iterable"),e("../modules/es6.weak-map"),e("../modules/es7.weak-map.of"),e("../modules/es7.weak-map.from"),t.exports=e("../modules/_core").WeakMap},{"../modules/_core":85,"../modules/es6.object.to-string":163,"../modules/es6.weak-map":167,"../modules/es7.weak-map.from":176,"../modules/es7.weak-map.of":177,"../modules/web.dom.iterable":178}],70:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],71:[function(e,t,r){t.exports=function(){}},{}],72:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],73:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":104}],74:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":95}],75:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-absolute-index");t.exports=function(e){return function(t,r,s){var a,u=n(t),c=o(u.length),l=i(s,c);if(e&&r!=r){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},{"./_to-absolute-index":136,"./_to-iobject":138,"./_to-length":139}],76:[function(e,t,r){var n=e("./_ctx"),o=e("./_iobject"),i=e("./_to-object"),s=e("./_to-length"),a=e("./_array-species-create");t.exports=function(e,t){var r=1==e,u=2==e,c=3==e,l=4==e,f=6==e,p=5==e||f,h=t||a;return function(t,a,d){for(var _,b,y=i(t),m=o(y),v=n(a,d,3),g=s(m.length),j=0,w=r?h(t,g):u?h(t,0):void 0;g>j;j++)if((p||j in m)&&(_=m[j],b=v(_,j,y),e))if(r)w[j]=b;else if(b)switch(e){case 3:return!0;case 5:return _;case 6:return j;case 2:w.push(_)}else if(l)return!1;return f?-1:c||l?l:w}}},{"./_array-species-create":78,"./_ctx":87,"./_iobject":101,"./_to-length":139,"./_to-object":140}],77:[function(e,t,r){var n=e("./_is-object"),o=e("./_is-array"),i=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":103,"./_is-object":104,"./_wks":146}],78:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":77}],79:[function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=s(t=Object(e),o))?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":80,"./_wks":146}],80:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],81:[function(e,t,r){"use strict";var n=e("./_object-dp").f,o=e("./_object-create"),i=e("./_redefine-all"),s=e("./_ctx"),a=e("./_an-instance"),u=e("./_for-of"),c=e("./_iter-define"),l=e("./_iter-step"),f=e("./_set-species"),p=e("./_descriptors"),h=e("./_meta").fastKey,d=e("./_validate-collection"),_=p?"_s":"size",b=function(e,t){var r,n=h(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,c){var l=e(function(e,n){a(e,l,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[_]=0,void 0!=n&&u(n,r,e[c],e)});return i(l.prototype,{clear:function(){for(var e=d(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var r=d(this,t),n=b(r,e);if(n){var o=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==n&&(r._f=o),r._l==n&&(r._l=i),r[_]--}return!!n},forEach:function(e){d(this,t);for(var r,n=s(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!b(d(this,t),e)}}),p&&n(l.prototype,"size",{get:function(){return d(this,t)[_]}}),l},def:function(e,t,r){var n,o,i=b(e,t);return i?i.v=r:(e._l=i={i:o=h(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[_]++,"F"!==o&&(e._i[o]=i)),e},getEntry:b,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=d(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?l(0,r.k):"values"==t?l(0,r.v):l(0,[r.k,r.v]):(e._t=void 0,l(1))},r?"entries":"values",!r,!0),f(t)}}},{"./_an-instance":72,"./_ctx":87,"./_descriptors":89,"./_for-of":95,"./_iter-define":107,"./_iter-step":109,"./_meta":112,"./_object-create":114,"./_object-dp":115,"./_redefine-all":127,"./_set-species":131,"./_validate-collection":143}],82:[function(e,t,r){var n=e("./_classof"),o=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn\'t generic");return o(this)}}},{"./_array-from-iterable":74,"./_classof":79}],83:[function(e,t,r){"use strict";var n=e("./_redefine-all"),o=e("./_meta").getWeak,i=e("./_an-object"),s=e("./_is-object"),a=e("./_an-instance"),u=e("./_for-of"),c=e("./_array-methods"),l=e("./_has"),f=e("./_validate-collection"),p=c(5),h=c(6),d=0,_=function(e){return e._l||(e._l=new b)},b=function(){this.a=[]},y=function(e,t){return p(e.a,function(e){return e[0]===t})};b.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var r=y(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,r,i){var c=e(function(e,n){a(e,c,t,"_i"),e._t=t,e._i=d++,e._l=void 0,void 0!=n&&u(n,r,e[i],e)});return n(c.prototype,{delete:function(e){if(!s(e))return!1;var r=o(e);return!0===r?_(f(this,t)).delete(e):r&&l(r,this._i)&&delete r[this._i]},has:function(e){if(!s(e))return!1;var r=o(e);return!0===r?_(f(this,t)).has(e):r&&l(r,this._i)}}),c},def:function(e,t,r){var n=o(i(t),!0);return!0===n?_(e).set(t,r):n[e._i]=r,e},ufstore:_}},{"./_an-instance":72,"./_an-object":73,"./_array-methods":76,"./_for-of":95,"./_has":97,"./_is-object":104,"./_meta":112,"./_redefine-all":127,"./_validate-collection":143}],84:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_export"),i=e("./_meta"),s=e("./_fails"),a=e("./_hide"),u=e("./_redefine-all"),c=e("./_for-of"),l=e("./_an-instance"),f=e("./_is-object"),p=e("./_set-to-string-tag"),h=e("./_object-dp").f,d=e("./_array-methods")(0),_=e("./_descriptors");t.exports=function(e,t,r,b,y,m){var v=n[e],g=v,j=y?"set":"add",w=g&&g.prototype,x={};return _&&"function"==typeof g&&(m||w.forEach&&!s(function(){(new g).entries().next()}))?(g=t(function(t,r){l(t,g,e,"_c"),t._c=new v,void 0!=r&&c(r,y,t[j],t)}),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!m||"clear"!=e)&&a(g.prototype,e,function(r,n){if(l(this,g,e),!t&&m&&!f(r))return"get"==e&&void 0;var o=this._c[e](0===r?0:r,n);return t?this:o})}),m||h(g.prototype,"size",{get:function(){return this._c.size}})):(g=b.getConstructor(t,e,y,j),u(g.prototype,r),i.NEED=!0),p(g,e),x[e]=g,o(o.G+o.W+o.F,x),m||b.setStrong(g,e,y),g}},{"./_an-instance":72,"./_array-methods":76,"./_descriptors":89,"./_export":93,"./_fails":94,"./_for-of":95,"./_global":96,"./_hide":98,"./_is-object":104,"./_meta":112,"./_object-dp":115,"./_redefine-all":127,"./_set-to-string-tag":132}],85:[function(e,t,r){var n=t.exports={version:"2.6.8"};"number"==typeof __e&&(__e=n)},{}],86:[function(e,t,r){"use strict";var n=e("./_object-dp"),o=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},{"./_object-dp":115,"./_property-desc":126}],87:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":70}],88:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can\'t call method on  "+e);return e}},{}],89:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":94}],90:[function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,i=n(o)&&n(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":96,"./_is-object":104}],91:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],92:[function(e,t,r){var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=n(e),r=o.f;if(r)for(var s,a=r(e),u=i.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},{"./_object-gops":120,"./_object-keys":123,"./_object-pie":124}],93:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_ctx"),s=e("./_hide"),a=e("./_has"),u=function(e,t,r){var c,l,f,p=e&u.F,h=e&u.G,d=e&u.S,_=e&u.P,b=e&u.B,y=e&u.W,m=h?o:o[t]||(o[t]={}),v=m.prototype,g=h?n:d?n[t]:(n[t]||{}).prototype;h&&(r=t);for(c in r)(l=!p&&g&&void 0!==g[c])&&a(m,c)||(f=l?g[c]:r[c],m[c]=h&&"function"!=typeof g[c]?r[c]:b&&l?i(f,n):y&&g[c]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):_&&"function"==typeof f?i(Function.call,f):f,_&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&v&&!v[c]&&s(v,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":85,"./_ctx":87,"./_global":96,"./_has":97,"./_hide":98}],94:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],95:[function(e,t,r){var n=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),s=e("./_an-object"),a=e("./_to-length"),u=e("./core.get-iterator-method"),c={},l={},r=t.exports=function(e,t,r,f,p){var h,d,_,b,y=p?function(){return e}:u(e),m=n(r,f,t?2:1),v=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(i(y)){for(h=a(e.length);h>v;v++)if((b=t?m(s(d=e[v])[0],d[1]):m(e[v]))===c||b===l)return b}else for(_=y.call(e);!(d=_.next()).done;)if((b=o(_,m,d.value,t))===c||b===l)return b};r.BREAK=c,r.RETURN=l},{"./_an-object":73,"./_ctx":87,"./_is-array-iter":102,"./_iter-call":105,"./_to-length":139,"./core.get-iterator-method":147}],96:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],97:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],98:[function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":89,"./_object-dp":115,"./_property-desc":126}],99:[function(e,t,r){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":96}],100:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":89,"./_dom-create":90,"./_fails":94}],101:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":80}],102:[function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},{"./_iterators":110,"./_wks":146}],103:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":80}],104:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],105:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},{"./_an-object":73}],106:[function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(s,{next:o(1,r)}),i(e,t+" Iterator")}},{"./_hide":98,"./_object-create":114,"./_property-desc":126,"./_set-to-string-tag":132,"./_wks":146}],107:[function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),i=e("./_redefine"),s=e("./_hide"),a=e("./_iterators"),u=e("./_iter-create"),c=e("./_set-to-string-tag"),l=e("./_object-gpo"),f=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(e,t,r,d,_,b,y){u(r,t,d);var m,v,g,j=function(e){if(!p&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},w=t+" Iterator",x="values"==_,E=!1,S=e.prototype,A=S[f]||S["@@iterator"]||_&&S[_],k=A||j(_),T=_?x?j("entries"):k:void 0,O="Array"==t?S.entries||A:A;if(O&&(g=l(O.call(new e)))!==Object.prototype&&g.next&&(c(g,w,!0),n||"function"==typeof g[f]||s(g,f,h)),x&&A&&"values"!==A.name&&(E=!0,k=function(){return A.call(this)}),n&&!y||!p&&!E&&S[f]||s(S,f,k),a[t]=k,a[w]=h,_)if(m={values:x?k:j("values"),keys:b?k:j("keys"),entries:T},y)for(v in m)v in S||i(S,v,m[v]);else o(o.P+o.F*(p||E),t,m);return m}},{"./_export":93,"./_hide":98,"./_iter-create":106,"./_iterators":110,"./_library":111,"./_object-gpo":121,"./_redefine":128,"./_set-to-string-tag":132,"./_wks":146}],108:[function(e,t,r){var n=e("./_wks")("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],s=i[n]();s.next=function(){return{done:r=!0}},i[n]=function(){return s},e(i)}catch(e){}return r}},{"./_wks":146}],109:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],110:[function(e,t,r){t.exports={}},{}],111:[function(e,t,r){t.exports=!0},{}],112:[function(e,t,r){var n=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),s=e("./_object-dp").f,a=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},p=function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},h=function(e){return c&&d.NEED&&u(e)&&!i(e,n)&&l(e),e},d=t.exports={KEY:n,NEED:!1,fastKey:f,getWeak:p,onFreeze:h}},{"./_fails":94,"./_has":97,"./_is-object":104,"./_object-dp":115,"./_uid":142}],113:[function(e,t,r){"use strict";var n=e("./_descriptors"),o=e("./_object-keys"),i=e("./_object-gops"),s=e("./_object-pie"),a=e("./_to-object"),u=e("./_iobject"),c=Object.assign;t.exports=!c||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=c({},e)[r]||Object.keys(c({},t)).join("")!=n})?function(e,t){for(var r=a(e),c=arguments.length,l=1,f=i.f,p=s.f;c>l;)for(var h,d=u(arguments[l++]),_=f?o(d).concat(f(d)):o(d),b=_.length,y=0;b>y;)h=_[y++],n&&!p.call(d,h)||(r[h]=d[h]);return r}:c},{"./_descriptors":89,"./_fails":94,"./_iobject":101,"./_object-gops":120,"./_object-keys":123,"./_object-pie":124,"./_to-object":140}],114:[function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},u=function(){var t,r=e("./_dom-create")("iframe"),n=i.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write("<script>document.F=Object<\\/script>"),t.close(),u=t.F;n--;)delete u.prototype[i[n]];return u()};t.exports=Object.create||function(e,t){var r;return null!==e?(a.prototype=n(e),r=new a,a.prototype=null,r[s]=e):r=u(),void 0===t?r:o(r,t)}},{"./_an-object":73,"./_dom-create":90,"./_enum-bug-keys":91,"./_html":99,"./_object-dps":116,"./_shared-key":133}],115:[function(e,t,r){var n=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),s=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":73,"./_descriptors":89,"./_ie8-dom-define":100,"./_to-primitive":141}],116:[function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var r,s=i(t),a=s.length,u=0;a>u;)n.f(e,r=s[u++],t[r]);return e}},{"./_an-object":73,"./_descriptors":89,"./_object-dp":115,"./_object-keys":123}],117:[function(e,t,r){var n=e("./_object-pie"),o=e("./_property-desc"),i=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?c:function(e,t){if(e=i(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(a(e,t))return o(!n.f.call(e,t),e[t])}},{"./_descriptors":89,"./_has":97,"./_ie8-dom-define":100,"./_object-pie":124,"./_property-desc":126,"./_to-iobject":138,"./_to-primitive":141}],118:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(e){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==i.call(e)?a(e):o(n(e))}},{"./_object-gopn":119,"./_to-iobject":138}],119:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},{"./_enum-bug-keys":91,"./_object-keys-internal":122}],120:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],121:[function(e,t,r){var n=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":97,"./_shared-key":133,"./_to-object":140}],122:[function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,a=o(e),u=0,c=[];for(r in a)r!=s&&n(a,r)&&c.push(r);for(;t.length>u;)n(a,r=t[u++])&&(~i(c,r)||c.push(r));return c}},{"./_array-includes":75,"./_has":97,"./_shared-key":133,"./_to-iobject":138}],123:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":91,"./_object-keys-internal":122}],124:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],125:[function(e,t,r){var n=e("./_export"),o=e("./_core"),i=e("./_fails");t.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",s)}},{"./_core":85,"./_export":93,"./_fails":94}],126:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],127:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},{"./_hide":98}],128:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":98}],129:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_a-function"),i=e("./_ctx"),s=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,a,u=arguments[1];return o(this),t=void 0!==u,t&&o(u),void 0==e?new this:(r=[],t?(n=0,a=i(u,arguments[2],2),s(e,!1,function(e){r.push(a(e,n++))})):s(e,!1,r.push,r),new this(r))}})}},{"./_a-function":70,"./_ctx":87,"./_export":93,"./_for-of":95}],130:[function(e,t,r){"use strict";var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":93}],131:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_core"),i=e("./_object-dp"),s=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];s&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_core":85,"./_descriptors":89,"./_global":96,"./_object-dp":115,"./_wks":146}],132:[function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./_has":97,"./_object-dp":115,"./_wks":146}],133:[function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":134,"./_uid":142}],134:[function(e,t,r){var n=e("./_core"),o=e("./_global"),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:e("./_library")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},{"./_core":85,"./_global":96,"./_library":111}],135:[function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var i,s,a=String(o(t)),u=n(r),c=a.length;return u<0||u>=c?e?"":void 0:(i=a.charCodeAt(u),i<55296||i>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):i:e?a.slice(u,u+2):s-56320+(i-55296<<10)+65536)}}},{"./_defined":88,"./_to-integer":137}],136:[function(e,t,r){var n=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":137}],137:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],138:[function(e,t,r){var n=e("./_iobject"),o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":88,"./_iobject":101}],139:[function(e,t,r){var n=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":137}],140:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":88}],141:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can\'t convert object to primitive value")}},{"./_is-object":104}],142:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],143:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":104}],144:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_library"),s=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},{"./_core":85,"./_global":96,"./_library":111,"./_object-dp":115,"./_wks-ext":145}],145:[function(e,t,r){r.f=e("./_wks")},{"./_wks":146}],146:[function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,s="function"==typeof i;(t.exports=function(e){return n[e]||(n[e]=s&&i[e]||(s?i:o)("Symbol."+e))}).store=n},{"./_global":96,"./_shared":134,"./_uid":142}],147:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},{"./_classof":79,"./_core":85,"./_iterators":110,"./_wks":146}],148:[function(e,t,r){var n=e("./_an-object"),o=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":73,"./_core":85,"./core.get-iterator-method":147}],149:[function(e,t,r){"use strict";var n=e("./_ctx"),o=e("./_export"),i=e("./_to-object"),s=e("./_iter-call"),a=e("./_is-array-iter"),u=e("./_to-length"),c=e("./_create-property"),l=e("./core.get-iterator-method");o(o.S+o.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,f,p=i(e),h="function"==typeof this?this:Array,d=arguments.length,_=d>1?arguments[1]:void 0,b=void 0!==_,y=0,m=l(p);if(b&&(_=n(_,d>2?arguments[2]:void 0,2)),void 0==m||h==Array&&a(m))for(t=u(p.length),r=new h(t);t>y;y++)c(r,y,b?_(p[y],y):p[y]);else for(f=m.call(p),r=new h;!(o=f.next()).done;y++)c(r,y,b?s(f,_,[o.value,y],!0):o.value);return r.length=y,r}})},{"./_create-property":86,"./_ctx":87,"./_export":93,"./_is-array-iter":102,"./_iter-call":105,"./_iter-detect":108,"./_to-length":139,"./_to-object":140,"./core.get-iterator-method":147}],150:[function(e,t,r){var n=e("./_export");n(n.S,"Array",{isArray:e("./_is-array")})},{"./_export":93,"./_is-array":103}],151:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":71,"./_iter-define":107,"./_iter-step":109,"./_iterators":110,"./_to-iobject":138}],152:[function(e,t,r){var n=e("./_export");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":93}],153:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(o(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":84,"./_collection-strong":81,"./_validate-collection":143}],154:[function(e,t,r){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":93,"./_object-assign":113}],155:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":93,"./_object-create":114}],156:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":89,"./_export":93,"./_object-dps":116}],157:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":89,"./_export":93,"./_object-dp":115}],158:[function(e,t,r){var n=e("./_is-object"),o=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(o(t)):t}})},{"./_is-object":104,"./_meta":112,"./_object-sap":125}],159:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return o(n(e),t)}})},{"./_object-gopd":117,"./_object-sap":125,"./_to-iobject":138}],160:[function(e,t,r){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":118,"./_object-sap":125}],161:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(n(e))}})},{"./_object-gpo":121,"./_object-sap":125,"./_to-object":140}],162:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return o(n(e))}})},{"./_object-keys":123,"./_object-sap":125,"./_to-object":140}],163:[function(e,t,r){},{}],164:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(o(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":84,"./_collection-strong":81,"./_validate-collection":143}],165:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":107,"./_string-at":135}],166:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_has"),i=e("./_descriptors"),s=e("./_export"),a=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),l=e("./_shared"),f=e("./_set-to-string-tag"),p=e("./_uid"),h=e("./_wks"),d=e("./_wks-ext"),_=e("./_wks-define"),b=e("./_enum-keys"),y=e("./_is-array"),m=e("./_an-object"),v=e("./_is-object"),g=e("./_to-object"),j=e("./_to-iobject"),w=e("./_to-primitive"),x=e("./_property-desc"),E=e("./_object-create"),S=e("./_object-gopn-ext"),A=e("./_object-gopd"),k=e("./_object-gops"),T=e("./_object-dp"),O=e("./_object-keys"),L=A.f,I=T.f,D=S.f,R=n.Symbol,M=n.JSON,C=M&&M.stringify,q=h("_hidden"),P=h("toPrimitive"),B={}.propertyIsEnumerable,N=l("symbol-registry"),F=l("symbols"),V=l("op-symbols"),U=Object.prototype,G="function"==typeof R&&!!k.f,H=n.QObject,z=!H||!H.prototype||!H.prototype.findChild,K=i&&c(function(){return 7!=E(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=L(U,t);n&&delete U[t],I(e,t,r),n&&e!==U&&I(U,t,n)}:I,$=function(e){var t=F[e]=E(R.prototype);return t._k=e,t\n},W=G&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},J=function(e,t,r){return e===U&&J(V,t,r),m(e),t=w(t,!0),m(r),o(F,t)?(r.enumerable?(o(e,q)&&e[q][t]&&(e[q][t]=!1),r=E(r,{enumerable:x(0,!1)})):(o(e,q)||I(e,q,x(1,{})),e[q][t]=!0),K(e,t,r)):I(e,t,r)},X=function(e,t){m(e);for(var r,n=b(t=j(t)),o=0,i=n.length;i>o;)J(e,r=n[o++],t[r]);return e},Y=function(e,t){return void 0===t?E(e):X(E(e),t)},Q=function(e){var t=B.call(this,e=w(e,!0));return!(this===U&&o(F,e)&&!o(V,e))&&(!(t||!o(this,e)||!o(F,e)||o(this,q)&&this[q][e])||t)},Z=function(e,t){if(e=j(e),t=w(t,!0),e!==U||!o(F,t)||o(V,t)){var r=L(e,t);return!r||!o(F,t)||o(e,q)&&e[q][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=D(j(e)),n=[],i=0;r.length>i;)o(F,t=r[i++])||t==q||t==u||n.push(t);return n},te=function(e){for(var t,r=e===U,n=D(r?V:j(e)),i=[],s=0;n.length>s;)!o(F,t=n[s++])||r&&!o(U,t)||i.push(F[t]);return i};G||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(r){this===U&&t.call(V,r),o(this,q)&&o(this[q],e)&&(this[q][e]=!1),K(this,e,x(1,r))};return i&&z&&K(U,e,{configurable:!0,set:t}),$(e)},a(R.prototype,"toString",function(){return this._k}),A.f=Z,T.f=J,e("./_object-gopn").f=S.f=ee,e("./_object-pie").f=Q,k.f=te,i&&!e("./_library")&&a(U,"propertyIsEnumerable",Q,!0),d.f=function(e){return $(h(e))}),s(s.G+s.W+s.F*!G,{Symbol:R});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;re.length>ne;)h(re[ne++]);for(var oe=O(h.store),ie=0;oe.length>ie;)_(oe[ie++]);s(s.S+s.F*!G,"Symbol",{for:function(e){return o(N,e+="")?N[e]:N[e]=R(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!G,"Object",{create:Y,defineProperty:J,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var se=c(function(){k.f(1)});s(s.S+s.F*se,"Object",{getOwnPropertySymbols:function(e){return k.f(g(e))}}),M&&s(s.S+s.F*(!G||c(function(){var e=R();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(v(t)||void 0!==e)&&!W(e))return y(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,C.apply(M,n)}}),R.prototype[P]||e("./_hide")(R.prototype,P,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},{"./_an-object":73,"./_descriptors":89,"./_enum-keys":92,"./_export":93,"./_fails":94,"./_global":96,"./_has":97,"./_hide":98,"./_is-array":103,"./_is-object":104,"./_library":111,"./_meta":112,"./_object-create":114,"./_object-dp":115,"./_object-gopd":117,"./_object-gopn":119,"./_object-gopn-ext":118,"./_object-gops":120,"./_object-keys":123,"./_object-pie":124,"./_property-desc":126,"./_redefine":128,"./_set-to-string-tag":132,"./_shared":134,"./_to-iobject":138,"./_to-object":140,"./_to-primitive":141,"./_uid":142,"./_wks":146,"./_wks-define":144,"./_wks-ext":145}],167:[function(e,t,r){"use strict";var n,o=e("./_global"),i=e("./_array-methods")(0),s=e("./_redefine"),a=e("./_meta"),u=e("./_object-assign"),c=e("./_collection-weak"),l=e("./_is-object"),f=e("./_validate-collection"),p=e("./_validate-collection"),h=!o.ActiveXObject&&"ActiveXObject"in o,d=a.getWeak,_=Object.isExtensible,b=c.ufstore,y=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(e){if(l(e)){var t=d(e);return!0===t?b(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(f(this,"WeakMap"),e,t)}},v=t.exports=e("./_collection")("WeakMap",y,m,c,!0,!0);p&&h&&(n=c.getConstructor(y,"WeakMap"),u(n.prototype,m),a.NEED=!0,i(["delete","has","get","set"],function(e){var t=v.prototype,r=t[e];s(t,e,function(t,o){if(l(t)&&!_(t)){this._f||(this._f=new n);var i=this._f[e](t,o);return"set"==e?this:i}return r.call(this,t,o)})}))},{"./_array-methods":76,"./_collection":84,"./_collection-weak":83,"./_global":96,"./_is-object":104,"./_meta":112,"./_object-assign":113,"./_redefine":128,"./_validate-collection":143}],168:[function(e,t,r){e("./_set-collection-from")("Map")},{"./_set-collection-from":129}],169:[function(e,t,r){e("./_set-collection-of")("Map")},{"./_set-collection-of":130}],170:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":82,"./_export":93}],171:[function(e,t,r){e("./_set-collection-from")("Set")},{"./_set-collection-from":129}],172:[function(e,t,r){e("./_set-collection-of")("Set")},{"./_set-collection-of":130}],173:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":82,"./_export":93}],174:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":144}],175:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":144}],176:[function(e,t,r){e("./_set-collection-from")("WeakMap")},{"./_set-collection-from":129}],177:[function(e,t,r){e("./_set-collection-of")("WeakMap")},{"./_set-collection-of":130}],178:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),o=e("./_hide"),i=e("./_iterators"),s=e("./_wks")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],l=n[c],f=l&&l.prototype;f&&!f[s]&&o(f,s,c),i[c]=i.Array}},{"./_global":96,"./_hide":98,"./_iterators":110,"./_wks":146,"./es6.array.iterator":151}],179:[function(e,t,r){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=j(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function o(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function i(e,t,r){if(t)e.call(r);else for(var n=e.length,o=b(e,n),i=0;i<n;++i)o[i].call(r)}function s(e,t,r,n){if(t)e.call(r,n);else for(var o=e.length,i=b(e,o),s=0;s<o;++s)i[s].call(r,n)}function a(e,t,r,n,o){if(t)e.call(r,n,o);else for(var i=e.length,s=b(e,i),a=0;a<i;++a)s[a].call(r,n,o)}function u(e,t,r,n,o,i){if(t)e.call(r,n,o,i);else for(var s=e.length,a=b(e,s),u=0;u<s;++u)a[u].call(r,n,o,i)}function c(e,t,r,n){if(t)e.apply(r,n);else for(var o=e.length,i=b(e,o),s=0;s<o;++s)i[s].apply(r,n)}function l(e,t,r,n){var i,s,a;if("function"!=typeof r)throw new TypeError(\'"listener" argument must be a function\');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]):(s=e._events=j(null),e._eventsCount=0),a){if("function"==typeof a?a=s[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(i=o(e))&&i>0&&a.length>i){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+\' "\'+String(t)+\'" listeners added. Use emitter.setMaxListeners() to increase limit.\');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[t]=r,++e._eventsCount;return e}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=x.call(f,n);return o.listener=r,n.wrapFn=o,o}function h(e,t,r){var n=e._events;if(!n)return[];var o=n[t];return o?"function"==typeof o?r?[o.listener||o]:[o]:r?y(o):b(o,o.length):[]}function d(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function _(e,t){for(var r=t,n=r+1,o=e.length;n<o;r+=1,n+=1)e[r]=e[n];e.pop()}function b(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function m(e){var t=function(){};return t.prototype=e,new t}function v(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r}function g(e){var t=this;return function(){return t.apply(e,arguments)}}var j=Object.create||m,w=Object.keys||v,x=Function.prototype.bind||g;t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0;var E,S=10;try{var A={};Object.defineProperty&&Object.defineProperty(A,"x",{value:0}),E=0===A.x}catch(e){E=!1}E?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return S},set:function(e){if("number"!=typeof e||e<0||e!==e)throw new TypeError(\'"defaultMaxListeners" must be a positive number\');S=e}}):n.defaultMaxListeners=S,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError(\'"n" argument must be a positive number\');return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return o(this)},n.prototype.emit=function(e){var t,r,n,o,l,f,p="error"===e;if(f=this._events)p=p&&null==f.error;else if(!p)return!1;if(p){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var h=new Error(\'Unhandled "error" event. (\'+t+")");throw h.context=t,h}if(!(r=f[e]))return!1;var d="function"==typeof r;switch(n=arguments.length){case 1:i(r,d,this);break;case 2:s(r,d,this,arguments[1]);break;case 3:a(r,d,this,arguments[1],arguments[2]);break;case 4:u(r,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(n-1),l=1;l<n;l++)o[l-1]=arguments[l];c(r,d,this,o)}return!0},n.prototype.addListener=function(e,t){return l(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return l(this,e,t,!0)},n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError(\'"listener" argument must be a function\');return this.on(e,p(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError(\'"listener" argument must be a function\');return this.prependListener(e,p(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,n,o,i,s;if("function"!=typeof t)throw new TypeError(\'"listener" argument must be a function\');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=j(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():_(r,o),1===r.length&&(n[e]=r[0]),n.removeListener&&this.emit("removeListener",e,s||t)}return this},n.prototype.removeAllListeners=function(e){var t,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=j(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=j(null):delete r[e]),this;if(0===arguments.length){var o,i=w(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=j(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},n.prototype.listeners=function(e){return h(this,e,!0)},n.prototype.rawListeners=function(e){return h(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},n.prototype.listenerCount=d,n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],180:[function(e,t,r){r.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?o-1:0,p=r?-1:1,h=e[t+f];for(f+=p,i=h&(1<<-l)-1,h>>=-l,l+=a;l>0;i=256*i+e[t+f],f+=p,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),i-=c}return(h?-1:1)*s*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+f>=1?p/u:p*Math.pow(2,1-f),t*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[r+h]=255&s,h+=d,s/=256,c-=8);e[r+h-d]|=128*_}},{}],181:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{dup:41}],182:[function(e,t,r){"use strict";function n(){function e(){n.stopped=!0,t&&(t.emit(null),t.end())}var t=null,r=o.stream(function(r){t=r,n.stopped&&e()}),n=r.toProperty();return n.stopped=!1,n.destroy=e,n}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("kefir");t.exports=r.default,t.exports.default=r.default},{kefir:183}],183:[function(e,t,r){(function(e){!function(e,n){"object"==typeof r&&void 0!==t?n(r):"function"==typeof define&&define.amd?define(["exports"],n):n(e.Kefir=e.Kefir||{})}(this,function(t){"use strict";function r(e){var t=function(){};return t.prototype=e,new t}function n(e){var t=arguments.length,r=void 0,n=void 0;for(r=1;r<t;r++)for(n in arguments[r])e[n]=arguments[r][n];return e}function o(e,t){var o=arguments.length,i=void 0;for(e.prototype=r(t.prototype),e.prototype.constructor=e,i=2;i<o;i++)n(e.prototype,arguments[i]);return e}function i(e,t){var r=void 0,n=void 0,o=void 0,i=void 0;if(0===e.length)return t;if(0===t.length)return e;for(i=0,r=new Array(e.length+t.length),n=e.length,o=0;o<n;o++,i++)r[i]=e[o];for(n=t.length,o=0;o<n;o++,i++)r[i]=t[o];return r}function s(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)if(e[n]===t)return n;return-1}function a(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)if(t(e[n]))return n;return-1}function u(e){var t=e.length,r=new Array(t),n=void 0;for(n=0;n<t;n++)r[n]=e[n];return r}function c(e,t){var r=e.length,n=void 0,o=void 0,i=void 0;if(t>=0&&t<r){if(1===r)return[];for(n=new Array(r-1),o=0,i=0;o<r;o++)o!==t&&(n[i]=e[o],i++);return n}return e}function l(e,t){var r=e.length,n=new Array(r),o=void 0;for(o=0;o<r;o++)n[o]=t(e[o]);return n}function f(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)t(e[n])}function p(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)e[n]=t}function h(e,t){return-1!==s(e,t)}function d(e,t,r){var n=Math.min(r,e.length+1),o=e.length-n+1,i=new Array(n),s=void 0;for(s=o;s<n;s++)i[s-o]=e[s];return i[n-1]=t,i}function _(e,t,r){e===ct?t(r):e===r.type&&(e===at||e===ut?t(r.value):t())}function b(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function y(){this._dispatcher=new b,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function m(){y.call(this)}function v(){y.call(this),this._currentEvent=null}function g(){return lt}function j(e){function t(e,t){var r=this;m.call(this),this._wait=e,this._intervalId=null,this._$onTick=function(){return r._onTick()},this._init(t)}return o(t,m,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){m.prototype._clear.call(this),this._$onTick=null,this._free()}},e),t}function w(e,t){return new ft(e,{x:t})}function x(e,t){return new pt(e,{x:t})}function E(e,t){return 0===t.length?g():new ht(e,{xs:t})}function S(e,t){return new dt(e,{fn:t})}function A(e){function t(t){return e._emitValue(t),e._active}function r(t){return e._emitError(t),e._active}function n(){return e._emitEnd(),e._active}function o(t){return e._emit(t.type,t.value),e._active}return{value:t,error:r,end:n,event:o,emit:t,emitEvent:o}}function k(e,t){return new _t(e,{fn:t})}function T(e){m.call(this),this._fn=e,this._unsubscribe=null}function O(e){return new T(e)}function L(e){var t=!1;return O(function(r){t||(e(function(e){r.emit(e),r.end()}),t=!0)}).setName("fromCallback")}function I(e){var t=!1;return O(function(r){t||(e(function(e,t){e?r.error(e):r.emit(t),r.end()}),t=!0)}).setName("fromNodeCallback")}function D(e,t){switch(t){case 0:return function(){return e()};case 1:return function(t){return e(t[0])};case 2:return function(t){return e(t[0],t[1])};case 3:return function(t){return e(t[0],t[1],t[2])};case 4:return function(t){return e(t[0],t[1],t[2],t[3])};default:return function(t){return e.apply(null,t)}}}function R(e,t,r){var n=r?r.length:0;if(null==t)switch(n){case 0:return e();case 1:return e(r[0]);case 2:return e(r[0],r[1]);case 3:return e(r[0],r[1],r[2]);case 4:return e(r[0],r[1],r[2],r[3]);default:return e.apply(null,r)}else switch(n){case 0:return e.call(t);default:return e.apply(t,r)}}function M(e,t,r){return O(function(n){var o=r?function(){n.emit(R(r,this,arguments))}:function(e){n.emit(e)};return e(o),function(){return t(o)}}).setName("fromSubUnsub")}function C(e,t,r){for(var n=void 0,o=void 0,i=0;i<bt.length;i++)if("function"==typeof e[bt[i][0]]&&"function"==typeof e[bt[i][1]]){n=bt[i][0],o=bt[i][1];break}if(void 0===n)throw new Error("target don\'t support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return M(function(r){return e[n](t,r)},function(r){return e[o](t,r)},r).setName("fromEvents")}function q(e){this._currentEvent={type:"value",value:e,current:!0}}function P(e){return new q(e)}function B(e){this._currentEvent={type:"error",value:e,current:!0}}function N(e){return new B(e)}function F(e,t){return function(r,n){var o=this;e.call(this),this._source=r,this._name=r._name+"."+t,this._init(n),this._$handleAny=function(e){return o._handleAny(e)}}}function V(e){return{_init:function(){},_free:function(){},_handleValue:function(e){this._emitValue(e)},_handleError:function(e){this._emitError(e)},_handleEnd:function(){this._emitEnd()},_handleAny:function(e){switch(e.type){case at:return this._handleValue(e.value);case ut:return this._handleError(e.value);case st:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){e.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function U(e,t){var r=F(m,e);return o(r,m,V(m),t),r}function G(e,t){var r=F(v,e);return o(r,v,V(v),t),r}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t&&"function"!=typeof t)throw new Error("You should call toProperty() with a function or no arguments.");return new yt(e,{fn:t})}function z(e){return new mt(e)}function K(e){var t=!1;return H(O(function(r){if(!t){var n=function(e){r.emit(e),r.end()},o=function(e){r.error(e),r.end()},i=e.then(n,o);i&&"function"==typeof i.done&&i.done(),t=!0}}),null).setName("fromPromise")}function $(){if("function"==typeof Promise)return Promise;throw new Error("There isn\'t default Promise, use shim or parameter")}function W(e,t){return t={exports:{}},e(t,t.exports),t.exports}function J(e){var t=e[Et]?e[Et]():e;return O(function(e){var r=t.subscribe({error:function(t){e.error(t),e.end()},next:function(t){e.emit(t)},complete:function(){e.end()}});return r.unsubscribe?function(){r.unsubscribe()}:r}).setName("fromESObservable")}function X(e){this._observable=e.takeErrors(1)}function Y(){return new X(this)}function Q(e,t,r){for(var n in e)e.hasOwnProperty(n)&&(t.push(n),r.push(e[n]))}function Z(e){for(var t=void 0,r=0;r<e.length;r++)void 0!==e[r]&&(void 0===t||t.index<e[r].index)&&(t=e[r]);return t.error}function ee(e,t,r){var n=this;m.call(this),this._activeCount=e.length,this._sources=i(e,t),this._combinator=r,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),p(this._latestValues,it),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var o=0;o<this._sources.length;o++)!function(e){n._$handlers.push(function(t){return n._handleAny(e,t)})}(o)}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2];if(!Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");return r=r?D(r,e.length+t.length):function(e){return e},0===e.length?g():new ee(e,t,r)}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if("object"!=typeof t||Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");var n=[],o=[],i=[];Q(e,n,o),Q(t,n,i);var s=function(e){for(var t={},o=e.length-1;0<=o;o--)t[n[o]]=e[o];return r?r(t):t};return 0===o.length?g():new ee(o,i,s)}function ne(e,t,r){return"function"==typeof t&&(r=t,t=void 0),Array.isArray(e)?te(e,t,r):re(e,t,r)}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt;return new(e._ofSameType(Tt,Ot))(e,{fn:t})}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt;return new(e._ofSameType(Dt,Rt))(e,{fn:t})}function se(e,t){return new(e._ofSameType(qt,Pt))(e,{n:t})}function ae(e,t){return new(e._ofSameType(Nt,Ft))(e,{n:t})}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ht;return new(e._ofSameType(Ut,Gt))(e,{fn:t})}function ce(e){return new(e._ofSameType(Kt,$t))(e)}function le(e,t){return new(e._ofSameType(Jt,Xt))(e,{n:t})}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:er;return new(e._ofSameType(Qt,Zt))(e,{fn:t})}function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:or;return new(e._ofSameType(rr,nr))(e,{fn:t})}function he(e,t){return[e,t]}function de(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it;return new(e._ofSameType(sr,ar))(e,{fn:t||he,seed:r})}function _e(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it;return new ur(e,{fn:t,seed:r})}function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr;return new lr(e,{fn:t})}function ye(e,t){return new(e._ofSameType(dr,_r))(e,{wait:t})}function me(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.leading,o=void 0===n||n,i=r.trailing,s=void 0===i||i;return new(e._ofSameType(mr,vr))(e,{wait:t,leading:o,trailing:s})}function ve(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.immediate,o=void 0!==n&&n;return new(e._ofSameType(jr,wr))(e,{wait:t,immediate:o})}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ar;return new(e._ofSameType(Er,Sr))(e,{fn:t})}function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return new(e._ofSameType(Tr,Or))(e,{fn:t})}function we(e){return new(e._ofSameType(Dr,Rr))(e)}function xe(e){return new(e._ofSameType(Cr,qr))(e)}function Ee(e){return new(e._ofSameType(Br,Nr))(e)}function Se(e,t){return new(e._ofSameType(Vr,Ur))(e,{fn:t})}function Ae(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new(e._ofSameType(Hr,zr))(e,{min:r,max:t})}function ke(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.flushOnEnd,o=void 0===n||n;return new(e._ofSameType($r,Wr))(e,{fn:t||Jr,flushOnEnd:o})}function Te(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.flushOnEnd,o=void 0===n||n;return new(e._ofSameType(Yr,Qr))(e,{count:t,flushOnEnd:o})}function Oe(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.flushOnEnd,i=void 0===o||o;return new(e._ofSameType(en,tn))(e,{wait:t,count:r,flushOnEnd:i})}function Le(e){return{"@@transducer/step":function(t,r){return e._emitValue(r),null},"@@transducer/result":function(){return e._emitEnd(),null}}}function Ie(e,t){return new(e._ofSameType(nn,on))(e,{transducer:t})}function De(e,t){return new(e._ofSameType(an,un))(e,{fn:t})}function Re(e,t){var r=this;m.call(this),this._buffers=l(e,function(e){return cn(e)?u(e):[]}),this._sources=l(e,function(e){return cn(e)?g():e}),this._combinator=t?D(t,this._sources.length):function(e){return e},this._aliveCount=0,this._$handlers=[];for(var n=0;n<this._sources.length;n++)!function(e){r._$handlers.push(function(t){return r._handleAny(e,t)})}(n)}function Me(e,t){return 0===e.length?g():new Re(e,t)}function Ce(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.queueLim,n=void 0===r?0:r,o=t.concurLim,i=void 0===o?-1:o,s=t.drop,a=void 0===s?"new":s;m.call(this),this._queueLim=n<0?-1:n,this._concurLim=i<0?-1:i,this._drop=a,this._queue=[],this._curSources=[],this._$handleSubAny=function(t){return e._handleSubAny(t)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function qe(e){Ce.call(this),this._addAll(e),this._initialised=!0}function Pe(e){return 0===e.length?g():new qe(e)}function Be(e){var t=this;m.call(this),this._generator=e,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(e){return t._handleAny(e)}}function Ne(e){return fn(function(t){return e.length>t&&e[t]}).setName("concat")}function Fe(){Ce.call(this)}function Ve(e,t,r){var n=this;Ce.call(this,r),this._source=e,this._fn=t,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(e){return n._handleMain(e)}}function Ue(e,t){Ve.call(this,e,t)}function Ge(e,t){return function(r,n,o){var i=this;e.call(this),this._primary=r,this._secondary=n,this._name=r._name+"."+t,this._lastSecondary=it,this._$handleSecondaryAny=function(e){return i._handleSecondaryAny(e)},this._$handlePrimaryAny=function(e){return i._handlePrimaryAny(e)},this._init(o)}}function He(e){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(e){this._emitValue(e)},_handlePrimaryError:function(e){this._emitError(e)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(e){this._lastSecondary=e},_handleSecondaryError:function(e){this._emitError(e)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(e){switch(e.type){case at:return this._handlePrimaryValue(e.value);case ut:return this._handlePrimaryError(e.value);case st:return this._handlePrimaryEnd(e.value)}},_handleSecondaryAny:function(e){switch(e.type){case at:return this._handleSecondaryValue(e.value);case ut:return this._handleSecondaryError(e.value);case st:this._handleSecondaryEnd(e.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){e.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function ze(e,t){var r=Ge(m,e);return o(r,m,He(m),t),r}function Ke(e,t){var r=Ge(v,e);return o(r,v,He(v),t),r}function $e(e,t){return new(e._ofSameType(hn,dn))(e,t)}function We(e,t,r){return ne([t],[e],r?function(e,t){return r(t,e)}:_n).setName(e,"sampledBy")}function Je(e,t){return new(e._ofSameType(yn,mn))(e,t)}function Xe(e,t){return new(e._ofSameType(gn,jn))(e,t)}function Ye(e,t,r){return new(e._ofSameType(xn,En))(e,t,r)}function Qe(e,t,r){return new(e._ofSameType(An,kn))(e,t,r)}function Ze(e,t){var r=Pe([oe(e,On),oe(t,Tn)]);return r=pe(r),r=H(r,Tn),r.setName(e,"awaiting")}function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rn;return new(e._ofSameType(In,Dn))(e,{fn:t})}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;return new(e._ofSameType(Cn,qn))(e,{fn:t})}function rt(e){return new(e._ofSameType(Nn,Fn))(e)}function nt(){Un=!1}function ot(e){if(Un&&console&&"function"==typeof console.warn){console.warn(e,"\\nHere is an Error object for you containing the call stack:",new Error)}}var it=["<nothing>"],st="end",at="value",ut="error",ct="any";n(b.prototype,{add:function(e,t){return this._items=i(this._items,[{type:e,fn:t}]),this._items.length},remove:function(e,t){var r=a(this._items,function(r){return r.type===e&&r.fn===t});return 0!==this._inLoop&&-1!==r&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[r])),this._items=c(this._items,r),this._items.length},addSpy:function(e){return this._spies=i(this._spies,[e]),this._spies.length},removeSpy:function(e){return this._spies=c(this._spies,this._spies.indexOf(e)),this._spies.length},dispatch:function(e){this._inLoop++;for(var t=0,r=this._spies;null!==this._spies&&t<r.length;t++)r[t](e);for(var n=0,o=this._items;n<o.length&&null!==this._items;n++)null!==this._removedItems&&h(this._removedItems,o[n])||_(o[n].type,o[n].fn,e);0===--this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),n(y.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(e){this._active!==e&&(this._active=e,e?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(e,t){switch(e){case at:return this._emitValue(t);case ut:return this._emitError(t);case st:return this._emitEnd()}},_emitValue:function(e){this._alive&&this._dispatcher.dispatch({type:at,value:e})},_emitError:function(e){this._alive&&this._dispatcher.dispatch({type:ut,value:e})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:st}),this._clear())},_on:function(e,t){return this._alive?(this._dispatcher.add(e,t),this._setActive(!0)):_(e,t,{type:st}),this},_off:function(e,t){if(this._alive){0===this._dispatcher.remove(e,t)&&this._setActive(!1)}return this},onValue:function(e){return this._on(at,e)},onError:function(e){return this._on(ut,e)},onEnd:function(e){return this._on(st,e)},onAny:function(e){return this._on(ct,e)},offValue:function(e){return this._off(at,e)},offError:function(e){return this._off(ut,e)},offEnd:function(e){return this._off(st,e)},offAny:function(e){return this._off(ct,e)},observe:function(e,t,r){var n=this,o=!1,i=e&&"function"!=typeof e?e:{value:e,error:t,end:r},s=function(e){e.type===st&&(o=!0),e.type===at&&i.value?i.value(e.value):e.type===ut&&i.error?i.error(e.value):e.type===st&&i.end&&i.end(e.value)};return this.onAny(s),{unsubscribe:function(){o||(n.offAny(s),o=!0)},get closed(){return o}}},_ofSameType:function(e,t){return e.prototype.getType()===this.getType()?e:t},setName:function(e,t){return this._name=t?e._name+"."+t:e,this},log:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=void 0,r=function(r){var n="<"+r.type+(t?":current":"")+">";r.type===st?console.log(e,n):console.log(e,n,r.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:e,handler:r})),t=!0,this.onAny(r),t=!1,this},offLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var t=a(this._logHandlers,function(t){return t.name===e})\n;-1!==t&&(this.offAny(this._logHandlers[t].handler),this._logHandlers.splice(t,1))}return this},spy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=function(t){var r="<"+t.type+">";t.type===st?console.log(e,r):console.log(e,r,t.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:e,handler:t}),this._dispatcher.addSpy(t)),this},offSpy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var t=a(this._spyHandlers,function(t){return t.name===e});-1!==t&&(this._dispatcher.removeSpy(this._spyHandlers[t].handler),this._spyHandlers.splice(t,1))}return this}}),y.prototype.toString=function(){return"["+this._name+"]"},o(m,y,{_name:"stream",getType:function(){return"stream"}}),o(v,y,{_name:"property",_emitValue:function(e){this._alive&&(this._currentEvent={type:at,value:e},this._activating||this._dispatcher.dispatch({type:at,value:e}))},_emitError:function(e){this._alive&&(this._currentEvent={type:ut,value:e},this._activating||this._dispatcher.dispatch({type:ut,value:e}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:st}),this._clear())},_on:function(e,t){return this._alive&&(this._dispatcher.add(e,t),this._setActive(!0)),null!==this._currentEvent&&_(e,t,this._currentEvent),this._alive||_(e,t,{type:st}),this},getType:function(){return"property"}});var lt=new m;lt._emitEnd(),lt._name="never";var ft=j({_name:"later",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}}),pt=j({_name:"interval",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}}),ht=j({_name:"sequentially",_init:function(e){var t=e.xs;this._xs=u(t)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}}),dt=j({_name:"fromPoll",_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_onTick:function(){var e=this._fn;this._emitValue(e())}}),_t=j({_name:"withInterval",_init:function(e){var t=e.fn;this._fn=t,this._emitter=A(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});o(T,m,{_name:"stream",_onActivation:function(){var e=this._fn,t=e(A(this));this._unsubscribe="function"==typeof t?t:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){m.prototype._clear.call(this),this._fn=null}});var bt=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];o(q,v,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),o(B,v,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var yt=G("toProperty",{_init:function(e){var t=e.fn;this._getInitialCurrent=t},_onActivation:function(){if(null!==this._getInitialCurrent){var e=this._getInitialCurrent;this._emitValue(e())}this._source.onAny(this._$handleAny)}}),mt=U("changes",{_handleValue:function(e){this._activating||this._emitValue(e)},_handleError:function(e){this._activating||this._emitError(e)}}),vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$(),r=null;return new t(function(t,n){e.onAny(function(e){e.type===st&&null!==r?((r.type===at?t:n)(r.value),r=null):r=e})})},gt="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},jt=W(function(e,t){function r(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),wt=W(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(e){return e&&e.__esModule?e:{default:e}}(jt);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==gt?gt:e;var o=(0,n.default)(r);t.default=o}),xt=wt,Et=xt.default?xt.default:xt;n(X.prototype,{subscribe:function(e,t,r){var n=this,o="function"==typeof e?{next:e,error:t,complete:r}:e,i=function(e){e.type===st&&(s=!0),e.type===at&&o.next?o.next(e.value):e.type===ut&&o.error?o.error(e.value):e.type===st&&o.complete&&o.complete(e.value)};this._observable.onAny(i);var s=!1;return{unsubscribe:function(){s=!0,n._observable.offAny(i)},get closed(){return s}}}}),X.prototype[Et]=function(){return this},o(ee,m,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var e=this._activeCount;e<this._sources.length;e++)this._sources[e].onAny(this._$handlers[e]);for(var t=0;t<this._activeCount;t++)this._sources[t].onAny(this._$handlers[t]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var e=this._sources.length,t=void 0;for(t=0;t<e;t++)this._sources[t].offAny(this._$handlers[t])},_emitIfFull:function(){for(var e=!0,t=!1,r=this._latestValues.length,n=new Array(r),o=new Array(r),i=0;i<r;i++)n[i]=this._latestValues[i],o[i]=this._latestErrors[i],n[i]===it&&(e=!1),void 0!==o[i]&&(t=!0);if(e){var s=this._combinator;this._emitValue(s(n))}t&&this._emitError(Z(o))},_handleAny:function(e,t){t.type===at||t.type===ut?(t.type===at&&(this._latestValues[e]=t.value,this._latestErrors[e]=void 0),t.type===ut&&(this._latestValues[e]=it,this._latestErrors[e]={index:this._latestErrorIndex++,error:t.value}),e<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):e<this._activeCount&&0===--this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd())},_clear:function(){m.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var St={empty:function(){return g()},concat:function(e,t){return e.merge(t)},of:function(e){return P(e)},map:function(e,t){return t.map(e)},bimap:function(e,t,r){return r.mapErrors(e).map(t)},ap:function(e,t){return ne([e,t],function(e,t){return e(t)})},chain:function(e,t){return t.flatMap(e)}},At=Object.freeze({Observable:St}),kt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;this._emitValue(t(e))}},Tt=U("map",kt),Ot=G("map",kt),Lt=function(e){return e},It={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)&&this._emitValue(e)}},Dt=U("filter",It),Rt=G("filter",It),Mt=function(e){return e},Ct={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleValue:function(e){0!==this._n&&(this._n--,this._emitValue(e),0===this._n&&this._emitEnd())}},qt=U("take",Ct),Pt=G("take",Ct),Bt={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleError:function(e){0!==this._n&&(this._n--,this._emitError(e),0===this._n&&this._emitEnd())}},Nt=U("takeErrors",Bt),Ft=G("takeErrors",Bt),Vt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)?this._emitValue(e):this._emitEnd()}},Ut=U("takeWhile",Vt),Gt=G("takeWhile",Vt),Ht=function(e){return e},zt={_init:function(){this._lastValue=it},_free:function(){this._lastValue=null},_handleValue:function(e){this._lastValue=e},_handleEnd:function(){this._lastValue!==it&&this._emitValue(this._lastValue),this._emitEnd()}},Kt=U("last",zt),$t=G("last",zt),Wt={_init:function(e){var t=e.n;this._n=Math.max(0,t)},_handleValue:function(e){0===this._n?this._emitValue(e):this._n--}},Jt=U("skip",Wt),Xt=G("skip",Wt),Yt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;null===this._fn||t(e)||(this._fn=null),null===this._fn&&this._emitValue(e)}},Qt=U("skipWhile",Yt),Zt=G("skipWhile",Yt),er=function(e){return e},tr={_init:function(e){var t=e.fn;this._fn=t,this._prev=it},_free:function(){this._fn=null,this._prev=null},_handleValue:function(e){var t=this._fn;this._prev!==it&&t(this._prev,e)||(this._prev=e,this._emitValue(e))}},rr=U("skipDuplicates",tr),nr=G("skipDuplicates",tr),or=function(e,t){return e===t},ir={_init:function(e){var t=e.fn,r=e.seed;this._fn=t,this._prev=r},_free:function(){this._prev=null,this._fn=null},_handleValue:function(e){if(this._prev!==it){var t=this._fn;this._emitValue(t(this._prev,e))}this._prev=e}},sr=U("diff",ir),ar=G("diff",ir),ur=G("scan",{_init:function(e){var t=e.fn,r=e.seed;this._fn=t,this._seed=r,r!==it&&this._emitValue(r)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(e){var t=this._fn;null===this._currentEvent||this._currentEvent.type===ut?this._emitValue(this._seed===it?e:t(this._seed,e)):this._emitValue(t(this._currentEvent.value,e))}}),cr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){for(var t=this._fn,r=t(e),n=0;n<r.length;n++)this._emitValue(r[n])}},lr=U("flatten",cr),fr=function(e){return e},pr={},hr={_init:function(e){var t=this,r=e.wait;this._wait=Math.max(0,r),this._buff=[],this._$shiftBuff=function(){var e=t._buff.shift();e===pr?t._emitEnd():t._emitValue(e)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._buff.push(e),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(pr),setTimeout(this._$shiftBuff,this._wait))}},dr=U("delay",hr),_r=G("delay",hr),br=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},yr={_init:function(e){var t=this,r=e.wait,n=e.leading,o=e.trailing;this._wait=Math.max(0,r),this._leading=n,this._trailing=o,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return t._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(e){if(this._activating)this._emitValue(e);else{var t=br();0!==this._lastCallTime||this._leading||(this._lastCallTime=t);var r=this._wait-(t-this._lastCallTime);r<=0?(this._cancelTrailing(),this._lastCallTime=t,this._emitValue(e)):this._trailing&&(this._cancelTrailing(),this._trailingValue=e,this._timeoutId=setTimeout(this._$trailingCall,r))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?br():0,this._endLater&&this._emitEnd()}},mr=U("throttle",yr),vr=G("throttle",yr),gr={_init:function(e){var t=this,r=e.wait,n=e.immediate;this._wait=Math.max(0,r),this._immediate=n,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return t._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._lastAttempt=br(),this._immediate&&!this._timeoutId&&this._emitValue(e),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=e))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var e=br()-this._lastAttempt;e<this._wait&&e>=0?this._timeoutId=setTimeout(this._$later,this._wait-e):(this._timeoutId=null,this._immediate||(this._emitValue(this._laterValue),this._laterValue=null),this._endLater&&this._emitEnd())}},jr=U("debounce",gr),wr=G("debounce",gr),xr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn;this._emitError(t(e))}},Er=U("mapErrors",xr),Sr=G("mapErrors",xr),Ar=function(e){return e},kr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){(0,this._fn)(e)&&this._emitError(e)}},Tr=U("filterErrors",kr),Or=G("filterErrors",kr),Lr=function(e){return e},Ir={_handleValue:function(){}},Dr=U("ignoreValues",Ir),Rr=G("ignoreValues",Ir),Mr={_handleError:function(){}},Cr=U("ignoreErrors",Mr),qr=G("ignoreErrors",Mr),Pr={_handleEnd:function(){}},Br=U("ignoreEnd",Pr),Nr=G("ignoreEnd",Pr),Fr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleEnd:function(){var e=this._fn;this._emitValue(e()),this._emitEnd()}},Vr=U("beforeEnd",Fr),Ur=G("beforeEnd",Fr),Gr={_init:function(e){var t=e.min,r=e.max;this._max=r,this._min=t,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(e){this._buff=d(this._buff,e,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},Hr=U("slidingWindow",Gr),zr=G("slidingWindow",Gr),Kr={_init:function(e){var t=e.fn,r=e.flushOnEnd;this._fn=t,this._flushOnEnd=r,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),(0,this._fn)(e)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},$r=U("bufferWhile",Kr),Wr=G("bufferWhile",Kr),Jr=function(e){return e},Xr={_init:function(e){var t=e.count,r=e.flushOnEnd;this._count=t,this._flushOnEnd=r,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Yr=U("bufferWithCount",Xr),Qr=G("bufferWithCount",Xr),Zr={_init:function(e){var t=this,r=e.wait,n=e.count,o=e.flushOnEnd;this._wait=r,this._count=n,this._flushOnEnd=o,this._intervalId=null,this._$onTick=function(){return t._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},en=U("bufferWithTimeOrCount",Zr),tn=G("bufferWithTimeOrCount",Zr),rn={_init:function(e){var t=e.transducer;this._xform=t(Le(this))},_free:function(){this._xform=null},_handleValue:function(e){null!==this._xform["@@transducer/step"](null,e)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},nn=U("transduce",rn),on=G("transduce",rn),sn={_init:function(e){var t=e.fn;this._handler=t,this._emitter=A(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(e){this._handler(this._emitter,e)}},an=U("withHandler",sn),un=G("withHandler",sn),cn=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};o(Re,m,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var e=this._sources.length;this._aliveCount=e;for(var t=0;t<e&&this._active;t++)this._sources[t].onAny(this._$handlers[t])},_onDeactivation:function(){for(var e=0;e<this._sources.length;e++)this._sources[e].offAny(this._$handlers[e])},_emit:function(){for(var e=new Array(this._buffers.length),t=0;t<this._buffers.length;t++)e[t]=this._buffers[t].shift();var r=this._combinator;this._emitValue(r(e))},_isFull:function(){for(var e=0;e<this._buffers.length;e++)if(0===this._buffers[e].length)return!1;return!0},_handleAny:function(e,t){t.type===at&&(this._buffers[e].push(t.value),this._isFull()&&this._emit()),t.type===ut&&this._emitError(t.value),t.type===st&&0===--this._aliveCount&&this._emitEnd()},_clear:function(){m.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var ln=function(e){return e};o(Ce,m,{_name:"abstractPool",_add:function(e,t){t=t||ln,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(t(e)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(t(e)):"old"===this._drop&&(this._removeOldest(),this._add(e,t))},_addAll:function(e){var t=this;f(e,function(e){return t._add(e)})},_remove:function(e){-1===this._removeCur(e)&&this._removeQueue(e)},_addToQueue:function(e){this._queue=i(this._queue,[e])},_addToCur:function(e){if(this._active){if(!e._alive)return e._currentEvent&&this._emit(e._currentEvent.type,e._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));this._currentlyAdding=e,e.onAny(this._$handleSubAny),this._currentlyAdding=null,e._alive&&(this._curSources=i(this._curSources,[e]),this._active&&this._subToEnd(e))}else this._curSources=i(this._curSources,[e])},_subToEnd:function(e){var t=this,r=function(){return t._removeCur(e)};this._$endHandlers.push({obs:e,handler:r}),e.onEnd(r)},_subscribe:function(e){e.onAny(this._$handleSubAny),this._active&&this._subToEnd(e)},_unsubscribe:function(e){e.offAny(this._$handleSubAny);var t=a(this._$endHandlers,function(t){return t.obs===e});-1!==t&&(e.offEnd(this._$endHandlers[t].handler),this._$endHandlers.splice(t,1))},_handleSubAny:function(e){e.type===at?this._emitValue(e.value):e.type===ut&&this._emitError(e.value)},_removeQueue:function(e){var t=s(this._queue,e);return this._queue=c(this._queue,t),t},_removeCur:function(e){this._active&&this._unsubscribe(e);var t=s(this._curSources,e);return this._curSources=c(this._curSources,t),-1!==t&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),t},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=u(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var e=0,t=this._curSources;e<t.length&&this._active;e++)this._subscribe(t[e])},_onDeactivation:function(){for(var e=0,t=this._curSources;e<t.length;e++)this._unsubscribe(t[e]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){m.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),o(qe,Ce,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),o(Be,m,{_name:"repeat",_handleAny:function(e){e.type===st?(this._source=null,this._getSource()):this._emit(e.type,e.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var e=this._generator;null===this._source&&this._alive&&this._active;)this._source=e(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){m.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var fn=function(e){return new Be(e)};o(Fe,Ce,{_name:"pool",plug:function(e){return this._add(e),this},unplug:function(e){return this._remove(e),this}}),o(Ve,Ce,{_onActivation:function(){Ce.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){Ce.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(e){if(e.type===at){this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1}e.type===ut&&this._emitError(e.value),e.type===st&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){Ce.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),o(Ue,Ve,{_handleMain:function(e){if(e.type===ut){this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1}e.type===at&&this._emitValue(e.value),e.type===st&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var pn={_handlePrimaryValue:function(e){this._lastSecondary!==it&&this._lastSecondary&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary!==it&&this._lastSecondary||this._emitEnd()}},hn=ze("filterBy",pn),dn=Ke("filterBy",pn),_n=function(e,t){return t},bn={_handlePrimaryValue:function(e){this._lastSecondary!==it&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary===it&&this._emitEnd()}},yn=ze("skipUntilBy",bn),mn=Ke("skipUntilBy",bn),vn={_handleSecondaryValue:function(){this._emitEnd()}},gn=ze("takeUntilBy",vn),jn=Ke("takeUntilBy",vn),wn={_init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flushOnEnd,r=void 0===t||t;this._buff=[],this._flushOnEnd=r},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(e){this._buff.push(e)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},xn=ze("bufferBy",wn),En=Ke("bufferBy",wn),Sn={_init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flushOnEnd,r=void 0===t||t,n=e.flushOnChange,o=void 0!==n&&n;this._buff=[],this._flushOnEnd=r,this._flushOnChange=o},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(e){this._buff.push(e),this._lastSecondary===it||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==it&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(e){this._flushOnChange&&!e&&this._flush(),this._lastSecondary=e}},An=ze("bufferWhileBy",Sn),kn=Ke("bufferWhileBy",Sn),Tn=function(){return!1},On=function(){return!0},Ln={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn,r=t(e);r.convert?this._emitError(r.error):this._emitValue(e)}},In=U("valuesToErrors",Ln),Dn=G("valuesToErrors",Ln),Rn=function(e){return{convert:!0,error:e}},Mn={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn,r=t(e);r.convert?this._emitValue(r.value):this._emitError(e)}},Cn=U("errorsToValues",Mn),qn=G("errorsToValues",Mn),Pn=function(e){return{convert:!0,value:e}},Bn={_handleError:function(e){this._emitError(e),this._emitEnd()}},Nn=U("endOnError",Bn),Fn=G("endOnError",Bn);y.prototype.toProperty=function(e){return H(this,e)},y.prototype.changes=function(){return z(this)},y.prototype.toPromise=function(e){return vt(this,e)},y.prototype.toESObservable=Y,y.prototype[Et]=Y,y.prototype.map=function(e){return oe(this,e)},y.prototype.filter=function(e){return ie(this,e)},y.prototype.take=function(e){return se(this,e)},y.prototype.takeErrors=function(e){return ae(this,e)},y.prototype.takeWhile=function(e){return ue(this,e)},y.prototype.last=function(){return ce(this)},y.prototype.skip=function(e){return le(this,e)},y.prototype.skipWhile=function(e){return fe(this,e)},y.prototype.skipDuplicates=function(e){return pe(this,e)},y.prototype.diff=function(e,t){return de(this,e,t)},y.prototype.scan=function(e,t){return _e(this,e,t)},y.prototype.flatten=function(e){return be(this,e)},y.prototype.delay=function(e){return ye(this,e)},y.prototype.throttle=function(e,t){return me(this,e,t)},y.prototype.debounce=function(e,t){return ve(this,e,t)},y.prototype.mapErrors=function(e){return ge(this,e)},y.prototype.filterErrors=function(e){return je(this,e)},y.prototype.ignoreValues=function(){return we(this)},y.prototype.ignoreErrors=function(){return xe(this)},y.prototype.ignoreEnd=function(){return Ee(this)},y.prototype.beforeEnd=function(e){return Se(this,e)},y.prototype.slidingWindow=function(e,t){return Ae(this,e,t)},y.prototype.bufferWhile=function(e,t){return ke(this,e,t)},y.prototype.bufferWithCount=function(e,t){return Te(this,e,t)},y.prototype.bufferWithTimeOrCount=function(e,t,r){return Oe(this,e,t,r)},y.prototype.transduce=function(e){return Ie(this,e)},y.prototype.withHandler=function(e){return De(this,e)},y.prototype.thru=function(e){return e(this)},y.prototype.combine=function(e,t){return ne([this,e],t)},y.prototype.zip=function(e,t){return Me([this,e],t)},y.prototype.merge=function(e){return Pe([this,e])},y.prototype.concat=function(e){return Ne([this,e])};var Vn=function(){return new Fe};y.prototype.flatMap=function(e){return new Ve(this,e).setName(this,"flatMap")},y.prototype.flatMapLatest=function(e){return new Ve(this,e,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},y.prototype.flatMapFirst=function(e){return new Ve(this,e,{concurLim:1}).setName(this,"flatMapFirst")},y.prototype.flatMapConcat=function(e){return new Ve(this,e,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},y.prototype.flatMapConcurLimit=function(e,t){return new Ve(this,e,{queueLim:-1,concurLim:t}).setName(this,"flatMapConcurLimit")},y.prototype.flatMapErrors=function(e){return new Ue(this,e).setName(this,"flatMapErrors")},y.prototype.filterBy=function(e){return $e(this,e)},y.prototype.sampledBy=function(e,t){return We(this,e,t)},y.prototype.skipUntilBy=function(e){return Je(this,e)},y.prototype.takeUntilBy=function(e){return Xe(this,e)},y.prototype.bufferBy=function(e,t){return Ye(this,e,t)},y.prototype.bufferWhileBy=function(e,t){return Qe(this,e,t)};var Un=!0;y.prototype.awaiting=function(e){return ot("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),Ze(this,e)},y.prototype.valuesToErrors=function(e){return ot("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),et(this,e)},y.prototype.errorsToValues=function(e){return ot("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),tt(this,e)},y.prototype.endOnError=function(){return ot("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),rt(this)};var Gn={Observable:y,Stream:m,Property:v,never:g,later:w,interval:x,sequentially:E,fromPoll:S,withInterval:k,fromCallback:L,fromNodeCallback:I,fromEvents:C,stream:O,constant:P,constantError:N,fromPromise:K,fromESObservable:J,combine:ne,zip:Me,merge:Pe,concat:Ne,Pool:Fe,pool:Vn,repeat:fn,staticLand:At};Gn.Kefir=Gn,t.dissableDeprecationWarnings=nt,t.Kefir=Gn,t.Observable=y,t.Stream=m,t.Property=v,t.never=g,t.later=w,t.interval=x,t.sequentially=E,t.fromPoll=S,t.withInterval=k,t.fromCallback=L,t.fromNodeCallback=I,t.fromEvents=C,t.stream=O,t.constant=P,t.constantError=N,t.fromPromise=K,t.fromESObservable=J,t.combine=ne,t.zip=Me,t.merge=Pe,t.concat=Ne,t.Pool=Fe,t.pool=Vn,t.repeat=fn,t.staticLand=At,t.default=Gn,Object.defineProperty(t,"__esModule",{value:!0})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],184:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"DataView");t.exports=i},{"./_getNative":277,"./_root":320}],185:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_hashClear"),i=e("./_hashDelete"),s=e("./_hashGet"),a=e("./_hashHas"),u=e("./_hashSet");n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=s,n.prototype.has=a,n.prototype.set=u,t.exports=n},{"./_hashClear":285,"./_hashDelete":286,"./_hashGet":287,"./_hashHas":288,"./_hashSet":289}],186:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_listCacheClear"),i=e("./_listCacheDelete"),s=e("./_listCacheGet"),a=e("./_listCacheHas"),u=e("./_listCacheSet");n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=s,n.prototype.has=a,n.prototype.set=u,t.exports=n},{"./_listCacheClear":300,"./_listCacheDelete":301,"./_listCacheGet":302,"./_listCacheHas":303,"./_listCacheSet":304}],187:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"Map");t.exports=i},{"./_getNative":277,"./_root":320}],188:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_mapCacheClear"),i=e("./_mapCacheDelete"),s=e("./_mapCacheGet"),a=e("./_mapCacheHas"),u=e("./_mapCacheSet");n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=s,n.prototype.has=a,n.prototype.set=u,t.exports=n},{"./_mapCacheClear":305,"./_mapCacheDelete":306,"./_mapCacheGet":307,"./_mapCacheHas":308,"./_mapCacheSet":309}],189:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"Promise");t.exports=i},{"./_getNative":277,"./_root":320}],190:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"Set");t.exports=i},{"./_getNative":277,"./_root":320}],191:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new o;++t<r;)this.add(e[t])}var o=e("./_MapCache"),i=e("./_setCacheAdd"),s=e("./_setCacheHas");n.prototype.add=n.prototype.push=i,n.prototype.has=s,t.exports=n},{"./_MapCache":188,"./_setCacheAdd":321,"./_setCacheHas":322}],192:[function(e,t,r){function n(e){var t=this.__data__=new o(e);this.size=t.size}var o=e("./_ListCache"),i=e("./_stackClear"),s=e("./_stackDelete"),a=e("./_stackGet"),u=e("./_stackHas"),c=e("./_stackSet");n.prototype.clear=i,n.prototype.delete=s,n.prototype.get=a,n.prototype.has=u,n.prototype.set=c,t.exports=n},{"./_ListCache":186,"./_stackClear":326,"./_stackDelete":327,"./_stackGet":328,"./_stackHas":329,"./_stackSet":330}],193:[function(e,t,r){var n=e("./_root"),o=n.Symbol;t.exports=o},{"./_root":320}],194:[function(e,t,r){var n=e("./_root"),o=n.Uint8Array;t.exports=o},{"./_root":320}],195:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"WeakMap");t.exports=i},{"./_getNative":277,"./_root":320}],196:[function(e,t,r){function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}t.exports=n},{}],197:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}t.exports=n},{}],198:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}t.exports=n},{}],199:[function(e,t,r){function n(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}var o=e("./_baseIndexOf");t.exports=n},{"./_baseIndexOf":224}],200:[function(e,t,r){function n(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}t.exports=n},{}],201:[function(e,t,r){function n(e,t){var r=s(e),n=!r&&i(e),l=!r&&!n&&a(e),p=!r&&!n&&!l&&c(e),h=r||n||l||p,d=h?o(e.length,String):[],_=d.length;for(var b in e)!t&&!f.call(e,b)||h&&("length"==b||l&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||u(b,_))||d.push(b);return d}\nvar o=e("./_baseTimes"),i=e("./isArguments"),s=e("./isArray"),a=e("./isBuffer"),u=e("./_isIndex"),c=e("./isTypedArray"),l=Object.prototype,f=l.hasOwnProperty;t.exports=n},{"./_baseTimes":245,"./_isIndex":294,"./isArguments":351,"./isArray":352,"./isBuffer":355,"./isTypedArray":364}],202:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}t.exports=n},{}],203:[function(e,t,r){function n(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}t.exports=n},{}],204:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}t.exports=n},{}],205:[function(e,t,r){function n(e,t,r){var n=e[t];a.call(e,t)&&i(n,r)&&(void 0!==r||t in e)||o(e,t,r)}var o=e("./_baseAssignValue"),i=e("./eq"),s=Object.prototype,a=s.hasOwnProperty;t.exports=n},{"./_baseAssignValue":209,"./eq":338}],206:[function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1}var o=e("./eq");t.exports=n},{"./eq":338}],207:[function(e,t,r){function n(e,t){return e&&o(t,i(t),e)}var o=e("./_copyObject"),i=e("./keys");t.exports=n},{"./_copyObject":260,"./keys":365}],208:[function(e,t,r){function n(e,t){return e&&o(t,i(t),e)}var o=e("./_copyObject"),i=e("./keysIn");t.exports=n},{"./_copyObject":260,"./keysIn":366}],209:[function(e,t,r){function n(e,t,r){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var o=e("./_defineProperty");t.exports=n},{"./_defineProperty":267}],210:[function(e,t,r){function n(e,t,r){return e===e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}t.exports=n},{}],211:[function(e,t,r){function n(e,t,r,R,M,C){var q,P=t&S,B=t&A,N=t&k;if(r&&(q=M?r(e,R,M,C):r(e)),void 0!==q)return q;if(!w(e))return e;var F=v(e);if(F){if(q=b(e),!P)return l(e,q)}else{var V=_(e),U=V==O||V==L;if(g(e))return c(e,P);if(V==I||V==T||U&&!M){if(q=B||U?{}:m(e),!P)return B?p(e,u(q,e)):f(e,a(q,e))}else{if(!D[V])return M?e:{};q=y(e,V,P)}}C||(C=new o);var G=C.get(e);if(G)return G;if(C.set(e,q),x(e))return e.forEach(function(o){q.add(n(o,t,r,o,e,C))}),q;if(j(e))return e.forEach(function(o,i){q.set(i,n(o,t,r,i,e,C))}),q;var H=N?B?d:h:B?keysIn:E,z=F?void 0:H(e);return i(z||e,function(o,i){z&&(i=o,o=e[i]),s(q,i,n(o,t,r,i,e,C))}),q}var o=e("./_Stack"),i=e("./_arrayEach"),s=e("./_assignValue"),a=e("./_baseAssign"),u=e("./_baseAssignIn"),c=e("./_cloneBuffer"),l=e("./_copyArray"),f=e("./_copySymbols"),p=e("./_copySymbolsIn"),h=e("./_getAllKeys"),d=e("./_getAllKeysIn"),_=e("./_getTag"),b=e("./_initCloneArray"),y=e("./_initCloneByTag"),m=e("./_initCloneObject"),v=e("./isArray"),g=e("./isBuffer"),j=e("./isMap"),w=e("./isObject"),x=e("./isSet"),E=e("./keys"),S=1,A=2,k=4,T="[object Arguments]",O="[object Function]",L="[object GeneratorFunction]",I="[object Object]",D={};D[T]=D["[object Array]"]=D["[object ArrayBuffer]"]=D["[object DataView]"]=D["[object Boolean]"]=D["[object Date]"]=D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Map]"]=D["[object Number]"]=D[I]=D["[object RegExp]"]=D["[object Set]"]=D["[object String]"]=D["[object Symbol]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D["[object Error]"]=D[O]=D["[object WeakMap]"]=!1,t.exports=n},{"./_Stack":192,"./_arrayEach":197,"./_assignValue":205,"./_baseAssign":207,"./_baseAssignIn":208,"./_cloneBuffer":254,"./_copyArray":259,"./_copySymbols":261,"./_copySymbolsIn":262,"./_getAllKeys":273,"./_getAllKeysIn":274,"./_getTag":282,"./_initCloneArray":290,"./_initCloneByTag":291,"./_initCloneObject":292,"./isArray":352,"./isBuffer":355,"./isMap":358,"./isObject":359,"./isSet":361,"./keys":365}],212:[function(e,t,r){var n=e("./isObject"),o=Object.create,i=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();t.exports=i},{"./isObject":359}],213:[function(e,t,r){var n=e("./_baseForOwn"),o=e("./_createBaseEach"),i=o(n);t.exports=i},{"./_baseForOwn":218,"./_createBaseEach":264}],214:[function(e,t,r){function n(e,t){var r=[];return o(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r}var o=e("./_baseEach");t.exports=n},{"./_baseEach":213}],215:[function(e,t,r){function n(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}t.exports=n},{}],216:[function(e,t,r){function n(e,t,r,s,a){var u=-1,c=e.length;for(r||(r=i),a||(a=[]);++u<c;){var l=e[u];t>0&&r(l)?t>1?n(l,t-1,r,s,a):o(a,l):s||(a[a.length]=l)}return a}var o=e("./_arrayPush"),i=e("./_isFlattenable");t.exports=n},{"./_arrayPush":203,"./_isFlattenable":293}],217:[function(e,t,r){var n=e("./_createBaseFor"),o=n();t.exports=o},{"./_createBaseFor":265}],218:[function(e,t,r){function n(e,t){return e&&o(e,t,i)}var o=e("./_baseFor"),i=e("./keys");t.exports=n},{"./_baseFor":217,"./keys":365}],219:[function(e,t,r){function n(e,t){t=o(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[i(t[r++])];return r&&r==n?e:void 0}var o=e("./_castPath"),i=e("./_toKey");t.exports=n},{"./_castPath":252,"./_toKey":333}],220:[function(e,t,r){function n(e,t,r){var n=t(e);return i(e)?n:o(n,r(e))}var o=e("./_arrayPush"),i=e("./isArray");t.exports=n},{"./_arrayPush":203,"./isArray":352}],221:[function(e,t,r){function n(e){return null==e?void 0===e?u:a:c&&c in Object(e)?i(e):s(e)}var o=e("./_Symbol"),i=e("./_getRawTag"),s=e("./_objectToString"),a="[object Null]",u="[object Undefined]",c=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":193,"./_getRawTag":279,"./_objectToString":317}],222:[function(e,t,r){function n(e,t){return null!=e&&i.call(e,t)}var o=Object.prototype,i=o.hasOwnProperty;t.exports=n},{}],223:[function(e,t,r){function n(e,t){return null!=e&&t in Object(e)}t.exports=n},{}],224:[function(e,t,r){function n(e,t,r){return t===t?s(e,t,r):o(e,i,r)}var o=e("./_baseFindIndex"),i=e("./_baseIsNaN"),s=e("./_strictIndexOf");t.exports=n},{"./_baseFindIndex":215,"./_baseIsNaN":231,"./_strictIndexOf":331}],225:[function(e,t,r){function n(e,t,r){for(var n=r?s:i,f=e[0].length,p=e.length,h=p,d=Array(p),_=1/0,b=[];h--;){var y=e[h];h&&t&&(y=a(y,u(t))),_=l(y.length,_),d[h]=!r&&(t||f>=120&&y.length>=120)?new o(h&&y):void 0}y=e[0];var m=-1,v=d[0];e:for(;++m<f&&b.length<_;){var g=y[m],j=t?t(g):g;if(g=r||0!==g?g:0,!(v?c(v,j):n(b,j,r))){for(h=p;--h;){var w=d[h];if(!(w?c(w,j):n(e[h],j,r)))continue e}v&&v.push(j),b.push(g)}}return b}var o=e("./_SetCache"),i=e("./_arrayIncludes"),s=e("./_arrayIncludesWith"),a=e("./_arrayMap"),u=e("./_baseUnary"),c=e("./_cacheHas"),l=Math.min;t.exports=n},{"./_SetCache":191,"./_arrayIncludes":199,"./_arrayIncludesWith":200,"./_arrayMap":202,"./_baseUnary":247,"./_cacheHas":249}],226:[function(e,t,r){function n(e){return i(e)&&o(e)==s}var o=e("./_baseGetTag"),i=e("./isObjectLike"),s="[object Arguments]";t.exports=n},{"./_baseGetTag":221,"./isObjectLike":360}],227:[function(e,t,r){function n(e,t,r,s,a){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!==e&&t!==t:o(e,t,r,s,n,a))}var o=e("./_baseIsEqualDeep"),i=e("./isObjectLike");t.exports=n},{"./_baseIsEqualDeep":228,"./isObjectLike":360}],228:[function(e,t,r){function n(e,t,r,n,b,m){var v=c(e),g=c(t),j=v?d:u(e),w=g?d:u(t);j=j==h?_:j,w=w==h?_:w;var x=j==_,E=w==_,S=j==w;if(S&&l(e)){if(!l(t))return!1;v=!0,x=!1}if(S&&!x)return m||(m=new o),v||f(e)?i(e,t,r,n,b,m):s(e,t,j,r,n,b,m);if(!(r&p)){var A=x&&y.call(e,"__wrapped__"),k=E&&y.call(t,"__wrapped__");if(A||k){var T=A?e.value():e,O=k?t.value():t;return m||(m=new o),b(T,O,r,n,m)}}return!!S&&(m||(m=new o),a(e,t,r,n,b,m))}var o=e("./_Stack"),i=e("./_equalArrays"),s=e("./_equalByTag"),a=e("./_equalObjects"),u=e("./_getTag"),c=e("./isArray"),l=e("./isBuffer"),f=e("./isTypedArray"),p=1,h="[object Arguments]",d="[object Array]",_="[object Object]",b=Object.prototype,y=b.hasOwnProperty;t.exports=n},{"./_Stack":192,"./_equalArrays":268,"./_equalByTag":269,"./_equalObjects":270,"./_getTag":282,"./isArray":352,"./isBuffer":355,"./isTypedArray":364}],229:[function(e,t,r){function n(e){return i(e)&&o(e)==s}var o=e("./_getTag"),i=e("./isObjectLike"),s="[object Map]";t.exports=n},{"./_getTag":282,"./isObjectLike":360}],230:[function(e,t,r){function n(e,t,r,n){var u=r.length,c=u,l=!n;if(null==e)return!c;for(e=Object(e);u--;){var f=r[u];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++u<c;){f=r[u];var p=f[0],h=e[p],d=f[1];if(l&&f[2]){if(void 0===h&&!(p in e))return!1}else{var _=new o;if(n)var b=n(h,d,p,e,t,_);if(!(void 0===b?i(d,h,s|a,n,_):b))return!1}}return!0}var o=e("./_Stack"),i=e("./_baseIsEqual"),s=1,a=2;t.exports=n},{"./_Stack":192,"./_baseIsEqual":227}],231:[function(e,t,r){function n(e){return e!==e}t.exports=n},{}],232:[function(e,t,r){function n(e){return!(!s(e)||i(e))&&(o(e)?d:c).test(a(e))}var o=e("./isFunction"),i=e("./_isMasked"),s=e("./isObject"),a=e("./_toSource"),u=/[\\\\^$.*+?()[\\]{}|]/g,c=/^\\[object .+?Constructor\\]$/,l=Function.prototype,f=Object.prototype,p=l.toString,h=f.hasOwnProperty,d=RegExp("^"+p.call(h).replace(u,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");t.exports=n},{"./_isMasked":297,"./_toSource":334,"./isFunction":356,"./isObject":359}],233:[function(e,t,r){function n(e){return i(e)&&o(e)==s}var o=e("./_getTag"),i=e("./isObjectLike"),s="[object Set]";t.exports=n},{"./_getTag":282,"./isObjectLike":360}],234:[function(e,t,r){function n(e){return s(e)&&i(e.length)&&!!a[o(e)]}var o=e("./_baseGetTag"),i=e("./isLength"),s=e("./isObjectLike"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=n},{"./_baseGetTag":221,"./isLength":357,"./isObjectLike":360}],235:[function(e,t,r){function n(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?i(e[0],e[1]):o(e):u(e)}var o=e("./_baseMatches"),i=e("./_baseMatchesProperty"),s=e("./identity"),a=e("./isArray"),u=e("./property");t.exports=n},{"./_baseMatches":238,"./_baseMatchesProperty":239,"./identity":348,"./isArray":352,"./property":371}],236:[function(e,t,r){function n(e){if(!o(e))return i(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}var o=e("./_isPrototype"),i=e("./_nativeKeys"),s=Object.prototype,a=s.hasOwnProperty;t.exports=n},{"./_isPrototype":298,"./_nativeKeys":314}],237:[function(e,t,r){function n(e){if(!o(e))return s(e);var t=i(e),r=[];for(var n in e)("constructor"!=n||!t&&u.call(e,n))&&r.push(n);return r}var o=e("./isObject"),i=e("./_isPrototype"),s=e("./_nativeKeysIn"),a=Object.prototype,u=a.hasOwnProperty;t.exports=n},{"./_isPrototype":298,"./_nativeKeysIn":315,"./isObject":359}],238:[function(e,t,r){function n(e){var t=i(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(r){return r===e||o(r,e,t)}}var o=e("./_baseIsMatch"),i=e("./_getMatchData"),s=e("./_matchesStrictComparable");t.exports=n},{"./_baseIsMatch":230,"./_getMatchData":276,"./_matchesStrictComparable":311}],239:[function(e,t,r){function n(e,t){return a(e)&&u(t)?c(l(e),t):function(r){var n=i(r,e);return void 0===n&&n===t?s(r,e):o(t,n,f|p)}}var o=e("./_baseIsEqual"),i=e("./get"),s=e("./hasIn"),a=e("./_isKey"),u=e("./_isStrictComparable"),c=e("./_matchesStrictComparable"),l=e("./_toKey"),f=1,p=2;t.exports=n},{"./_baseIsEqual":227,"./_isKey":295,"./_isStrictComparable":299,"./_matchesStrictComparable":311,"./_toKey":333,"./get":345,"./hasIn":347}],240:[function(e,t,r){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],241:[function(e,t,r){function n(e){return function(t){return o(t,e)}}var o=e("./_baseGet");t.exports=n},{"./_baseGet":219}],242:[function(e,t,r){function n(e){return function(t){return null==e?void 0:e[t]}}t.exports=n},{}],243:[function(e,t,r){function n(e,t){return s(i(e,t,o),e+"")}var o=e("./identity"),i=e("./_overRest"),s=e("./_setToString");t.exports=n},{"./_overRest":319,"./_setToString":324,"./identity":348}],244:[function(e,t,r){var n=e("./constant"),o=e("./_defineProperty"),i=e("./identity"),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;t.exports=s},{"./_defineProperty":267,"./constant":336,"./identity":348}],245:[function(e,t,r){function n(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}t.exports=n},{}],246:[function(e,t,r){function n(e){if("string"==typeof e)return e;if(s(e))return i(e,n)+"";if(a(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}var o=e("./_Symbol"),i=e("./_arrayMap"),s=e("./isArray"),a=e("./isSymbol"),u=1/0,c=o?o.prototype:void 0,l=c?c.toString:void 0;t.exports=n},{"./_Symbol":193,"./_arrayMap":202,"./isArray":352,"./isSymbol":363}],247:[function(e,t,r){function n(e){return function(t){return e(t)}}t.exports=n},{}],248:[function(e,t,r){function n(e,t){return o(t,function(t){return e[t]})}var o=e("./_arrayMap");t.exports=n},{"./_arrayMap":202}],249:[function(e,t,r){function n(e,t){return e.has(t)}t.exports=n},{}],250:[function(e,t,r){function n(e){return o(e)?e:[]}var o=e("./isArrayLikeObject");t.exports=n},{"./isArrayLikeObject":354}],251:[function(e,t,r){function n(e){return"function"==typeof e?e:o}var o=e("./identity");t.exports=n},{"./identity":348}],252:[function(e,t,r){function n(e,t){return o(e)?e:i(e,t)?[e]:s(a(e))}var o=e("./isArray"),i=e("./_isKey"),s=e("./_stringToPath"),a=e("./toString");t.exports=n},{"./_isKey":295,"./_stringToPath":332,"./isArray":352,"./toString":378}],253:[function(e,t,r){function n(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=e("./_Uint8Array");t.exports=n},{"./_Uint8Array":194}],254:[function(e,t,r){function n(e,t){if(t)return e.slice();var r=e.length,n=c?c(r):new e.constructor(r);return e.copy(n),n}var o=e("./_root"),i="object"==typeof r&&r&&!r.nodeType&&r,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i,u=a?o.Buffer:void 0,c=u?u.allocUnsafe:void 0;t.exports=n},{"./_root":320}],255:[function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var o=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":253}],256:[function(e,t,r){function n(e){var t=new e.constructor(e.source,o.exec(e));return t.lastIndex=e.lastIndex,t}var o=/\\w*$/;t.exports=n},{}],257:[function(e,t,r){function n(e){return s?Object(s.call(e)):{}}var o=e("./_Symbol"),i=o?o.prototype:void 0,s=i?i.valueOf:void 0;t.exports=n},{"./_Symbol":193}],258:[function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var o=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":253}],259:[function(e,t,r){function n(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}t.exports=n},{}],260:[function(e,t,r){function n(e,t,r,n){var s=!r;r||(r={});for(var a=-1,u=t.length;++a<u;){var c=t[a],l=n?n(r[c],e[c],c,r,e):void 0;void 0===l&&(l=e[c]),s?i(r,c,l):o(r,c,l)}return r}var o=e("./_assignValue"),i=e("./_baseAssignValue");t.exports=n},{"./_assignValue":205,"./_baseAssignValue":209}],261:[function(e,t,r){function n(e,t){return o(e,i(e),t)}var o=e("./_copyObject"),i=e("./_getSymbols");t.exports=n},{"./_copyObject":260,"./_getSymbols":280}],262:[function(e,t,r){function n(e,t){return o(e,i(e),t)}var o=e("./_copyObject"),i=e("./_getSymbolsIn");t.exports=n},{"./_copyObject":260,"./_getSymbolsIn":281}],263:[function(e,t,r){var n=e("./_root"),o=n["__core-js_shared__"];t.exports=o},{"./_root":320}],264:[function(e,t,r){function n(e,t){return function(r,n){if(null==r)return r;if(!o(r))return e(r,n);for(var i=r.length,s=t?i:-1,a=Object(r);(t?s--:++s<i)&&!1!==n(a[s],s,a););return r}}var o=e("./isArrayLike");t.exports=n},{"./isArrayLike":353}],265:[function(e,t,r){function n(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var u=s[e?a:++o];if(!1===r(i[u],u,i))break}return t}}t.exports=n},{}],266:[function(e,t,r){function n(e){return function(t,r,n){var a=Object(t);if(!i(t)){var u=o(r,3);t=s(t),r=function(e){return u(a[e],e,a)}}var c=e(t,r,n);return c>-1?a[u?t[c]:c]:void 0}}var o=e("./_baseIteratee"),i=e("./isArrayLike"),s=e("./keys");t.exports=n},{"./_baseIteratee":235,"./isArrayLike":353,"./keys":365}],267:[function(e,t,r){var n=e("./_getNative"),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=o},{"./_getNative":277}],268:[function(e,t,r){function n(e,t,r,n,c,l){var f=r&a,p=e.length,h=t.length;if(p!=h&&!(f&&h>p))return!1;var d=l.get(e);if(d&&l.get(t))return d==t;var _=-1,b=!0,y=r&u?new o:void 0;for(l.set(e,t),l.set(t,e);++_<p;){var m=e[_],v=t[_];if(n)var g=f?n(v,m,_,t,e,l):n(m,v,_,e,t,l);if(void 0!==g){if(g)continue;b=!1;break}if(y){if(!i(t,function(e,t){if(!s(y,t)&&(m===e||c(m,e,r,n,l)))return y.push(t)})){b=!1;break}}else if(m!==v&&!c(m,v,r,n,l)){b=!1;break}}return l.delete(e),l.delete(t),b}var o=e("./_SetCache"),i=e("./_arraySome"),s=e("./_cacheHas"),a=1,u=2;t.exports=n},{"./_SetCache":191,"./_arraySome":204,"./_cacheHas":249}],269:[function(e,t,r){function n(e,t,r,n,o,x,S){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case j:return!(e.byteLength!=t.byteLength||!x(new i(e),new i(t)));case p:case h:case b:return s(+e,+t);case d:return e.name==t.name&&e.message==t.message;case y:case v:return e==t+"";case _:var A=u;case m:var k=n&l;if(A||(A=c),e.size!=t.size&&!k)return!1;var T=S.get(e);if(T)return T==t;n|=f,S.set(e,t);var O=a(A(e),A(t),n,o,x,S);return S.delete(e),O;case g:if(E)return E.call(e)==E.call(t)}return!1}var o=e("./_Symbol"),i=e("./_Uint8Array"),s=e("./eq"),a=e("./_equalArrays"),u=e("./_mapToArray"),c=e("./_setToArray"),l=1,f=2,p="[object Boolean]",h="[object Date]",d="[object Error]",_="[object Map]",b="[object Number]",y="[object RegExp]",m="[object Set]",v="[object String]",g="[object Symbol]",j="[object ArrayBuffer]",w="[object DataView]",x=o?o.prototype:void 0,E=x?x.valueOf:void 0;t.exports=n},{"./_Symbol":193,"./_Uint8Array":194,"./_equalArrays":268,"./_mapToArray":310,"./_setToArray":323,"./eq":338}],270:[function(e,t,r){function n(e,t,r,n,s,u){var c=r&i,l=o(e),f=l.length;if(f!=o(t).length&&!c)return!1;for(var p=f;p--;){var h=l[p];if(!(c?h in t:a.call(t,h)))return!1}var d=u.get(e);if(d&&u.get(t))return d==t;var _=!0;u.set(e,t),u.set(t,e);for(var b=c;++p<f;){h=l[p];var y=e[h],m=t[h];if(n)var v=c?n(m,y,h,t,e,u):n(y,m,h,e,t,u);if(!(void 0===v?y===m||s(y,m,r,n,u):v)){_=!1;break}b||(b="constructor"==h)}if(_&&!b){var g=e.constructor,j=t.constructor;g!=j&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof j&&j instanceof j)&&(_=!1)}return u.delete(e),u.delete(t),_}var o=e("./_getAllKeys"),i=1,s=Object.prototype,a=s.hasOwnProperty;t.exports=n},{"./_getAllKeys":273}],271:[function(e,t,r){var n=e("./_basePropertyOf"),o={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#39;"},i=n(o);t.exports=i},{"./_basePropertyOf":242}],272:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],273:[function(e,t,r){function n(e){return o(e,s,i)}var o=e("./_baseGetAllKeys"),i=e("./_getSymbols"),s=e("./keys");t.exports=n},{"./_baseGetAllKeys":220,"./_getSymbols":280,"./keys":365}],274:[function(e,t,r){function n(e){return o(e,s,i)}var o=e("./_baseGetAllKeys"),i=e("./_getSymbolsIn"),s=e("./keysIn");t.exports=n},{"./_baseGetAllKeys":220,"./_getSymbolsIn":281,"./keysIn":366}],275:[function(e,t,r){function n(e,t){var r=e.__data__;return o(t)?r["string"==typeof t?"string":"hash"]:r.map}var o=e("./_isKeyable");t.exports=n},{"./_isKeyable":296}],276:[function(e,t,r){function n(e){for(var t=i(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,o(s)]}return t}var o=e("./_isStrictComparable"),i=e("./keys");t.exports=n},{"./_isStrictComparable":299,"./keys":365}],277:[function(e,t,r){function n(e,t){var r=i(e,t);return o(r)?r:void 0}var o=e("./_baseIsNative"),i=e("./_getValue");t.exports=n},{"./_baseIsNative":232,"./_getValue":283}],278:[function(e,t,r){var n=e("./_overArg"),o=n(Object.getPrototypeOf,Object);t.exports=o},{"./_overArg":318}],279:[function(e,t,r){function n(e){var t=s.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[u]=r:delete e[u]),o}var o=e("./_Symbol"),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,u=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":193}],280:[function(e,t,r){var n=e("./_arrayFilter"),o=e("./stubArray"),i=Object.prototype,s=i.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(e){return null==e?[]:(e=Object(e),n(a(e),function(t){return s.call(e,t)}))}:o;t.exports=u},{"./_arrayFilter":198,"./stubArray":373}],281:[function(e,t,r){var n=e("./_arrayPush"),o=e("./_getPrototype"),i=e("./_getSymbols"),s=e("./stubArray"),a=Object.getOwnPropertySymbols,u=a?function(e){for(var t=[];e;)n(t,i(e)),e=o(e);return t}:s;t.exports=u},{"./_arrayPush":203,"./_getPrototype":278,"./_getSymbols":280,"./stubArray":373}],282:[function(e,t,r){var n=e("./_DataView"),o=e("./_Map"),i=e("./_Promise"),s=e("./_Set"),a=e("./_WeakMap"),u=e("./_baseGetTag"),c=e("./_toSource"),l=c(n),f=c(o),p=c(i),h=c(s),d=c(a),_=u;(n&&"[object DataView]"!=_(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=_(new o)||i&&"[object Promise]"!=_(i.resolve())||s&&"[object Set]"!=_(new s)||a&&"[object WeakMap]"!=_(new a))&&(_=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return t}),t.exports=_},{"./_DataView":184,"./_Map":187,"./_Promise":189,"./_Set":190,"./_WeakMap":195,"./_baseGetTag":221,"./_toSource":334}],283:[function(e,t,r){function n(e,t){return null==e?void 0:e[t]}t.exports=n},{}],284:[function(e,t,r){function n(e,t,r){t=o(t,e);for(var n=-1,l=t.length,f=!1;++n<l;){var p=c(t[n]);if(!(f=null!=e&&r(e,p)))break;e=e[p]}return f||++n!=l?f:!!(l=null==e?0:e.length)&&u(l)&&a(p,l)&&(s(e)||i(e))}var o=e("./_castPath"),i=e("./isArguments"),s=e("./isArray"),a=e("./_isIndex"),u=e("./isLength"),c=e("./_toKey");t.exports=n},{"./_castPath":252,"./_isIndex":294,"./_toKey":333,"./isArguments":351,"./isArray":352,"./isLength":357}],285:[function(e,t,r){function n(){this.__data__=o?o(null):{},this.size=0}var o=e("./_nativeCreate");t.exports=n},{"./_nativeCreate":313}],286:[function(e,t,r){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n},{}],287:[function(e,t,r){function n(e){var t=this.__data__;if(o){var r=t[e];return r===i?void 0:r}return a.call(t,e)?t[e]:void 0}var o=e("./_nativeCreate"),i="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;t.exports=n},{"./_nativeCreate":313}],288:[function(e,t,r){function n(e){var t=this.__data__;return o?void 0!==t[e]:s.call(t,e)}var o=e("./_nativeCreate"),i=Object.prototype,s=i.hasOwnProperty;t.exports=n},{"./_nativeCreate":313}],289:[function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?i:t,this}var o=e("./_nativeCreate"),i="__lodash_hash_undefined__";t.exports=n},{"./_nativeCreate":313}],290:[function(e,t,r){function n(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var o=Object.prototype,i=o.hasOwnProperty;t.exports=n},{}],291:[function(e,t,r){function n(e,t,r){var n=e.constructor;switch(t){case y:return o(e);case c:case l:return new n(+e);case m:return i(e,r);case v:case g:case j:case w:case x:case E:case S:case A:case k:return u(e,r);case f:return new n;case p:case _:return new n(e);case h:return s(e);case d:return new n;case b:return a(e)}}var o=e("./_cloneArrayBuffer"),i=e("./_cloneDataView"),s=e("./_cloneRegExp"),a=e("./_cloneSymbol"),u=e("./_cloneTypedArray"),c="[object Boolean]",l="[object Date]",f="[object Map]",p="[object Number]",h="[object RegExp]",d="[object Set]",_="[object String]",b="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",v="[object Float32Array]",g="[object Float64Array]",j="[object Int8Array]",w="[object Int16Array]",x="[object Int32Array]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",A="[object Uint16Array]",k="[object Uint32Array]";t.exports=n},{"./_cloneArrayBuffer":253,"./_cloneDataView":255,"./_cloneRegExp":256,"./_cloneSymbol":257,"./_cloneTypedArray":258}],292:[function(e,t,r){function n(e){return"function"!=typeof e.constructor||s(e)?{}:o(i(e))}var o=e("./_baseCreate"),i=e("./_getPrototype"),s=e("./_isPrototype");t.exports=n},{"./_baseCreate":212,"./_getPrototype":278,"./_isPrototype":298}],293:[function(e,t,r){function n(e){return s(e)||i(e)||!!(a&&e&&e[a])}var o=e("./_Symbol"),i=e("./isArguments"),s=e("./isArray"),a=o?o.isConcatSpreadable:void 0;t.exports=n},{"./_Symbol":193,"./isArguments":351,"./isArray":352}],294:[function(e,t,r){function n(e,t){var r=typeof e;return!!(t=null==t?o:t)&&("number"==r||"symbol"!=r&&i.test(e))&&e>-1&&e%1==0&&e<t}var o=9007199254740991,i=/^(?:0|[1-9]\\d*)$/;t.exports=n},{}],295:[function(e,t,r){function n(e,t){if(o(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}var o=e("./isArray"),i=e("./isSymbol"),s=/\\.|\\[(?:[^[\\]]*|(["\'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,a=/^\\w*$/;t.exports=n},{"./isArray":352,"./isSymbol":363}],296:[function(e,t,r){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=n},{}],297:[function(e,t,r){function n(e){return!!i&&i in e}var o=e("./_coreJsData"),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=n},{"./_coreJsData":263}],298:[function(e,t,r){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||o)}var o=Object.prototype;t.exports=n},{}],299:[function(e,t,r){function n(e){return e===e&&!o(e)}var o=e("./isObject");t.exports=n},{"./isObject":359}],300:[function(e,t,r){function n(){this.__data__=[],this.size=0}t.exports=n},{}],301:[function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return!(r<0)&&(r==t.length-1?t.pop():s.call(t,r,1),--this.size,!0)}var o=e("./_assocIndexOf"),i=Array.prototype,s=i.splice;t.exports=n},{"./_assocIndexOf":206}],302:[function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return r<0?void 0:t[r][1]}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":206}],303:[function(e,t,r){function n(e){return o(this.__data__,e)>-1}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":206}],304:[function(e,t,r){function n(e,t){var r=this.__data__,n=o(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":206}],305:[function(e,t,r){function n(){this.size=0,this.__data__={hash:new o,map:new(s||i),string:new o}}var o=e("./_Hash"),i=e("./_ListCache"),s=e("./_Map");t.exports=n},{"./_Hash":185,"./_ListCache":186,"./_Map":187}],306:[function(e,t,r){function n(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=e("./_getMapData");t.exports=n},{"./_getMapData":275}],307:[function(e,t,r){function n(e){return o(this,e).get(e)}var o=e("./_getMapData");t.exports=n},{"./_getMapData":275}],308:[function(e,t,r){function n(e){return o(this,e).has(e)}var o=e("./_getMapData");t.exports=n},{"./_getMapData":275}],309:[function(e,t,r){function n(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var o=e("./_getMapData");t.exports=n},{"./_getMapData":275}],310:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}t.exports=n},{}],311:[function(e,t,r){function n(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}t.exports=n},{}],312:[function(e,t,r){function n(e){var t=o(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}var o=e("./memoize"),i=500;t.exports=n},{"./memoize":368}],313:[function(e,t,r){var n=e("./_getNative"),o=n(Object,"create");t.exports=o},{"./_getNative":277}],314:[function(e,t,r){var n=e("./_overArg"),o=n(Object.keys,Object);t.exports=o},{"./_overArg":318}],315:[function(e,t,r){function n(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}t.exports=n},{}],316:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof r&&r&&!r.nodeType&&r,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o,a=s&&n.process,u=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=u},{"./_freeGlobal":272}],317:[function(e,t,r){function n(e){return i.call(e)}var o=Object.prototype,i=o.toString;t.exports=n},{}],318:[function(e,t,r){function n(e,t){return function(r){return e(t(r))}}t.exports=n},{}],319:[function(e,t,r){function n(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var n=arguments,s=-1,a=i(n.length-t,0),u=Array(a);++s<a;)u[s]=n[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=n[s];return c[t]=r(u),o(e,this,c)}}var o=e("./_apply"),i=Math.max;t.exports=n},{"./_apply":196}],320:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},{"./_freeGlobal":272}],321:[function(e,t,r){function n(e){return this.__data__.set(e,o),this}var o="__lodash_hash_undefined__";t.exports=n},{}],322:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],323:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}t.exports=n},{}],324:[function(e,t,r){var n=e("./_baseSetToString"),o=e("./_shortOut"),i=o(n);t.exports=i},{"./_baseSetToString":244,"./_shortOut":325}],325:[function(e,t,r){function n(e){var t=0,r=0;return function(){var n=s(),a=i-(n-r);if(r=n,a>0){if(++t>=o)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var o=800,i=16,s=Date.now;t.exports=n},{}],326:[function(e,t,r){function n(){this.__data__=new o,this.size=0}var o=e("./_ListCache");t.exports=n},{"./_ListCache":186}],327:[function(e,t,r){function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}t.exports=n},{}],328:[function(e,t,r){function n(e){return this.__data__.get(e)}t.exports=n},{}],329:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],330:[function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!i||n.length<a-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new s(n)}return r.set(e,t),this.size=r.size,this}var o=e("./_ListCache"),i=e("./_Map"),s=e("./_MapCache"),a=200;t.exports=n},{"./_ListCache":186,"./_Map":187,"./_MapCache":188}],331:[function(e,t,r){function n(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}t.exports=n},{}],332:[function(e,t,r){var n=e("./_memoizeCapped"),o=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["\'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,i=/\\\\(\\\\)?/g,s=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)}),t});t.exports=s},{"./_memoizeCapped":312}],333:[function(e,t,r){function n(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=e("./isSymbol"),i=1/0;t.exports=n},{"./isSymbol":363}],334:[function(e,t,r){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var o=Function.prototype,i=o.toString\n;t.exports=n},{}],335:[function(e,t,r){function n(e){return o(e,i)}var o=e("./_baseClone"),i=4;t.exports=n},{"./_baseClone":211}],336:[function(e,t,r){function n(e){return function(){return e}}t.exports=n},{}],337:[function(e,t,r){t.exports=e("./forEach")},{"./forEach":344}],338:[function(e,t,r){function n(e,t){return e===t||e!==e&&t!==t}t.exports=n},{}],339:[function(e,t,r){function n(e){return e=i(e),e&&a.test(e)?e.replace(s,o):e}var o=e("./_escapeHtmlChar"),i=e("./toString"),s=/[&<>"\']/g,a=RegExp(s.source);t.exports=n},{"./_escapeHtmlChar":271,"./toString":378}],340:[function(e,t,r){function n(e,t){return(a(e)?o:i)(e,s(t,3))}var o=e("./_arrayFilter"),i=e("./_baseFilter"),s=e("./_baseIteratee"),a=e("./isArray");t.exports=n},{"./_arrayFilter":198,"./_baseFilter":214,"./_baseIteratee":235,"./isArray":352}],341:[function(e,t,r){var n=e("./_createFind"),o=e("./findIndex"),i=n(o);t.exports=i},{"./_createFind":266,"./findIndex":342}],342:[function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var u=null==r?0:s(r);return u<0&&(u=a(n+u,0)),o(e,i(t,3),u)}var o=e("./_baseFindIndex"),i=e("./_baseIteratee"),s=e("./toInteger"),a=Math.max;t.exports=n},{"./_baseFindIndex":215,"./_baseIteratee":235,"./toInteger":376}],343:[function(e,t,r){function n(e){return(null==e?0:e.length)?o(e,1):[]}var o=e("./_baseFlatten");t.exports=n},{"./_baseFlatten":216}],344:[function(e,t,r){function n(e,t){return(a(e)?o:i)(e,s(t))}var o=e("./_arrayEach"),i=e("./_baseEach"),s=e("./_castFunction"),a=e("./isArray");t.exports=n},{"./_arrayEach":197,"./_baseEach":213,"./_castFunction":251,"./isArray":352}],345:[function(e,t,r){function n(e,t,r){var n=null==e?void 0:o(e,t);return void 0===n?r:n}var o=e("./_baseGet");t.exports=n},{"./_baseGet":219}],346:[function(e,t,r){function n(e,t){return null!=e&&i(e,t,o)}var o=e("./_baseHas"),i=e("./_hasPath");t.exports=n},{"./_baseHas":222,"./_hasPath":284}],347:[function(e,t,r){function n(e,t){return null!=e&&i(e,t,o)}var o=e("./_baseHasIn"),i=e("./_hasPath");t.exports=n},{"./_baseHasIn":223,"./_hasPath":284}],348:[function(e,t,r){function n(e){return e}t.exports=n},{}],349:[function(e,t,r){function n(e,t,r,n){e=i(e)?e:u(e),r=r&&!n?a(r):0;var l=e.length;return r<0&&(r=c(l+r,0)),s(e)?r<=l&&e.indexOf(t,r)>-1:!!l&&o(e,t,r)>-1}var o=e("./_baseIndexOf"),i=e("./isArrayLike"),s=e("./isString"),a=e("./toInteger"),u=e("./values"),c=Math.max;t.exports=n},{"./_baseIndexOf":224,"./isArrayLike":353,"./isString":362,"./toInteger":376,"./values":379}],350:[function(e,t,r){var n=e("./_arrayMap"),o=e("./_baseIntersection"),i=e("./_baseRest"),s=e("./_castArrayLikeObject"),a=i(function(e){var t=n(e,s);return t.length&&t[0]===e[0]?o(t):[]});t.exports=a},{"./_arrayMap":202,"./_baseIntersection":225,"./_baseRest":243,"./_castArrayLikeObject":250}],351:[function(e,t,r){var n=e("./_baseIsArguments"),o=e("./isObjectLike"),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")};t.exports=u},{"./_baseIsArguments":226,"./isObjectLike":360}],352:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],353:[function(e,t,r){function n(e){return null!=e&&i(e.length)&&!o(e)}var o=e("./isFunction"),i=e("./isLength");t.exports=n},{"./isFunction":356,"./isLength":357}],354:[function(e,t,r){function n(e){return i(e)&&o(e)}var o=e("./isArrayLike"),i=e("./isObjectLike");t.exports=n},{"./isArrayLike":353,"./isObjectLike":360}],355:[function(e,t,r){var n=e("./_root"),o=e("./stubFalse"),i="object"==typeof r&&r&&!r.nodeType&&r,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i,u=a?n.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||o;t.exports=l},{"./_root":320,"./stubFalse":374}],356:[function(e,t,r){function n(e){if(!i(e))return!1;var t=o(e);return t==a||t==u||t==s||t==c}var o=e("./_baseGetTag"),i=e("./isObject"),s="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";t.exports=n},{"./_baseGetTag":221,"./isObject":359}],357:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}var o=9007199254740991;t.exports=n},{}],358:[function(e,t,r){var n=e("./_baseIsMap"),o=e("./_baseUnary"),i=e("./_nodeUtil"),s=i&&i.isMap,a=s?o(s):n;t.exports=a},{"./_baseIsMap":229,"./_baseUnary":247,"./_nodeUtil":316}],359:[function(e,t,r){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=n},{}],360:[function(e,t,r){function n(e){return null!=e&&"object"==typeof e}t.exports=n},{}],361:[function(e,t,r){var n=e("./_baseIsSet"),o=e("./_baseUnary"),i=e("./_nodeUtil"),s=i&&i.isSet,a=s?o(s):n;t.exports=a},{"./_baseIsSet":233,"./_baseUnary":247,"./_nodeUtil":316}],362:[function(e,t,r){function n(e){return"string"==typeof e||!i(e)&&s(e)&&o(e)==a}var o=e("./_baseGetTag"),i=e("./isArray"),s=e("./isObjectLike"),a="[object String]";t.exports=n},{"./_baseGetTag":221,"./isArray":352,"./isObjectLike":360}],363:[function(e,t,r){function n(e){return"symbol"==typeof e||i(e)&&o(e)==s}var o=e("./_baseGetTag"),i=e("./isObjectLike"),s="[object Symbol]";t.exports=n},{"./_baseGetTag":221,"./isObjectLike":360}],364:[function(e,t,r){var n=e("./_baseIsTypedArray"),o=e("./_baseUnary"),i=e("./_nodeUtil"),s=i&&i.isTypedArray,a=s?o(s):n;t.exports=a},{"./_baseIsTypedArray":234,"./_baseUnary":247,"./_nodeUtil":316}],365:[function(e,t,r){function n(e){return s(e)?o(e):i(e)}var o=e("./_arrayLikeKeys"),i=e("./_baseKeys"),s=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":201,"./_baseKeys":236,"./isArrayLike":353}],366:[function(e,t,r){function n(e){return s(e)?o(e,!0):i(e)}var o=e("./_arrayLikeKeys"),i=e("./_baseKeysIn"),s=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":201,"./_baseKeysIn":237,"./isArrayLike":353}],367:[function(e,t,r){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t.exports=n},{}],368:[function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(n.Cache||o),r}var o=e("./_MapCache"),i="Expected a function";n.Cache=o,t.exports=n},{"./_MapCache":188}],369:[function(e,t,r){function n(){}t.exports=n},{}],370:[function(e,t,r){"use strict";function n(e){if("function"!=typeof e)throw new Error("Parameter must be function");var t;return function(){if(e){var r=e;e=void 0,t=r.apply(this,arguments)}return t}}t.exports=n},{}],371:[function(e,t,r){function n(e){return s(e)?o(a(e)):i(e)}var o=e("./_baseProperty"),i=e("./_basePropertyDeep"),s=e("./_isKey"),a=e("./_toKey");t.exports=n},{"./_baseProperty":240,"./_basePropertyDeep":241,"./_isKey":295,"./_toKey":333}],372:[function(e,t,r){function n(e,t,r){return e=a(e),r=null==r?0:o(s(r),0,e.length),t=i(t),e.slice(r,r+t.length)==t}var o=e("./_baseClamp"),i=e("./_baseToString"),s=e("./toInteger"),a=e("./toString");t.exports=n},{"./_baseClamp":210,"./_baseToString":246,"./toInteger":376,"./toString":378}],373:[function(e,t,r){function n(){return[]}t.exports=n},{}],374:[function(e,t,r){function n(){return!1}t.exports=n},{}],375:[function(e,t,r){function n(e){if(!e)return 0===e?e:0;if((e=o(e))===i||e===-i){return(e<0?-1:1)*s}return e===e?e:0}var o=e("./toNumber"),i=1/0,s=1.7976931348623157e308;t.exports=n},{"./toNumber":377}],376:[function(e,t,r){function n(e){var t=o(e),r=t%1;return t===t?r?t-r:t:0}var o=e("./toFinite");t.exports=n},{"./toFinite":375}],377:[function(e,t,r){function n(e){if("number"==typeof e)return e;if(i(e))return s;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=c.test(e);return r||l.test(e)?f(e.slice(2),r?2:8):u.test(e)?s:+e}var o=e("./isObject"),i=e("./isSymbol"),s=NaN,a=/^\\s+|\\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;t.exports=n},{"./isObject":359,"./isSymbol":363}],378:[function(e,t,r){function n(e){return null==e?"":o(e)}var o=e("./_baseToString");t.exports=n},{"./_baseToString":246}],379:[function(e,t,r){function n(e){return null==e?[]:o(e,i(e))}var o=e("./_baseValues"),i=e("./keys");t.exports=n},{"./_baseValues":248,"./keys":365}],380:[function(e,t,r){"use strict";function n(e){return function(t){return new a(e,t)}}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime/helpers/classCallCheck")),s=o(e("@babel/runtime/helpers/createClass")),a=function(){function e(t,r){(0,i.default)(this,e),this.f=t,this.xform=r,this.i=-1}return(0,s.default)(e,[{key:"@@transducer/init",value:function(){return this.xform["@@transducer/init"]()}},{key:"@@transducer/result",value:function(e){return this.xform["@@transducer/result"](e)}},{key:"@@transducer/step",value:function(e,t){return this.i++,this.xform["@@transducer/step"](e,this.f(t,this.i))}}]),e}();t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/interopRequireDefault":36}],381:[function(e,t,r){(function(e){"use strict";function n(e,t){if(i)return i.call(e,t);var r=e.parentNode;if(r&&"function"==typeof r.querySelectorAll)for(var n=r.querySelectorAll(t),o=0;o<n.length;o++)if(n[o]===e)return!0;return!1}r.__esModule=!0,r.default=n;var o=e.Element&&e.Element.prototype,i=o&&(o.matches||o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector);t.exports=r.default,t.exports.default=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],382:[function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,u=n(e),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var l in r)i.call(r,l)&&(u[l]=r[l]);if(o){a=o(r);for(var f=0;f<a.length;f++)s.call(r,a[f])&&(u[a[f]]=r[a[f]])}}return u}},{}],383:[function(e,t,r){"use strict";function n(e,t){return new Promise(function(r){setTimeout(function(){r(t)},e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],384:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function s(e){if(p===clearTimeout)return clearTimeout(e);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){b&&d&&(b=!1,d.length?_=d.concat(_):y=-1,_.length&&u())}function u(){if(!b){var e=i(a);b=!0;for(var t=_.length;t;){for(d=_,_=[];++y<t;)d&&d[y].run();y=-1,t=_.length}d=null,b=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var f,p,h=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(e){p=o}}();var d,_=[],b=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];_.push(new c(e,t)),1!==_.length||b||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],385:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,p,h,d,_=e[l].replace(a,"%20"),b=_.indexOf(r);b>=0?(f=_.substr(0,b),p=_.substr(b+1)):(f=_,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),n(s,h)?o(s[h])?s[h].push(d):s[h]=[s[h],d]:s[h]=d}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],386:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(o(s))+r;return i(e[s])?n(e[s],function(e){return a+encodeURIComponent(o(e))}).join(t):a+encodeURIComponent(o(e[s]))}).join(t):a?encodeURIComponent(o(a))+r+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],387:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":385,"./encode":386}],388:[function(e,t,r){!function(e){"use strict";function t(e,t,r,o){var i=t&&t.prototype instanceof n?t:n,s=Object.create(i.prototype),a=new p(o||[]);return s._invoke=u(e,r,a),s}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function n(){}function o(){}function i(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function a(e){function t(n,o,i,s){var a=r(e[n],e,o);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,s)},function(e){t("throw",e,i,s)}):Promise.resolve(c).then(function(e){u.value=e,i(u)},function(e){return t("throw",e,i,s)})}s(a.arg)}function n(e,r){function n(){return new Promise(function(n,o){t(e,r,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=n}function u(e,t,n){var o=w;return function(i,s){if(o===E)throw new Error("Generator is already running");if(o===S){if("throw"===i)throw s;return d()}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var u=c(a,n);if(u){if(u===A)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===w)throw o=S,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=E;var l=r(e,t,n);if("normal"===l.type){if(o=n.done?S:x,l.arg===A)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=S,n.method="throw",n.arg=l.arg)}}}function c(e,t){var n=e.iterator[t.method];if(n===_){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=_,c(e,t),"throw"===t.method))return A;t.method="throw",t.arg=new TypeError("The iterator does not provide a \'throw\' method")}return A}var o=r(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,A;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=_),t.delegate=null,A):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function h(e){if(e){var t=e[v];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=_,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:_,done:!0}}var _,b=Object.prototype,y=b.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},v=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",j=m.toStringTag||"@@toStringTag";e.wrap=t;var w="suspendedStart",x="suspendedYield",E="executing",S="completed",A={},k={};k[v]=function(){return this};var T=Object.getPrototypeOf,O=T&&T(T(h([])));O&&O!==b&&y.call(O,v)&&(k=O);var L=i.prototype=n.prototype=Object.create(k);o.prototype=L.constructor=i,i.constructor=o,i[j]=o.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,j in e||(e[j]="GeneratorFunction")),e.prototype=Object.create(L),e},e.awrap=function(e){return{__await:e}},s(a.prototype),a.prototype[g]=function(){return this},e.AsyncIterator=a,e.async=function(r,n,o,i){var s=new a(t(r,n,o,i));return e.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},s(L),L[j]="Generator",L[v]=function(){return this},L.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=_)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return i.type="throw",i.arg=e,r.next=t,n&&(r.method="next",r.arg=_),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var s=y.call(o,"catchLoc"),a=y.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,A):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),f(r),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;f(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=_),A}}}("object"==typeof t?t.exports:{})},{}],389:[function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return s(e,t,r)}var i=e("buffer"),s=i.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=i:(n(i,r),r.Buffer=o),n(s,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},{buffer:47}],390:[function(e,t,r){function n(e,t){this._block=o.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}var o=e("safe-buffer").Buffer;n.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=o.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,s=this._len,a=0;a<i;){for(var u=s%n,c=Math.min(i-a,n-u),l=0;l<c;l++)r[u+l]=e[a+l];s+=c,a+=c,s%n==0&&this._update(r)}return this._len+=i,this},n.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,o=(r-n)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=n},{"safe-buffer":389}],391:[function(e,t,r){function n(){this.init(),this._w=d,f.call(this,64,56)}function o(e,t,r){return r^e&(t^r)}function i(e,t,r){return e&t|r&(e|t)}function s(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function a(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function u(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function c(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}var l=e("inherits"),f=e("./hash"),p=e("safe-buffer").Buffer,h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=new Array(64);l(n,f),n.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},n.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,l=0|this._c,f=0|this._d,p=0|this._e,d=0|this._f,_=0|this._g,b=0|this._h,y=0;y<16;++y)t[y]=e.readInt32BE(4*y);for(;y<64;++y)t[y]=c(t[y-2])+t[y-7]+u(t[y-15])+t[y-16]|0;for(var m=0;m<64;++m){var v=b+a(p)+o(p,d,_)+h[m]+t[m]|0,g=s(r)+i(r,n,l)|0;b=_,_=d,d=p,p=f+v|0,f=l,l=n,n=r,r=v+g|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=l+this._c|0,this._d=f+this._d|0,this._e=p+this._e|0,this._f=d+this._f|0,this._g=_+this._g|0,this._h=b+this._h|0},n.prototype._hash=function(){var e=p.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=n},{"./hash":390,inherits:181,"safe-buffer":389}],392:[function(e,t,r){function n(e,t){throw new Error("don\'t know how to "+e+" collection: "+t)}function o(e,t){return"iterator"===t?e[le.iterator]||e.next:e[le[t]]}function i(e,t){return e[le[t]]}function s(e){var t=i(e,"iterator");return t?t.call(e):e.next?e:pe(e)?new a(e):l(e)?new u(e):void 0}function a(e){this.arr=e,this.index=0}function u(e){this.obj=e,this.keys=Object.keys(e),this.index=0}function c(e){return"function"==typeof e}function l(e){return e instanceof Object&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}function f(e){return"number"==typeof e}function p(e){this["@@transducer/reduced"]=!0,this["@@transducer/value"]=e}function h(e){return e instanceof p||e&&e["@@transducer/reduced"]}function d(e){return e["@@transducer/value"]}function _(e){return h(e)?e:new p(e)}function b(e){return h(e)?d(e):e}function y(e,t,r){if(pe(e)){for(var i=r,a=-1,u=e.length;++a<u;)if(i=t["@@transducer/step"](i,e[a]),h(i)){i=d(i);break}return t["@@transducer/result"](i)}if(l(e)||o(e,"iterator")){for(var i=r,c=s(e),f=c.next();!f.done;){if(i=t["@@transducer/step"](i,f.value),h(i)){i=d(i);break}f=c.next()}return t["@@transducer/result"](i)}n("iterate",e)}function m(e,t,r,n){return t=t(r),void 0===n&&(n=t["@@transducer/init"]()),y(e,t,n)}function v(){var e=Array.prototype.slice.call(arguments);return function(t){for(var r=t,n=e.length-1;n>=0;n--)r=e[n](r);return r}}function g(e){var t={};return t["@@transducer/init"]=function(){throw new Error("init value unavailable")},t["@@transducer/result"]=function(e){return e},t["@@transducer/step"]=e,t}function j(e,t,r){if(r=null!=r?r:1,!t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};default:return e.bind(t)}}function w(e,t,r){var n=-1,o=e.length,i=Array(o);for(t=j(t,r,2);++n<o;)i[n]=t(e[n],n);return i}function x(e,t,r){var n=e.length,o=[];t=j(t,r,2);for(var i=0;i<n;i++)t(e[i],i)&&o.push(e[i]);return o}function E(e,t){this.xform=t,this.f=e}function S(e,t,r){return c(e)&&(r=t,t=e,e=null),t=j(t,r),e?pe(e)?w(e,t,r):oe(e,S(t)):function(e){return new E(t,e)}}function A(e,t){this.xform=t,this.f=e}function k(e,t,r){return c(e)&&(r=t,t=e,e=null),t=j(t,r),e?pe(e)?x(e,t,r):oe(e,k(t)):function(e){return new A(t,e)}}function T(e,t,r){return c(e)&&(r=t,t=e,e=null),t=j(t,r),k(e,function(e){return!t(e)})}function O(e){return k(e,function(e){return null!=e})}function L(e){this.xform=e,this.last=void 0}function I(e){return e?oe(e,I()):function(e){return new L(e)}}function D(e,t){this.xform=t,this.f=e}function R(e,t,r){return c(e)&&(r=t,t=e,e=null),t=j(t,r),e?oe(e,R(t)):function(e){return new D(t,e)}}function M(e,t){this.n=e,this.i=0,this.xform=t}function C(e,t){return f(e)&&(t=e,e=null),e?oe(e,C(t)):function(e){return new M(t,e)}}function q(e,t){this.n=e,this.i=0,this.xform=t}function P(e,t){return f(e)&&(t=e,e=null),e?oe(e,P(t)):function(e){return new q(t,e)}}function B(e,t){this.xform=t,this.f=e,this.dropping=!0}function N(e,t,r){return c(e)&&(r=t,t=e,e=null),t=j(t,r),e?oe(e,N(t)):function(e){return new B(t,e)}}function F(e,t){this.n=e,this.i=0,this.xform=t,this.part=new Array(e)}function V(e,t){return f(e)&&(t=e,e=null),e?oe(e,V(t)):function(e){return new F(t,e)}}function U(e,t){this.f=e,this.xform=t,this.part=[],this.last=he}function G(e,t,r){return c(e)&&(r=t,t=e,e=null),t=j(t,r),e?oe(e,G(t)):function(e){return new U(t,e)}}function H(e,t){this.sep=e,this.xform=t,this.started=!1}function z(e,t){return 1===arguments.length?(t=e,function(e){return new H(t,e)}):oe(e,z(t))}function K(e,t){this.xform=t,this.n=e}function $(e,t){return 1===arguments.length?(t=e,function(e){return new K(t,e)}):oe(e,$(t))}function W(e,t){this.xform=t,this.n=e,this.i=-1}function J(e,t){return 1===arguments.length?(t=e,function(e){return new W(t,e)}):oe(e,J(t))}function X(e){this.xform=e}function Y(e){return new X(e)}function Q(e,t){return e=j(e,t),v(S(e),Y)}function Z(e,t){return e.push(t),e}function ee(e,t){if(pe(t)&&2===t.length)e[t[0]]=t[1];else for(var r=Object.keys(t),n=r.length,o=0;o<n;o++)e[r[o]]=t[r[o]];return e}function te(e,t){return t?m(e,t,de,[]):y(e,de,[])}function re(e,t){return t?m(e,t,_e,{}):y(e,_e,{})}function ne(e,t){return t?new ae(t,e):s(e)}function oe(e,t){if(pe(e))return m(e,t,de,[]);if(l(e))return m(e,t,_e,{});if(e["@@transducer/step"]){var r;return r=e["@@transducer/init"]?e["@@transducer/init"]():new e.constructor,m(e,t,e,r)}if(o(e,"iterator"))return new ae(t,e);n("sequence",e)}function ie(e,t,r){return pe(e)?m(r,t,de,e):l(e)?m(r,t,_e,e):e["@@transducer/step"]?m(r,t,e,e):void n("into",e)}function se(e,t){this.xform=e(be),this.iter=t}function ae(e,t){this.iter=s(t),this.items=[],this.stepper=new se(e,s(t))}function ue(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=r;return t}var ce="undefined"!=typeof Symbol,le={iterator:ce?Symbol.iterator:"@@iterator"};a.prototype.next=function(){return this.index<this.arr.length?{value:this.arr[this.index++],done:!1}:{done:!0}},u.prototype.next=function(){if(this.index<this.keys.length){var e=this.keys[this.index++];return{value:[e,this.obj[e]],done:!1}}return{done:!0}};var fe=Object.prototype.toString,pe="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"==fe.call(e)};E.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},E.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},E.prototype["@@transducer/step"]=function(e,t){return this.xform["@@transducer/step"](e,this.f(t))},A.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},A.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},A.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):e},L.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},L.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},L.prototype["@@transducer/step"]=function(e,t){return t!==this.last?(this.last=t,this.xform["@@transducer/step"](e,t)):e},D.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},D.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},D.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):new p(e)},M.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},M.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},M.prototype["@@transducer/step"]=function(e,t){return this.i<this.n&&(e=this.xform["@@transducer/step"](e,t),this.i+1>=this.n&&(e=_(e))),this.i++,e},q.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},q.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},q.prototype["@@transducer/step"]=function(e,t){return this.i++<this.n?e:this.xform["@@transducer/step"](e,t)},B.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},B.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},B.prototype["@@transducer/step"]=function(e,t){if(this.dropping){if(this.f(t))return e;this.dropping=!1}return this.xform["@@transducer/step"](e,t)},F.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},F.prototype["@@transducer/result"]=function(e){return this.i>0?b(this.xform["@@transducer/step"](e,this.part.slice(0,this.i))):this.xform["@@transducer/result"](e)},F.prototype["@@transducer/step"]=function(e,t){if(this.part[this.i]=t,this.i+=1,this.i===this.n){var r=this.part.slice(0,this.n);return this.part=new Array(this.n),\nthis.i=0,this.xform["@@transducer/step"](e,r)}return e};var he={};U.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},U.prototype["@@transducer/result"]=function(e){var t=this.part.length;return t>0?b(this.xform["@@transducer/step"](e,this.part.slice(0,t))):this.xform["@@transducer/result"](e)},U.prototype["@@transducer/step"]=function(e,t){var r=this.f(t);return r===this.last||this.last===he?this.part.push(t):(e=this.xform["@@transducer/step"](e,this.part),this.part=[t]),this.last=r,e},H.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},H.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},H.prototype["@@transducer/step"]=function(e,t){if(this.started){var r=this.xform["@@transducer/step"](e,this.sep);return h(r)?r:this.xform["@@transducer/step"](r,t)}return this.started=!0,this.xform["@@transducer/step"](e,t)},K.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},K.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},K.prototype["@@transducer/step"]=function(e,t){for(var r=this.n,n=e,o=0;o<r&&(n=this.xform["@@transducer/step"](n,t),!h(n));o++);return n},W.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},W.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},W.prototype["@@transducer/step"]=function(e,t){return this.i+=1,this.i%this.n==0?this.xform["@@transducer/step"](e,t):e},X.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},X.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},X.prototype["@@transducer/step"]=function(e,t){var r=this.xform,n={};return n["@@transducer/init"]=function(){return r["@@transducer/init"]()},n["@@transducer/result"]=function(e){return e},n["@@transducer/step"]=function(e,t){var n=r["@@transducer/step"](e,t);return h(n)?d(n):n},y(t,n,e)};var de={};de["@@transducer/init"]=function(){return[]},de["@@transducer/result"]=function(e){return e},de["@@transducer/step"]=Z;var _e={};_e["@@transducer/init"]=function(){return{}},_e["@@transducer/result"]=function(e){return e},_e["@@transducer/step"]=ee;var be={};be["@@transducer/result"]=function(e){return h(e)?d(e):e},be["@@transducer/step"]=function(e,t){return e.items.push(t),e.rest},se.prototype["@@transducer/step"]=function(e){for(var t=e.items.length;e.items.length===t;){var r=this.iter.next();if(r.done||h(r.value)){this.xform["@@transducer/result"](this);break}this.xform["@@transducer/step"](e,r.value)}},ae.prototype[le.iterator]=function(){return this},ae.prototype.next=function(){return this["@@transducer/step"](),this.items.length?{value:this.items.pop(),done:!1}:{done:!0}},ae.prototype["@@transducer/step"]=function(){this.items.length||this.stepper["@@transducer/step"](this)},t.exports={reduce:y,transformer:g,Reduced:p,isReduced:h,iterator:s,push:Z,merge:ee,transduce:m,seq:oe,toArray:te,toObj:re,toIter:ne,into:ie,compose:v,map:S,filter:k,remove:T,cat:Y,mapcat:Q,keep:O,dedupe:I,take:C,takeWhile:R,takeNth:J,drop:P,dropWhile:N,partition:V,partitionBy:G,interpose:z,repeat:$,range:ue,LazyTransformer:ae}},{}],393:[function(e,t,r){"use strict";function n(e){e.hot&&e.hot.accept()}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n(e);var o=m.get(e);if(o||(o=new d.default,m.set(e,o)),o.has(r))throw new Error("ud functions can only be used once per module with a given key");o.add(r);var i=!1,s=void 0;return e.hot&&(e.hot.data&&e.hot.data.__ud__&&Object.prototype.hasOwnProperty.call(e.hot.data.__ud__,r)&&(s=e.hot.data.__ud__[r],i=!0),e.hot.dispose(function(e){e.__ud__||(e.__ud__={}),e.__ud__[r]=s})),i||(s=t()),s}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=o(e,function(){return t},"--defobj-"+r);return n!==t&&s(n,t),n}function s(e,t){(0,h.default)(e).filter(function(e){return!Object.prototype.hasOwnProperty.call(t,e)}).forEach(function(t){delete e[t]});var r=(0,h.default)(t);return(0,p.default)(e,y(r,r.map(function(e){return(0,f.default)(t,e)}).filter(Boolean).map(function(e){return{value:e.value,enumerable:e.enumerable,writable:!0,configurable:!0}}))),e}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=o(e,function(){if(!e.hot)return{fn:null,wrapper:t};var r={fn:null,wrapper:null},n=b(t.length).map(function(e){return"a"+e}).join(",");return r.wrapper=new Function("shared","\\n      \'use strict\';\\n      return function ".concat(t.name,"__ud_wrapper(").concat(n,") {\\n        if (new.target) {\\n          return Reflect.construct(shared.fn, arguments, new.target);\\n        } else {\\n          return shared.fn.apply(this, arguments);\\n        }\\n      };\\n      "))(r),t.prototype?(r.wrapper.prototype=(0,l.default)(t.prototype),r.wrapper.prototype.constructor=r.wrapper):r.wrapper.prototype=t.prototype,r},"--defn-shared-"+r);return n.fn=t,e.hot&&(t.prototype&&n.wrapper.prototype&&(0,c.default)(n.wrapper.prototype)!==t.prototype&&Object.setPrototypeOf(n.wrapper.prototype,t.prototype),Object.setPrototypeOf(n.wrapper,t)),n.wrapper}var u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.markReloadable=n,r.defonce=o,r.defobj=i,r.defn=a;var c=u(e("@babel/runtime-corejs2/core-js/object/get-prototype-of")),l=u(e("@babel/runtime-corejs2/core-js/object/create")),f=u(e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor")),p=u(e("@babel/runtime-corejs2/core-js/object/define-properties")),h=u(e("@babel/runtime-corejs2/core-js/object/get-own-property-names")),d=u(e("@babel/runtime-corejs2/core-js/set")),_=u(e("@babel/runtime-corejs2/core-js/weak-map")),b=e("array-range"),y=e("zip-object"),m=new _.default},{"@babel/runtime-corejs2/core-js/object/create":8,"@babel/runtime-corejs2/core-js/object/define-properties":9,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":12,"@babel/runtime-corejs2/core-js/object/get-own-property-names":13,"@babel/runtime-corejs2/core-js/object/get-prototype-of":15,"@babel/runtime-corejs2/core-js/set":18,"@babel/runtime-corejs2/core-js/weak-map":21,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"array-range":37,"zip-object":394}],394:[function(e,t,r){var n=function(e,t){1==arguments.length&&(t=e[1],e=e[0]);var r={},n=0;for(n;n<e.length;n+=1)r[e[n]]=t[n];return r};t.exports=n},{}],395:[function(e,t,r){"use strict";function n(e){if(!e||"string"!=typeof e.url)throw new Error("URL must be given");return new u.default(function(t,r){var n=e.method?e.method:"GET",i=e.url,u=null;e.data&&(u="string"==typeof e.data?e.data:c.default.stringify(e.data),"GET"!==n&&"HEAD"!==n||(i+=(/\\?/.test(i)?"&":"?")+u,u=null));var l=null!=e.canRetry?e.canRetry:"GET"===n||"HEAD"===n,p=i.match(/(?:(?:[a-z]+:)?\\/\\/)?([^\\/]*)\\//);if(!p)throw new Error("Failed to match url");var _=p[1];if(Object.prototype.hasOwnProperty.call(d,_))return void r(new Error("Server at ".concat(i," has told us to stop connecting")));e.cachebust&&(i=(0,f.default)(i));var b=new XMLHttpRequest;if((0,a.default)(b,e.xhrFields),b.onerror=function(n){if((e.retryNum||0)<h&&(502===b.status||(0===b.status||b.status>=500)&&l))return void t(o(e));var s=(0,a.default)(new Error("Failed to load ".concat(i)),{event:n,xhr:b,status:b.status});490==b.status&&(d[_]=!0),r(s)},b.onload=function(e){200===b.status?t({xhr:b,text:b.responseText}):b.onerror(e)},b.open(n,i,!0),e.headers){var y=e.headers;(0,s.default)(y).forEach(function(e){var t=y[e];b.setRequestHeader(e,t)})}b.send(u)})}function o(e){var t=(e.retryNum||0)+1,r=Math.min(1e3*Math.pow(2,t),p);return(0,l.default)(r).then(function(){return n((0,a.default)({},e,{retryNum:t}))})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var s=i(e("@babel/runtime-corejs2/core-js/object/keys")),a=i(e("@babel/runtime-corejs2/core-js/object/assign")),u=i(e("@babel/runtime-corejs2/core-js/promise")),c=i(e("querystring")),l=i(e("pdelay")),f=i(e("./cachebust-url")),p=64e3,h=5,d={}},{"./cachebust-url":396,"@babel/runtime-corejs2/core-js/object/assign":7,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/object/keys":16,"@babel/runtime-corejs2/core-js/promise":17,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,pdelay:383,querystring:387}],396:[function(e,t,r){"use strict";function n(e){return s.test(e)?e.replace(s,"$1_="+a++):e+(/\\?/.test(e)?"&":"?")+"_="+a++}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/core-js/date/now")),s=/([?&])_=[^&]*/,a=(0,i.default)()+Math.floor(Math.random()*Math.pow(2,32))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25}],397:[function(e,t,r){"use strict";function n(e){return(0,i.default)(e,function(e,t){return"string"!=typeof t||t.length<=10?t:u()?"".concat(t.substring(0,10),"..."):"..."})}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/core-js/json/stringify")),s=o(e("lodash/once")),a=o(e("../platform-implementation-js/lib/isStreakAppId")),u=(0,s.default)(function(){return JSON.parse("undefined"!=typeof document&&document.documentElement.getAttribute("data-inboxsdk-active-app-ids")||"[]").find(function(e){var t=e.appId;return(0,a.default)(t)})})},{"../platform-implementation-js/lib/isStreakAppId":434,"@babel/runtime-corejs2/core-js/json/stringify":5,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"lodash/once":370}],398:[function(e,t,r){"use strict";function n(){var e=void 0,t=void 0,r=new i.default(function(r,n){e=r,t=n});return{resolve:e,reject:t,promise:r}}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/promise":17,"@babel/runtime-corejs2/helpers/interopRequireDefault":25}],399:[function(e,t,r){"use strict";function n(e,t){for(var r=e.parentElement;r;){if(t(r))return r;r=r.parentElement}return null}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":10}],400:[function(e,t,r){"use strict";function n(e){var t=document.createElement("div");return t.innerHTML=e.replace(/<[^>]*>?/g,""),t.textContent}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":10}],401:[function(e,t,r){"use strict";function n(e){for(var t=[],r=0,n=/"[^"]*"/g;;){var o=n.exec(e);if(t=t.concat((o?e.substring(r,o.index):e.substring(r)).split(/ +/).filter(Boolean)),!o)break;r=o.index+o[0].length,t.push(o[0])}return t}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":10}],402:[function(e,t,r){"use strict";function n(e,t,r){function n(){c.shift()(),c.length?o():l=!1}function o(){l=!0;var e=a();e>0?setTimeout(n,e):n()}function a(){var e=(0,s.default)(),n=e-t;return u=u.filter(function(e){return e>n}),u.length>=r?u[0]-n:-1}var u=[],c=[],l=!1;return function(){for(var t=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var f,p=new i.default(function(r,o){f=function(){u.push((0,s.default)());try{r(e.apply(t,n))}catch(e){o(e)}}});if(!f)throw new Error("Should not happen");return c.push(f),l||o(),p}}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/core-js/promise")),s=o(e("@babel/runtime-corejs2/core-js/date/now"))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/promise":17,"@babel/runtime-corejs2/helpers/interopRequireDefault":25}],403:[function(e,t,r){"use strict";function n(){var e=(0,u.default)([\' <span style="display:none" data-inboxsdk-suggestion="\',\'"></span>\']);return n=function(){return e},e}function o(e,t){var r=d.deserialize(e),o=r.value,i=r.options,s=o[0][1],u=!0,p=!1,_=void 0;try{for(var b,y=(0,c.default)(t);!(u=(b=y.next()).done);u=!0){var m=b.value,v=void 0,g=void 0;if("string"==typeof m.name?(v=m.name,g=(0,l.default)(v)):"string"==typeof m.nameHTML&&(g=m.nameHTML,v=(0,h.default)(g)),null==v||null==g)throw new Error("name or nameHTML must be provided");var j=void 0,w=void 0;"string"==typeof m.description?(j=m.description,w=(0,l.default)(j)):"string"==typeof m.descriptionHTML&&(w=m.descriptionHTML,j=(0,h.default)(w));var x={id:m.id,routeName:m.routeName,routeParams:m.routeParams,externalURL:m.externalURL};g+=(0,f.default)(n(),(0,a.default)(x)),null!=m.iconHTML&&(g=\'<div class="inboxsdk__custom_suggestion_iconHTML">\'.concat(m.iconHTML,"</div>").concat(g));var E=["aso.sug",m.searchTerm||s,g,null,[],0,null,"asor inboxsdk__custom_suggestion "+m.providerId+" "+(m.iconClass||""),0];null!=w&&(E[3]=["aso.eme",j,v,w,g]),null!=m.iconHTML?(E[6]=["aso.thn","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="],E[7]+=" inboxsdk__no_bg"):m.iconUrl?(E[6]=["aso.thn",m.iconUrl],E[7]+=" inboxsdk__no_bg"):E[7]+=" asor_i4",o[0][3].push(E)}}catch(e){p=!0,_=e}finally{try{u||null==y.return||y.return()}finally{if(p)throw _}}return d.serialize(o,i)}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=s(e("@babel/runtime-corejs2/core-js/json/stringify")),u=s(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),c=s(e("@babel/runtime-corejs2/core-js/get-iterator")),l=s(e("lodash/escape")),f=s(e("auto-html")),p=e("ud"),h=s(e("../../common/html-to-text")),d=i(e("../../platform-implementation-js/dom-driver/gmail/gmail-response-processor")),_=(0,p.defn)(t,o);r.default=_},{"../../common/html-to-text":400,"../../platform-implementation-js/dom-driver/gmail/gmail-response-processor":426,"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/json/stringify":5,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":31,"auto-html":44,"lodash/escape":339,ud:393}],404:[function(e,t,r){"use strict";function n(e,t){"XMLHttpRequest event listener error"!==t?k.error(e,t):setTimeout(function(){throw e},1)}function o(){var e=null,t=top.document.getElementById("js_frame");t?e=t.contentDocument.defaultView:k.eventSdkPassive("noJSFrameElementFound"),i(window,e)}function i(e,t){var r=[],o=[],i=e.XMLHttpRequest;if(e.XMLHttpRequest=(0,T.default)(i,r,{logError:n}),t){var u=t.XMLHttpRequest;t.XMLHttpRequest=(0,T.default)(u,o,{logError:n})}L.setup(),I.setup();var c={};A.default.fromEvents(document,"inboxSDKregisterComposeRequestModifier").onValue(function(e){var t=e.detail,r=t.composeid||t.draftID;c[r]||(c[r]=[]),c[r].push(t.modifierId)}),A.default.fromEvents(document,"inboxSDKunregisterComposeRequestModifier").onValue(function(e){var t=e.detail,r=t.keyId,n=t.modifierId;c[r]=c[r].filter(function(e){return e!==n}),0===c[r].length&&delete c[r]}),o.push({isRelevantTo:function(e){return"sm"===e.params.act},originalSendBodyLogger:function(e,t){s({type:"emailSending",body:t})},requestChanger:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,v.default)(b.default.mark(function e(t,r){var n,o,i,u,l;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O.default.parse(r.body),o=n.composeid,(i=c[n.composeid])&&0!==i.length){e.next=5;break}return e.abrupt("return",r);case 5:u=b.default.mark(function e(t){var r,a,u;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i[t],a=A.default.fromEvents(document,"inboxSDKcomposeRequestModified").filter(function(e){var t=e.detail;return t.composeid===o&&t.modifierId===r}).take(1).map(function(e){return e.detail.composeParams}).toPromise(y.default),s({type:"inboxSDKmodifyComposeRequest",composeid:o,modifierId:r,composeParams:{body:n.body,isPlainText:"1"!==n.ishtml}}),e.next=5,a;case 5:u=e.sent,n=(0,m.default)({},n,u);case 7:case"end":return e.stop()}},e)}),l=0;case 7:if(!(l<i.length)){e.next=12;break}return e.delegateYield(u(l),"t0",9);case 9:l++,e.next=7;break;case 12:return e.abrupt("return",(0,m.default)({},r,{body:a(n)}));case 13:case"end":return e.stop()}},e)}));return e}(),afterListeners:function(e){if(200===e.status&&(s({type:"emailSent",responseText:e.originalResponseText,originalSendBody:e.originalSendBody}),e.originalSendBody)){var t=O.default.parse(e.originalSendBody);delete c[t.composeid]}}}),o.push({isRelevantTo:function(e){return"sd"===e.params.act},originalSendBodyLogger:function(e,t){s({type:"emailDraftSaveSending",body:t})},afterListeners:function(e){200===e.status&&s({type:"emailDraftReceived",responseText:e.originalResponseText,originalSendBody:e.originalSendBody,connectionDetails:{method:e.method,url:e.url,params:e.params,responseType:e.responseType}})}});var l=new _.default,B=new _.default,N=new _.default;r.push({isRelevantTo:function(e){return/sync(?:\\/u\\/\\d+)?\\/i\\/s/.test(e.url)},originalSendBodyLogger:function(e){if(e.originalSendBody){var t=(0,P.getDetailsOfComposeRequest)(e.originalSendBody);if(!t)return;var r=t.draftID;switch(t.type){case"FIRST_DRAFT_SAVE":N.set(e,r);break;case"DRAFT_SAVE":B.set(e,r);break;case"SEND":l.set(e,r),s({type:"emailSending",draftID:r})}}},requestChanger:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,v.default)(b.default.mark(function e(t,r){var n,o,i,a,u,l,f,p;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=(0,P.getDetailsOfComposeRequest)(r.body))&&"SEND"===n.type){e.next=3;break}return e.abrupt("return",r);case 3:if(o=n.draftID,i=n.body,a=n.type,(u=c[o])&&0!==u.length){e.next=7;break}return e.abrupt("return",r);case 7:l=n.body,f=b.default.mark(function e(t){var r,n,i;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u[t],n=A.default.fromEvents(document,"inboxSDKcomposeRequestModified").filter(function(e){var t=e.detail;return t.draftID===o&&t.modifierId===r}).take(1).map(function(e){return e.detail.composeParams}).toPromise(y.default),s({type:"inboxSDKmodifyComposeRequest",draftID:o,modifierId:r,composeParams:{body:l,isPlainText:!1}}),e.next=5,n;case 5:i=e.sent,l=i.body;case 7:case"end":return e.stop()}},e)}),p=0;case 10:if(!(p<u.length)){e.next=15;break}return e.delegateYield(f(p),"t0",12);case 12:p++,e.next=10;break;case 15:return e.abrupt("return",(0,m.default)({},r,{body:(0,P.replaceEmailBodyForSendRequest)(r.body,l)}));case 16:case"end":return e.stop()}},e)}));return e}(),afterListeners:function(e){if(l.has(e)||B.has(e)||N.has(e)){var t=function(){s({type:"emailSendFailed",draftID:r}),l.delete(e)},r=l.get(e)||B.get(e)||N.get(e);if(200!==e.status||!e.originalResponseText)return void t();var n=JSON.parse(e.originalResponseText);if(N.has(e)){var o=n[2]&&n[2][6]&&n[2][6][0]&&n[2][6][0][1];if(o){var i=o[3]&&o[3][7]&&o[3][7][1],a=i&&i[5]&&i[5][0];i&&a?s({draftID:r,type:"emailDraftReceived",rfcID:a[14],threadID:i[4].split("|")[0],messageID:a[1],oldMessageID:a[56],oldThreadID:i[20]}):k.error(new Error("Could not parse draft save"))}else{k.eventSdkPassive("old compose draft id handling hit");var u=n[2]&&n[2][6]&&n[2][6][1]&&n[2][6][1][1];if(u){var c=u[3]&&u[3][1]&&u[3][1][1];c&&s({draftID:r,type:"emailDraftReceived",rfcID:c[14],messageID:c[1],oldMessageID:c[48]?new S.default(c[48]).toString(16):c[56],syncThreadID:u[1]})}}}else{var f,p,h,_,b=null===(f=n[2])||void 0===f?void 0:f[6];if(!b)return void t();var y=b.find(function(e){var t,n,o,i,s,a;return(null===(t=e[1])||void 0===t?void 0:null===(n=t[3])||void 0===n?void 0:null===(o=n[7])||void 0===o?void 0:null===(i=o[1])||void 0===i?void 0:null===(s=i[5])||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:a[14])&&e[1][3][7][1][5].find(function(e){return(0,E.default)(e[1],r)})});if(!y){if(l.has(e)){var m=b.filter(function(e){var t,r,n;return null===(t=e[1])||void 0===t?void 0:null===(r=t[3])||void 0===r?void 0:null===(n=r[5])||void 0===n?void 0:n[3]});if(m.length>0){var v,g,j,w,x=m[0][1][1]?m[0][1][1].replace(/\\|.*$/,""):void 0;s({draftID:r,type:"emailSent",threadID:x,messageID:(null===(v=m[0][1][3])||void 0===v?void 0:null===(g=v[5])||void 0===g?void 0:null===(j=g[5])||void 0===j?void 0:j[0])||(null===(w=m[0][1][3][5][3])||void 0===w?void 0:w[0])})}else t()}else t();return}var A=null===(p=y[1])||void 0===p?void 0:null===(h=p[3])||void 0===h?void 0:null===(_=h[7])||void 0===_?void 0:_[1],T=A[5].find(function(e){return e[1].includes(r)});if(!T)return void t();var O=l.has(e);(0,d.default)(T[11])?O&&T[11].indexOf("^r")>=0&&k.error(new Error(\'sendUpdate[11] unexpectedly contained "^r"\')):k.error(new Error("sendUpdate[11] was not an array")),O&&void 0!==T[22]&&3!==T[22]&&k.error(new Error("sendUpdate[22] was not expected value"),{value:T[22]});var L=A[4]?A[4].replace(/\\|.*$/,""):void 0;s({draftID:r,type:O?"emailSent":"emailDraftReceived",rfcID:T[14],messageID:T[1],oldMessageID:T[48]?new S.default(T[48]).toString(16):T[56],threadID:L,oldThreadID:null!=A[18]?new S.default(A[18]).toString(16):A[20]})}l.delete(e),B.delete(e),N.delete(e)}}}),o.push({isRelevantTo:function(e){return!!e.params.search&&"tl"===e.params.view},responseTextChanger:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,v.default)(b.default.mark(function e(t,r){return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r);case 1:case"end":return e.stop()}},e)}));return e}(),originalResponseTextLogger:function(e){if(200===e.status){var t=(e.params.search,e.originalResponseText);L.processThreadListResponse(t)}}}),o.push({isRelevantTo:function(e){return"cv"===e.params.view},originalResponseTextLogger:function(e){if(200===e.status){var t=D.extractMessages(e.originalResponseText);I.add(t)}}}),r.push({isRelevantTo:function(e){return/sync(?:\\/u\\/\\d+)?\\/i\\/bv/.test(e.url)},originalResponseTextLogger:function(e){if(200===e.status){var t=R.extractThreadsFromSearchResponse(e.originalResponseText);I.add(t.map(function(e){return{threadID:e.syncThreadID,messages:e.extraMetaData.syncMessageData.map(function(e){return{date:e.date,recipients:e.recipients}})}}))}}}),r.push({isRelevantTo:function(e){return/sync(?:\\/u\\/\\d+)?\\/i\\/fd/.test(e.url)},originalResponseTextLogger:function(e){if(200===e.status){var t=R.extractThreadsFromThreadResponse(e.originalResponseText);I.add(t.map(function(e){return{threadID:e.syncThreadID,messages:e.extraMetaData.syncMessageData.map(function(e){return{date:e.date,recipients:e.recipients}})}}))}}});var F,V,U,G=(0,h.default)(null);document.addEventListener("inboxSDKregisterSuggestionsModifier",function(e){var t=e.detail;G[t.providerID]={position:(0,p.default)(G).length}}),document.addEventListener("inboxSDKprovideSuggestions",function(e){var t=e.detail;if(t.query===F){var r=G[t.providerID];if(!r)throw new Error("provider does not exist for providerID");if(null==V)throw new Error("tried to modified a null suggestionModifications");if(V[r.position]=t.suggestions,V.filter(Boolean).length===(0,p.default)(G).length){if(null==U)throw new Error("tried to resolve a null currentQueryDefer");U.resolve((0,j.default)(V)),U=F=V=null}}}),r.push({isRelevantTo:function(e){return(0,p.default)(G).length>0&&!!e.url.match(/^\\/cloudsearch\\/request\\?/)&&"gmail"==e.params.client&&"gmail"==e.params.gs_ri},originalSendBodyLogger:function(e,t){var r=O.default.parse(t);if(r.request){var n=JSON.parse(r.request)[2];n&&(F=n,U&&U.resolve(),U=e._defer=(0,C.default)(),V=[],s({type:"suggestionsRequest",query:F}))}},responseTextChanger:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,v.default)(b.default.mark(function e(t,r){var n;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._defer||200!==t.status){e.next=6;break}return e.next=3,t._defer.promise;case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",(0,q.default)(r,n));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return e}()});var H,z=[];document.addEventListener("inboxSDKcreateCustomSearchTerm",function(e){z.push(e.detail.term)}),document.addEventListener("inboxSDKsearchReplacementReady",function(e){H.query===e.detail.query&&H.newQuery.resolve(e.detail.newQuery)}),o.push({isRelevantTo:function(e){var t,r=e.params;return!!("POST"===e.method&&r.search&&"tl"===r.view&&e.url.match(/^\\?/)&&r.q&&(t=(0,x.default)(z,(0,M.default)(r.q))[0]))&&(H&&H.query===r.q&&H.start!=r.start?(e._queryReplacement=H,H.start=r.start):(H&&H.newQuery.resolve(H.query),H=e._queryReplacement={term:t,query:r.q,start:r.start,newQuery:(0,C.default)()},s({type:"searchQueryForReplacement",term:t,query:r.q})),!0)},requestChanger:function(e,t){return e._queryReplacement.newQuery.promise.then(function(r){var n=(0,g.default)(e.params);return n.q=r,{method:t.method,url:"?"+(0,O.stringify)(n),body:t.body}})}}),r.push({isRelevantTo:function(e){return"POST"===e.method&&/sync(?:\\/u\\/\\d+)?\\/i\\/bv/.test(e.url)},requestChanger:function(e,t){var r,n=JSON.parse(t.body),o=n[1],i=o[4],a=o[10];return 79===o[1]&&"string"==typeof i&&(r=(0,x.default)(z,(0,M.default)(i))[0])?(H&&H.query===i&&H.start!=a?(e._queryReplacement=H,H.start=a):(H&&H.newQuery.resolve(H.query),H=e._queryReplacement={term:r,query:i,start:a,newQuery:(0,C.default)()},s({type:"searchQueryForReplacement",term:r,query:i})),e._queryReplacement.newQuery.promise.then(function(e){return n[1][4]=e,{method:t.method,url:t.url,body:(0,f.default)(n)}})):y.default.resolve(t)}});var K,$=[];document.addEventListener("inboxSDKcustomListRegisterQuery",function(e){$.push(e.detail.query)}),document.addEventListener("inboxSDKcustomListNewQuery",function(e){if(K.query===e.detail.query&&K.start===e.detail.start){var t=e.detail,r=t.newQuery,n=t.newStart;K.newRequestParams.resolve({query:r,start:n})}}),document.addEventListener("inboxSDKcustomListResults",function(e){K.query===e.detail.query&&K.newResults.resolve(e.detail.newResults)}),o.push({isRelevantTo:function(e){var t=e.params;return!!("POST"===e.method&&t.search&&"tl"===t.view&&e.url.match(/^\\?/)&&t.q&&!t.act&&(0,w.default)($,function(e){return e===t.q}))&&(K&&(K.newRequestParams.resolve({query:K.query,start:K.start}),K.newResults.resolve(null)),K=e._customListJob={query:t.q,start:+t.start,newRequestParams:(0,C.default)(),newResults:(0,C.default)()},s({type:"searchForReplacement",query:K.query,start:K.start}),!0)},requestChanger:function(e,t){return e._customListJob.newRequestParams.promise.then(function(r){var n=r.query,o=r.start,i=(0,g.default)(e.params);return i.q=n,i.start=o,{method:t.method,url:"?"+(0,O.stringify)(i),body:t.body}})},responseTextChanger:function(e,t){return s({type:"searchResultsResponse",query:e._customListJob.query,start:e._customListJob.start,response:t}),e._customListJob.newResults.promise.then(function(e){return null===e?t:e})}}),r.push({isRelevantTo:function(e){return!!/sync(?:\\/u\\/\\d+)?\\/i\\/bv/.test(e.url)&&(K&&(K.newRequestParams.resolve({query:K.query,start:K.start}),K.newResults.resolve(null)),!0)},requestChanger:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,v.default)(b.default.mark(function e(t,r){var n,o;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.body){e.next=7;break}if(n=JSON.parse(r.body),o=n&&n[1]&&n[1][4]||"",!(0,w.default)($,function(e){return e===o})){e.next=7;break}return K=t._customListJob={query:o,start:n[1][10],newRequestParams:(0,C.default)(),newResults:(0,C.default)()},s({type:"searchForReplacement",query:K.query,start:K.start}),e.abrupt("return",t._customListJob.newRequestParams.promise.then(function(e){var t=e.query,o=e.start;return n[1][4]=t,n[1][10]=o,{method:r.method,url:r.url,body:(0,f.default)(n)}}));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return e}(),responseTextChanger:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,v.default)(b.default.mark(function e(t,r){return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._customListJob){e.next=5;break}return s({type:"searchResultsResponse",query:t._customListJob.query,start:t._customListJob.start,response:r}),e.abrupt("return",t._customListJob.newResults.promise.then(function(e){return null===e?r:e}));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}));return e}()});var W=function(e){document.head.setAttribute("data-inboxsdk-btai-header",e),s({type:"btaiHeaderReceived"})};r.push({isRelevantTo:function(e){return/sync(?:\\/u\\/\\d+)?\\//.test(e.url)&&!document.head.hasAttribute("data-inboxsdk-btai-header")},originalSendBodyLogger:function(e){e.headers["X-Gmail-BTAI"]&&W(e.headers["X-Gmail-BTAI"])}});var J=function(e){document.head.setAttribute("data-inboxsdk-xsrf-token",e),s({type:"xsrfTokenHeaderReceived"})};r.push({isRelevantTo:function(e){return/sync(?:\\/u\\/\\d+)?\\//.test(e.url)&&!document.head.hasAttribute("data-inboxsdk-xsrf-token")},originalSendBodyLogger:function(e){e.headers["X-Framework-Xsrf-Token"]&&J(e.headers["X-Framework-Xsrf-Token"])}})}function s(e){document.dispatchEvent(new CustomEvent("inboxSDKajaxIntercept",{bubbles:!0,cancelable:!1,detail:e}))}function a(e){var t=(0,g.default)(e),r="=".concat(u(t.to,"to"),"&=").concat(u(t.cc,"cc"),"&=").concat(u(t.bcc,"bcc"));return delete t.to,delete t.bcc,delete t.cc,r+"&"+O.default.stringify(t)}function u(e,t){var r="";if((0,d.default)(e))for(var n=0;n<e.length;n++)r+="&".concat(t,"=").concat(encodeURIComponent(e[n]));else r+="&".concat(t,"=").concat(encodeURIComponent(e));return r}var c=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=o,r.setupGmailInterceptorOnFrames=i;var f=l(e("@babel/runtime-corejs2/core-js/json/stringify")),p=l(e("@babel/runtime-corejs2/core-js/object/keys")),h=l(e("@babel/runtime-corejs2/core-js/object/create")),d=l(e("@babel/runtime-corejs2/core-js/array/is-array")),_=l(e("@babel/runtime-corejs2/core-js/weak-map")),b=l(e("@babel/runtime-corejs2/regenerator")),y=l(e("@babel/runtime-corejs2/core-js/promise")),m=l(e("@babel/runtime-corejs2/core-js/object/assign")),v=l(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),g=l(e("lodash/clone")),j=l(e("lodash/flatten")),w=l(e("lodash/find")),x=l(e("lodash/intersection")),E=l(e("lodash/includes")),S=l(e("bignumber.js")),A=l(e("kefir")),k=c(e("../injected-logger")),T=l(e("../xhr-proxy-factory")),O=c(e("querystring")),L=c(e("./thread-identifier")),I=c(e("../message-metadata-holder")),D=c(e("../../platform-implementation-js/dom-driver/gmail/gmail-response-processor")),R=c(e("../../platform-implementation-js/dom-driver/gmail/gmail-sync-response-processor")),M=l(e("../../common/quoted-split")),C=l(e("../../common/defer")),q=l(e("./modify-suggestions")),P=e("./sync-compose-request-processor")},{"../../common/defer":398,"../../common/quoted-split":401,"../../platform-implementation-js/dom-driver/gmail/gmail-response-processor":426,\n"../../platform-implementation-js/dom-driver/gmail/gmail-sync-response-processor":427,"../injected-logger":414,"../message-metadata-holder":416,"../xhr-proxy-factory":424,"./modify-suggestions":403,"./sync-compose-request-processor":406,"./thread-identifier":408,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/json/stringify":5,"@babel/runtime-corejs2/core-js/object/assign":7,"@babel/runtime-corejs2/core-js/object/create":8,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/object/keys":16,"@babel/runtime-corejs2/core-js/promise":17,"@babel/runtime-corejs2/core-js/weak-map":21,"@babel/runtime-corejs2/helpers/asyncToGenerator":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,"@babel/runtime-corejs2/regenerator":33,"bignumber.js":46,kefir:183,"lodash/clone":335,"lodash/find":341,"lodash/flatten":343,"lodash/includes":349,"lodash/intersection":350,querystring:387}],405:[function(e,t,r){"use strict";function n(){var e=o();document.addEventListener("inboxSDKtellMeIsConversationViewDisabled",function(){e.then(function(e){var t=e.isConversationViewDisabled(),r=document.createEvent("CustomEvent");r.initCustomEvent("inboxSDKgmonkeyResponse",!1,!1,t),document.dispatchEvent(r)})}),document.addEventListener("inboxSDKtellMeCurrentThreadId",function(e){var t;if(e.detail.isPreviewedThread){var r=(0,a.default)(document.querySelectorAll("[gh=tl] tr.aps"));if(r.length>0){var n=r.map(function(e){return e.querySelector("[data-thread-id]")}).filter(Boolean)[0];t=n?n.getAttribute("data-thread-id"):r[0].getAttribute("data-inboxsdk-threadid")}}else t=window.gmonkey&&window.gmonkey.v2&&window.gmonkey.v2.getCurrentThread().getThreadId();t&&(t=t.replace("#",""),e.target.setAttribute("data-inboxsdk-currentthreadid",t))})}function o(){return new s.default(function(e,t){function r(){window.gmonkey?window.gmonkey.load("2.0",e):setTimeout(r,500)}r()})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var s=i(e("@babel/runtime-corejs2/core-js/promise")),a=i(e("@babel/runtime-corejs2/core-js/array/from"))},{"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/promise":17,"@babel/runtime-corejs2/helpers/interopRequireDefault":25}],406:[function(e,t,r){"use strict";function n(e){var t=JSON.parse(e),r=t[2]&&t[2][1];if(!r)return null;var n=r.filter(function(e){var t=e[2]&&e[2][2]&&(e[2][2][14]||e[2][2][2]);return t&&t[1]&&t[1][1]&&t[1][1].indexOf("msg-a:")>-1});if(n.length){var i=n.find(function(e){var t=e[2]&&e[2][2]&&(e[2][2][14]||e[2][2][2]);return t[1][11]&&(0,u.default)(t[1][11],c).length===c.length});if(i){return o((i[2]&&i[2][2]&&(i[2][2][14]||i[2][2][2]))[1],"SEND")}var s=n[0];return o((s[2]&&s[2][2]&&(s[2][2][14]||s[2][2][2]))[1],"DRAFT_SAVE")}var a=r.map(function(e){return e[2]&&e[2][2]&&e[2][2][3]&&e[2][2][3][1]&&e[2][2][3][1][5]&&e[2][2][3][1][5][0]}).filter(Boolean);if(0!==a.length){return o(a[0],"FIRST_DRAFT_SAVE")}}function o(e,t){var r=e[9]&&e[9][2]&&e[9][2][0]&&e[9][2][0][2];return null==r?null:{body:r,type:t,draftID:e[1].replace("msg-a:",""),subject:e[8]}}function i(e,t){if(!t)return e;var r=JSON.parse(e),n=r[2]&&r[2][1];if(!n)return e;var o=n.filter(function(e){var t=e[2]&&e[2][2]&&(e[2][2][14]||e[2][2][2]);return t&&t[1]&&t[1][1]&&t[1][1].indexOf("msg-a:")>-1});if(!o.length)return e;var i=o.find(function(e){var t=e[2]&&e[2][2]&&(e[2][2][14]||e[2][2][2]);return t[1][11]&&(0,u.default)(t[1][11],c).length===c.length});return i?((i[2]&&i[2][2]&&(i[2][2][14]||i[2][2][2]))[1][9][2][0][2]=t,(0,a.default)(r)):e}var s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.getDetailsOfComposeRequest=n,r.replaceEmailBodyForSendRequest=i;var a=s(e("@babel/runtime-corejs2/core-js/json/stringify")),u=s(e("lodash/intersection")),c=["^pfg"]},{"@babel/runtime-corejs2/core-js/json/stringify":5,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"lodash/intersection":350}],407:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:null}function o(e){var t=document.createEvent("MouseEvents"),r={bubbles:!0,cancelable:!0,button:0,pointerX:0,pointerY:0,ctrlKey:!0,altKey:!1,shiftKey:!1,metaKey:!0};t.initMouseEvent("click",r.bubbles,r.cancelable,document.defaultView,r.button,r.pointerX,r.pointerY,r.pointerX,r.pointerY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,null);var o,i=window.open,s=window.onerror,a=n(window.HTMLElement.prototype,"focus"),f=n(window.HTMLElement.prototype,"blur");try{window.HTMLElement.prototype.focus=u.default,window.HTMLElement.prototype.blur=u.default,window.onerror=l;var p=function(e,t,r){o=e;var n={closed:!1,focus:u.default};return setTimeout(function(){n.closed=!0},5),n};if(window.open=p,window.open!==p)return c.error(new Error("Failed to override window.open")),null;e.dispatchEvent(t)}finally{a?window.HTMLElement.prototype.focus=a:delete window.HTMLElement.prototype.focus,f?window.HTMLElement.prototype.blur=f:delete window.HTMLElement.prototype.blur,window.onerror=s,window.open=i}return o}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=o;var a=s(e("lodash/constant")),u=s(e("lodash/noop")),c=i(e("../../injected-logger")),l=(0,a.default)(!0)},{"../../injected-logger":414,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,"lodash/constant":336,"lodash/noop":369}],408:[function(e,t,r){"use strict";function n(){try{u()}catch(e){m.error(e,"Failed to process preloaded thread identifiers")}document.addEventListener("inboxSDKtellMeThisThreadIdByDatabase",function(e){try{var t=l(e.target);t&&e.target.setAttribute("data-inboxsdk-threadid",t)}catch(e){m.error(e,"Error in inboxSDKtellMeThisThreadIdByDatabase")}}),document.addEventListener("inboxSDKtellMeThisThreadIdByClick",function(e){try{var t=f(e.target);t&&e.target.setAttribute("data-inboxsdk-threadid",t)}catch(e){m.error(e,"Error in inboxSDKtellMeThisThreadIdByClick")}})}function o(e){i(b.extractThreads(e))}function i(e){e.forEach(s)}function s(e){var t=a(e);x.has(t)?x.get(t)!==e.gmailThreadId&&x.set(t,w):x.set(t,e.gmailThreadId)}function a(e){return e.subject.trim()+":"+e.timeString.trim()+":"+e.peopleHtml.trim()}function u(){var e=(0,_.default)(document.querySelectorAll("script:not([src])"),function(e){return e.text&&e.text.slice(0,500).indexOf("var VIEW_DATA=[[")>-1});if(e){var t=e.text.indexOf("["),r=e.text.lastIndexOf("]"),n=e.text.slice(t,r+1);i(b.extractThreadsFromDeserialized([b.deserializeArray(n)]))}}function c(e){var t=(0,y.parse)(e).th;if(!t){var r=e.match(/#(.*)/);r&&(e=decodeURIComponent(decodeURIComponent(r[1])),t=(0,y.parse)(e).th)}return t.replace("#","")}function l(e){var t=v.extractMetadataFromThreadRow(e),r=a(t),n=x.get(r);if("string"==typeof n)return n}function f(e){var t=(v.extractMetadataFromThreadRow(e),(0,j.default)(e,function(e){return"DIV"===e.nodeName&&"main"===e.getAttribute("role")}));if(!t)throw new Error("Can\'t operate on disconnected thread row");var r=t.querySelector("td.PE")||t.querySelector("tr"),n=(0,g.default)(e),o=n&&c(n);return r&&(0,g.default)(r),o}var p=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),h=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.setup=n,r.processThreadListResponse=o;var d=h(e("@babel/runtime-corejs2/core-js/map")),_=h(e("lodash/find")),b=p(e("../../../platform-implementation-js/dom-driver/gmail/gmail-response-processor")),y=e("querystring"),m=p(e("../../injected-logger")),v=p(e("./thread-row-parser")),g=h(e("./click-and-get-popup-url")),j=h(e("../../../common/find-parent")),w={name:"AMBIGUOUS"},x=new d.default},{"../../../common/find-parent":399,"../../../platform-implementation-js/dom-driver/gmail/gmail-response-processor":426,"../../injected-logger":414,"./click-and-get-popup-url":407,"./thread-row-parser":409,"@babel/runtime-corejs2/core-js/map":6,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,"lodash/find":341,querystring:387}],409:[function(e,t,r){"use strict";function n(e){var t,r,n;(0,u.default)(e.hasAttribute("id"),"check element is main thread row");var o=[];if(2===(0,a.default)((0,s.default)(e.classList),["zA","apv"]).length){var i=e.nextElementSibling;if(i){var f=i.nextElementSibling;f&&f.classList.contains("apw")||(f=null),t=e.querySelector("td.apt > div.apm > span[title]"),r=i.querySelector("td div.xS div.xT div.y6 > span"),n=e.querySelector("td.apy > div.yW, td.apx > div.yW")}else o.push("failed to find threadRow2")}else{t=e.querySelector("td.xW > span[title]");var p=e.querySelector("td.a4W div[role=link] div.y6");p&&p.children.length>=1&&(r=p.children[0]),n=e.querySelector("td.yX > div.yW")}return t||o.push("failed to find timeSpan"),r||o.push("failed to find subjectSpan"),n||o.push("failed to find peopleDiv"),o.length&&c.error(new Error("Errors in thread row parsing"),{errors:o}),{timeString:t?t.getAttribute("title")||"":"",subject:r?r.textContent:"",peopleHtml:n?(0,l.cleanupPeopleLine)(n.innerHTML):""}}var o=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.extractMetadataFromThreadRow=n;var s=i(e("@babel/runtime-corejs2/core-js/array/from")),a=i(e("lodash/intersection")),u=i(e("assert")),c=o(e("../../injected-logger")),l=e("../../../platform-implementation-js/dom-driver/gmail/gmail-response-processor")},{"../../../platform-implementation-js/dom-driver/gmail/gmail-response-processor":426,"../../injected-logger":414,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,assert:40,"lodash/intersection":350}],410:[function(e,t,r){(function(t){"use strict";function n(e,t){"XMLHttpRequest event listener error"!==t?p.error(e,t):setTimeout(function(){throw e},1)}function o(e){document.dispatchEvent(new CustomEvent("inboxSDKajaxIntercept",{bubbles:!0,cancelable:!1,detail:e}))}function i(){var e=[];t.XMLHttpRequest=(0,h.default)(t.XMLHttpRequest,e,{logError:n});var r;e.push({isRelevantTo:function(e){return!!/sync(?:\\/u\\/\\d+)?\\/suggest/.test(e.url)&&(r=e,!0)},afterListeners:function(e){if(200===e.status&&e.originalSendBody&&e===r){var t=JSON.parse(e.originalSendBody),n=(0,c.default)(t).find(function(e){return"1"!==e}),i=t[n],s=1===(0,c.default)(i).length&&i[1];s&&o({type:"searchSuggestionsReceieved",query:s})}}});var i=!1,s=[];document.addEventListener("inboxSDKcomposeViewIsSending",function(){i=!0,s=[]}),document.addEventListener("inboxSDKcomposeViewSendCanceled",function(){i=!1,s=[]});var a=function(e){i&&(s.push(e),s.length<3||(p.error(new Error("Failed to identify outgoing send request"),{requestPayloadList:(0,f.default)(s)}),i=!1,s=[]))},d=["^pfg","^f_bt","^f_btns","^f_cl"],_=new u.default;e.push({isRelevantTo:function(e){return/sync(?:\\/u\\/\\d+)?\\/i\\/s/.test(e.url)},originalSendBodyLogger:function(e){if(e.originalSendBody){var t=JSON.parse(e.originalSendBody),r=t[2]&&t[2][1];if(!r)return void a(t);var n=r.find(function(e){var t=e[2]&&e[2][2]&&(e[2][2][14]||e[2][2][2]);return t&&t[1]&&t[1][1]&&t[1][1].indexOf("msg-a:")>-1&&t[1][11]&&(0,l.default)(t[1][11],d).length===d.length});if(!n)return void a(t);var u=n[2]&&n[2][2]&&(n[2][2][14]||n[2][2][2]),c=u[1],f=c[1].replace("msg-a:","");c[11];_.set(e,f),o({type:"emailSending",draftID:f}),i=!1,s=[]}},afterListeners:function(e){if(_.has(e)){var t=function(){o({type:"emailSendFailed",draftID:r}),_.delete(e)},r=_.get(e);if(200!==e.status||!e.originalResponseText)return void t();var n=JSON.parse(e.originalResponseText),i=n[2]&&n[2][6];if(!i)return void t();var s=i.find(function(e){return e[1]&&e[1][3]&&e[1][3][7]&&e[1][3][7][1]&&e[1][3][7][1][5]&&e[1][3][7][1][5][0]&&e[1][3][7][1][5][0][14]});if(!s)return void t();o({type:"emailSent",rfcID:(s[1]&&s[1][3]&&s[1][3][7]&&s[1][3][7][1]&&s[1][3][7][1][5]&&s[1][3][7][1][5][0])[14],draftID:r}),_.delete(e)}}});var b=function(e){document.head.setAttribute("data-inboxsdk-btai-header",e),o({type:"btaiHeaderReceived"})};e.push({isRelevantTo:function(e){return/sync(?:\\/u\\/\\d+)?\\//.test(e.url)&&!document.head.hasAttribute("data-inboxsdk-btai-header")},originalSendBodyLogger:function(e){e.headers["X-Gmail-BTAI"]&&b(e.headers["X-Gmail-BTAI"])}});var y=function(e){document.head.setAttribute("data-inboxsdk-xsrf-token",e),o({type:"xsrfTokenHeaderReceived"})};e.push({isRelevantTo:function(e){return/sync(?:\\/u\\/\\d+)?\\//.test(e.url)&&!document.head.hasAttribute("data-inboxsdk-xsrf-token")},originalSendBodyLogger:function(e){e.headers["X-Framework-Xsrf-Token"]&&y(e.headers["X-Framework-Xsrf-Token"])}})}var s=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=i;var u=a(e("@babel/runtime-corejs2/core-js/weak-map")),c=a(e("@babel/runtime-corejs2/core-js/object/keys")),l=a(e("lodash/intersection")),f=a(e("../../common/censorJSONTree")),p=s(e("../injected-logger")),h=a(e("../xhr-proxy-factory"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/censorJSONTree":397,"../injected-logger":414,"../xhr-proxy-factory":424,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/object/keys":16,"@babel/runtime-corejs2/core-js/weak-map":21,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,"lodash/intersection":350}],411:[function(e,t,r){"use strict";function n(){(0,f.default)(document.body).filter(function(e){var t=e.el;return"IFRAME"===t.nodeName&&!t.hasAttribute("src")}).onValue(function(e){e.el.contentDocument.addEventListener("inboxSDKclickAndGetNewIframeSrc",function(e){o(e.target).then(function(t){e.target.dispatchEvent(new CustomEvent("inboxSDKclickAndGetNewIframeSrcResult",{bubbles:!1,cancelable:!1,detail:{type:"success",src:t}}))}).catch(function(t){e.target.dispatchEvent(new CustomEvent("inboxSDKclickAndGetNewIframeSrcResult",{bubbles:!1,cancelable:!1,detail:{type:"error",message:t.message,stack:t.stack}}))})})})}function o(e){var t=d.merge(c.default.later(1e4,null)).take(1).flatMap(function(e){return e?c.default.constant(e):c.default.constantError(new Error("timed out waiting for iframe src set"))}).toPromise();return(0,l.simulateClick)(e),t}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var s=i(e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor")),a=i(e("@babel/runtime-corejs2/core-js/object/get-prototype-of")),u=i(e("lodash/once")),c=i(e("kefir")),l=e("../../platform-implementation-js/lib/dom/simulate-mouse-event"),f=i(e("../../platform-implementation-js/lib/dom/make-element-child-stream")),p=(0,u.default)(function(){return(0,a.default)(document.createElement("iframe"))}),h=(0,u.default)(function(){return(0,s.default)(p(),"src")}),d=c.default.stream(function(e){var t=p(),r=h();return Object.defineProperty(t,"src",{enumerable:!0,configurable:!0,set:function(t){e.emit(t)}}),function(){Object.defineProperty(t,"src",r)}})},{"../../platform-implementation-js/lib/dom/make-element-child-stream":431,"../../platform-implementation-js/lib/dom/simulate-mouse-event":432,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":12,"@babel/runtime-corejs2/core-js/object/get-prototype-of":15,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,kefir:183,"lodash/once":370}],412:[function(e,t,r){"use strict";function n(){document.addEventListener("inboxSDKgetDraftIDforComposeView",function(e){var t=e.target,r=a(t);if(!r)throw new Error("could not retrieve draft ID for compose view");t.setAttribute("data-inboxsdk-draft-id",r)},!0)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/core-js/object/keys")),s=function e(t,r,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=(0,i.default)(t),a=0;a<s.length;a++){var u=t[s[a]];if(r(u))return u;if(o<=n&&u instanceof Object){var c=e(u,r,n,o+1);if(c)return c}}return null},a=function(e){var t=s(e.__cdn.context,function(e){return"string"==typeof e&&e.indexOf("#msg-a:")>-1},3);return t?t.replace("#msg-a:",""):null}},{"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/object/keys":16,"@babel/runtime-corejs2/helpers/interopRequireDefault":25}],413:[function(e,t,r){"use strict";function n(){document.addEventListener("inboxSDKinboxFakeWindowResize",o)}function o(){Object.defineProperty(document.documentElement,"clientWidth",{configurable:!0,value:window.innerWidth-1});var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e),Object.defineProperty(document.documentElement,"clientWidth",{configurable:!0,get:function(){return window.innerWidth}});var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!1),window.dispatchEvent(t)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":10}],414:[function(e,t,r){"use strict";function n(e,t){e||(e=new Error("No error given")),console.error("Error in injected script",e,t);try{(0,a.default)(t)}catch(e){t="<failed to jsonify>"}var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))try{var o=e[n];(0,a.default)(o),r[n]=o}catch(e){}(0,s.default)(r).length>0&&(t={errorProperties:r,details:t}),document.dispatchEvent(new CustomEvent("inboxSDKinjectedError",{bubbles:!1,cancelable:!1,detail:{message:e&&e.message,stack:e&&e.stack,details:t}}))}function o(e,t){try{(0,a.default)(t)}catch(e){t="<failed to jsonify>"}document.dispatchEvent(new CustomEvent("inboxSDKinjectedEventSdkPassive",{bubbles:!1,cancelable:!1,detail:{name:e,details:t}}))}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.error=n,r.eventSdkPassive=o;var s=i(e("@babel/runtime-corejs2/core-js/object/keys")),a=i(e("@babel/runtime-corejs2/core-js/json/stringify"))},{"@babel/runtime-corejs2/core-js/json/stringify":5,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/object/keys":16,"@babel/runtime-corejs2/helpers/interopRequireDefault":25}],415:[function(e,t,r){(function(t){"use strict";if(!t.__InboxSDKInjected){t.__InboxSDKInjected=!0;var r,n=e("./injected-logger");try{"undefined"!=typeof define&&define&&define.amd&&(r=define,define=null);var o=e("./xhr-helper").default,i=e("./setup-data-exposer").default,s=e("./setup-event-reemitter").default,a=e("./setup-error-silencer").default,u=e("./setupCustomViewEventAssassin").default,c=e("./setupPushStateListener").default,l=e("./setupInboxCustomViewLinkFixer").default,f=e("./gmail/setup-gmail-interceptor").default,p=e("./gmail/setup-gmonkey-handler").default,h=e("./inbox/setupClickAndGetNewIframeSrc").default,d=e("./inbox/setupInboxFakeWindowResizeListener").default,_=e("./inbox/setupComposeViewDraftIDFinder").default,b=e("./inbox/setupAjaxInterceptor").default,y=document.location.origin;if("https://mail.google.com"===y)f(),p();else{if("https://inbox.google.com"!==y)throw new Error("Should not happen");h(),d(),_(),b()}o(),i(),s(),a(),u(),c(),l()}catch(e){n.error(e)}finally{r&&(define=r)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./gmail/setup-gmail-interceptor":404,"./gmail/setup-gmonkey-handler":405,"./inbox/setupAjaxInterceptor":410,"./inbox/setupClickAndGetNewIframeSrc":411,"./inbox/setupComposeViewDraftIDFinder":412,"./inbox/setupInboxFakeWindowResizeListener":413,"./injected-logger":414,"./setup-data-exposer":417,"./setup-error-silencer":418,"./setup-event-reemitter":419,"./setupCustomViewEventAssassin":420,"./setupInboxCustomViewLinkFixer":421,"./setupPushStateListener":422,"./xhr-helper":423}],416:[function(e,t,r){"use strict";function n(){document.addEventListener("inboxSDKtellMeThisMessageDate",function(e){o(e,"data-inboxsdk-sortdate",function(e){return e.date})}),document.addEventListener("inboxSDKtellMeThisMessageRecipients",function(e){o(e,"data-inboxsdk-recipients",function(e){return e.recipients?e.recipients:null})})}function o(e,t,r){var n=e.target,o=e.detail,s=o.threadId,u=o.ikValue,c=o.btaiHeader,d=o.xsrfToken;(0,h.default)(l.default.mark(function e(){var o,h;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=(0,p.default)(n.parentElement.children).filter(function(e){return!e.classList.contains("inboxsdk__custom_message_view")}).indexOf(n))<0)){e.next=3;break}throw new Error("Should not happen");case 3:if(null!=(h=i(s,o))&&h.recipients){e.next=16;break}return e.prev=5,e.next=8,a(s,u,c,d);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),m.error(e.t0);case 13:if(null!=(h=i(s,o))){e.next=16;break}throw new Error("Failed to find message date after re-requesting thread");case 16:n.setAttribute(t,(0,f.default)(r(h)));case 17:case"end":return e.stop()}},e,null,[[5,10]])}))().catch(function(e){n.setAttribute(t,"error"),m.error(e)})}function i(e,t){var r=g.get(e);if(r){var n=r[t];if(n)return n}}function s(e){e.forEach(function(e){g.set(e.threadID,e.messages)})}function a(e,t,r,n){var o=j.get(e);if(o)return o;var i=(0,h.default)(l.default.mark(function o(){var i,a;return l.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!(0,_.default)(e,"thread")){o.next=10;break}if(r&&n){o.next=4;break}throw new Error("Need btaiHeader and xsrfToken when in new data layer");case 4:return o.next=6,(0,y.getThreadFromSyncThreadIdUsingHeaders)(e,r,n);case 6:i=o.sent,i&&s([{threadID:i.syncThreadID,messages:i.extraMetaData.syncMessageData.map(function(e){return{date:e.date,recipients:e.recipients}})}]),o.next=14;break;case 10:return o.next=12,(0,v.default)(t,e);case 12:a=o.sent,s((0,b.extractMessages)(a));case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),m.error(o.t0);case 19:return o.prev=19,j.delete(e),o.finish(19);case 22:case"end":return o.stop()}},o,null,[[0,16,19,22]])}))();return j.set(e,i),i}var u=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),c=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.setup=n,r.add=s;var l=c(e("@babel/runtime-corejs2/regenerator")),f=c(e("@babel/runtime-corejs2/core-js/json/stringify")),p=c(e("@babel/runtime-corejs2/core-js/array/from")),h=c(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),d=c(e("@babel/runtime-corejs2/core-js/map")),_=(c(e("querystring")),c(e("lodash/startsWith"))),b=e("../platform-implementation-js/dom-driver/gmail/gmail-response-processor"),y=e("../platform-implementation-js/dom-driver/gmail/gmail-driver/getSyncThreadFromSyncThreadId"),m=u(e("./injected-logger")),v=c(e("../platform-implementation-js/driver-common/requestGmailThread")),g=new d.default,j=new d.default},{"../platform-implementation-js/dom-driver/gmail/gmail-driver/getSyncThreadFromSyncThreadId":425,"../platform-implementation-js/dom-driver/gmail/gmail-response-processor":426,"../platform-implementation-js/driver-common/requestGmailThread":430,"./injected-logger":414,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/json/stringify":5,"@babel/runtime-corejs2/core-js/map":6,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/asyncToGenerator":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,"@babel/runtime-corejs2/regenerator":33,"lodash/startsWith":372,querystring:387}],417:[function(e,t,r){(function(t){"use strict";function n(e){switch(""+e){case"1":case"t":case"true":return!0;default:return!1}}function o(e,t){var r=(0,c.default)(e,function(e){return e[0]===t});return!!r&&n(r[1])}function i(){var e=t;try{if(e.GLOBALS)return e;t.opener&&t.opener.top&&(t.opener.top.location.href,e=t.opener.top)}catch(r){e=t}return e}function s(){var e;(0,f.default)(function(){return(e=i())&&(e.GLOBALS||e.gbar)}).then(function(){if(e){var t=e.GLOBALS?e.GLOBALS[10]:e.gbar._CONFIG[0][10][5];document.head.setAttribute("data-inboxsdk-user-email-address",t);var r=e.GLOBALS?e.GLOBALS[4].split(".")[1]:e.gbar._CONFIG[0][0][4];if(document.head.setAttribute("data-inboxsdk-user-language",r),document.head.setAttribute("data-inboxsdk-using-sync-api",e.GM_SPT_ENABLED),document.head.setAttribute("data-inboxsdk-using-material-ui",e.GM_RFT_ENABLED),e.GLOBALS){document.head.setAttribute("data-inboxsdk-ik-value",e.GLOBALS[9]),document.head.setAttribute("data-inboxsdk-action-token-value",e.GM_ACTION_TOKEN);var n=(0,c.default)(e.GLOBALS[17],function(e){return"p"===e[0]});if(!n)return;var i=n[1],s=o(i,"bx_lab_1252"),a=o(i,"bx_spa"),u=o(i,"bx_spo"),f=s&&a?u?"vertical":"horizontal":"none";document.head.setAttribute("data-inboxsdk-user-preview-pane-mode",f)}else{var p=(0,c.default)(document.querySelectorAll("script:not([src])"),function(e){return e.text&&e.text.slice(0,500).indexOf("window.BT_EmbeddedAppData=[")>-1});if(p){var h=p.text,d=h.indexOf("window.BT_EmbeddedAppData=["),_=h.indexOf("]\\n;",d);-1===_&&(_=h.indexOf("];",d));var b=JSON.parse(h.slice(d+"window.BT_EmbeddedAppData=[".length-1,_+1)),y=b[11];"string"!=typeof y?l.error(new Error("Could not find valid ikValue")):document.head.setAttribute("data-inboxsdk-ik-value",y);var m=b[12];"string"!=typeof m?l.error(new Error("Could not find valid xsrfToken")):document.head.setAttribute("data-inboxsdk-xsrf-token",m)}else l.error(new Error("Could not read preloaded BT_EmbeddedAppData"))}}}).catch(function(t){function r(){return{hasGLOBALS:!!e.GLOBALS,hasGbar:!!e.gbar}}var n=r();throw setTimeout(function(){var e=r();l.eventSdkPassive("waitfor global data",{startStatus:n,waitTime:18e4,laterStatus:e})},18e4),t}).catch(l.error)}var a=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=s;var c=u(e("lodash/find")),l=a(e("./injected-logger")),f=u(e("../platform-implementation-js/lib/wait-for"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../platform-implementation-js/lib/wait-for":435,"./injected-logger":414,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,"lodash/find":341}],418:[function(e,t,r){"use strict";function n(){var e=[];document.addEventListener("inboxSDKsilencePageErrors",function(t){e.push(window.onerror),window.onerror=function(){return!0}}),document.addEventListener("inboxSDKunsilencePageErrors",function(t){window.onerror=e.pop()})}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":10}],419:[function(e,t,r){"use strict";function n(){document.addEventListener("inboxsdk_event_relay",function(e){var t=document.createEvent("Events");if(t.initEvent(e.detail.type,e.detail.bubbles,e.detail.cancelable),(0,i.default)(t,e.detail.props),e.detail.dataTransfer){var r=e.detail.dataTransfer,n=r.files,o=r.fileNames;o&&o.forEach(function(e,t){var r=n[t];"string"!=typeof r.name&&(r.name=e)}),t.dataTransfer={dropEffect:"none",effectAllowed:"all",files:n,items:n.map(function(e,t){return{kind:"file",type:e.type,getAsFile:function(){return n[t]},getAsString:function(){throw new Error("getAsString not supported")}}}),types:["Files"],getData:function(){return""},setData:function(){},setDragImage:function(){}}}e.target.dispatchEvent(t)})}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/core-js/object/assign"))},{"@babel/runtime-corejs2/core-js/object/assign":7,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25}],420:[function(e,t,r){"use strict";function n(e){return{value:e,configurable:!0}}function o(){document.addEventListener("keydown",d,!0)}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=o;var a=s(e("@babel/runtime-corejs2/core-js/object/define-properties")),u=e("ud"),c=s(e("lodash/includes")),l=s(e("closest-ng")),f=i(e("./injected-logger")),p=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageUp","PageDown","Home","End","Enter"],h=["Left","Right","Up","Down"],d=(0,u.defn)(t,function(e){try{if(!document.body.classList.contains("inboxsdk__custom_view_active"))return;var t=e.target,r=e.key||String.fromCharCode(e.which||e.keyCode);if((0,c.default)(p,r)||(0,c.default)(h,e.keyIdentifier)||(0,c.default)("!#[]{}_+=-;:\\r\\n1234567890`~",r)||!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&(0,c.default)(",xsyemrafz.ujkpnl",r)||e.shiftKey&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&(0,c.default)("parfniut",r.toLowerCase())){if((0,l.default)(t,"input, textarea, button, [contenteditable]")||!(0,l.default)(t,".inboxsdk__custom_view")&&(0,l.default)(t,"[role=button], [role=link]"))return;(0,a.default)(e,{altKey:n(!1),ctrlKey:n(!1),shiftKey:n(!1),metaKey:n(!1),charCode:n(92),code:n("Backslash"),key:n("\\\\"),keyCode:n(92),which:n(92)})}}catch(e){f.error(e)}})},{"./injected-logger":414,"@babel/runtime-corejs2/core-js/object/define-properties":9,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,"closest-ng":48,"lodash/includes":349,ud:393}],421:[function(e,t,r){"use strict";function n(){var e=new i.default;document.addEventListener("inboxSDKregisterAllowedHashLinkStartTerm",function(t){var r=t.detail.term;e.add(r)}),document.addEventListener("click",function(t){var r=t.target;if(r instanceof HTMLElement){var n=(0,s.default)(r,\'a[href^="#"]\');if(n&&n instanceof HTMLAnchorElement){var o=/^#([^\\/]+)/.exec(n.getAttribute("href")||"");if(o){var i=o[1];e.has(i)&&(t.preventDefault=function(){})}}}},!0)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/core-js/set")),s=o(e("closest-ng"))},{"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/set":18,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"closest-ng":48}],422:[function(e,t,r){\n"use strict";function n(){var e=history.pushState;history.pushState=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=e.apply(this,r);return document.dispatchEvent(new CustomEvent("inboxSDKpushState",{bubbles:!1,cancelable:!1,detail:{args:r}})),o}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":10}],423:[function(e,t,r){(function(t){"use strict";function n(){document.addEventListener("inboxSDKpageAjax",function(e){var r=e.detail.id,n={url:e.detail.url,method:e.detail.method,headers:e.detail.headers,xhrFields:e.detail.xhrFields,data:e.detail.data};t.fetch?(0,s.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.url,{method:n.method||"GET",credentials:"include"});case 2:return t=e.sent,e.t0=document,e.t1=CustomEvent,e.t2=r,e.next=8,t.text();case 8:e.t3=e.sent,e.t4=t.url,e.t5={id:e.t2,error:!1,text:e.t3,responseURL:e.t4},e.t6={bubbles:!1,cancelable:!1,detail:e.t5},e.t7=new e.t1("inboxSDKpageAjaxDone",e.t6),e.t0.dispatchEvent.call(e.t0,e.t7);case 14:case"end":return e.stop()}},e)}))().catch(function(e){document.dispatchEvent(new CustomEvent("inboxSDKpageAjaxDone",{bubbles:!1,cancelable:!1,detail:{id:r,error:!0,message:e&&e.message,stack:e&&e.stack,status:e&&e.xhr&&e.xhr.status}}))}):(0,a.default)(n).then(function(e){var t=e.text,n=e.xhr;document.dispatchEvent(new CustomEvent("inboxSDKpageAjaxDone",{bubbles:!1,cancelable:!1,detail:{id:r,error:!1,text:t,responseURL:n.responseURL}}))},function(e){document.dispatchEvent(new CustomEvent("inboxSDKpageAjaxDone",{bubbles:!1,cancelable:!1,detail:{id:r,error:!0,message:e&&e.message,stack:e&&e.stack,status:e&&e.xhr&&e.xhr.status}}))})})}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),a=o(e("../common/ajax"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common/ajax":395,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/asyncToGenerator":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/regenerator":33}],424:[function(e,t,r){"use strict";function n(e,t,r){function n(e,t,r){var n={};return(0,f.default)(r).concat(["bubbles","cancelBubble","cancelable","defaultPrevented","preventDefault","stopPropagation","stopImmediatePropagation","lengthComputable","loaded","total","type","currentTarget","target","srcElement","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","eventPhase"]).filter(function(e){return e in r}).forEach(function(o){var i=r[o];n[o]=i===e?t:"function"==typeof i?i.bind(r):i}),n}function o(e,t,r){return function(o){return r.call(t,n(e,t,o))}}function w(e,t){return(0,_.default)(e,function(e){try{return e.isRelevantTo(t)}catch(e){E(e)}})}function x(){var r=this;this._wrappers=t,this._listeners={},this._boundListeners={},this._events=new v.default,this.responseText="",this._openState=!1,e.bind&&e.bind.apply?this._realxhr=new(e.bind.apply(e,[null].concat(arguments))):this._realxhr=new e;var f=this,p=function(e,t){if(r["on"+e])try{o(r._realxhr,r,r["on"+e]).call(r,t)}catch(e){E(e,"XMLHttpRequest event listener error")}(0,d.default)(r._boundListeners[e],function(e){try{e(t)}catch(e){E(e,"XMLHttpRequest event listener error")}})},_=function(e){p("readystatechange",e)};this._fakeRscEvent=function(){_((0,l.default)({bubbles:!1,cancelBubble:!1,cancelable:!1,defaultPrevented:!1,preventDefault:h.default,stopPropagation:h.default,stopImmediatePropagation:h.default,type:"readystatechange",currentTarget:this,target:this,srcElement:this,NONE:0,CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,eventPhase:0}))};var b=function(e){r.readyState=4;var t=200==r.status,o=(0,c.default)({},n(r._realxhr,r,e),{lengthComputable:!1,loaded:0,total:0});(!r._realxhr.responseType||"text"==r._realxhr.responseType)&&(0,d.default)(r._activeWrappers,function(e){if(e.finalResponseTextLogger)try{e.finalResponseTextLogger(r._connection,r.responseText)}catch(e){E(e)}}),_(e),t?p("load",o):p("error",o),p("loadend",o),(0,d.default)(r._activeWrappers,function(e){if(e.afterListeners)try{e.afterListeners(r._connection)}catch(e){E(e)}})};this._realxhr.addEventListener("readystatechange",function(e){if(r._connection){r._realxhr.readyState>=2&&(r._connection.status=r._realxhr.status);var t=!r._realxhr.responseType||"text"==r._realxhr.responseType;if(4==r._realxhr.readyState){if(t){(0,u.default)(r._connection,"originalResponseText",{enumerable:!0,writable:!1,configurable:!1,value:f._realxhr.responseText}),(0,d.default)(r._activeWrappers,function(e){if(e.originalResponseTextLogger)try{e.originalResponseTextLogger(r._connection,r._connection.originalResponseText)}catch(e){E(e)}});var n=(0,y.default)(b.bind(null,e));if(r._connection.async){var o=r._connection;return void(0,a.default)(i.default.mark(function e(){var t,n,a,u,c,l,f,p;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=o.originalResponseText,o.modifiedResponseText=t,n=!0,a=!1,u=void 0,e.prev=5,c=i.default.mark(function e(){var n,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.value,s=setTimeout(function(){console.warn("responseTextChanger is taking too long",n,o)},j),e.prev=2,e.next=5,n(o,t);case 5:t=e.sent;case 6:return e.prev=6,clearTimeout(s),e.finish(6);case 9:if("string"==typeof t){e.next=11;break}throw new Error("responseTextChanger returned non-string value "+t);case 11:if(o.modifiedResponseText=t,o===r._connection){e.next=14;break}return e.abrupt("return","break");case 14:case"end":return e.stop()}},e,null,[[2,,6,9]])}),l=(0,s.default)(r._responseTextChangers);case 8:if(n=(f=l.next()).done){e.next=16;break}return e.delegateYield(c(),"t0",10);case 10:if("break"!==(p=e.t0)){e.next=13;break}return e.abrupt("break",16);case 13:n=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t1=e.catch(5),a=!0,u=e.t1;case 22:e.prev=22,e.prev=23,n||null==l.return||l.return();case 25:if(e.prev=25,!a){e.next=28;break}throw u;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",t);case 31:case"end":return e.stop()}},e,null,[[5,18,22,30],[23,,25,29]])}))().then(function(e){o===f._connection&&(r.responseText=e,n())},function(e){E(e),o===r._connection&&(r.responseText=r._realxhr.responseText,n())}).catch(E)}f.responseText=f._realxhr.responseText}else f.responseText="";b(e)}else{if(1==f._realxhr.readyState&&1==f.readyState)return;f._realxhr.readyState>=3&&t?f._responseTextChangers.length?f.responseText="":f.responseText=f._realxhr.responseText:f.responseText="",f.readyState=f._realxhr.readyState,_(e)}}},!1),["dispatchEvent","getAllResponseHeaders","getResponseHeader","overrideMimeType","responseType","responseXML","responseURL","status","statusText","timeout","ontimeout","onloadstart","onprogress","onabort","upload","withCredentials"].forEach(function(e){(0,u.default)(f,e,{enumerable:!0,configurable:!1,get:function(){return"function"==typeof f._realxhr[e]?f._realxhr[e].bind(f._realxhr):f._realxhr[e]},set:function(t){"function"==typeof t&&(t=o(this._realxhr,this,t)),f._realxhr[e]=t}})}),Object.defineProperty(f,"response",{enumerable:!0,configurable:!1,get:function(){return this._realxhr.responseType&&"text"!=this._realxhr.responseType?this._realxhr.response:this.responseText}}),f.readyState=f._realxhr.readyState}var E=r&&r.logError||function(e,t){setTimeout(function(){throw e},1)};return x.prototype.abort=function(){this._clientStartedSend&&!this._realStartedSend&&(0!=this.readyState&&0==this._realxhr.readyState&&this._realxhr.open(this._connection.method,this._connection.url),this._realStartedSend=!0,this._realxhr.send()),this._realxhr.abort()},x.prototype.setRequestHeader=function(e,t){var r=this;if(1!=this.readyState&&console.warn("setRequestHeader improperly called at readyState "+this.readyState),!this._openState)throw new Error("Can only set headers after open and before send");this._connection.headers[e]=t,this._connection.async&&this._requestChangers.length?this._events.once("realOpen",function(){r._realxhr.setRequestHeader(e,t)}):this._realxhr.setRequestHeader(e,t)},x.prototype.addEventListener=function(e,t){if(this._listeners[e]||(this._listeners[e]=[],this._boundListeners[e]=[]),!(0,b.default)(this._listeners[e],t)){var r=o(this._realxhr,this,t);this._listeners[e].push(t),this._boundListeners[e].push(r),(0,b.default)(["readystatechange","load","error","loadend"],e)||this._realxhr.addEventListener(e,r,!1)}},x.prototype.removeEventListener=function(e,t){if(this._listeners[e]){var r=this._listeners[e].indexOf(t);if(-1!=r){this._listeners[e].splice(r,1);var n=this._boundListeners[e].splice(r,1)[0];"readystatechange"!=e&&this._realxhr.removeEventListener(e,n,!1)}}},x.prototype.open=function(t,r,n){function o(e,t){return i._realxhr.open(e,t,i._connection.async)}if(!(this instanceof x))return e.prototype.open.apply(this,arguments);var i=this;this._connection={method:t,url:r,params:(0,g.parse)(r.split("?")[1]||""),headers:{},async:arguments.length<3||!!n},this._clientStartedSend=!1,this._realStartedSend=!1,this._activeWrappers=w(this._wrappers,this._connection),this._responseTextChangers=this._activeWrappers.map(function(e){return e.responseTextChanger&&e.responseTextChanger.bind(e)}).filter(Boolean),this.responseText="",this._openState=!0,this._connection.async?(this._requestChangers=this._activeWrappers.map(function(e){return e.requestChanger&&e.requestChanger.bind(e)}).filter(Boolean),this._requestChangers.length?1!=this.readyState&&(this.readyState=1,this._fakeRscEvent()):o(t,r)):o(t,r)},x.prototype.send=function(e){function t(e){n._realStartedSend=!0,n._realxhr.send(e)}var r=this,n=this;if(this._clientStartedSend=!0,this._openState=!1,(0,u.default)(this._connection,"originalSendBody",{enumerable:!0,writable:!1,configurable:!1,value:e}),this._connection.responseType=this._realxhr.responseType||"text",(0,d.default)(n._activeWrappers,function(t){if(t.originalSendBodyLogger)try{t.originalSendBodyLogger(n._connection,e)}catch(e){E(e)}}),this._connection.async&&this._requestChangers.length){var o=this._connection,c={method:this._connection.method,url:this._connection.url,body:e};(0,a.default)(i.default.mark(function e(){var t,n,a,u,f,h,d,_;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c,n=!0,a=!1,u=void 0,e.prev=4,f=i.default.mark(function e(){var n,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.value,s=setTimeout(function(){console.warn("requestChanger is taking too long",n,o)},j),e.prev=2,e.next=5,n(r._connection,(0,l.default)(t));case 5:t=e.sent;case 6:return e.prev=6,clearTimeout(s),e.finish(6);case 9:if((0,m.default)((0,p.default)(t,"method"),"modifiedRequest has method"),(0,m.default)((0,p.default)(t,"url"),"modifiedRequest has url"),(0,m.default)((0,p.default)(t,"body"),"modifiedRequest has body"),o===r._connection&&!r._realStartedSend){e.next=14;break}return e.abrupt("return","break");case 14:case"end":return e.stop()}},e,null,[[2,,6,9]])}),h=(0,s.default)(r._requestChangers);case 7:if(n=(d=h.next()).done){e.next=15;break}return e.delegateYield(f(),"t0",9);case 9:if("break"!==(_=e.t0)){e.next=12;break}return e.abrupt("break",15);case 12:n=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(4),a=!0,u=e.t1;case 21:e.prev=21,e.prev=22,n||null==h.return||h.return();case 24:if(e.prev=24,!a){e.next=27;break}throw u;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",t);case 30:case"end":return e.stop()}},e,null,[[4,17,21,29],[22,,24,28]])}))().catch(function(e){return E(e),c}).then(function(e){o!==r._connection||r._realStartedSend||(r._realxhr.open(e.method,e.url),r._events.emit("realOpen"),t(e.body))})}else t(e)},[x,x.prototype].forEach(function(e){(0,c.default)(e,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4})}),x}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/core-js/get-iterator")),a=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=o(e("@babel/runtime-corejs2/core-js/object/define-property")),c=o(e("@babel/runtime-corejs2/core-js/object/assign")),l=o(e("@babel/runtime-corejs2/core-js/object/freeze")),f=o(e("@babel/runtime-corejs2/core-js/object/keys")),p=o(e("lodash/has")),h=o(e("lodash/noop")),d=o(e("lodash/each")),_=o(e("lodash/filter")),b=o(e("lodash/includes")),y=o(e("lodash/once")),m=o(e("assert")),v=o(e("events")),g=e("querystring"),j=6e4},{"@babel/runtime-corejs2/core-js/get-iterator":4,"@babel/runtime-corejs2/core-js/object/assign":7,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/object/freeze":11,"@babel/runtime-corejs2/core-js/object/keys":16,"@babel/runtime-corejs2/helpers/asyncToGenerator":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/regenerator":33,assert:40,events:179,"lodash/each":337,"lodash/filter":340,"lodash/has":346,"lodash/includes":349,"lodash/noop":369,"lodash/once":370,querystring:387}],425:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,p.default)(c.default.mark(function e(t,r){var n,o,s,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.all([t.getPageCommunicator().getBtaiHeader(),t.getPageCommunicator().getXsrfToken()]);case 2:return n=e.sent,o=(0,f.default)(n,2),s=o[0],a=o[1],e.abrupt("return",i(r,s,a));case 7:case"end":return e.stop()}},e)})),o.apply(this,arguments)}function i(e,t,r){return s.apply(this,arguments)}function s(){return s=(0,p.default)(c.default.mark(function e(t,r,n){var o,i,s,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.default)({method:"POST",url:"https://mail.google.com/sync".concat((0,_.default)(),"/i/fd"),headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":n,"X-Gmail-BTAI":r,"X-Google-BTD":"1"},data:(0,u.default)({1:[{1:t,2:1}]})});case 2:if(o=e.sent,i=o.text,s=(0,d.extractThreadsFromThreadResponse)(i),!(s.length>0)){e.next=9;break}if(a=s[0],!a.oldGmailThreadID){e.next=9;break}return e.abrupt("return",a);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e)})),s.apply(this,arguments)}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n,r.getThreadFromSyncThreadIdUsingHeaders=i;var u=a(e("@babel/runtime-corejs2/core-js/json/stringify")),c=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/core-js/promise")),f=a(e("@babel/runtime-corejs2/helpers/slicedToArray")),p=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),h=(e("ud"),a(e("../../../driver-common/gmailAjax"))),d=e("../gmail-sync-response-processor"),_=a(e("../../../driver-common/getAccountUrlPart"))},{"../../../driver-common/getAccountUrlPart":428,"../../../driver-common/gmailAjax":429,"../gmail-sync-response-processor":427,"@babel/runtime-corejs2/core-js/json/stringify":5,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/promise":17,"@babel/runtime-corejs2/helpers/asyncToGenerator":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/slicedToArray":30,"@babel/runtime-corejs2/regenerator":33,ud:393}],426:[function(e,t,r){"use strict";function n(e){var t=l(e).value,r=o(t),n=i(t)||r;if(!r||!n)throw new Error("Failed to read email response");return{threadID:n,messageID:r}}function o(e){var t=A(e,"a",function(e){return e.length>3&&(0,C.default)(e[3])&&e[3].length>0});return t?t[3][0]:null}function i(e){var t=A(e,"csd",function(e){return 3==e.length&&(0,C.default)(e[2])&&e[2].length>5});return t?t[1]:null}function s(e){var t=l(e).value,r=A(t,"cs",function(e){return"cs"===e[0]&&e.length>20});return r?r[1]:null}function a(e){for(var t=0,r=[];;){var n=u(e,t);if(n<0){r.push(e.substr(t));break}if(r.push(e.substr(t,n-t)),r.push(\'"\'),t=n+1,\'"\'===e[n]){var o=c(e,t,\'"\');if(o<0)throw new Error("Unclosed double quote");r.push(e.slice(t,o+1)),t=o+1}else{var i=c(e,t,"\'");if(i<0)throw new Error("Unclosed single quote");var s=e.slice(t,i).replace(/"/g,\'\\\\"\').replace(/\\\\\'/g,"\'");r.push(s),r.push(\'"\'),t=i+1}}return r.join("")}function u(e,t){for(var r=t,n=e.length;r<n;r++)if(\'"\'===e[r]||"\'"===e[r])return r;return-1}function c(e,t,r){for(var n=t,o=e.length;n<o;n++)if("\\\\"===e[n])n++;else if(e[n]===r)return n;return-1}function l(e){var t,r={includeLengths:!1,suggestionMode:/^5\\n/.test(e),noArrayNewLines:!/^[,\\]]/m.test(e),includeExplicitNulls:!0},n=[];if(r.suggestionMode){if(-1===(t=e.indexOf("\'\\n")))throw new Error("Message was missing beginning header");t+=2}else{if(-1===(t=e.indexOf("\\n\\n")))throw new Error("Message was missing beginning newlines");t+=2}for(;t<e.length;){var o=e.indexOf("\\n",t+1);-1===o?o=e.length:"\\r"===e[o-1]&&(o+=1);var i=e.slice(t,o),s=void 0;if(/^\\d+\\s*$/.test(i)){r.includeLengths=!0;var a=+i;s=e.slice(o,o+a),t=o+a}else s=e.slice(t),t=e.length;n.push(p(s))}return{value:n,options:r}}function f(e,t){for(var r,n=[],o=0,i=!1;-1!==(r=c(e,o,\'"\'));)i?n.push(e.slice(o,r+1)):n.push(t(e.slice(o,r+1))),o=r+1,i=!i;if(i)throw new Error("string ended inside quoted section");return n.push(t(e.slice(o))),n.join("")}function p(e){e=e.replace(/[\\r\\n\\t]/g,""),e=a(e),e=f(e,function(e){return e.replace(/,\\s*(?=,|\\])/g,",null").replace(/\\[\\s*(?=,)/g,"[null")});try{return JSON.parse(e,function(e,t){return null==t?void 0:t})}catch(e){throw new Error("deserialization error")}}function h(e,t){return t.suggestionMode?((0,F.default)(t.includeLengths),_(e,t.includeExplicitNulls)):d(e,t)}function d(e,t){for(var r=t.includeLengths,n=t.noArrayNewLines,o=t.includeExplicitNulls,i=")]}\'\\n"+(n&&r?"":"\\n"),s=0;s<e.length;s++){var a=e[s],u=b(a,n,o);if(r){var c=u.length+(n?2:1);i+=(n?"\\n":"")+c+"\\n"+u}else i+=u}if(!r)if(n)i=i.replace(/"([0-9a-f]{8,16})"\\]$/,"\'$1\']");else{var l=i.split(/\\r|\\n/),f=l.slice(0,-3),p=l.slice(-3);i=f.join("\\n"),i+="\\n"+p[0]+p[1].replace(/"/g,"\'")}return i+(n&&r?"\\n":"")}function _(e,t){for(var r="5\\n)]}\'\\n",n=0;n<e.length;n++){var o=e[n],i=b(o,!1,t);r+=i.length+"\\r\\n"+i}return r}function b(e,t,r){for(var n="[",o=0;o<e.length;o++){var i=e[o],s=void 0;s=(0,C.default)(i)?b(i,t,r):null==i?r?"null":"":(0,M.default)(i).replace(/</gim,"\\\\u003c").replace(/=/gim,"\\\\u003d").replace(/>/gim,"\\\\u003e").replace(/&/gim,"\\\\u0026"),o>0&&(n+=","),n+=s}return n+="]"+(t?"":"\\n")}function y(e,t){var r=l(e).value,n=B.default.toArray(r,B.default.compose(B.default.cat,B.default.filter(C.default),B.default.cat,B.default.filter(function(e){return"ms"===e[0]&&e[1]===t}),B.default.take(1),B.default.map(function(e){return e[60]})))[0];if(n){var o=n.match(/^msg-[^:]:(\\S+)$/i);return o&&o[1]}return null}function m(e,t,r){var n=r.start,o=r.total,i=l(e),s=i.value,a=i.options,u=1===s.length&&2===s[0].length&&"string"==typeof s[0][1],c=u?s[0][0].map(function(e){return[e]}):s,f=[],p=[],d=[],_=[],b=!1;c.forEach(function(e){var t=!1,r=[],n=[];e.forEach(function(e){if(o&&"ti"===e[0])if("number"==typeof o)e[2]=e[10]=o;else if("MANY"===o){e[2]=e[10]=1e5,e[3]=1;var i=e[5];e[6]?e[6][0]=[i,1]:console.error("replaceThreadsInResponse(): Missing item[6]")}"tb"===e[0]?(b=t=!0,r.length&&(d=r),_=n):b?n.push(e):r.push(e)}),t||(b?p.push(n):f.push(r))});var y=S(t,n);d.length&&(y[0]=d.concat(y[0]||[])),_.length&&(y.length?y[y.length-1]=y[y.length-1].concat(_):y.push(_));var m=(0,q.default)([f,y,p]),v=(0,q.default)(m),g=(0,P.default)(v);if("e"!==g[0])throw new Error("Failed to find end section");return g[1]=v.length,h(u?[[(0,q.default)(m),s[0][1]]]:m,a)}function v(e){return g(l(e).value)}function g(e){return 1===e.length&&2===e[0].length&&"string"==typeof e[0][1]&&(e=[e[0][0]]),x(e).map(function(e){return(0,R.default)((0,D.default)({subject:(0,V.default)(e[9]),shortDate:(0,V.default)(e[14]),timeString:(0,V.default)(e[15]),peopleHtml:w(e[7]),timestamp:e[16]/1e3,isUnread:e[9].indexOf("<b>")>-1,lastEmailAddress:e[28],bodyPreviewHtml:e[10],someGmailMessageIds:[e[1],e[2]],gmailThreadId:e[0]},"_originalGmailFormat",{value:e}))})}function j(e){var t=l(e),r=t.value;return B.default.toObj(r,U)}function w(e){return e.replace(/^[^<]*/,"").replace(/(<span[^>]*) class="[^"]*"/g,"$1")}function x(e){return B.default.toArray(e,G)}function E(e){var t=l(e),r=t.value;1===r.length&&(r=r[0]);var n=B.default.toArray(r,H),o=B.default.toArray(r,z),i={};return o.forEach(function(e){i[e.messageID]=e}),n.map(function(e){return{threadID:e.threadID,messages:e.messageIDs.map(function(e){return i[e]})}})}function S(e,t){var r=B.default.compose(B.default.map(function(e){return e._originalGmailFormat}),B.default.partition(10),(0,N.default)(function(e,r){return[["tb",t+10*r,e]]}));return B.default.toArray(e,r)}function A(e,t,r){for(var n=k(e,t,100),o=0;o<n.length;o++){var i=n[o].path.slice(0,-1),s=T(e,i);if(r(s))return s}}function k(e,t,r){for(var n=[],o={el:e,path:[]},i=[o];i.length>0;){var s=i.pop();if(s.path.length<=r)if(null!==s.el&&"object"===(0,I.default)(s.el))for(var a=(0,L.default)(s.el),u=0;u<a.length;u++){var c=a[u],l={el:s.el[c],path:s.path.concat([c])};i.push(l)}else s.el===t&&n.push(s)}return n}function T(e,t){for(var r=e,n=0;n<t.length;n++)r=r[t[n]];return r}var O=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.interpretSentEmailResponse=n,r.extractGmailMessageIdFromSentEmail=o,r.extractGmailThreadIdFromSentEmail=i,r.extractGmailThreadIdFromMessageIdSearch=s,r.rewriteSingleQuotes=a,r.deserialize=l,r.deserializeArray=p,r.serialize=h,r.readDraftId=y,r.replaceThreadsInResponse=m,r.extractThreads=v,r.extractThreadsFromDeserialized=g,r.extractMessageIdsFromThreadBatchRequest=j,r.cleanupPeopleLine=w,r.extractMessages=E;var L=O(e("@babel/runtime-corejs2/core-js/object/keys")),I=O(e("@babel/runtime-corejs2/helpers/typeof")),D=O(e("@babel/runtime-corejs2/core-js/object/define-property")),R=O(e("@babel/runtime-corejs2/core-js/object/freeze")),M=O(e("@babel/runtime-corejs2/core-js/json/stringify")),C=O(e("@babel/runtime-corejs2/core-js/array/is-array")),q=O(e("lodash/flatten")),P=O(e("lodash/last")),B=O(e("transducers.js")),N=O(e("map-indexed-xf")),F=O(e("assert")),V=O(e("../../../common/html-to-text")),U=B.default.compose(B.default.cat,B.default.cat,B.default.filter(function(e){return"cs"===e[0]}),B.default.map(function(e){return[e[1],e[2]]})),G=B.default.compose(B.default.cat,B.default.filter(function(e){return"tb"===e[0]}),B.default.map(function(e){return e[2]}),B.default.cat),H=B.default.compose(B.default.cat,B.default.filter(function(e){return"cs"===e[0]}),B.default.map(function(e){return{threadID:e[1],messageIDs:e[8]}})),z=B.default.compose(B.default.cat,B.default.filter(function(e){return"ms"===e[0]}),B.default.map(function(e){return{messageID:e[1],date:e[7]}}))},{"../../../common/html-to-text":400,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/json/stringify":5,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/object/freeze":11,"@babel/runtime-corejs2/core-js/object/keys":16,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/typeof":32,assert:40,"lodash/flatten":343,"lodash/last":367,"map-indexed-xf":380,"transducers.js":392}],427:[function(e,t,r){"use strict";function n(e){var t=JSON.parse(e),r=t&&t[3];return r?r.map(function(e,r){var n=e[1];return n?{subject:n[1],snippet:n[2],syncThreadID:n[4],oldGmailThreadID:null!=n[18]?new f.default(n[18]).toString(16):n[20],rawResponse:e,extraMetaData:{snippet:t[15]&&t[15][1]&&t[15][1][r]||"",syncMessageData:n[5].map(function(e){return{syncMessageID:e[1],date:+e[7]}})}}:null}).filter(Boolean):[]}function o(e){var t=JSON.parse(e),r=t&&t[2];if(!r)throw new Error("Failed to process thread response");return r.map(function(e){if("string"!=typeof e[1]||!(0,l.default)(e[3])||e[2]&&e[2][1]&&e[2][1][14]&&(0,l.default)(e[2][2])){var t=e[2]&&e[2][1];if(!t)return null;var r,n=(0,l.default)(e[3])&&e[3];if(n)r=n.map(function(e){return{syncMessageID:e[1],date:+e[2][17],recipients:i(e)}});else{r=(e[2]&&e[2][2]).map(function(e){return{syncMessageId:e[1],date:+e[16]}})}return{subject:t[2],snippet:t[3],syncThreadID:t[1],oldGmailThreadID:new f.default(t[14]).toString(16),rawResponse:e,extraMetaData:{syncMessageData:r,snippet:""}}}return{syncThreadID:e[1],oldGmailThreadID:e[2]&&e[2][1]&&e[2][1][16]||void 0,extraMetaData:{snippet:e[2]&&e[2][1]&&e[2][1][3]||void 0,syncMessageData:(e[3]||[]).filter(function(e){return Boolean(e[2])}).map(function(e){return{syncMessageID:e[1],date:+e[2][17],recipients:i(e)}})}}}).filter(Boolean)}function i(e){if(e[2]){var t=e[2][1]||[],r=e[2][2]||[],n=e[2][3]||[];return t.concat(r).concat(n).map(function(e){return{emailAddress:e[2],name:e[3]}})}}function s(e,t,r){var n=(r.start,r.total,JSON.parse(e));return(n[3]||t.length)&&(n[3]=t.map(function(e,t){var r=e.rawResponse;return(0,c.default)({},r,{2:t})})),(n[15]||t.length)&&(n[15]=(0,c.default)({},n[15],{1:t.map(function(e){return e.extraMetaData.snippet}),2:t.map(function(e){return e.extraMetaData.syncMessageData.map(function(e){return e.syncMessageID})})})),(0,u.default)(n)}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.extractThreadsFromSearchResponse=n,r.extractThreadsFromThreadResponse=o,r.replaceThreadsInSearchResponse=s;var u=a(e("@babel/runtime-corejs2/core-js/json/stringify")),c=a(e("@babel/runtime-corejs2/helpers/objectSpread")),l=a(e("@babel/runtime-corejs2/core-js/array/is-array")),f=a(e("bignumber.js"))},{"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/json/stringify":5,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/objectSpread":29,"bignumber.js":46}],428:[function(e,t,r){"use strict";function n(){var e=document.location.pathname.match(/\\/b\\/(.+?)\\/u\\/(\\d+)/);if(e){var t=e[1];return"/u/".concat(e[2],"/d/").concat(t)}var r=document.location.pathname.match(/(\\/u\\/\\d+)\\//i);return r?r[1]:"/u/0"}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":10}],429:[function(e,t,r){"use strict";function n(e){return o.apply(this,arguments)}function o(){return o=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(/^https:\\/\\/mail\\.google\\.com(?:$|\\/)/.test(t.url)){e.next=2;break}throw new Error("Should not happen: gmailAjax called with non-gmail url");case 2:if("https://mail.google.com"!==document.location.origin){e.next=6;break}return e.next=5,_(t);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.next=9,_((0,a.default)({},t,{canRetry:!1}));case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(6),!e.t0||0!==e.t0.status){e.next=27;break}return e.prev=15,e.next=18,l.default.fromPromise((0,f.default)("https://mail.google.com/mail/u/0/")).merge(l.default.later(d)).take(1).takeErrors(1).toPromise();case 18:e.next=22;break;case 20:e.prev=20,e.t1=e.catch(15);case 22:return e.next=24,_(t);case 24:return e.abrupt("return",e.sent);case 27:if(!(e.t0&&"number"==typeof e.t0.status&&e.t0.status>=500)){e.next=33;break}return e.next=30,_(t);case 30:return e.abrupt("return",e.sent);case 33:throw e.t0;case 34:case"end":return e.stop()}},e,null,[[6,12],[15,20]])})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime-corejs2/regenerator")),a=i(e("@babel/runtime-corejs2/helpers/objectSpread")),u=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=e("ud"),l=i(e("kefir")),f=i(e("../lib/imageRequest")),p=i(e("../../common/rate-limit-queuer")),h=i(e("../../common/ajax")),d=6e4,_=(0,p.default)(h.default,1e3,7),b=(0,c.defn)(t,n);r.default=b},{"../../common/ajax":395,"../../common/rate-limit-queuer":402,"../lib/imageRequest":433,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/asyncToGenerator":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/objectSpread":29,"@babel/runtime-corejs2/regenerator":33,kefir:183,ud:393}],430:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,a.default)(s.default.mark(function e(t,r){var n,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={ui:2,ik:t,view:"cv",th:r,pcd:1,mb:0,rt:"c",search:"inbox",type:r},e.next=3,(0,l.default)({method:"POST",url:"https://mail.google.com/mail".concat((0,f.default)(),"?").concat(c.default.stringify(n)),canRetry:!0});case 3:return o=e.sent,i=o.text,e.abrupt("return",i);case 6:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime-corejs2/regenerator")),a=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=e("ud"),c=i(e("querystring")),l=i(e("./gmailAjax")),f=i(e("./getAccountUrlPart")),p=(0,u.defn)(t,n);r.default=p},{"./getAccountUrlPart":428,"./gmailAjax":429,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/asyncToGenerator":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/regenerator":33,querystring:387,ud:393}],431:[function(e,t,r){"use strict";function n(e){if(!e||!e.nodeType)throw new Error("Expected element, got "+String(e));return c.stream(function(t){function r(e){if(1===e.nodeType){i.has(e)&&o(new Error("Already had removalStream for element with class "+e.className));var r=(0,l.default)();i.set(e,r);try{t.emit({el:e,removalStream:r})}catch(e){o(e)}}}function n(e){if(1===e.nodeType){var t=i.get(e);if(i.delete(e),t)try{t.destroy()}catch(e){o(e)}else o(new Error("Could not find removalStream for element with class "+e.className))}}var i=new a.default,s=!1,c=new MutationObserver(function(e){e.forEach(function(e){Array.prototype.forEach.call(e.addedNodes,r),Array.prototype.forEach.call(e.removedNodes,n)})});return(0,u.default)(function(){s||(c.observe(e,{childList:!0}),Array.prototype.slice.call(e.children).forEach(r))}),function(){s=!0,c.disconnect(),(0,u.default)(function(){i.forEach(function(e){e.destroy()})})}})}function o(e){setTimeout(function(){throw e},1)}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var a=s(e("@babel/runtime-corejs2/core-js/map")),u=s(e("asap")),c=i(e("kefir")),l=s(e("kefir-stopper"))},{"@babel/runtime-corejs2/core-js/map":6,"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"@babel/runtime-corejs2/helpers/interopRequireWildcard":26,asap:38,kefir:183,"kefir-stopper":182}],432:[function(e,t,r){"use strict";function n(e,t){var r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,0,e.offsetLeft,e.offsetTop,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}function o(e){\nn(e,"mouseover")}function i(e){n(e,"mousedown"),n(e,"mouseup"),n(e,"click"),n(e,"mouseleave"),n(e,"mouseout"),e.blur()}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n,r.simulateHover=o,r.simulateClick=i},{"@babel/runtime-corejs2/core-js/object/define-property":10}],433:[function(e,t,r){"use strict";function n(e){return new i.default(function(t,r){var n=new Image;n.addEventListener("load",function(){return t(n)}),n.addEventListener("error",r),n.src=e})}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/promise":17,"@babel/runtime-corejs2/helpers/interopRequireDefault":25}],434:[function(e,t,r){"use strict";function n(e){var t=new s.default;return t.update("bdnanNrDjv"+e),t.digest("hex").slice(0,32)}function o(e){return"f471fe7b7343b47a202437c3962cc335"===n(e)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=o;var s=i(e("sha.js/sha256"))},{"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/helpers/interopRequireDefault":25,"sha.js/sha256":391}],435:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12e4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,n=new Error("waitFor timeout");return new i.default(function(o,i){function s(){try{var u=e();u?o(u):a>=t?i(n):(a+=r,setTimeout(s,r))}catch(e){i(e)}}var a=0;setTimeout(s,1)})}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":10,"@babel/runtime-corejs2/core-js/promise":17,"@babel/runtime-corejs2/helpers/interopRequireDefault":25}]},{},[415]);\n//# sourceMappingURL=https://www.inboxsdk.com/build//injected.js.map\n',r=!0
;try{r="true"!==localStorage.getItem("inboxsdk__enable_sourcemap")}catch(e){console.error(e)}var n=[];r?n.push(t.replace(/\/\/# sourceMappingURL=(?!data:)[^\n]*\n?$/,"")):n.push(t),n.push("\n//# sourceURL=https://www.inboxsdk.com/build/injected.js\n");var i=n.join("");e.text=i,document.head.appendChild(e).parentNode.removeChild(e),document.head.setAttribute("data-inboxsdk-script-injected","true")}return o.default.later(0,null).merge((0,a.default)(document.head,{attributes:!0})).filter(function(){return document.head.hasAttribute("data-inboxsdk-user-email-address")}).take(1).map(function(){return null}).toPromise()});t.hot&&t.hot.accept();var l=s;r.default=l},{"./dom/make-mutation-observer-chunked-stream":815,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"lodash/once":489}],839:[function(e,t,r){"use strict";function n(){var e=(0,l.default)(['\n<div contenteditable="false" class="inboxsdk__compose_linkChip"\nstyle="width: 396px; height: 18px; max-height: 18px; padding: 5px; color: rgb(34, 34, 34); font-family: arial; font-style: normal; font-weight: bold; font-size: 13px; cursor: default; border: 1px solid rgb(221, 221, 221); line-height: 1; background-color: rgb(245, 245, 245);" hspace="inboxsdk__chip_main">\n  <a href="','" target="_blank" style=" display:inline-block; max-width: 366px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-height: 1.2em; text-decoration: none; cursor: pointer; padding: 1px 0; border: none; ">\n    ','\n    <span dir="ltr" style="color: rgb(17, 85, 204); text-decoration: none; vertical-align: bottom;">',"</span>\n  </a>\n</div>\n"]);return n=function(){return e},e}function i(){var e=(0,l.default)(['\n<img style="height:16px; width:16px; vertical-align: bottom; border: none;" height="16px" width="16px" src="','">&nbsp;\n']);return i=function(){return e},e}function o(e){var t=document.createElement("div"),r=e.iconUrl?(0,c.default)(i(),e.iconUrl):"",o=(0,c.default)(n(),e.url,{__html:r},e.text);return t.innerHTML=o,t.children[0]}var a=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),u=a(e("ud")),c=s(e("auto-html")),d=u.defn(t,function(e,t){e.focus();var r=o(t),n=document.createDocumentFragment();return n.appendChild(document.createTextNode("​")),n.appendChild(r),n.appendChild(document.createTextNode("​")),e.insertBodyHTMLAtCursor(n),e.isFullscreen()||e.isInlineReplyForm()||document.activeElement===e.getBodyElement()||(e.setMinimized(!0),e.setMinimized(!1)),e.focus(),r}),f=d;r.default=f},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":56,"auto-html":83,ud:597}],840:[function(e,t,r){"use strict";function n(e){var t=new s.default;return t.update("YlEHtGl72+c"+e),t.digest("hex")}function i(e){if(l.has(n(e)))return!0;var t=u.exec(e);if(!t)return!1;var r=t[1],i=t[2],o=new s.default;return o.update(r),o.digest("hex").slice(0,10)===i}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=i;var a=o(e("@babel/runtime-corejs2/core-js/set")),s=o(e("sha.js/sha1")),l=new a.default(["b540a2819e4b26823288046869e5577852178d69","220077d641d018c9707db9e0fa31f52e687bffc3","1e9084cb394369dcdfd43cfcd84d17b78b0903dd","a9b816b86b6085eb0b80315da6b2297ff30cf7b6","5140e277522fd95ece3d540c94b97f443bcc3256","b56a2d6e6f650ed6eae78774d3b1f02d969d8485","bc6308648a588258f31f8f4b64f7c4652b6fcaac","4cb8e6bd1aab0b4b05c7f07fbe8332b842009358"]),u=/^sdk_(.{5,15})_([0-9a-f]{10})$/},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"sha.js/sha1":590}],841:[function(e,t,r){"use strict";function n(e){return null!=e&&i.test(e)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var i=/^([^<>()[\]\\,;:\s"]+|".+")@[^\s<>]+$/},{"@babel/runtime-corejs2/core-js/object/define-property":14}],842:[function(e,t,r){"use strict";function n(e){var t=new a.default;return t.update("bdnanNrDjv"+e),t.digest("hex").slice(0,32)}function i(e){return"f471fe7b7343b47a202437c3962cc335"===n(e)}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=i;var a=o(e("sha.js/sha256"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"sha.js/sha256":591}],843:[function(e,t,r){(function(t){"use strict";function n(){var e="undefined"!=typeof document&&document.documentElement.getAttribute("data-inboxsdk-active-app-ids")||"[]";return JSON.parse(e)}function i(e,t,r,i){if(B.push((0,x.default)({appId:e,version:t.appVersion||void 0})),document.documentElement.setAttribute("data-inboxsdk-active-app-ids",(0,j.default)(n().concat([{appId:e,version:t.appVersion||void 0}]))),!_&&(_=r,v=i,q=t.eventTracking,t.globalErrorLogging)){Error.stackTraceLimit<40&&(Error.stackTraceLimit=40),window.addEventListener("error",function(e){e.error&&$.error(e.error,"Uncaught exception")}),l(window,"setTimeout",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return"function"==typeof r[0]&&(r[0]=s(r[0],"setTimeout callback")),e.apply(this,r)}}),l(window,"setInterval",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return"function"==typeof r[0]&&(r[0]=s(r[0],"setInterval callback")),e.apply(this,r)}});var o=window.EventTarget&&window.EventTarget.prototype||window.Node.prototype;l(o,"addEventListener",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if("function"==typeof r[1])try{var i=r[1].__inboxsdk_logged;i||(i=s(r[1],"event listener"),r[1].__inboxsdk_logged=i),r[1]=i}catch(e){console.error("Failed to error wrap function",e)}return e.apply(this,r)}}),l(o,"removeEventListener",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return"function"==typeof r[1]&&r[1].__inboxsdk_logged&&(r[1]=r[1].__inboxsdk_logged),e.apply(this,r)}}),l(window,"MutationObserver",function(e){function t(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return"function"==typeof r[0]&&(r[0]=s(r[0],"MutationObserver callback")),e.bind&&e.bind.apply?new(e.bind.apply(e,[null].concat(r))):new e(r[0])}return e=e||window.WebKitMutationObserver,t.prototype=e.prototype,t})}}function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t?B:n();if(e){var i=r.slice(),o=!1;return i.forEach(function(t,r){o||t.appId!==e||(o=!0,i[r]=(0,E.default)({},t,{causedBy:!0})),(0,x.default)(i[r])}),(0,x.default)(i)}return r}function a(e,t,r,n){(0,P.default)(e,t,{appId:r,sentByApp:n,appIds:o(r),loaderVersion:_,implVersion:v,userEmailHash:g,isUsingSyncAPI:F,isUsingMaterialGmailUI:U})}function s(e,t){var r=t?"Uncaught error in "+t:"Uncaught error";return function(){for(var t=this,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return $.run(function(){return e.apply(t,i)},r)}}function l(e,t,r){var n=r(e[t]);n.__original=e[t],e[t]=n}function u(e){var t=new M.default;return t.update("inboxsdk:"+e),t.digest("hex")}function c(e,t,r,n){if(n&&"object"!=(0,k.default)(n))throw new Error("properties must be object or null: "+n);var i={type:t,event:r,timestamp:1e3*(0,A.default)(),origin:document.location.origin,sessionId:H,emailHash:g,loaderVersion:_,implementationVersion:v,isUsingSyncAPI:F,isUsingMaterialGmailUI:U,properties:n};"gmail"!=t?(0,S.default)(i,{extensionId:(0,L.default)(),appIds:o(e)}):(0,S.default)(i,{appIds:o(null,!1)}),"undefined"!=typeof document&&(G.add(i),document.documentElement.setAttribute("data-inboxsdk-last-event",""+(0,A.default)()))}function d(e){return(0,A.default)()+6e5>e}function f(){return p.apply(this,arguments)}function p(){return p=(0,w.default)(y.default.mark(function e(){var t,r,n;return y.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.default)({url:"https://www.inboxsdk.com/api/v2/events/oauth"});case 2:return t=e.sent,r=t.text,n=JSON.parse(r),d(n.expirationDate)&&(console.warn("Got an apparently already expired token. Assuming our clock is busted..."),n.expirationDate=(0,A.default)()+18e5),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)})),p.apply(this,arguments)}function h(){return m.apply(this,arguments)}function m(){return m=(0,w.default)(y.default.mark(function e(){var t;return y.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=J)||d(t.expirationDate)){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,f();case 7:return J=e.sent,e.abrupt("return",J);case 9:case"end":return e.stop()}},e)})),m.apply(this,arguments)}var b=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.hashEmail=u,r.default=void 0;var _,v,g,y=b(e("@babel/runtime-corejs2/regenerator")),w=b(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),k=b(e("@babel/runtime-corejs2/helpers/typeof")),j=b(e("@babel/runtime-corejs2/core-js/json/stringify")),x=b(e("@babel/runtime-corejs2/core-js/object/freeze")),E=b(e("@babel/runtime-corejs2/helpers/objectSpread")),S=b(e("@babel/runtime-corejs2/core-js/object/assign")),C=b(e("@babel/runtime-corejs2/helpers/classCallCheck")),I=b(e("@babel/runtime-corejs2/helpers/createClass")),T=b(e("@babel/runtime-corejs2/helpers/defineProperty")),A=b(e("@babel/runtime-corejs2/core-js/date/now")),D=b(e("@babel/runtime-corejs2/core-js/set")),M=b(e("sha.js/sha256")),R=b(e("../../common/ajax")),L=b(e("../../common/get-extension-id")),O=b(e("../../common/get-session-id")),P=b(e("../../common/log-error")),V=b(e("./persistent-queue")),N=b(e("./dom/make-mutation-observer-stream")),B=[],q=!1,U=void 0,F=void 0,H=(0,O.default)(),z=new D.default,W=function(){return"undefined"==typeof document||!document.documentElement.hasAttribute("data-inboxsdk-master-claimed")&&(document.documentElement.setAttribute("data-inboxsdk-master-claimed","true"),!0)}(),G=new V.default("events"),K=(0,A.default)(),$=function(){function e(t,r,n,o){var a=this;(0,C.default)(this,e),(0,T.default)(this,"_appId",void 0),(0,T.default)(this,"_isMaster",void 0),i(t,r,n,o),this._appId=t,this._isMaster=function(){return!(!q||"undefined"!=typeof document&&document.documentElement.hasAttribute("data-inboxsdk-app-logger-master-chosen"))&&(document.documentElement.setAttribute("data-inboxsdk-app-logger-master-chosen","true"),!0)}(),this._isMaster&&"undefined"!=typeof document&&(document.addEventListener("inboxSDKinjectedError",function(e){var t=e.detail;a.error((0,S.default)(new Error(t.message),{stack:t.stack}),t.details)}),document.addEventListener("inboxSDKinjectedEventSdkPassive",function(e){var t=e.detail;a.eventSdkPassive(t.name,t.details)}))}return(0,I.default)(e,[{key:"setUserEmailAddress",value:function(e){g=u(e)}},{key:"shouldTrackEverything",value:function(){return"ca05afe92819df590a4196c31814fdb24050e8f49d8a41613f3d6cfb5729c785"===g}},{key:"setIsUsingMaterialGmailUI",value:function(e){U=e}},{key:"setIsUsingSyncAPI",value:function(e){F=e}},{key:"run",value:function(e,t){try{return e()}catch(e){throw this.error(e,t),e}}},{key:"error",value:function(e,t){a(e,t,this._appId,!1)}},{key:"errorApp",value:function(e,t){a(e,t,this._appId,!0)}},{key:"errorSite",value:function(e,t){this._isMaster&&this.error(e,t)}},{key:"eventApp",value:function(e,t){c(this._appId,"app",e,t)}},{key:"eventSdkActive",value:function(e,t){q&&c(this._appId,"sdkActive",e,t)}},{key:"eventSdkPassive",value:function(e,t){c(this._appId,"sdkPassive",e,t)}},{key:"eventSite",value:function(e,t){this._isMaster&&c(null,"gmail",e,t)}},{key:"deprecationWarning",value:function(e,t){console.warn("InboxSDK: ".concat(e," is deprecated.")+(t?" Please use ".concat(t," instead."):""));var r=e+(t?":"+t:"");z.has(r)||(this.eventSdkPassive("deprecated.".concat(e)),z.add(r))}},{key:"getAppLogger",value:function(){var e=this;return{error:function(t,r){return e.errorApp(t,r)},event:function(t,r){return e.eventApp(t,r)}}}},{key:"trackFunctionPerformance",value:function(e,t,r){var n=this;if(Math.random()<t&&"visible"===document.visibilityState&&this._isMaster){var i=(0,A.default)();e(),setTimeout(function(){var e=(0,A.default)();n.eventSdkPassive("function performance result",(0,E.default)({value:e-i,timeSinceFirstLoad:e-K},r))},10)}else e()}}],[{key:"run",value:function(t,r){try{return t()}catch(t){throw e.error(t,r),t}}},{key:"error",value:function(e,t){a(e,t,void 0,!1)}}]),e}();r.default=$;var J=null;W&&"undefined"!=typeof document&&"undefined"!=typeof MutationObserver&&(0,N.default)(document.documentElement,{attributes:!0,attributeFilter:["data-inboxsdk-last-event"]}).map(function(){return null}).throttle(12e4).onValue(function(){var e=G.removeAll();0!==e.length&&(0,w.default)(y.default.mark(function r(){var n,i,o;return y.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h();case 2:return n=r.sent,i=n.oauthToken,o="AIzaSyAwlvUR2x3OnCeas8hW8NDzVMswL5hZGg8",r.next=7,(0,R.default)({url:"https://pubsub.googleapis.com/v1/projects/mailfoogae/topics/events:publish?key=".concat(encodeURIComponent(o)),method:"POST",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},data:(0,j.default)({messages:[{data:t.from((0,j.default)({data:e,timestamp:1e3*(0,A.default)()})).toString("base64")}]})});case 7:case"end":return r.stop()}},r)}))().catch(function(e){$.error(e,{type:"Failed to log events"})})})}).call(this,e("buffer").Buffer)},{"../../common/ajax":604,"../../common/get-extension-id":610,"../../common/get-session-id":612,"../../common/log-error":616,"./dom/make-mutation-observer-stream":816,"./persistent-queue":845,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/assign":11,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/typeof":58,"@babel/runtime-corejs2/regenerator":59,buffer:94,"sha.js/sha256":591}],844:[function(e,t,r){"use strict";function n(e,t){var r=(0,s.default)(null);return(0,l.default)(e.split("/"),t.split("/")).forEach(function(e,t){var n=(0,a.default)(e,2),i=n[0],o=n[1];":"===i[0]&&(r[i.slice(1)]=decodeURIComponent(o.replace(/\+/g," ")))}),(0,o.default)(r)}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/object/freeze")),a=i(e("@babel/runtime-corejs2/helpers/slicedToArray")),s=i(e("@babel/runtime-corejs2/core-js/object/create")),l=i(e("lodash/zip"))},{"@babel/runtime-corejs2/core-js/object/create":12,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/slicedToArray":54,"lodash/zip":505}],845:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/json/stringify")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=function(){function e(t){(0,o.default)(this,e),(0,s.default)(this,"_fallbackQueue",[]),(0,s.default)(this,"_sid",void 0),this._sid="inboxsdk__persistentqueue_"+t}return(0,a.default)(e,[{key:"_getSavedQueue",value:function(){var e=JSON.parse(localStorage.getItem(this._sid));return null==e&&(e=[]),e}},{key:"_putSavedQueue",value:function(e){localStorage.setItem(this._sid,(0,i.default)(e))}},{key:"_clearSavedQueue",value:function(){localStorage.removeItem(this._sid)}},{key:"add",value:function(e){var t=!1;if("undefined"!=typeof localStorage)try{var r=this._getSavedQueue();r.push(e),this._putSavedQueue(r),t=!0}catch(e){}t||this._fallbackQueue.push(e)}},{key:"remove",value:function(){var e;if("undefined"!=typeof localStorage)try{var t=this._getSavedQueue(),r=t.shift();this._putSavedQueue(t),e=r}catch(e){}return void 0===e&&(e=this._fallbackQueue.shift()),e}},{key:"removeAll",value:function(){var e=void 0;if("undefined"!=typeof localStorage)try{var t=this._getSavedQueue();this._clearSavedQueue(),e=t}catch(e){}return void 0===e&&(e=[]),e=e.concat(this._fallbackQueue),this._fallbackQueue=[],e}},{key:"peekAll",value:function(){var e=void 0;if("undefined"!=typeof localStorage)try{e=this._getSavedQueue()}catch(e){}return void 0===e&&(e=[]),e=e.concat(this._fallbackQueue)}},{key:"clear",value:function(){if("undefined"!=typeof localStorage)try{this._clearSavedQueue()}catch(e){}this._fallbackQueue.length=0}}]),e}();r.default=l},{"@babel/runtime-corejs2/core-js/json/stringify":6,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],846:[function(e,t,r){"use strict";function n(e,t){var r=t||{},n=new a.default,i=e.replace(/:([^\/]+)/g,function(e,t){if(t in r)return n.add(t),encodeURIComponent(String(r[t]));throw new Error("Missing param: ".concat(t))});if((0,o.default)(r).length!==n.size)throw new Error("Extra parameters given");return i}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/object/keys")),a=i(e("@babel/runtime-corejs2/core-js/set"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],847:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=n(e("react")),f=function(e){function t(){var e,r;(0,i.default)(this,t);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return r=(0,a.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(o))),(0,c.default)((0,l.default)(r),"props",void 0),(0,c.default)((0,l.default)(r),"_content",void 0),(0,c.default)((0,l.default)(r),"_contentRefCb",function(e){e&&(r._content=e)}),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this._content.appendChild(this.props.el)}},{key:"componentDidUpdate",value:function(e){if(e.el!==this.props.el){for(;this._content.lastElementChild;)this._content.lastElementChild.remove();this._content.appendChild(this.props.el)}}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||this.props.el!==e.el}},{key:"render",value:function(){return d.default.createElement("div",{className:this.props.className,ref:this._contentRefCb})}}]),t}(d.default.Component);r.default=f},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,react:580}],848:[function(e,t,r){"use strict";function n(e){return e.replace(/\.IDMAP_([-a-zA-Z0-9_]+)/g,function(e,t){return".".concat((0,o.default)(t))})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("./idMap"))},{"./idMap":835,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],849:[function(e,t,r){"use strict";function n(e,t){var r=(0,o.default)(e)?e:[e];return(0,s.default)(r,function(e){return t.match(u(e))})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/array/is-array")),a=i(e("lodash/memoize")),s=i(e("lodash/find")),l=i(e("lodash/escapeRegExp")),u=(0,a.default)(function(e){return new RegExp("^"+(0,l.default)(e).replace(/\/:[^\/]+/g,"/([^/]+)")+"/?$")})},{"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/escapeRegExp":457,"lodash/find":458,"lodash/memoize":486}],850:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/get")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("events")),d=n(e("./logger")),f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"emit",value:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];try{return(0,l.default)((0,s.default)(t.prototype),"emit",this).apply(this,arguments)}catch(e){return d.default.error(e),!0}}}]),t}(c.default);r.default=f},{"./logger":843,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/get":40,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,events:290}],851:[function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!e.getElementById("inboxsdk__shared_style")){var t=e.createElement("style");if(t.id="inboxsdk__shared_style",s.onValue(function(e){t.textContent=(0,a.default)(e)}),!e.head)throw new Error("missing head");e.head.appendChild(t)}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("ud-kefir")),a=i(e("./rewriteCssWithIdMap")),s=(0,
o.default)(t,".inboxsdk__notransition {\n  -webkit-transition: none !important;\n  -moz-transition: none !important;\n  -o-transition: none !important;\n  -ms-transition: none !important;\n  transition: none !important;\n}\n\n.inboxsdk__close_button {\n  height: 24px;\n  width: 24px;\n  opacity: 0.7;\n  position: relative;\n  background: none;\n  border: none;\n  padding: 0;\n  box-sizing: content-box;\n  outline: none;\n  cursor: pointer;\n}\n.inboxsdk__close_button:focus,\n.inboxsdk__close_button:hover {\n  opacity: 1;\n}\n.inboxsdk__close_button:focus::before {\n  background-color: rgba(0, 0, 0, 0.12);\n}\n.inboxsdk__close_button::before {\n  border-radius: 50%;\n  position: absolute;\n  top: -4px;\n  bottom: -4px;\n  left: -4px;\n  right: -4px;\n  padding: 4px;\n  content: ' ';\n}\n.inboxsdk__close_button::after {\n  content: ' ';\n  background: url(https://www.gstatic.com/images/icons/material/system/1x/close_black_24dp.png);\n  position: absolute;\n  height: 24px;\n  width: 24px;\n  top: 0;\n  left: 0;\n}\n\n.IDMAP_app_sidebar_waiting_platform {\n  display: none;\n}\n\n/* drawer */\n\n.inboxsdk__drawer_view_container {\n  visibility: visible;\n  direction: initial;\n  position: fixed;\n  height: 100vh;\n  width: 100vw;\n  bottom: 0;\n  left: 0;\n  z-index: 51;\n  pointer-events: none;\n}\n.inboxsdk__drawer_view {\n  position: absolute;\n  pointer-events: auto;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 452px;\n  font: normal normal normal normal 13px / normal 'Helvetica Neue', Helvetica,\n    Arial, sans-serif;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  background-color: #fff;\n  outline: none;\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.18), 0 8px 16px rgba(0, 0, 0, 0.36);\n  -webkit-transform: translateX(100%);\n  transform: translateX(100%);\n  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.inboxsdk__drawer_view.inboxsdk__active {\n  -webkit-transform: none;\n  transform: none;\n}\n.inboxsdk__drawer_title_bar {\n  background-color: #f5f5f5;\n  border-bottom: 1px solid #e0e0e0;\n  padding: 16px 20px;\n  white-space: nowrap;\n  display: -webkit-flex;\n  display: flex;\n  flex: 0 0 auto;\n  -webkit-flex: 0 0 auto;\n}\n.inboxsdk__drawer_title_bar .inboxsdk__close_button {\n  margin-right: 20px;\n  -webkit-flex-shrink: 0;\n  flex-shrink: 0;\n}\n.inboxsdk__drawer_title {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font: normal normal normal normal 20px / 24px 'Helvetica Neue', Helvetica,\n    Arial, sans-serif;\n}\n\n/* backdrop */\n\n.inboxsdk__inbox_backdrop {\n  visibility: visible;\n  position: fixed;\n  height: 100vh;\n  width: 100vw;\n  bottom: 0;\n  left: 0;\n  z-index: 50;\n  background-color: transparent;\n  transition: background-color 150ms cubic-bezier(0.4, 0, 1, 1);\n}\n.inboxsdk__inbox_backdrop.inboxsdk__active {\n  background-color: rgba(10, 10, 10, 0.6);\n  transition: background-color 70ms cubic-bezier(0, 0, 0.2, 1);\n}\n\n.inboxsdk__inbox_backdrop ~ .inboxsdk__inbox_backdrop {\n  opacity: 0.6;\n}\n\n/* sidebar */\n\n.IDMAP_app_sidebar_main {\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n}\n\n.IDMAP_app_sidebar > .inboxsdk__close_button {\n  position: absolute;\n  bottom: 10px;\n  right: 20px;\n}\n\n.IDMAP_app_sidebar_content_area {\n  width: 216px;\n}\n\n.IDMAP_app_sidebar_content_panel {\n  overflow: hidden;\n  font: 12px Arial, sans-serif;\n  max-height: 100%;\n  box-sizing: border-box;\n}\n\n.IDMAP_app_sidebar_content_panel_top_line {\n  white-space: nowrap;\n  display: -webkit-flex;\n  display: flex;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n  cursor: default;\n}\n\n.IDMAP_app_sidebar_content_panel:not(.IDMAP_expanded)\n  .IDMAP_app_sidebar_content_panel_top_line {\n  border-bottom: 1px solid #ddd;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_top_line:hover,\n.IDMAP_app_sidebar_content_panel.IDMAP_dragged\n  .IDMAP_app_sidebar_content_panel_top_line {\n  background: rgba(0, 0, 0, 0.03);\n}\n\n.IDMAP_app_sidebar_content_panel_title {\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_title {\n  cursor: move;\n}\n\n.IDMAP_app_sidebar_content_panel_title_text {\n  padding-left: 6px;\n  vertical-align: middle;\n  font: bold 13px / 40px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  color: rgba(0, 0, 0, 0.87);\n}\n\n.IDMAP_app_sidebar.IDMAP_hideTitleBar\n  .IDMAP_app_sidebar_content_panel_top_line {\n  display: none;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_top_line:hover\n  .IDMAP_app_sidebar_content_panel_grip {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 10px;\n  height: 40px;\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI2cHgiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDYgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Q29tYmluZWQgU2hhcGU8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iRkluYWxzLSoqSmFuLTkqKiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iU2lkZWJhci1jbG9zZWQtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIC0xNC4wMDAwMDApIiBmaWxsPSIjQUFBQUFBIj4gICAgICAgICAgICA8ZyBpZD0iU2lkZWJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgPGcgaWQ9IkJveC1pbmZvLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcmlwcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxNC41MDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC42NjY2NjY2NjcsNS40MTY2NjY2NyBDMC42NjY2NjY2NjcsNC44NjQzODE5MiAxLjExMDUzMTQ5LDQuNDE2NjY2NjcgMS42NjY2NjY2Nyw0LjQxNjY2NjY3IEMyLjIxODk1MTQyLDQuNDE2NjY2NjcgMi42NjY2NjY2Nyw0Ljg2MDUzMTQ5IDIuNjY2NjY2NjcsNS40MTY2NjY2NyBDMi42NjY2NjY2Nyw1Ljk2ODk1MTQyIDIuMjIyODAxODQsNi40MTY2NjY2NyAxLjY2NjY2NjY3LDYuNDE2NjY2NjcgQzEuMTE0MzgxOTIsNi40MTY2NjY2NyAwLjY2NjY2NjY2Nyw1Ljk3MjgwMTg0IDAuNjY2NjY2NjY3LDUuNDE2NjY2NjcgWiBNMC42NjY2NjY2NjcsMS4yNSBDMC42NjY2NjY2NjcsMC42OTc3MTUyNSAxLjExMDUzMTQ5LDAuMjUgMS42NjY2NjY2NywwLjI1IEMyLjIxODk1MTQyLDAuMjUgMi42NjY2NjY2NywwLjY5Mzg2NDgyMiAyLjY2NjY2NjY3LDEuMjUgQzIuNjY2NjY2NjcsMS44MDIyODQ3NSAyLjIyMjgwMTg0LDIuMjUgMS42NjY2NjY2NywyLjI1IEMxLjExNDM4MTkyLDIuMjUgMC42NjY2NjY2NjcsMS44MDYxMzUxOCAwLjY2NjY2NjY2NywxLjI1IFogTTAuNjY2NjY2NjY3LDkuNTgzMzMzMzMgQzAuNjY2NjY2NjY3LDkuMDMxMDQ4NTggMS4xMTA1MzE0OSw4LjU4MzMzMzMzIDEuNjY2NjY2NjcsOC41ODMzMzMzMyBDMi4yMTg5NTE0Miw4LjU4MzMzMzMzIDIuNjY2NjY2NjcsOS4wMjcxOTgxNiAyLjY2NjY2NjY3LDkuNTgzMzMzMzMgQzIuNjY2NjY2NjcsMTAuMTM1NjE4MSAyLjIyMjgwMTg0LDEwLjU4MzMzMzMgMS42NjY2NjY2NywxMC41ODMzMzMzIEMxLjExNDM4MTkyLDEwLjU4MzMzMzMgMC42NjY2NjY2NjcsMTAuMTM5NDY4NSAwLjY2NjY2NjY2Nyw5LjU4MzMzMzMzIFogTTMuMzAwMDAwMTksMS4yNSBDMy4zMDAwMDAxOSwwLjY5NzcxNTI1IDMuNzQzODY1MDEsMC4yNSA0LjMwMDAwMDE5LDAuMjUgQzQuODUyMjg0OTQsMC4yNSA1LjMwMDAwMDE5LDAuNjkzODY0ODIyIDUuMzAwMDAwMTksMS4yNSBDNS4zMDAwMDAxOSwxLjgwMjI4NDc1IDQuODU2MTM1MzcsMi4yNSA0LjMwMDAwMDE5LDIuMjUgQzMuNzQ3NzE1NDQsMi4yNSAzLjMwMDAwMDE5LDEuODA2MTM1MTggMy4zMDAwMDAxOSwxLjI1IFogTTMuMzAwMDAwMTksNS40MTY2NjY2NyBDMy4zMDAwMDAxOSw0Ljg2NDM4MTkyIDMuNzQzODY1MDEsNC40MTY2NjY2NyA0LjMwMDAwMDE5LDQuNDE2NjY2NjcgQzQuODUyMjg0OTQsNC40MTY2NjY2NyA1LjMwMDAwMDE5LDQuODYwNTMxNDkgNS4zMDAwMDAxOSw1LjQxNjY2NjY3IEM1LjMwMDAwMDE5LDUuOTY4OTUxNDIgNC44NTYxMzUzNyw2LjQxNjY2NjY3IDQuMzAwMDAwMTksNi40MTY2NjY2NyBDMy43NDc3MTU0NCw2LjQxNjY2NjY3IDMuMzAwMDAwMTksNS45NzI4MDE4NCAzLjMwMDAwMDE5LDUuNDE2NjY2NjcgWiBNMy4zMDAwMDAxOSw5LjU4MzMzMzMzIEMzLjMwMDAwMDE5LDkuMDMxMDQ4NTggMy43NDM4NjUwMSw4LjU4MzMzMzMzIDQuMzAwMDAwMTksOC41ODMzMzMzMyBDNC44NTIyODQ5NCw4LjU4MzMzMzMzIDUuMzAwMDAwMTksOS4wMjcxOTgxNiA1LjMwMDAwMDE5LDkuNTgzMzMzMzMgQzUuMzAwMDAwMTksMTAuMTM1NjE4MSA0Ljg1NjEzNTM3LDEwLjU4MzMzMzMgNC4zMDAwMDAxOSwxMC41ODMzMzMzIEMzLjc0NzcxNTQ0LDEwLjU4MzMzMzMgMy4zMDAwMDAxOSwxMC4xMzk0Njg1IDMuMzAwMDAwMTksOS41ODMzMzMzMyBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==)\n    50% center no-repeat;\n}\n\n.IDMAP_app_sidebar_content_panel_title_icon_container {\n  width: 20px;\n  height: 20px;\n  vertical-align: middle;\n  margin-left: 6px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: -1px;\n}\n\n.IDMAP_app_sidebar_content_panel_title_icon,\n.IDMAP_app_sidebar_content_panel_title_icon > img {\n  width: 13px;\n  height: 13px;\n}\n\n.IDMAP_app_sidebar_content_panel_toggle {\n  -webkit-flex: 1;\n  flex: 1;\n  text-align: right;\n  visibility: hidden;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_toggle {\n  visibility: visible;\n  cursor: pointer;\n}\n\n.IDMAP_app_sidebar_content_panel_toggle_button {\n  margin-top: 12px;\n  margin-right: 4px;\n  background: url(https://www.streak.com/build/images/arrowDown.png) center /\n    20px no-repeat;\n  border: none;\n  width: 14px;\n  height: 14px;\n  -webkit-transform: rotate(-90deg);\n  transform: rotate(-90deg);\n  transition: -webkit-transform 0.15s, transform 0.15s;\n  outline: none;\n  opacity: 0.6;\n  cursor: pointer;\n}\n\n.IDMAP_app_sidebar_content_panel_top_line:hover\n  .IDMAP_app_sidebar_content_panel_toggle_button,\n.IDMAP_app_sidebar_content_panel.IDMAP_dragged\n  .IDMAP_app_sidebar_content_panel_top_line\n  .IDMAP_app_sidebar_content_panel_toggle_button {\n  opacity: 0.9;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_expanded\n  .IDMAP_app_sidebar_content_panel_toggle_button {\n  -webkit-transform: rotate(0);\n  transform: rotate(0);\n}\n\n.IDMAP_app_sidebar_content_panel_content {\n  margin-bottom: 25px;\n}\n\n.IDMAP_sidebar_iconArea .IDMAP_sidebar_button_container {\n  position: relative;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:focus,\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover {\n  outline: none;\n}\n\n/* end sidebar */\n\n/* shared parts of app id warning */\n\n.inboxsdk__appid_warning {\n  margin: 0;\n  padding: 9px;\n  color: #4b4b4b;\n  background: #ff6c6c;\n  font-size: 10pt;\n}\n\n.inboxsdk__appid_warning_main {\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.inboxsdk__appid_warning .topline {\n  font-weight: bold;\n  font-size: 11pt;\n}\n\na.inboxsdk__appid_register {\n  color: white;\n  display: inline-block;\n  background: #1989ff;\n  border-radius: 3px;\n  text-decoration: none;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n  padding: 7px;\n  font-size: 10pt;\n  vertical-align: middle;\n  margin-left: 1em;\n}\n\n.inboxsdk__thread_row_icon_wrapper {\n  display: inline-block;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  margin-top: 0px;\n}\n\n.IDMAP_thread_noticeBar {\n  background: #f8ebc0;\n  margin-bottom: 10px;\n  padding: 12px 4px 6px 12px;\n}\n")},{"./rewriteCssWithIdMap":848,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"ud-kefir":596}],852:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/array/is-array")),a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/helpers/defineProperty")),u=n(e("kefir")),c=function(){function e(t){var r=this;(0,a.default)(this,e),(0,l.default)(this,"_streamCount",0),(0,l.default)(this,"_ended",!1),(0,l.default)(this,"_pool",u.pool()),(0,l.default)(this,"stream",void 0),this.stream=this._pool.filter(function(){return 0===--r._streamCount&&(r._ended=!0,!0)}).take(1).toProperty(),this.stream.onValue(function(){}),this.add(t)}return(0,s.default)(e,[{key:"add",value:function(e){if(this._ended)throw new Error("Tried to add a stream to a stopped StopperPool");var t=(0,o.default)(e)?e:[e];this._streamCount+=t.length,this._pool.plug(u.merge(t.map(function(e){return e.take(1)})))}},{key:"getSize",value:function(){return this._streamCount}}]),e}();r.default=c},{"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301}],853:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,n=new Error("waitFor timeout"),i=o.later(t,null).flatMap(function(){var t=e();return t?o.constant(t):(setTimeout(function(){throw n},0),o.constantError(n))}),a=Boolean;return o.later(0,null).merge(o.interval(r,null)).map(function(){return e()}).filter(a).merge(i).take(1).takeErrors(1)}var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,kefir:301}],854:[function(e,t,r){"use strict";function n(e){return a.default.fromESObservable((0,o.default)(e).map(function(e){var t=e.removal,r=a.default.fromPromise(t);return{el:e.value,removalStream:r}}))}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("live-set/toValueObservable")),a=i(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"live-set/toValueObservable":311}],855:[function(e,t,r){"use strict";function n(e){return new a.default({read:function(){throw new Error("should not happen; liveset was inactive")},listen:function(t,r){t(new o.default);var n=e.observe({value:function(e){var t=e.el,n=e.removalStream;r.add(t),n.take(1).onValue(function(){r.remove(t)})}});return function(){n.unsubscribe()}}})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/set")),a=i(e("live-set"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"live-set":306}],856:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12e4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,n=new Error("waitFor timeout");return new o.default(function(i,o){function a(){try{var l=e();l?i(l):s>=t?o(n):(s+=r,setTimeout(a,r))}catch(e){o(e)}}var s=0;setTimeout(a,1)})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=i(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],857:[function(e,t,r){(function(t){"use strict";var r=e("@babel/runtime-corejs2/helpers/interopRequireDefault"),n=r(e("@babel/runtime-corejs2/core-js/promise")),i=r(e("@babel/runtime-corejs2/core-js/date/now"));if(!t.__InboxSDKImpLoader){var o,a=(0,i.default)(),s=!!document.querySelector('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."], [role=banner]+div div[aria-label] div div a[href^="https://myaccount.google."]');try{"undefined"!=typeof define&&define&&define.amd&&(o=define,define=null);var l=e("kefir"),u=new n.default(function(e,t){"complete"===document.readyState||"interactive"===document.readyState?e():e(l.merge([l.fromEvents(document,"DOMContentLoaded"),l.fromEvents(window,"load")]).take(1).map(function(){return null}).toPromise())});t.__InboxSDKImpLoader={load:function(t,r,n){if("0.1"!==t)throw new Error("Unsupported InboxSDK version");var o=(0,i.default)();return u.then(function(){var t;try{"undefined"!=typeof define&&define&&define.amd&&(t=define,define=null);return(0,e("./platform-implementation").makePlatformImplementation)(r,n,{piMainStarted:a,piLoadStarted:o,wasAccountSwitcherReadyAtStart:s})}finally{t&&(define=t)}})}}}finally{o&&(define=o)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./platform-implementation":871,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],858:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/date/now")),o=n(e("@babel/runtime-corejs2/core-js/map")),a=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=n(e("@babel/runtime-corejs2/helpers/createClass")),l=n(e("@babel/runtime-corejs2/core-js/weak-map")),u=n(e("@babel/runtime-corejs2/core-js/object/freeze")),c=n(e("lodash/defaults")),d=n(e("lodash/sortBy")),f=n(e("lodash/find")),p=n(e("kefir")),h=n(e("kefir-bus")),m=n(e("../../common/defer")),b=(n(e("../../common/get-stack-trace")),n(e("../../common/get-or-fail"))),_=(0,u.default)({destroy:(0,u.default)(function(){})}),v=new l.default,g=function(){function e(t,r){(0,a.default)(this,e);var n={};v.set(this,n),n.driver=r,n.messagesByKey=new o.default,n.queuedPackets=[]}return(0,s.default)(e,[{key:"showMessage",value:function(e){(0,c.default)(e,{priority:0,time:15e3,hideOnViewChanged:!0,persistent:!1}),this.hideMessage(e.messageKey);var t=(0,b.default)(v,this),r=t.driver.getButterBarDriver(),n=(0,i.default)()+"-"+Math.random(),o=r.getSharedMessageQueue();if(o.unshift({messageId:n,priority:e.priority,persistent:e.persistent}),o=(0,d.default)(o,function(e){return-e.priority}),o=o.filter(function(e,t){return 0===t||e.persistent}),r.setSharedMessageQueue(o),!(0,f.default)(o,function(e){return e.messageId===n}))return _;var a=(0,h.default)();e.hideOnViewChanged&&a.plug(p.default.later(0,null).flatMap(function(){return t.driver.getRouteViewDriverStream().changes()}).map(function(){return null})),isFinite(e.time)&&a.plug(p.default.later(e.time,null));var s=new Error("Butter bar message timed out");a.plug(p.default.later(12e4,null).map(function(e){return t.driver.getLogger().errorApp(s),e})),a.take(1).onValue(function(){e.messageKey&&t.messagesByKey.delete(e.messageKey);var i=r.getSharedMessageQueue();r.setSharedMessageQueue(i.filter(function(e){return e.messageId!==n}))}),r.getNoticeAvailableStream().toProperty(function(){return null}).takeUntilBy(a).filter(function(){var e=r.getSharedMessageQueue();return e[0]||a.emit(),e[0]&&e[0].messageId===n}).onValue(function(){var t=r.showMessage(e);a.take(1).onValue(function(){t.destroy()})});var l={destroy:function(){a.emit()}};return e.messageKey&&t.messagesByKey.set(e.messageKey,l),l}},{key:"showLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.default)(e,{text:"Loading...",priority:-3,time:1/0,persistent:!0,hideOnViewChanged:!0}),e.time=1/0,this.showMessage(e)}},{key:"showError",value:function(e){return(0,c.default)(e,{priority:100,className:"inboxsdk__butterbar_error"}),this.showMessage(e)}},{key:"showSaving",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.default)(t,{text:"Saving...",confirmationText:"Saved",confirmationTime:1e3,priority:-2,time:1/0,persistent:!0,hideOnViewChanged:!1,showConfirmation:!0});var r=this.showMessage(t),n=(0,m.default)();return n.promise.then(function(){r.destroy(),t.showConfirmation&&e.showMessage({text:t.confirmationText,messageKey:t.messageKey,time:t.confirmationTime,priority:200})},function(){r.destroy()}),n}},{key:"hideMessage",value:function(e){if(e){var t=(0,b.default)(v,this),r=t.messagesByKey.get(e);r&&r.destroy()}}},{key:"hideGmailMessage",value:function(){(0,b.default)(v,this).driver.getButterBarDriver().hideGmailMessage()}}]),e}();r.default=g},{"../../common/defer":608,"../../common/get-or-fail":611,"../../common/get-stack-trace":613,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298,"lodash/defaults":453,"lodash/find":458,"lodash/sortBy":492}],859:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/regenerator")),a=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),s=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=i(e("@babel/runtime-corejs2/helpers/createClass")),u=i(e("@babel/runtime-corejs2/core-js/weak-map")),c=n(e("ud")),d=i(e("kefir")),f=i(e("../../common/get-or-fail")),p=(i(e("../views/compose-view")),i(e("../lib/handler-registry"))),h=c.defonce(t,function(){return new u.default}),m=.01,b=function(){function e(t,r){(0,s.default)(this,e);var n={driver:t,membrane:r,handlerRegistry:new p.default,composeViewStream:t.getComposeViewDriverStream().map(function(e){return r.get(e)})};h.set(this,n),t.getStopper().onValue(function(){n.handlerRegistry.dumpHandlers()}),n.composeViewStream.onValue(function(e){t.getLogger().trackFunctionPerformance(function(){n.handlerRegistry.addTarget(e)},m,{type:"composeViewHandler",isInlineReplyForm:e.isInlineReplyForm()})})}return(0,l.default)(e,[{key:"registerComposeViewHandler",value:function(e){return(0,f.default)(h,this).handlerRegistry.registerHandler(e)}},{key:"openNewComposeView",value:function(){function e(){return t.apply(this,arguments)}var t=(0,a.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,f.default)(h,this),e.next=3,t.driver.openNewComposeViewDriver();case 3:return r=e.sent,e.abrupt("return",t.membrane.get(r));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"openDraftByMessageID",value:function(e){var t=(0,f.default)(h,this),r=t.composeViewStream.merge(d.default.later(3e3,null)).take(1).flatMap(function(e){return e?d.default.constant(e):d.default.constantError(new Error("draft did not open"))}).toPromise();return t.driver.openDraftByMessageID(e),r}},{key:"getComposeView",value:function(){var e=(0,f.default)(h,this),t=e.driver;if(t.getLogger().deprecationWarning("Compose.getComposeView","Compose.openNewComposeView"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.openNewComposeView()}}]),e}(),_=c.defn(t,b);r.default=_},{"../../common/get-or-fail":611,"../lib/handler-registry":834,"../views/compose-view":876,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"@babel/runtime-corejs2/regenerator":59,kefir:301,ud:597}],860:[function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){t.map(function(e){return{viewDriver:e,view:o.get(e)}}).flatMap(function(e){return e.viewDriver.getReadyStream().map(function(){return e}).takeUntilBy(c.default.fromEvents(e.view,"destroy"))}).onValue(function(e){n.addTarget(e.view)})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=r.MessageViewToolbarSectionNames=r.MessageViewViewStates=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/defineProperty")),l=i(e("@babel/runtime-corejs2/core-js/object/freeze")),u=i(e("@babel/runtime-corejs2/core-js/weak-map")),c=i(e("kefir")),d=i(e("../../common/get-or-fail")),f=i(e("../views/conversations/thread-view")),p=i(e("../views/conversations/message-view")),h=(i(e("../views/conversations/attachment-card-view")),i(e("../lib/handler-registry"))),m=new u.default,b=(0,l.default)({HIDDEN:"HIDDEN",COLLAPSED:"COLLAPSED",EXPANDED:"EXPANDED"});r.MessageViewViewStates=b;var _=(0,l.default)({MORE:"MORE"});r.MessageViewToolbarSectionNames=_;var v=function(){function e(t,r,i){(0,o.default)(this,e),(0,s.default)(this,"MessageViewViewStates",b),(0,s.default)(this,"MessageViewToolbarSectionNames",_);var a={appId:t,driver:r,threadViewHandlerRegistry:new h.default,messageViewHandlerRegistries:{all:new h.default,loaded:new h.default},attachmentCardViewHandlerRegistry:new h.default};m.set(this,a),r.getStopper().onValue(function(){a.threadViewHandlerRegistry.dumpHandlers(),a.messageViewHandlerRegistries.all.dumpHandlers(),a.messageViewHandlerRegistries.loaded.dumpHandlers()}),r.getAttachmentCardViewDriverStream().filter(function(e){return"FILE"===e.getAttachmentType()}).onValue(function(e){var t=i.get(e);a.attachmentCardViewHandlerRegistry.addTarget(t)}),n(t,r.getThreadViewDriverStream().filter(function(e){return!e.isLoadingStub()}),f.default,a.threadViewHandlerRegistry,this,i,r),n(t,r.getMessageViewDriverStream(),p.default,a.messageViewHandlerRegistries.all,this,i,r),n(t,r.getMessageViewDriverStream().flatMap(function(e){return e.isLoaded()?c.default.constant(e):e.getEventStream().filter(function(e){return"messageLoad"===e.eventName}).map(function(){return e}).take(1)}),p.default,a.messageViewHandlerRegistries.loaded,this,i,r)}return(0,a.default)(e,[{key:"registerThreadViewHandler",value:function(e){return(0,d.default)(m,this).threadViewHandlerRegistry.registerHandler(e)}},{key:"registerMessageViewHandler",value:function(e){return(0,d.default)(m,this).messageViewHandlerRegistries.loaded.registerHandler(e)}},{key:"registerMessageViewHandlerAll",value:function(e){return(0,d.default)(m,this).messageViewHandlerRegistries.all.registerHandler(e)}},{key:"registerFileAttachmentCardViewHandler",value:function(e){return(0,d.default)(m,this).attachmentCardViewHandlerRegistry.registerHandler(e)}}]),e}(),g=v;r.default=g},{"../../common/get-or-fail":611,"../lib/handler-registry":834,"../views/conversations/attachment-card-view":878,"../views/conversations/message-view":880,"../views/conversations/thread-view":881,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301}],861:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/regenerator")),o=n(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),a=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=n(e("@babel/runtime-corejs2/helpers/createClass")),l=n(e("@babel/runtime-corejs2/core-js/weak-map")),u=n(e("kefir")),c=n(e("kefir-cast")),d=n(e("../views/content-panel-view")),f=n(e("../../common/get-or-fail")),p=new l.default,h=function(){function e(t,r,n){(0,a.default)(this,e);var i={appId:t,driver:r,piOpts:n};p.set(this,i)}return(0,s.default)(e,[{key:"addSidebarContentPanel",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,o.default)(i.default.mark(function e(t){var r,n,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.default)(u.default,t).toProperty(),n=(0,f.default)(p,this),n.driver.getLogger().eventSdkPassive("global.addSidebarContentPanel"),e.next=5,n.driver.addGlobalSidebarContentPanel(r);case 5:if(!(o=e.sent)){e.next=8;break}return e.abrupt("return",new d.default(o));case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)}));return e}()}]),e}();r.default=h},{"../../common/get-or-fail":611,"../views/content-panel-view":877,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/regenerator":59,kefir:301,"kefir-cast":299}],862:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/core-js/weak-map")),l=n(e("ud")),u=i(e("../../common/get-or-fail")),c=i(e("../views/keyboard-shortcut-handle")),d=l.defonce(t,function(){return new s.default}),f=function(){function e(t,r,n,i){(0,o.default)(this,e);var a={appId:t,appName:r,appIconUrl:n,driver:i};d.set(this,a)}return(0,a.default)(e,[{key:"createShortcutHandle",value:function(e){var t=(0,u.default)(d,this),r=e.chord,n=e.description;if(!r)throw new Error("Keyboard.createShortcutHandle chord missing");null==n&&(console.error("Keyboard.createShortcutHandle chord missing"),n="");var i=new c.default(r,n);return t.driver.activateShortcut(i,t.appName,t.appIconUrl),i}}]),e}(),p=l.defn(t,f);r.default=p},{"../../common/get-or-fail":611,"../views/keyboard-shortcut-handle":882,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,ud:597}],863:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/object/freeze")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/defineProperty")),l=n(e("@babel/runtime-corejs2/core-js/weak-map")),u=n(e("../../common/get-or-fail")),c=n(e("../lib/handler-registry")),d=(n(e("../views/thread-row-view")),new l.default),f=function(){function e(t,r,n){(0,o.default)(this,e),(0,s.default)(this,"ActionButtonTypes",p);var i={appId:t,driver:r,membrane:n,threadRowViewRegistry:new c.default};d.set(this,i),r.getStopper().onValue(function(){i.threadRowViewRegistry.dumpHandlers()}),i.driver.getThreadRowViewDriverStream().onValue(function(e){var t=n.get(e);i.threadRowViewRegistry.addTarget(t)})}return(0,a.default)(e,[{key:"registerThreadRowViewHandler",
value:function(e){return(0,u.default)(d,this).threadRowViewRegistry.registerHandler(e)}},{key:"getSelectedThreadRowViews",value:function(){var e=(0,u.default)(d,this);return e.driver.getSelectedThreadRowViewDrivers().map(function(t){return e.membrane.get(t)})}},{key:"registerThreadRowViewSelectionHandler",value:function(e){return(0,u.default)(d,this).driver.registerThreadRowViewSelectionHandler(e)}}]),e}();r.default=f;var p=(0,i.default)({LINK:"LINK",DROPDOWN:"DROPDOWN",ACTION:"ACTION"})},{"../../common/get-or-fail":611,"../lib/handler-registry":834,"../views/thread-row-view":890,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/freeze":15,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],864:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/core-js/weak-map")),s=e("ud"),l=n(e("../widgets/modal-view")),u=n(e("../../common/get-or-fail")),c=(0,s.defonce)(t,function(){return new a.default}),d=function(){function e(t,r,n){(0,i.default)(this,e);var o={appId:t,driver:r,piOpts:n};c.set(this,o)}return(0,o.default)(e,[{key:"show",value:function(e){var t=(0,u.default)(c,this).driver;(0,u.default)(c,this).piOpts.inboxBeta&&t.getLogger().deprecationWarning("Modal.show","Widgets.showModalView");var r=t.createModalViewDriver(e),n=new l.default({driver:t,modalViewDriver:r});return n.show(),n}},{key:"createModalView",value:function(e){var t=(0,u.default)(c,this).driver;t.getLogger().deprecationWarning("Modal.createModalView","Widgets.showModalView");var r=t.createModalViewDriver(e);return new l.default({driver:t,modalViewDriver:r})}}]),e}(),f=(0,s.defn)(t,d);r.default=f},{"../../common/get-or-fail":611,"../widgets/modal-view":895,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,ud:597}],865:[function(e,t,r){"use strict";function n(e,t){var r=new p.default(e,t,"sent");return t.getSentMailNativeNavItem().then(function(e){r.setNavItemViewDriver(e)}),r}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/defineProperty")),l=i(e("@babel/runtime-corejs2/core-js/weak-map")),u=i(e("kefir")),c=i(e("kefir-cast")),d=i(e("../../common/get-or-fail")),f=i(e("../views/nav-item-view")),p=i(e("../views/native-nav-item-view")),h=i(e("../constants/nav-item-types")),m=new l.default,b=function(){function e(t,r){(0,o.default)(this,e),(0,s.default)(this,"NavItemTypes",h.default),(0,s.default)(this,"SENT_MAIL",void 0);var i={appId:t,driver:r,navItemViews:[]};m.set(this,i),this.SENT_MAIL=n(t,r)}return(0,a.default)(e,[{key:"addNavItem",value:function(e){var t=(0,d.default)(m,this),r=(0,c.default)(u.default,e).toProperty(),n=new f.default(t.appId,t.driver,r),i=t.driver.addNavItem(t.appId,r);return n.setNavItemViewDriver(i),t.navItemViews.push(n),n}}]),e}();r.default=b,(0,s.default)(b,"SENT_MAIL",null)},{"../../common/get-or-fail":611,"../constants/nav-item-types":620,"../views/native-nav-item-view":883,"../views/nav-item-view":884,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-cast":299}],866:[function(e,t,r){"use strict";function n(e,t,r){t.currentRouteViewDriver instanceof y.default&&t.currentRouteViewDriver.destroy(),t.currentRouteViewDriver=r;var n=t.membrane.get(r);if(o(t,r),n.getRouteType()===w.ROUTE_TYPES.CUSTOM&&i(t,r,n),t.allRoutesHandlerRegistry.addTarget(n),n.getRouteType()===w.ROUTE_TYPES.LIST){var a=new v.default(r,t.driver,t.appId),s=t.listRouteHandlerRegistries[n.getRouteID()];s&&s.addTarget(a),t.listRouteHandlerRegistries[w.NATIVE_ROUTE_IDS.ANY_LIST].addTarget(a)}}function i(e,t,r){var n=r.getRouteID(),i=(0,s.default)(n)?n:[n],o=(0,p.default)(e.customRoutes,function(e){return(0,h.default)((0,s.default)(e.routeID)?e.routeID:[e.routeID],i).length});if(o){var a=new g.default(t),l=t.getCustomViewElement();if(!l)throw new Error("should not happen");e.driver.showCustomRouteView(l);try{o.onActivate(a)}catch(t){e.driver.getLogger().error(t)}}}function o(e,t){e.driver.setShowNativeNavMarker(t.getType()!==w.ROUTE_TYPES.CUSTOM),e.driver.setShowNativeAddonSidebar(t.getType()!==w.ROUTE_TYPES.CUSTOM)}var a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/core-js/array/is-array")),l=a(e("@babel/runtime-corejs2/core-js/object/values")),u=a(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=a(e("@babel/runtime-corejs2/helpers/createClass")),d=a(e("@babel/runtime-corejs2/helpers/defineProperty")),f=a(e("@babel/runtime-corejs2/core-js/weak-map")),p=a(e("lodash/find")),h=a(e("lodash/intersection")),m=e("ud"),b=a(e("../lib/handler-registry")),_=a(e("../../common/get-or-fail")),v=(a(e("../views/route-view/route-view")),a(e("../views/route-view/list-route-view"))),g=a(e("../views/route-view/custom-route-view")),y=a(e("../views/route-view/dummy-route-view-driver")),w=e("../constants/router"),k=(0,m.defonce)(t,function(){return new f.default}),j=.01,x=function(){function e(t,r,i){var o=this;(0,u.default)(this,e),(0,d.default)(this,"NativeRouteIDs",w.NATIVE_ROUTE_IDS),(0,d.default)(this,"NativeListRouteIDs",w.NATIVE_LIST_ROUTE_IDS),(0,d.default)(this,"RouteTypes",w.ROUTE_TYPES);var a={appId:t,driver:r,currentRouteViewDriver:new y.default,allRoutesHandlerRegistry:new b.default,customRoutes:[],membrane:i,listRouteHandlerRegistries:{}};(0,l.default)(w.NATIVE_LIST_ROUTE_IDS).forEach(function(e){a.listRouteHandlerRegistries[e]=new b.default}),k.set(this,a),r.getRouteViewDriverStream().onValue(function(e){r.getLogger().trackFunctionPerformance(function(){return n(o,a,e)},j,{type:"handleRouteViewChange",routeID:e.getRouteID()})}),r.getStopper().onValue(function(){a.allRoutesHandlerRegistry.dumpHandlers(),(0,l.default)(a.listRouteHandlerRegistries).forEach(function(e){e.dumpHandlers()})})}return(0,c.default)(e,[{key:"createLink",value:function(e,t){return(0,_.default)(k,this).driver.createLink(e,t)}},{key:"goto",value:function(e,t){if("string"!=typeof e)throw new Error("routeID must be a string");var r=(0,_.default)(k,this),n=r.driver;return"string"==typeof t&&n.getLogger().deprecationWarning("Router.goto param string","param object (e.g. {param: value})"),n.goto(e,t)}},{key:"handleCustomRoute",value:function(e,t){var r={routeID:e,onActivate:t},n=(0,_.default)(k,this).driver.addCustomRouteID(e),i=(0,_.default)(k,this),o=i.customRoutes,a=i.driver;return o.push(r),a.getLogger().eventSdkPassive("Router.handleCustomRoute"),function(){n();var e=o.indexOf(r);e>-1&&o.splice(e,1)}}},{key:"handleAllRoutes",value:function(e){return(0,_.default)(k,this).allRoutesHandlerRegistry.registerHandler(e)}},{key:"handleListRoute",value:function(e,t){var r=(0,_.default)(k,this),n=r.listRouteHandlerRegistries;if(!n[e])throw new Error("Invalid routeID specified");return n[e].registerHandler(t)}},{key:"handleCustomListRoute",value:function(e,t){return(0,_.default)(k,this).driver.addCustomListRouteID(e,t)}},{key:"getCurrentRouteView",value:function(){var e=(0,_.default)(k,this);return e.membrane.get(e.currentRouteViewDriver)}}]),e}(),E=(0,m.defn)(t,x);r.default=E},{"../../common/get-or-fail":611,"../constants/router":621,"../lib/handler-registry":834,"../views/route-view/custom-route-view":885,"../views/route-view/dummy-route-view-driver":886,"../views/route-view/list-route-view":887,"../views/route-view/route-view":888,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/values":22,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"lodash/find":458,"lodash/intersection":467,ud:597}],867:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/core-js/weak-map")),s=n(e("../../common/get-or-fail")),l=new a.default,u=function(){function e(t,r){(0,i.default)(this,e);var n={appId:t,driver:r};l.set(this,n)}return(0,o.default)(e,[{key:"registerSearchSuggestionsProvider",value:function(e){if("function"!=typeof e)throw new Error("Incorrect arguments");(0,s.default)(l,this).driver.registerSearchSuggestionsProvider(e)}},{key:"registerSearchQueryRewriter",value:function(e){if("function"!=typeof e.termReplacer||"string"!=typeof e.term)throw new Error("Incorrect arguments");if(!e.term.match(/^(app|has):/))throw new Error("Custom search term must begin with 'app:'");(0,s.default)(l,this).driver.registerSearchQueryRewriter(e)}}]),e}();r.default=u},{"../../common/get-or-fail":611,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43}],868:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/objectWithoutProperties")),o=n(e("@babel/runtime-corejs2/helpers/objectSpread")),a=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=n(e("@babel/runtime-corejs2/helpers/createClass")),l=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),c=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=n(e("@babel/runtime-corejs2/helpers/inherits")),f=n(e("@babel/runtime-corejs2/helpers/defineProperty")),p=n(e("@babel/runtime-corejs2/core-js/weak-map")),h=n(e("kefir")),m=n(e("kefir-cast")),b=n(e("kefir-stopper")),_=n(e("../lib/safe-event-emitter")),v=n(e("../../common/get-or-fail")),g=n(e("../views/app-toolbar-button-view")),y=e("../constants/toolbars"),w=new p.default,k=function(e){function t(e,r,n,i){var o;(0,a.default)(this,t),o=(0,l.default)(this,(0,u.default)(t).call(this)),(0,f.default)((0,c.default)(o),"SectionNames",y.SECTION_NAMES);var s={appId:e,driver:r,membrane:n,piOpts:i};return w.set((0,c.default)(o),s),o}return(0,d.default)(t,e),(0,s.default)(t,[{key:"registerThreadButton",value:function(e){var t=(0,v.default)(w,this);"OTHER"!==e.listSection&&"OTHER"!==e.threadSection||!e.hasDropdown||(t.driver.getLogger().errorApp(new Error("registerThreadButton does not support listSection=OTHER or threadSection=OTHER and hasDropdown=true together")),e=(0,o.default)({},e,{hasDropdown:!1}));var r=e,n=r.hideFor,a=(0,i.default)(r,["hideFor"]),s=function(){return t.driver.registerThreadButton((0,o.default)({},a,{onClick:function(e){a.onClick&&a.onClick({position:e.position,dropdown:e.dropdown,selectedThreadViews:e.selectedThreadViewDrivers.map(function(e){return t.membrane.get(e)}),selectedThreadRowViews:e.selectedThreadRowViewDrivers.map(function(e){return t.membrane.get(e)})})}}))};if(n){var l=(0,b.default)(),u=null;t.driver.getRouteViewDriverStream().takeUntilBy(l).onValue(function(e){var r=t.membrane.get(e);n(r)?u&&(u(),u=null):u||(u=s())});return function(){l.destroy(),u&&(u(),u=null)}}return s()}},{key:"registerToolbarButtonForList",value:function(e){var t=(0,v.default)(w,this);return this.registerThreadButton({positions:["LIST"],listSection:e.section,title:e.title,iconUrl:e.iconUrl,iconClass:e.iconClass,onClick:function(r){e.onClick&&e.onClick({dropdown:r.dropdown,selectedThreadRowViews:r.selectedThreadRowViews,get threadRowViews(){return t.driver.getLogger().deprecationWarning("Toolbars.registerToolbarButtonForList onClick event.threadRowViews"),r.selectedThreadRowViews}})},hasDropdown:e.hasDropdown,orderHint:e.orderHint,hideFor:e.hideFor,keyboardShortcutHandle:e.keyboardShortcutHandle})}},{key:"registerToolbarButtonForThreadView",value:function(e){return this.registerThreadButton({positions:["THREAD"],threadSection:e.section,title:e.title,iconUrl:e.iconUrl,iconClass:e.iconClass,onClick:function(t){if(1!==t.selectedThreadViews.length)throw new Error("should not happen");e.onClick&&e.onClick({dropdown:t.dropdown,threadView:t.selectedThreadViews[0]})},hasDropdown:e.hasDropdown,orderHint:e.orderHint,hideFor:e.hideFor,keyboardShortcutHandle:e.keyboardShortcutHandle})}},{key:"setAppToolbarButton",value:function(e){var t=(0,v.default)(w,this),r=t.driver,n=t.piOpts;if(r.getLogger().deprecationWarning("Toolbars.setAppToolbarButton","Toolbars.addToolbarButtonForApp"),1!==n.REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.addToolbarButtonForApp(e)}},{key:"addToolbarButtonForApp",value:function(e){var t=(0,m.default)(h.default,e),r=(0,v.default)(w,this).driver.addToolbarButtonForApp(t);return new g.default((0,v.default)(w,this).driver,r)}}]),t}(_.default);r.default=k},{"../../common/get-or-fail":611,"../constants/toolbars":622,"../lib/safe-event-emitter":850,"../views/app-toolbar-button-view":873,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/objectWithoutProperties":50,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301,"kefir-cast":299,"kefir-stopper":300}],869:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/core-js/weak-map")),l=i(e("lodash/find")),u=n(e("ud")),c=i(e("../../common/get-or-fail")),d=u.defonce(t,function(){return new s.default}),f=function(){function e(t,r){(0,o.default)(this,e),d.set(this,{driver:t,piOpts:r})}return(0,a.default)(e,[{key:"getEmailAddress",value:function(){return(0,c.default)(d,this).driver.getUserEmailAddress()}},{key:"isConversationViewDisabled",value:function(){return(0,c.default)(d,this).driver.isConversationViewDisabled()}},{key:"isUsingGmailMaterialUI",value:function(){return(0,c.default)(d,this).driver.isUsingMaterialUI()}},{key:"getLanguage",value:function(){return(0,c.default)(d,this).driver.getUserLanguage()}},{key:"getUserContact",value:function(){var e=(0,c.default)(d,this),t=e.driver,r=e.piOpts;if(t.getLogger().deprecationWarning("User.getUserContact","User.getEmailAddress"),1!==r.REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return t.getUserContact()}},{key:"getAccountSwitcherContactList",value:function(){var e=(0,c.default)(d,this).driver.getAccountSwitcherContactList(),t=this.getEmailAddress();return!!(0,l.default)(e,function(e){return e.emailAddress===t})||(e=e.concat([{name:t,emailAddress:t}])),e}}]),e}(),p=u.defn(t,f);r.default=p},{"../../common/get-or-fail":611,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"lodash/find":458,ud:597}],870:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/map")),o=n(e("@babel/runtime-corejs2/core-js/object/keys")),a=n(e("@babel/runtime-corejs2/helpers/objectSpread")),s=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=n(e("@babel/runtime-corejs2/helpers/createClass")),u=n(e("kefir")),c=n(e("kefir-cast")),d=e("ud"),f=n(e("../widgets/modal-view")),p=n(e("../widgets/mole-view")),h=n(e("../widgets/drawer-view")),m=n(e("../widgets/top-message-bar-view")),b=n(e("../views/compose-view")),_=n(e("../../common/get-or-fail")),v=function(){function e(t,r){(0,s.default)(this,e);var n={driver:r};g.set(this,n)}return(0,l.default)(e,[{key:"showModalView",value:function(e){e.buttons&&(e.buttons=e.buttons.map(function(e){if(e.onClick){var t=e.onClick;return(0,a.default)({},e,{onClick:function(){t({modalView:i})}})}return e}));var t=(0,_.default)(g,this),r=t.driver,n=r.createModalViewDriver(e),i=new f.default({driver:r,modalViewDriver:n});return i.show(),i}},{key:"showMoleView",value:function(e){var t=(0,_.default)(g,this).driver.createMoleViewDriver(e),r=new p.default({moleViewDriver:t});return t.show(),r}},{key:"showTopMessageBarView",value:function(e){var t=(0,_.default)(g,this).driver.createTopMessageBarDriver((0,c.default)(u.default,e));return new m.default({topMessageBarViewDriver:t})}},{key:"showDrawerView",value:function(e){if((0,_.default)(g,this).driver.getLogger().eventSdkActive("Widgets.showDrawerView used",{keys:(0,o.default)(e)}),e.composeView&&!(e.composeView instanceof b.default))throw new Error("composeView option was not a ComposeView");var t=(0,_.default)(g,this).driver.createDrawerViewDriver(e);return new h.default(t)}}]),e}(),g=new i.default,y=(0,d.defn)(t,v);r.default=y},{"../../common/get-or-fail":611,"../views/compose-view":876,"../widgets/drawer-view":894,"../widgets/modal-view":895,"../widgets/mole-view":896,"../widgets/top-message-bar-view":897,"@babel/runtime-corejs2/core-js/map":7,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,kefir:301,"kefir-cast":299,ud:597}],871:[function(e,t,r){(function(t){"use strict";function n(e,t,r){if("string"!=typeof e)throw new Error("appId must be a string");var n=(0,a.default)({globalErrorLogging:!0,eventTracking:!0,inboxBeta:!1},t);switch(n.REQUESTED_API_VERSION=+n.REQUESTED_API_VERSION,n.REQUESTED_API_VERSION){case 2:n.inboxBeta=!0;break;case 1:break;default:throw new Error("InboxSDK: Unsupported API version "+n.REQUESTED_API_VERSION)}var i={"https://mail.google.com":te.default,"https://inbox.google.com":re.default},s=n.VERSION,l=_.BUILD_VERSION,u=new ne.default(e,n,s,l),c=document.location.origin,d=i[c];if(!d)return console.log("InboxSDK: Unsupported origin",c),new o.default(function(e,t){});(0,g.default)();var f=new d(e,s,l,u,n,r);return f.onready.then(function(){(0,ie.default)(e)||(console.error("\n===========================================================\nInboxSDK: You have loaded InboxSDK with an invalid appId:\n".concat(e,"\nRegistering an appId is free. Please see\nhttps://www.inboxsdk.com/docs/#RequiredSetup\n===========================================================\n")),f.showAppIdWarning()),f.isRunningInPageContext()&&console.warn("Running the InboxSDK outside of an extension content script is not recommended!"),u.eventSdkPassive("instantiate");var t=new se(f,e,n);if("https://inbox.google.com"===c&&!n.inboxBeta)return console.log("InboxSDK: Unsupported origin",c),oe.has(e)||(oe.add(e),u.eventSdkPassive("not load")),new o.default(function(e,t){});oe.has(e)||(oe.add(e),u.eventSdkPassive("load"));try{window.localStorage&&/@streak\.com$/.test(f.getUserEmailAddress())&&!window.localStorage.getItem("inboxsdk__enable_sourcemap")&&window.localStorage.setItem("inboxsdk__enable_sourcemap","true")}catch(e){console.error(e)}return t})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.makePlatformImplementation=n,r.PlatformImplementation=void 0;var o=i(e("@babel/runtime-corejs2/core-js/promise")),a=i(e("@babel/runtime-corejs2/helpers/objectSpread")),s=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=i(e("@babel/runtime-corejs2/helpers/createClass")),u=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),c=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),d=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=i(e("@babel/runtime-corejs2/helpers/inherits")),p=i(e("@babel/runtime-corejs2/helpers/defineProperty")),h=i(e("@babel/runtime-corejs2/core-js/weak-map")),m=i(e("@babel/runtime-corejs2/core-js/set")),b=i(e("./lib/safe-event-emitter")),_=e("../common/version"),v=i(e("../common/get-or-fail")),g=i(e("./lib/shared-style")),y=i(e("./lib/Membrane")),w=i(e("./views/conversations/attachment-card-view")),k=i(e("./dom-driver/gmail/views/gmail-attachment-card-view")),j=i(e("./dom-driver/inbox/views/inbox-attachment-card-view")),x=i(e("./views/conversations/message-view")),E=i(e("./dom-driver/gmail/views/gmail-message-view")),S=i(e("./dom-driver/inbox/views/inbox-message-view")),C=i(e("./views/conversations/thread-view")),I=i(e("./dom-driver/gmail/views/gmail-thread-view")),T=i(e("./dom-driver/inbox/views/inbox-thread-view")),A=i(e("./views/thread-row-view")),D=i(e("./dom-driver/gmail/views/gmail-thread-row-view")),M=i(e("./dom-driver/inbox/views/inbox-thread-row-view")),R=i(e("./views/compose-view")),L=i(e("./dom-driver/gmail/views/gmail-compose-view")),O=i(e("./dom-driver/inbox/views/inbox-compose-view")),P=i(e("./views/route-view/dummy-route-view-driver")),V=i(e("./views/route-view/route-view")),N=i(e("./dom-driver/gmail/views/gmail-route-view/gmail-route-view")),B=i(e("./dom-driver/inbox/views/inbox-route-view")),q=i(e("./dom-driver/inbox/views/inbox-dummy-route-view")),U=i(e("./dom-driver/inbox/views/inbox-custom-route-view")),F=i(e("./namespaces/butter-bar")),H=i(e("./namespaces/compose")),z=i(e("./namespaces/conversations")),W=i(e("./namespaces/keyboard")),G=i(e("./namespaces/widgets")),K=i(e("./namespaces/modal")),$=i(e("./namespaces/lists")),J=i(e("./namespaces/nav-menu")),Y=i(e("./namespaces/router")),Q=i(e("./namespaces/search")),X=i(e("./namespaces/toolbars")),Z=i(e("./namespaces/user")),ee=i(e("./namespaces/global")),te=i(e("./dom-driver/gmail/gmail-driver")),re=i(e("./dom-driver/inbox/inbox-driver")),ne=i(e("./lib/logger")),ie=i(e("./lib/is-valid-app-id")),oe=new m.default,ae=new h.default,se=function(e){function t(e,r,n){var i;(0,s.default)(this,t),i=(0,u.default)(this,(0,c.default)(t).call(this)),(0,p.default)((0,d.default)(i),"destroyed",void 0),(0,p.default)((0,d.default)(i),"LOADER_VERSION",void 0),(0,p.default)((0,d.default)(i),"IMPL_VERSION",void 0),(0,p.default)((0,d.default)(i),"Compose",void 0),(0,p.default)((0,d.default)(i),"Conversations",void 0),(0,p.default)((0,d.default)(i),"Keyboard",void 0),(0,p.default)((0,d.default)(i),"User",void 0),(0,p.default)((0,d.default)(i),"Lists",void 0),(0,p.default)((0,d.default)(i),"NavMenu",void 0),(0,p.default)((0,d.default)(i),"Router",void 0),(0,p.default)((0,d.default)(i),"Search",void 0),(0,p.default)((0,d.default)(i),"Toolbars",void 0),(0,p.default)((0,d.default)(i),"ButterBar",void 0),(0,p.default)((0,d.default)(i),"Widgets",void 0),(0,p.default)((0,d.default)(i),"Global",void 0),(0,p.default)((0,d.default)(i),"Modal",void 0),(0,p.default)((0,d.default)(i),"Logger",void 0);var o=n.appName,a=n.appIconUrl,l=n.VERSION,f={driver:e};ae.set((0,d.default)(i),f);var h=new y.default([[L.default,function(t){return new R.default(e,t,h)}],[O.default,function(t){return new R.default(e,t,h)}],[k.default,function(t){return new w.default(t,e,h)}],[j.default,function(t){return new w.default(t,e,h)}],[E.default,function(t){return new x.default(t,r,h,i.Conversations,e)}],[S.default,function(t){return new x.default(t,r,h,i.Conversations,e)}],[I.default,function(t){return new C.default(t,r,e,h)}],[T.default,function(t){return new C.default(t,r,e,h)}],[D.default,function(e){return new A.default(e)}],[M.default,function(e){return new A.default(e)}],[N.default,function(e){return new V.default(e)}],[B.default,function(e){return new V.default(e)}],[q.default,function(e){return new V.default(e)}],[U.default,function(e){return new V.default(e)}],[P.default,function(e){return new V.default(e)}]]);return i.destroyed=!1,i.LOADER_VERSION=l,i.IMPL_VERSION=_.BUILD_VERSION,i.ButterBar=new F.default(r,e),e.setButterBar(i.ButterBar),i.Compose=new H.default(e,h),i.Conversations=new z.default(r,e,h),i.Keyboard=new W.default(r,o,a,e),i.User=new Z.default(e,n),i.Lists=new $.default(r,e,h),i.NavMenu=new J.default(r,e),i.Router=new Y.default(r,e,h),i.Search=new Q.default(r,e),i.Toolbars=new X.default(r,e,h,n),i.Widgets=new G.default(r,e),1===n.REQUESTED_API_VERSION&&(i.Modal=new K.default(r,e,n)),n.REQUESTED_API_VERSION>=2&&(i.Global=new ee.default(r,e,n)),i.Logger=e.getLogger().getAppLogger(),i}return(0,f.default)(t,e),(0,l.default)(t,[{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,(0,v.default)(ae,this).driver.destroy(),this.emit("destroy"))}}]),t}(b.default);r.PlatformImplementation=se}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common/get-or-fail":611,"../common/version":619,"./dom-driver/gmail/gmail-driver":625,"./dom-driver/gmail/views/gmail-attachment-card-view":670,"./dom-driver/gmail/views/gmail-compose-view":673,"./dom-driver/gmail/views/gmail-message-view":700,"./dom-driver/gmail/views/gmail-route-view/gmail-route-view":705,"./dom-driver/gmail/views/gmail-thread-row-view":707,"./dom-driver/gmail/views/gmail-thread-view":710,"./dom-driver/inbox/inbox-driver":747,"./dom-driver/inbox/views/inbox-attachment-card-view":762,"./dom-driver/inbox/views/inbox-compose-view":767,"./dom-driver/inbox/views/inbox-custom-route-view":768,"./dom-driver/inbox/views/inbox-dummy-route-view":771,"./dom-driver/inbox/views/inbox-message-view":772,"./dom-driver/inbox/views/inbox-route-view":774,"./dom-driver/inbox/views/inbox-thread-row-view":775,"./dom-driver/inbox/views/inbox-thread-view":776,"./lib/Membrane":797,"./lib/is-valid-app-id":840,"./lib/logger":843,"./lib/safe-event-emitter":850,"./lib/shared-style":851,"./namespaces/butter-bar":858,"./namespaces/compose":859,"./namespaces/conversations":860,"./namespaces/global":861,"./namespaces/keyboard":862,"./namespaces/lists":863,"./namespaces/modal":864,"./namespaces/nav-menu":865,"./namespaces/router":866,"./namespaces/search":867,"./namespaces/toolbars":868,"./namespaces/user":869,"./namespaces/widgets":870,"./views/compose-view":876,"./views/conversations/attachment-card-view":878,"./views/conversations/message-view":880,"./views/conversations/thread-view":881,"./views/route-view/dummy-route-view-driver":886,"./views/route-view/route-view":888,"./views/thread-row-view":890,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}],872:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=n(e("../lib/safe-event-emitter")),f=function(e){function t(e){var r;return(0,i.default)(this,t),r=(0,a.default)(this,(0,s.default)(t).call(this)),(0,c.default)((0,l.default)(r),"el",void 0),(0,c.default)((0,l.default)(r),"destroyed",!1),r.el=e,r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,this.emit("destroy"),this.el.remove())}}]),t}(d.default);r.default=f},{"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}],873:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=n(e("@babel/runtime-corejs2/core-js/weak-map")),f=n(e("../lib/safe-event-emitter")),p=n(e("../../common/get-or-fail")),h=new d.default,m=function(e){function t(e,r){var n;(0,i.default)(this,t),n=(0,a.default)(this,(0,s.default)(t).call(this)),(0,c.default)((0,l.default)(n),"destroyed",void 0);var o={appToolbarButtonViewDriverPromise:r,appToolbarButtonViewDriver:null};return h.set((0,l.default)(n),o),n.destroyed=!1,o.appToolbarButtonViewDriverPromise.then(function(e){o.appToolbarButtonViewDriver=e,e.getStopper().onValue(function(){n.destroyed=!0,n.emit("destroy")})}),e.getStopper().onValue(function(){n.remove()}),n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"open",value:function(){(0,p.default)(h,this).appToolbarButtonViewDriverPromise.then(function(e){e.open()})}},{key:"close",value:function(){(0,
p.default)(h,this).appToolbarButtonViewDriverPromise.then(function(e){e.close()})}},{key:"remove",value:function(){(0,p.default)(h,this).appToolbarButtonViewDriverPromise.then(function(e){e.destroy()})}}]),t}(f.default);r.default=m},{"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}],874:[function(e,t,r){"use strict";function n(e,t,r){t.getEventStream().onValue(function(t){var r=t.eventName;e.emit(r)}),t.getEventStream().filter(function(e){return"rowClicked"===e.eventName}).onValue(function(e){var t=e.rowDescriptor;t.routeID&&r.goto(t.routeID,t.routeParams),"function"==typeof t.onClick&&t.onClick()}),t.getEventStream().filter(function(e){return"titleLinkClicked"===e.eventName}).onValue(function(t){var r=t.sectionDescriptor;r.onTitleLinkClick&&r.onTitleLinkClick(e)}),t.getEventStream().filter(function(e){return"footerClicked"===e.eventName}).onValue(function(t){var r=t.sectionDescriptor;r.onFooterLinkClick&&r.onFooterLinkClick(e)}),t.getEventStream().onEnd(function(){e.destroyed=!0,e.emit("destroy")})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),u=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),c=i(e("@babel/runtime-corejs2/helpers/inherits")),d=i(e("@babel/runtime-corejs2/helpers/defineProperty")),f=i(e("@babel/runtime-corejs2/core-js/weak-map")),p=e("ud"),h=i(e("../lib/safe-event-emitter")),m=i(e("../../common/get-or-fail")),b=new f.default,_=function(e){function t(e,r){var i;(0,o.default)(this,t),i=(0,s.default)(this,(0,l.default)(t).call(this)),(0,d.default)((0,u.default)(i),"destroyed",void 0);var a={collapsibleSectionViewDriver:e};return b.set((0,u.default)(i),a),i.destroyed=!1,n((0,u.default)(i),e,r),i}return(0,c.default)(t,e),(0,a.default)(t,[{key:"setCollapsed",value:function(e){(0,m.default)(b,this).collapsibleSectionViewDriver.setCollapsed(e)}},{key:"remove",value:function(){this.destroy()}},{key:"destroy",value:function(){(0,m.default)(b,this).collapsibleSectionViewDriver.destroy(),this.removeAllListeners()}}]),t}(h.default),v=(0,p.defn)(t,_);r.default=v},{"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,ud:597}],875:[function(e,t,r){"use strict";function n(e){e.destroyed=!0,e.emit("destroy")}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/object/keys")),a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),c=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=i(e("@babel/runtime-corejs2/helpers/inherits")),f=i(e("@babel/runtime-corejs2/helpers/defineProperty")),p=i(e("@babel/runtime-corejs2/core-js/weak-map")),h=i(e("../lib/safe-event-emitter")),m=i(e("../../common/get-or-fail")),b=new p.default,_=function(e){function t(e,r,i){var o;(0,a.default)(this,t),o=(0,l.default)(this,(0,u.default)(t).call(this)),(0,f.default)((0,c.default)(o),"destroyed",void 0),o.destroyed=!1;var s={optionsPromise:e,composeViewDriver:r,driver:i};return b.set((0,c.default)(o),s),s.optionsPromise.then(function(e){if(!e)return void n((0,c.default)(o));s.composeViewDriver.getStopper().onValue(function(){n((0,c.default)(o))})}),o}return(0,d.default)(t,e),(0,s.default)(t,[{key:"showTooltip",value:function(e){var t=(0,m.default)(b,this);t.driver.getLogger().eventSdkPassive("ComposeButtonView.showTooltip",{keys:(0,o.default)(e)}),t.optionsPromise.then(function(r){r&&t.composeViewDriver.addTooltipToButton(r.buttonViewController,r.buttonDescriptor,e)})}},{key:"closeTooltip",value:function(){var e=(0,m.default)(b,this);e.optionsPromise.then(function(t){t&&e.composeViewDriver.closeButtonTooltip(t.buttonViewController)})}}]),t}(h.default);r.default=_},{"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/object/keys":20,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}],876:[function(e,t,r){(function(n){"use strict";var i=e("@babel/runtime-corejs2/helpers/interopRequireWildcard"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/core-js/array/from")),s=o(e("@babel/runtime-corejs2/regenerator")),l=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=o(e("@babel/runtime-corejs2/helpers/createClass")),d=o(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),f=o(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),p=o(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),h=o(e("@babel/runtime-corejs2/helpers/inherits")),m=o(e("@babel/runtime-corejs2/helpers/defineProperty")),b=o(e("@babel/runtime-corejs2/core-js/weak-map")),_=o(e("../lib/safe-event-emitter")),v=o(e("kefir")),g=o(e("kefir-cast")),y=i(e("ud")),w=o(e("../../common/get-or-fail")),k=o(e("./compose-button-view")),j=y.defonce(t,function(){return new b.default}),x=function(e){function t(e,r,n){var i;(0,u.default)(this,t),i=(0,d.default)(this,(0,f.default)(t).call(this)),(0,m.default)((0,p.default)(i),"destroyed",!1);var o={driver:e,membrane:n,composeViewImplementation:r};return j.set((0,p.default)(i),o),i.on("newListener",function(t){"close"===t?(e.getLogger().deprecationWarning("composeView close event","composeView destroy event"),1!==e.getOpts().REQUESTED_API_VERSION&&console.error("The composeView close event was removed after API version 1")):"messageIDChange"===t&&(e.getLogger().deprecationWarning("composeView messageIDChange event","composeView.getDraftID"),1!==e.getOpts().REQUESTED_API_VERSION&&console.error("The composeView messageIDChange event was removed after API version 1"))}),o.composeViewImplementation.getEventStream().onValue(function(t){if("destroy"===t.eventName)i.destroyed=!0,1===e.getOpts().REQUESTED_API_VERSION&&i.emit("close");else if("messageIDChange"===t.eventName&&1!==e.getOpts().REQUESTED_API_VERSION)return;i.emit(t.eventName,t.data)}),i}return(0,h.default)(t,e),(0,c.default)(t,[{key:"addButton",value:function(e){var t=(0,w.default)(j,this),r=(0,g.default)(v.default,e),n=t.composeViewImplementation.addButton(r,t.driver.getAppId(),{composeView:this});return new k.default(n,t.composeViewImplementation,t.driver)}},{key:"addComposeNotice",value:function(e){return(0,w.default)(j,this).composeViewImplementation.addComposeNotice(e)}},{key:"addStatusBar",value:function(e){return(0,w.default)(j,this).composeViewImplementation.addStatusBar(e)}},{key:"hideNativeStatusBar",value:function(){return(0,w.default)(j,this).composeViewImplementation.hideNativeStatusBar()}},{key:"addRecipientRow",value:function(e){return{destroy:(0,w.default)(j,this).composeViewImplementation.addRecipientRow((0,g.default)(v.default,e))}}},{key:"forceRecipientRowsOpen",value:function(){return(0,w.default)(j,this).composeViewImplementation.forceRecipientRowsOpen()}},{key:"hideNativeRecipientRows",value:function(){return(0,w.default)(j,this).composeViewImplementation.hideNativeRecipientRows()}},{key:"hideRecipientArea",value:function(){return(0,w.default)(j,this).composeViewImplementation.hideRecipientArea()}},{key:"close",value:function(){(0,w.default)(j,this).composeViewImplementation.close()}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sendAndArchive:!1},t=e.sendAndArchive;(0,w.default)(j,this).composeViewImplementation.send({sendAndArchive:t})}},{key:"discard",value:function(){(0,w.default)(j,this).composeViewImplementation.discard()}},{key:"getMetadataForm",value:function(){return(0,w.default)(j,this).composeViewImplementation.getMetadataFormElement()}},{key:"getSubjectInput",value:function(){return(0,w.default)(j,this).composeViewImplementation.getSubjectInput()}},{key:"getBodyElement",value:function(){return(0,w.default)(j,this).composeViewImplementation.getBodyElement()}},{key:"getComposeID",value:function(){var e=(0,w.default)(j,this),t=e.driver,r=e.composeViewImplementation;if(t.getLogger().deprecationWarning("composeView.getComposeID"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return r.getComposeID()}},{key:"getInitialMessageID",value:function(){return(0,w.default)(j,this).composeViewImplementation.getInitialMessageID()}},{key:"getMessageID",value:function(){var e=(0,w.default)(j,this),t=e.driver,r=e.composeViewImplementation;if(t.getLogger().deprecationWarning("composeView.getMessageID","composeView.getDraftID"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return r.getMessageID()}},{key:"getThreadID",value:function(){return(0,w.default)(j,this).composeViewImplementation.getThreadID()}},{key:"getDraftID",value:function(){return(0,w.default)(j,this).composeViewImplementation.getDraftID()}},{key:"getCurrentDraftID",value:function(){return(0,w.default)(j,this).composeViewImplementation.getCurrentDraftID()}},{key:"getHTMLContent",value:function(){return(0,w.default)(j,this).composeViewImplementation.getHTMLContent()}},{key:"getSelectedBodyHTML",value:function(){return(0,w.default)(j,this).composeViewImplementation.getSelectedBodyHTML()||""}},{key:"getSelectedBodyText",value:function(){return(0,w.default)(j,this).composeViewImplementation.getSelectedBodyText()||""}},{key:"getSubject",value:function(){return(0,w.default)(j,this).composeViewImplementation.getSubject()}},{key:"getTextContent",value:function(){return(0,w.default)(j,this).composeViewImplementation.getTextContent()}},{key:"getToRecipients",value:function(){return(0,w.default)(j,this).composeViewImplementation.getToRecipients()}},{key:"getCcRecipients",value:function(){return(0,w.default)(j,this).composeViewImplementation.getCcRecipients()}},{key:"getBccRecipients",value:function(){return(0,w.default)(j,this).composeViewImplementation.getBccRecipients()}},{key:"insertTextIntoBodyAtCursor",value:function(e){return(0,w.default)(j,this).composeViewImplementation.insertBodyTextAtCursor(e)}},{key:"insertHTMLIntoBodyAtCursor",value:function(e){return(0,w.default)(j,this).composeViewImplementation.insertBodyHTMLAtCursor(e)}},{key:"insertLinkChipIntoBodyAtCursor",value:function(e,t,r){return r&&"string"==typeof r&&0===r.indexOf("http")?(0,w.default)(j,this).composeViewImplementation.insertLinkChipIntoBody({text:e,url:t,iconUrl:r}):void console.warn("You must provide a publicly accessible iconUrl")}},{key:"insertLinkIntoBodyAtCursor",value:function(e,t){return(0,w.default)(j,this).composeViewImplementation.insertLinkIntoBody(e,t)}},{key:"isForward",value:function(){return(0,w.default)(j,this).composeViewImplementation.isForward()}},{key:"isInlineReplyForm",value:function(){return(0,w.default)(j,this).composeViewImplementation.isInlineReplyForm()}},{key:"isFullscreen",value:function(){return(0,w.default)(j,this).composeViewImplementation.isFullscreen()}},{key:"setFullscreen",value:function(e){(0,w.default)(j,this).composeViewImplementation.setFullscreen(e)}},{key:"isMinimized",value:function(){return(0,w.default)(j,this).composeViewImplementation.isMinimized()}},{key:"setMinimized",value:function(e){(0,w.default)(j,this).composeViewImplementation.setMinimized(e)}},{key:"setTitleBarColor",value:function(e){return(0,w.default)(j,this).composeViewImplementation.setTitleBarColor(e)}},{key:"setTitleBarText",value:function(e){return(0,w.default)(j,this).composeViewImplementation.setTitleBarText(e)}},{key:"popOut",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,w.default)(j,this).driver.getNextComposeViewDriver(),(0,w.default)(j,this).composeViewImplementation.popOut(),e.next=4,t;case 4:return r=e.sent,e.abrupt("return",(0,w.default)(j,this).membrane.get(r));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"isReply",value:function(){return(0,w.default)(j,this).composeViewImplementation.isReply()}},{key:"setToRecipients",value:function(e){(0,w.default)(j,this).composeViewImplementation.setToRecipients(e)}},{key:"setCcRecipients",value:function(e){(0,w.default)(j,this).composeViewImplementation.setCcRecipients(e)}},{key:"setBccRecipients",value:function(e){(0,w.default)(j,this).composeViewImplementation.setBccRecipients(e)}},{key:"getFromContact",value:function(){return(0,w.default)(j,this).composeViewImplementation.getFromContact()}},{key:"getFromContactChoices",value:function(){return(0,w.default)(j,this).composeViewImplementation.getFromContactChoices()}},{key:"setFromEmail",value:function(e){(0,w.default)(j,this).composeViewImplementation.setFromEmail(e)}},{key:"setSubject",value:function(e){(0,w.default)(j,this).composeViewImplementation.setSubject(e)}},{key:"setBodyHTML",value:function(e){(0,w.default)(j,this).composeViewImplementation.setBodyHTML(e)}},{key:"setBodyText",value:function(e){(0,w.default)(j,this).composeViewImplementation.setBodyText(e)}},{key:"attachFiles",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:if(t[0]instanceof n.Blob){e.next=4;break}throw new Error("parameter must be an array of Blob objects");case 4:return e.abrupt("return",(0,w.default)(j,this).composeViewImplementation.attachFiles((0,a.default)(t)));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"attachInlineFiles",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:if(t[0]instanceof n.Blob){e.next=4;break}throw new Error("parameter must be an array of Blob objects");case 4:return e.abrupt("return",(0,w.default)(j,this).composeViewImplementation.attachInlineFiles((0,a.default)(t)));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"dragFilesIntoCompose",value:function(e){var t=(0,w.default)(j,this),r=t.driver;if(r.getLogger().deprecationWarning("ComposeView.dragFilesIntoCompose","ComposeView.attachInlineFiles"),1!==r.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.attachInlineFiles(e)}},{key:"getElement",value:function(){return(0,w.default)(j,this).composeViewImplementation.getElement()}},{key:"registerRequestModifier",value:function(e){(0,w.default)(j,this).composeViewImplementation.registerRequestModifier(e)}},{key:"replaceSendButton",value:function(e){var t=e.el;return(0,w.default)(j,this).composeViewImplementation.replaceSendButton(t)}},{key:"hideDiscardButton",value:function(){return(0,w.default)(j,this).composeViewImplementation.hideDiscardButton()}},{key:"ensureFormattingToolbarIsHidden",value:function(){(0,w.default)(j,this).composeViewImplementation.ensureFormattingToolbarIsHidden()}},{key:"ensureAppButtonToolbarsAreClosed",value:function(){(0,w.default)(j,this).composeViewImplementation.ensureAppButtonToolbarsAreClosed()}},{key:"overrideEditSubject",value:function(){var e=(0,w.default)(j,this),t=e.driver,r=e.composeViewImplementation;if(t.getLogger().deprecationWarning("composeView.overrideEditSubject"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");"function"==typeof r.overrideEditSubject&&r.overrideEditSubject()}}]),t}(_.default),E=y.defn(t,x);r.default=E}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"./compose-button-view":875,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/asyncToGenerator":35,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/interopRequireWildcard":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,"@babel/runtime-corejs2/regenerator":59,kefir:301,"kefir-cast":299,ud:597}],877:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=n(e("@babel/runtime-corejs2/core-js/weak-map")),f=(n(e("kefir")),n(e("../lib/safe-event-emitter"))),p=n(e("../../common/get-or-fail")),h=new d.default,m=function(e){function t(e){var r;(0,i.default)(this,t),r=(0,a.default)(this,(0,s.default)(t).call(this)),(0,c.default)((0,l.default)(r),"destroyed",!1);var n={contentPanelViewImplementation:e};return h.set((0,l.default)(r),n),r._bindToStreamEvents(),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"remove",value:function(){(0,p.default)(h,this).contentPanelViewImplementation.remove()}},{key:"close",value:function(){(0,p.default)(h,this).contentPanelViewImplementation.close()}},{key:"open",value:function(){(0,p.default)(h,this).contentPanelViewImplementation.open()}},{key:"isActive",value:function(){return(0,p.default)(h,this).contentPanelViewImplementation.isActive()}},{key:"_bindToStreamEvents",value:function(){var e=this,t=(0,p.default)(h,this).contentPanelViewImplementation.getEventStream();t.onValue(function(t){var r=t.eventName;e.emit(r)}),t.onEnd(function(){e.destroyed=!0,e.emit("destroy")})}}]),t}(f.default);r.default=m},{"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301}],878:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=e("ud"),f=(n(e("util")),n(e("../../lib/safe-event-emitter"))),p=function(e){function t(e,r,n){var o;return(0,i.default)(this,t),o=(0,a.default)(this,(0,s.default)(t).call(this)),(0,c.default)((0,l.default)(o),"_attachmentCardImplementation",void 0),(0,c.default)((0,l.default)(o),"_driver",void 0),(0,c.default)((0,l.default)(o),"_membrane",void 0),(0,c.default)((0,l.default)(o),"destroyed",void 0),o.destroyed=!1,o._driver=r,o._membrane=n,o._attachmentCardImplementation=e,o._attachmentCardImplementation.getStopper().onValue(function(){o.destroyed=!0,o.emit("destroy")}),o}return(0,u.default)(t,e),(0,o.default)(t,[{key:"getAttachmentType",value:function(){return this._attachmentCardImplementation.getAttachmentType()}},{key:"addButton",value:function(e){this._attachmentCardImplementation.addButton(e)}},{key:"getTitle",value:function(){return this._attachmentCardImplementation.getTitle()}},{key:"getDownloadURL",value:function(){if(this._driver.getLogger().deprecationWarning("AttachmentCardView.getDownloadURL","AttachmentCardView.addButton -> onClick -> AttachmentCardClickEvent"),1!==this._driver.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this._attachmentCardImplementation.getDownloadURL()}},{key:"getMessageView",value:function(){var e=this._attachmentCardImplementation.getMessageViewDriver();return e?this._membrane.get(e):null}}]),t}(f.default),h=(0,d.defn)(t,p);r.default=h},{"../../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,ud:597,util:600}],879:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=(n(e("kefir")),n(e("kefir-stopper"))),f=(n(e("lodash/once")),n(e("../../lib/safe-event-emitter"))),p=function(e){function t(e,r){var n;return(0,i.default)(this,t),n=(0,a.default)(this,(0,s.default)(t).call(this)),(0,c.default)((0,l.default)(n),"_el",void 0),(0,c.default)((0,l.default)(n),"_iconEl",void 0),(0,c.default)((0,l.default)(n),"_contentEl",void 0),(0,c.default)((0,l.default)(n),"_contentHeaderEl",void 0),(0,c.default)((0,l.default)(n),"_contentBodyEl",void 0),(0,c.default)((0,l.default)(n),"_destroyed",!1),(0,c.default)((0,l.default)(n),"_stopper",(0,d.default)()),(0,c.default)((0,l.default)(n),"_isCollapsed",!0),(0,c.default)((0,l.default)(n),"_lastDescriptor",void 0),n._setupElement(),e.takeUntilBy(n._stopper).onValue(function(e){n._el.setAttribute("data-inboxsdk-sortdate",String(e.sortDate.getTime()));var t=n._lastDescriptor;if(n._lastDescriptor=e,!t||t.iconUrl!==e.iconUrl){var r=document.createElement("img");r.src=e.iconUrl,n._iconEl.innerHTML="",n._iconEl.appendChild(r)}t&&t.collapsedEl===e.collapsedEl||!n._isCollapsed||(t&&t.collapsedEl.remove(),n._contentEl.appendChild(e.collapsedEl)),t&&t.headerEl===e.headerEl||(t&&t.headerEl.remove(),n._contentHeaderEl.appendChild(e.headerEl)),t&&t.bodyEl===e.bodyEl||(t&&t.bodyEl.remove(),n._contentBodyEl.appendChild(e.bodyEl))}).take(1).onValue(r),n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._stopper.destroy(),this.emit("destroy"),this._el.remove())}},{key:"expand",value:function(){this._isCollapsed=!1;var e=this._lastDescriptor;e&&e.collapsedEl.remove(),this._contentEl.appendChild(this._contentHeaderEl),this._contentEl.appendChild(this._contentBodyEl),this._el.classList.remove("inboxsdk__custom_message_view_collapsed"),this.emit("expanded")}},{key:"collapse",value:function(){this._isCollapsed=!0,this._contentHeaderEl.remove(),this._contentBodyEl.remove();var e=this._lastDescriptor;e&&this._contentEl.appendChild(e.collapsedEl),this._el.classList.add("inboxsdk__custom_message_view_collapsed"),this.emit("collapsed")}},{key:"getElement",value:function(){return this._el}},{key:"getSortDate",value:function(){return this._lastDescriptor?this._lastDescriptor.sortDate:null}},{key:"_setupElement",value:function(){var e=this;this._el=document.createElement("div"),this._el.classList.add("inboxsdk__custom_message_view"),this._el.classList.add("inboxsdk__custom_message_view_collapsed"),this._iconEl=document.createElement("div"),this._iconEl.classList.add("inboxsdk__custom_message_view_icon"),this._contentEl=document.createElement("div"),this._contentEl.classList.add("inboxsdk__custom_message_view_content"),this._contentHeaderEl=document.createElement("div"),this._contentHeaderEl.classList.add("inboxsdk__custom_message_view_header"),this._contentBodyEl=document.createElement("div"),this._contentBodyEl.classList.add("inboxsdk__custom_message_view_body"),this._el.appendChild(this._iconEl),this._el.appendChild(this._contentEl),this._el.addEventListener("click",function(t){e._isCollapsed&&(e.expand(),t.preventDefault(),t.stopPropagation())}),this._contentHeaderEl.addEventListener("click",function(t){e.collapse(),t.preventDefault(),t.stopPropagation()})}}]),t}(f.default);r.default=p},{"../../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301,"kefir-stopper":300,"lodash/once":489}],880:[function(e,t,r){"use strict";function n(e,t,r){r.onEnd(function(){e.destroyed=!0,e.emit("destroy"),e.removeAllListeners()}),r.filter(function(e){return"internal"!==e.type&&"contactHover"===e.eventName}).onValue(function(t){e.emit(t.eventName,{contactType:t.contactType,contact:t.contact,messageView:e,threadView:e.getThreadView()})}),e.isLoaded()?(0,m.default)(function(){e.emit("load",{messageView:e})}):r.filter(function(e){return"messageLoad"===e.eventName}).onValue(function(t){e.emit("load",{messageView:e})}),r.filter(function(e){return"viewStateChange"===e.eventName}).onValue(function(r){e.emit("viewStateChange",{oldViewState:t.Conversations.MessageViewViewStates[r.oldValue],newViewState:t.Conversations.MessageViewViewStates[r.newValue],messageView:e})})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/array/from")),a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),c=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=i(e("@babel/runtime-corejs2/helpers/inherits")),f=i(e("@babel/runtime-corejs2/helpers/defineProperty")),p=i(e("@babel/runtime-corejs2/core-js/weak-map")),h=e("ud"),m=i(e("asap")),b=i(e("../../lib/safe-event-emitter")),_=i(e("../../../common/get-or-fail")),v=(i(e("./attachment-card-view")),e("../../namespaces/conversations")),g=(0,h.defonce)(t,function(){return new p.default}),y=function(e){function t(e,r,i,o,s){var d;(0,a.default)(this,t),d=(0,l.default)(this,(0,u.default)(t).call(this)),(0,f.default)((0,c.default)(d),"destroyed",!1);var p={messageViewImplementation:e,membrane:i,Conversations:o,driver:s,linksInBody:null};return g.set((0,c.default)(d),p),n((0,c.default)(d),p,e.getEventStream()),d}return(0,d.default)(t,e),(0,s.default)(t,[{key:"addAttachmentCardView",value:function(e){var t=(0,_.default)(g,this),r=t.messageViewImplementation,n=t.membrane,i=r.addAttachmentCard(e),o=n.get(i);return i.getPreviewClicks().onValue(function(t){e.previewOnClick&&e.previewOnClick({attachmentCardView:o,preventDefault:function(){return t.preventDefault()}})}),o}},{key:"addAttachmentCardViewNoPreview",value:function(e){return this.addAttachmentCardView(e)}},{key:"addAttachmentsToolbarButton",value:function(e){var t=(0,_.default)(g,this),r=t.messageViewImplementation,n=t.membrane;r.addButtonToDownloadAllArea({tooltip:e.tooltip,iconUrl:e.iconUrl,onClick:function(){var t=r.getAttachmentCardViewDrivers().map(function(e){return n.get(e)});e.onClick({attachmentCardViews:t})}})}},{key:"addToolbarButton",value:function(e){if("function"!=typeof e.onClick||"string"!=typeof e.title||!v.MessageViewToolbarSectionNames.hasOwnProperty(e.section))throw new Error("Missing required properties on MessageViewToolbarButtonDescriptor object");(0,_.default)(g,this).messageViewImplementation.addMoreMenuItem(e)}},{key:"getBodyElement",value:function(){return(0,_.default)(g,this).messageViewImplementation.getContentsElement()}},{key:"getMessageID",value:function(){return(0,_.default)(g,this).driver.getLogger().deprecationWarning("messageView.getMessageID","messageView.getMessageIDAsync"),(0,_.default)(g,this).messageViewImplementation.getMessageID()}},{key:"getMessageIDAsync",value:function(){return(0,_.default)(g,this).messageViewImplementation.getMessageIDAsync()}},{key:"getFileAttachmentCardViews",value:function(){var e=(0,_.default)(g,this),t=e.messageViewImplementation,r=e.membrane;return t.getAttachmentCardViewDrivers().filter(function(e){return"FILE"===e.getAttachmentType()}).map(function(e){return r.get(e)})}},{key:"getAttachmentCardViews",value:function(){var e=(0,_.default)(g,this),t=e.driver;if(t.getLogger().deprecationWarning("MessageView.getAttachmentCardViews","MessageView.getFileAttachmentCardViews"),
1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.getFileAttachmentCardViews()}},{key:"isElementInQuotedArea",value:function(e){return(0,_.default)(g,this).messageViewImplementation.isElementInQuotedArea(e)}},{key:"isLoaded",value:function(){return(0,_.default)(g,this).messageViewImplementation.isLoaded()}},{key:"getLinksInBody",value:function(){var e=this,t=(0,_.default)(g,this);if(!t.linksInBody){var r=this.getBodyElement().querySelectorAll("a");t.linksInBody=(0,o.default)(r).map(function(t){return{text:t.textContent,html:t.innerHTML,href:t.href,element:t,isInQuotedArea:e.isElementInQuotedArea(t)}})}return t.linksInBody}},{key:"getSender",value:function(){return(0,_.default)(g,this).messageViewImplementation.getSender()}},{key:"getRecipients",value:function(){return(0,_.default)(g,this).driver.getLogger().deprecationWarning("MessageView.getRecipients","MessageView.getRecipientEmailAddresses() or MessageView.getRecipientsFull()"),this.getRecipientEmailAddresses().map(function(e){return{emailAddress:e,name:null}})}},{key:"getRecipientEmailAddresses",value:function(){return(0,_.default)(g,this).messageViewImplementation.getRecipientEmailAddresses()}},{key:"getRecipientsFull",value:function(){return(0,_.default)(g,this).messageViewImplementation.getRecipientsFull()}},{key:"getThreadView",value:function(){var e=(0,_.default)(g,this),t=e.messageViewImplementation;return e.membrane.get(t.getThreadViewDriver())}},{key:"getDateString",value:function(){return(0,_.default)(g,this).messageViewImplementation.getDateString()}},{key:"addAttachmentIcon",value:function(e){return(0,_.default)(g,this).messageViewImplementation.addAttachmentIcon(e)}},{key:"getViewState",value:function(){var e=(0,_.default)(g,this);return e.Conversations.MessageViewViewStates[e.messageViewImplementation.getViewState()]}},{key:"hasOpenReply",value:function(){var e=(0,_.default)(g,this),t=e.driver;e.messageViewImplementation;if(t.getLogger().deprecationWarning("MessageView.hasOpenReply"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return(0,_.default)(g,this).messageViewImplementation.hasOpenReply()}}]),t}(b.default),w=(0,h.defn)(t,y);r.default=w},{"../../../common/get-or-fail":611,"../../lib/safe-event-emitter":850,"../../namespaces/conversations":860,"./attachment-card-view":878,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,asap:77,ud:597}],881:[function(e,t,r){"use strict";function n(e,t){t.getEventStream().onEnd(function(){e.destroyed=!0,e.emit("destroy"),e.removeAllListeners()}),t.getEventStream().filter(function(e){return"internal"!==e.type&&"contactHover"===e.eventName}).onValue(function(t){var r=(0,v.default)(g,e),n=r.membrane;e.emit(t.eventName,{contactType:t.contactType,messageView:n.get(t.messageViewDriver),contact:t.contact,threadView:e})})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),u=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),c=i(e("@babel/runtime-corejs2/helpers/inherits")),d=i(e("@babel/runtime-corejs2/helpers/defineProperty")),f=i(e("@babel/runtime-corejs2/core-js/weak-map")),p=e("ud"),h=i(e("../../lib/safe-event-emitter")),m=i(e("kefir-cast")),b=i(e("kefir")),_=i(e("../content-panel-view")),v=i(e("../../../common/get-or-fail")),g=(0,p.defonce)(t,function(){return new f.default}),y=function(e){function t(e,r,i,a){var c;(0,o.default)(this,t),c=(0,s.default)(this,(0,l.default)(t).call(this)),(0,d.default)((0,u.default)(c),"destroyed",!1);var f={threadViewImplementation:e,appId:r,driver:i,membrane:a};return g.set((0,u.default)(c),f),n((0,u.default)(c),e),c}return(0,c.default)(t,e),(0,a.default)(t,[{key:"addSidebarContentPanel",value:function(e){var t=(0,m.default)(b.default,e).toProperty(),r=(0,v.default)(g,this);r.driver.getLogger().eventSdkPassive("threadView.addSidebarContentPanel");var n=r.threadViewImplementation.addSidebarContentPanel(t);return n?new _.default(n):null}},{key:"addNoticeBar",value:function(){return(0,v.default)(g,this).threadViewImplementation.addNoticeBar()}},{key:"registerHiddenCustomMessageNoticeProvider",value:function(e){return(0,v.default)(g,this).threadViewImplementation.registerHiddenCustomMessageNoticeProvider(e)}},{key:"addCustomMessage",value:function(e){var t=(0,m.default)(b.default,e).toProperty(),r=(0,v.default)(g,this);return r.driver.getLogger().eventSdkPassive("threadView.addCustomMessage"),r.threadViewImplementation.addCustomMessage(t)}},{key:"getMessageViews",value:function(){var e=(0,v.default)(g,this),t=e.threadViewImplementation,r=e.membrane;return t.getMessageViewDrivers().filter(function(e){return e.isLoaded()}).map(function(e){return r.get(e)})}},{key:"getMessageViewsAll",value:function(){var e=(0,v.default)(g,this),t=e.threadViewImplementation,r=e.membrane;return t.getMessageViewDrivers().map(function(e){return r.get(e)})}},{key:"getSubject",value:function(){return(0,v.default)(g,this).threadViewImplementation.getSubject()}},{key:"getThreadID",value:function(){return(0,v.default)(g,this).driver.getLogger().deprecationWarning("threadView.getThreadID","threadView.getThreadIDAsync"),(0,v.default)(g,this).threadViewImplementation.getThreadID()}},{key:"getThreadIDAsync",value:function(){return(0,v.default)(g,this).threadViewImplementation.getThreadIDAsync()}},{key:"addLabel",value:function(){return(0,v.default)(g,this).threadViewImplementation.addLabel()}}]),t}(h.default),w=(0,p.defn)(t,y);r.default=w},{"../../../common/get-or-fail":611,"../../lib/safe-event-emitter":850,"../content-panel-view":877,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301,"kefir-cast":299,ud:597}],882:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=n(e("../lib/safe-event-emitter")),f=function(e){function t(e,r){var n;return(0,i.default)(this,t),n=(0,a.default)(this,(0,s.default)(t).call(this)),(0,c.default)((0,l.default)(n),"chord",void 0),(0,c.default)((0,l.default)(n),"description",void 0),n.chord=e,n.description=r,n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"remove",value:function(){this.emit("destroy")}}]),t}(d.default);r.default=f},{"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}],883:[function(e,t,r){"use strict";function n(e,t){switch(t.eventName){case"expanded":case"collapsed":e.emit(t.eventName)}}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),u=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),c=i(e("@babel/runtime-corejs2/helpers/inherits")),d=i(e("@babel/runtime-corejs2/core-js/weak-map")),f=i(e("../lib/safe-event-emitter")),p=i(e("kefir")),h=i(e("kefir-cast")),m=i(e("../../common/defer")),b=i(e("../../common/get-or-fail")),_=i(e("./nav-item-view")),v=new d.default,g=function(e){function t(e,r,n){var i;(0,o.default)(this,t),i=(0,s.default)(this,(0,l.default)(t).call(this));var a={appId:e,driver:r,labelName:n,deferred:(0,m.default)(),navItemViews:[],navItemViewDriver:null};return v.set((0,u.default)(i),a),i}return(0,c.default)(t,e),(0,a.default)(t,[{key:"addNavItem",value:function(e){var t=(0,b.default)(v,this),r=(0,h.default)(p.default,e).toProperty(),n=new _.default(t.appId,t.driver,r);return t.deferred.promise.then(function(e){var i=e.addNavItem(t.appId,r);n.setNavItemViewDriver(i)}),t.navItemViews.push(n),n}},{key:"setNavItemViewDriver",value:function(e){var t=this;if(e){var r=(0,b.default)(v,this);r.navItemViewDriver=e,e.getEventStream().onValue(function(e){return n(t,e)}),r.deferred.resolve(e)}}},{key:"isCollapsed",value:function(){return"collapsed"===localStorage.getItem("inboxsdk__nativeNavItem__state_"+(0,b.default)(v,this).labelName)}},{key:"setCollapsed",value:function(e){var t=(0,b.default)(v,this);t.navItemViewDriver?t.navItemViewDriver.setCollapsed(e):localStorage.setItem("inboxsdk__nativeNavItem__state_"+t.labelName,e?"collapsed":"expanded")}}]),t}(f.default);r.default=g},{"../../common/defer":608,"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"./nav-item-view":884,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301,"kefir-cast":299}],884:[function(e,t,r){"use strict";function n(e,t,r,n){var i=(0,a.default)(n,2),o=i[0],s=i[1];switch(s.eventName){case"click":if(o.type===w.default.GROUPER&&"function"==typeof r.isUsingMaterialUI&&r.isUsingMaterialUI())return;if("function"==typeof o.onClick){var l=!1,u={preventDefault:function(){l=!0}};if(o.onClick(u),l)break}o.routeID?r.goto(o.routeID,o.routeParams):t.toggleCollapse();break;case"expanded":case"collapsed":e.emit(s.eventName)}}function i(e,t){var r=(0,a.default)(t,2),n=r[0],i=r[1];e.setActive(n&&i.getRouteID()===n.routeID&&(0,m.default)(n.routeParams||{},i.getParams()))}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/helpers/slicedToArray")),s=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=o(e("@babel/runtime-corejs2/helpers/createClass")),u=o(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),c=o(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),d=o(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=o(e("@babel/runtime-corejs2/helpers/inherits")),p=o(e("@babel/runtime-corejs2/helpers/defineProperty")),h=o(e("@babel/runtime-corejs2/core-js/weak-map")),m=o(e("lodash/isEqual")),b=o(e("kefir")),_=o(e("kefir-cast")),v=o(e("../../common/defer")),g=o(e("../../common/get-or-fail")),y=o(e("../lib/safe-event-emitter")),w=o(e("../constants/nav-item-types")),k=new h.default,j=function(e){function t(e,r,n){var i;(0,s.default)(this,t),i=(0,u.default)(this,(0,c.default)(t).call(this)),(0,p.default)((0,d.default)(i),"destroyed",!1);var o={appId:e,driver:r,navItemDescriptorPropertyStream:n,deferred:(0,v.default)(),navItemViews:[],navItemViewDriver:null};return k.set((0,d.default)(i),o),r.getStopper().onValue(i.remove.bind((0,d.default)(i))),i}return(0,f.default)(t,e),(0,l.default)(t,[{key:"addNavItem",value:function(e){if(this.destroyed)throw new Error("this nav item view does not exist");var r=(0,g.default)(k,this),n=r.driver,i=r.appId,o=r.navItemViews,a=(0,_.default)(b.default,e).toProperty(),s=new t(i,n,a);return r.deferred.promise.then(function(e){var t=e.addNavItem(r.appId,a);s.setNavItemViewDriver(t)}),o.push(s),s}},{key:"setNavItemViewDriver",value:function(e){var t=this,r=(0,g.default)(k,this);if(this.destroyed)return void r.deferred.resolve(e);var o=r.driver;r.navItemViewDriver=e,r.navItemDescriptorPropertyStream.sampledBy(e.getEventStream(),function(e,t){return[e,t]}).onValue(function(r){return n(t,e,o,r)}),b.default.combine([r.navItemDescriptorPropertyStream,o.getRouteViewDriverStream()]).takeUntilBy(e.getEventStream().filter(function(){return!1}).beforeEnd(function(){return null})).onValue(function(t){i(e,t)}),r.deferred.resolve(e)}},{key:"remove",value:function(){if(!this.destroyed){var e=(0,g.default)(k,this),t=e.navItemViews;this.destroyed=!0,this.emit("destroy"),t.forEach(function(e){e.remove()}),e.deferred.promise.then(function(e){e.destroy()})}}},{key:"isCollapsed",value:function(){var e=(0,g.default)(k,this),t=e.navItemViewDriver;return!!t&&t.isCollapsed()}},{key:"setCollapsed",value:function(e){(0,g.default)(k,this).deferred.promise.then(function(t){t.setCollapsed(e)})}}]),t}(y.default);r.default=j},{"../../common/defer":608,"../../common/get-or-fail":611,"../constants/nav-item-types":620,"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,"@babel/runtime-corejs2/helpers/slicedToArray":54,kefir:301,"kefir-cast":299,"lodash/isEqual":474}],885:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/weak-map")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),u=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),c=n(e("@babel/runtime-corejs2/helpers/inherits")),d=e("ud"),f=n(e("./route-view")),p=n(e("../../../common/get-or-fail")),h=function(e){function t(e){var r;(0,o.default)(this,t),r=(0,s.default)(this,(0,l.default)(t).call(this,e));var n={routeViewDriver:e};return m.set((0,u.default)(r),n),r}return(0,c.default)(t,e),(0,a.default)(t,[{key:"setFullWidth",value:function(e){(0,p.default)(m,this).routeViewDriver.setFullWidth(e)}},{key:"getElement",value:function(){var e=(0,p.default)(m,this),t=e.routeViewDriver,r=t.getCustomViewElement();if(!r)throw new Error("Should not happen");return r}}]),t}(f.default),m=(0,d.defonce)(t,function(){return new i.default}),b=(0,d.defn)(t,h);r.default=b},{"../../../common/get-or-fail":611,"./route-view":888,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,ud:597}],886:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=(n(e("kefir")),n(e("kefir-bus"))),l=n(e("kefir-stopper")),u=e("ud"),c=function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"_eventStream",(0,s.default)()),(0,a.default)(this,"_stopper",(0,l.default)())}return(0,o.default)(e,[{key:"getRouteType",value:function(){return"UNKNOWN"}},{key:"getRouteID",value:function(){return"UNKNOWN"}},{key:"getParams",value:function(){return{}}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy()}}]),e}(),d=(0,u.defn)(t,c);r.default=d},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,kefir:301,"kefir-bus":298,"kefir-stopper":300,ud:597}],887:[function(e,t,r){"use strict";function n(e,t){e.getEventStream().onEnd(function(){(0,v.default)(y,t).sectionViews.forEach(function(e){e.destroy()})})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/core-js/weak-map")),a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),c=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=i(e("@babel/runtime-corejs2/helpers/inherits")),f=e("ud"),p=i(e("./route-view")),h=i(e("kefir")),m=i(e("kefir-cast")),b=i(e("../collapsible-section-view")),_=i(e("../section-view")),v=i(e("../../../common/get-or-fail")),g=function(e){function t(e,r,i){var o;(0,a.default)(this,t),o=(0,l.default)(this,(0,u.default)(t).call(this,e));var s={routeViewDriver:e,driver:r,appId:i,sectionViews:[]};return y.set((0,c.default)(o),s),n(e,(0,c.default)(o)),o}return(0,d.default)(t,e),(0,s.default)(t,[{key:"addCollapsibleSection",value:function(e){var t=(0,v.default)(y,this),r=t.routeViewDriver.addCollapsibleSection((0,m.default)(h.default,e).toProperty(),t.appId),n=new b.default(r,t.driver);return t.sectionViews.push(n),n}},{key:"addSection",value:function(e){var t=(0,v.default)(y,this),r=t.routeViewDriver.addSection((0,m.default)(h.default,e).toProperty(),t.appId),n=new _.default(r,t.driver);return t.sectionViews.push(n),n}},{key:"refresh",value:function(){(0,v.default)(y,this).routeViewDriver.refresh()}}]),t}(p.default),y=new o.default,w=(0,f.defn)(t,g);r.default=w},{"../../../common/get-or-fail":611,"../collapsible-section-view":874,"../section-view":889,"./route-view":888,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301,"kefir-cast":299,ud:597}],888:[function(e,t,r){"use strict";function n(e,t){e.getEventStream().onEnd(function(){t.destroyed=!0,t.emit("destroy"),t.removeAllListeners()})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),u=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),c=i(e("@babel/runtime-corejs2/helpers/inherits")),d=i(e("@babel/runtime-corejs2/helpers/defineProperty")),f=i(e("@babel/runtime-corejs2/core-js/weak-map")),p=i(e("../../lib/safe-event-emitter")),h=e("ud"),m=i(e("../../../common/get-or-fail")),b=new f.default,_=function(e){function t(e){var r;(0,o.default)(this,t),r=(0,s.default)(this,(0,l.default)(t).call(this)),(0,d.default)((0,u.default)(r),"destroyed",void 0);var i={routeID:null,routeType:null,params:null,routeViewDriver:e};return b.set((0,u.default)(r),i),r.destroyed=!1,n(e,(0,u.default)(r)),r}return(0,c.default)(t,e),(0,a.default)(t,[{key:"getRouteID",value:function(){var e=(0,m.default)(b,this);return e.routeID||(e.routeID=e.routeViewDriver.getRouteID()),e.routeID}},{key:"getRouteType",value:function(){var e=(0,m.default)(b,this);return e.routeType||(e.routeType=e.routeViewDriver.getRouteType()),e.routeType}},{key:"getParams",value:function(){var e=(0,m.default)(b,this);return e.params||(e.params=e.routeViewDriver.getParams()),e.params}}]),t}(p.default),v=(0,h.defn)(t,_);r.default=v},{"../../../common/get-or-fail":611,"../../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,ud:597}],889:[function(e,t,r){"use strict";function n(e,t,r){t.getEventStream().onValue(function(t){e.emit(t.eventName)}),t.getEventStream().filter(function(e){return"rowClicked"===e.eventName}).onValue(function(e){var t=e.rowDescriptor;t.routeID&&r.goto(t.routeID,t.routeParams),"function"==typeof t.onClick&&t.onClick()}),t.getEventStream().filter(function(e){return"summaryClicked"===e.eventName}).onValue(function(t){var r=t.sectionDescriptor;r.onTitleLinkClick&&r.onTitleLinkClick(e)}),t.getEventStream().filter(function(e){return"footerClicked"===e.eventName}).onValue(function(t){var r=t.sectionDescriptor;r.onFooterLinkClick&&r.onFooterLinkClick(e)}),t.getEventStream().onEnd(function(){e.destroyed=!0,e.emit("destroy")})}var i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=i(e("@babel/runtime-corejs2/helpers/createClass")),s=i(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),u=i(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),c=i(e("@babel/runtime-corejs2/helpers/inherits")),d=i(e("@babel/runtime-corejs2/helpers/defineProperty")),f=i(e("@babel/runtime-corejs2/core-js/weak-map")),p=e("ud"),h=i(e("../lib/safe-event-emitter")),m=i(e("../../common/get-or-fail")),b=new f.default,_=function(e){function t(e,r){var i;(0,o.default)(this,t),i=(0,s.default)(this,(0,l.default)(t).call(this)),(0,d.default)((0,u.default)(i),"destroyed",void 0);var a={sectionViewDriver:e};return b.set((0,u.default)(i),a),i.destroyed=!1,n((0,u.default)(i),e,r),i}return(0,c.default)(t,e),(0,a.default)(t,[{key:"remove",value:function(){this.destroy()}},{key:"destroy",value:function(){(0,m.default)(b,this).sectionViewDriver.destroy(),this.removeAllListeners()}}]),t}(h.default),v=(0,p.defn)(t,_);r.default=v},{"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,ud:597}],890:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/core-js/promise")),o=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=n(e("@babel/runtime-corejs2/helpers/createClass")),s=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),u=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),c=n(e("@babel/runtime-corejs2/helpers/inherits")),d=n(e("@babel/runtime-corejs2/helpers/defineProperty")),f=n(e("@babel/runtime-corejs2/core-js/weak-map")),p=n(e("../lib/safe-event-emitter")),h=n(e("../../common/get-or-fail")),m=new f.default,b=function(e){function t(e){var r;(0,o.default)(this,t),r=(0,s.default)(this,(0,l.default)(t).call(this)),(0,d.default)((0,u.default)(r),"destroyed",void 0);var n={threadRowViewDriver:e};return m.set((0,u.default)(r),n),r.destroyed=!1,e.getEventStream().onEnd(function(){r.destroyed=!0,r.emit("destroy")}),e.setUserView((0,u.default)(r)),r}return(0,c.default)(t,e),(0,a.default)(t,[{key:"addLabel",value:function(e){(0,h.default)(m,this).threadRowViewDriver.addLabel(e)}},{key:"addImage",value:function(e){(0,h.default)(m,this).threadRowViewDriver.addImage(e)}},{key:"addButton",value:function(e){(0,h.default)(m,this).threadRowViewDriver.addButton(e)}},{key:"addActionButton",value:function(e){(0,h.default)(m,this).threadRowViewDriver.addActionButton(e)}},{key:"addAttachmentIcon",value:function(e){(0,h.default)(m,this).threadRowViewDriver.addAttachmentIcon(e)}},{key:"replaceDate",value:function(e){(0,h.default)(m,this).threadRowViewDriver.replaceDate(e)}},{key:"replaceDraftLabel",value:function(e){(0,h.default)(m,this).threadRowViewDriver.replaceDraftLabel(e)}},{key:"getSubject",value:function(){return(0,h.default)(m,this).threadRowViewDriver.getSubject()}},{key:"getDateString",value:function(){return(0,h.default)(m,this).threadRowViewDriver.getDateString()}},{key:"getThreadID",value:function(){return(0,h.default)(m,this).threadRowViewDriver.getThreadID()}},{key:"getThreadIDAsync",value:function(){return(0,h.default)(m,this).threadRowViewDriver.getThreadIDAsync()}},{key:"getThreadIDIfStable",value:function(){return this.getVisibleMessageCount()>0?this.getThreadID():null}},{key:"getThreadIDIfStableAsync",value:function(){return this.getVisibleMessageCount()>0?this.getThreadIDAsync():i.default.resolve(null)}},{key:"getDraftID",value:function(){return(0,h.default)(m,this).threadRowViewDriver.getDraftID()}},{key:"getVisibleDraftCount",value:function(){return(0,h.default)(m,this).threadRowViewDriver.getVisibleDraftCount()}},{key:"getVisibleMessageCount",value:function(){return(0,h.default)(m,this).threadRowViewDriver.getVisibleMessageCount()}},{key:"getContacts",value:function(){return(0,h.default)(m,this).threadRowViewDriver.getContacts()}}]),t}(p.default);r.default=b},{"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/promise":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}],891:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=n(e("kefir-stopper")),l=function(){function e(t){var r=this;(0,i.default)(this,e),(0,a.default)(this,"_activateFunction",void 0),(0,a.default)(this,"_view",void 0),(0,a.default)(this,"_stopper",(0,s.default)()),this._activateFunction=t.activateFunction||t.onClick,this._view=t.buttonView,this._view.getEventStream().filter(function(e){return"click"===e.eventName}).onValue(function(){r.activate()})}return(0,o.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._activateFunction=null,this._view.destroy(),this._stopper.destroy()}},{key:"update",value:function(e){this.getView().update(e),this.setActivateFunction(e&&(e.activateFunction||e.onClick))}},{key:"getView",value:function(){return this._view}},{key:"setActivateFunction",value:function(e){this._activateFunction=e}},{key:"activate",value:function(){this._activateFunction&&this._activateFunction({})}}]),e}();r.default=l},{"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"kefir-stopper":300}],892:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/defineProperty")),s=e("ud"),l=n(e("kefir-stopper")),u=n(e("./dropdown-view")),c=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_view",void 0),(0,a.default)(this,"_dropdownShowFunction",void 0),(0,a.default)(this,"_dropdownView",void 0),(0,a.default)(this,"_DropdownViewDriverClass",void 0),(0,a.default)(this,"_dropdownPositionOptions",void 0),(0,a.default)(this,"_stopper",(0,l.default)()),this._dropdownShowFunction=t.dropdownShowFunction,this._DropdownViewDriverClass=t.dropdownViewDriverClass;var r=this._view=t.buttonView;this._dropdownPositionOptions=t.dropdownPositionOptions,r.getElement().setAttribute("aria-haspopup","true"),r.getElement().setAttribute("aria-pressed","false"),r.getElement().setAttribute("aria-expanded","false"),this._bindToViewEvents()}return(0,o.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._view&&(this._view.destroy(),
this._view=null),this._dropdownView&&(this._dropdownView.close(),this._dropdownView=null),this._stopper.destroy()}},{key:"update",value:function(e){this.getView().update(e),this.setDropdownShowFunction(e&&e.dropdownShowFunction)}},{key:"getView",value:function(){if(!this._view)throw new Error("Already destroyed");return this._view}},{key:"setDropdownShowFunction",value:function(e){this._dropdownShowFunction=e}},{key:"showDropdown",value:function(){this.hideDropdown();var e=this._view;if(!e)throw new Error("Already destroyed");e.activate();var t=this._dropdownView=new u.default(new this._DropdownViewDriverClass,e.getElement());this._dropdownPositionOptions&&t.setPlacementOptions(this._dropdownPositionOptions),t.on("destroy",this._dropdownClosed.bind(this)),this._dropdownShowFunction&&this._dropdownShowFunction({dropdown:this._dropdownView}),e.getElement().setAttribute("aria-pressed","true"),e.getElement().setAttribute("aria-expanded","true")}},{key:"hideDropdown",value:function(){this._dropdownView&&this._dropdownView.close()}},{key:"isDropdownVisible",value:function(){return!!this._dropdownView}},{key:"_bindToViewEvents",value:function(){var e=this;if(!this._view)throw new Error("Already destroyed");this._view.getEventStream().filter(function(e){return"click"===e.eventName}).onValue(function(){e._toggleDropdownState()})}},{key:"_toggleDropdownState",value:function(){this._dropdownView?this._dropdownView.close():this.showDropdown()}},{key:"_dropdownClosed",value:function(){var e=this._view;e&&(e.deactivate(),this._dropdownView=null,e.getElement().setAttribute("aria-pressed","false"),e.getElement().setAttribute("aria-expanded","false"))}}]),e}(),d=(0,s.defn)(t,c);r.default=d},{"./dropdown-view":893,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"kefir-stopper":300,ud:597}],893:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/toConsumableArray")),o=n(e("@babel/runtime-corejs2/helpers/objectSpread")),a=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=n(e("@babel/runtime-corejs2/helpers/createClass")),l=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),c=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=n(e("@babel/runtime-corejs2/helpers/inherits")),f=n(e("@babel/runtime-corejs2/helpers/defineProperty")),p=n(e("asap")),h=n(e("../../lib/safe-event-emitter")),m=n(e("kefir")),b=n(e("../../lib/dom/make-mutation-observer-chunked-stream")),_=n(e("../../lib/ScrollableContainByScreen")),v=n(e("../../lib/dom/outsideClicksAndEscape")),g=function(e){function t(e,r,n){var s;(0,a.default)(this,t),s=(0,l.default)(this,(0,u.default)(t).call(this)),(0,f.default)((0,c.default)(s),"_dropdownViewDriver",void 0),(0,f.default)((0,c.default)(s),"destroyed",!1),(0,f.default)((0,c.default)(s),"closed",!1),(0,f.default)((0,c.default)(s),"_options",void 0),(0,f.default)((0,c.default)(s),"_userPlacementOptions",{hAlign:"left"}),(0,f.default)((0,c.default)(s),"_scrollableContainByScreen",null),(0,f.default)((0,c.default)(s),"_didInsertContainerEl",void 0),(0,f.default)((0,c.default)(s),"el",void 0),s._dropdownViewDriver=e,s._options=(0,o.default)({},e.getDropdownOptions&&e.getDropdownOptions(),n),s.el=e.getContentElement();var d=e.getContainerElement();document.contains(d)?s._didInsertContainerEl=!1:(document.body.insertBefore(d,document.body.firstElementChild),s._didInsertContainerEl=!0),d.hasAttribute("tabindex")||d.setAttribute("tabindex","-1");var h=m.default.fromEvents((0,c.default)(s),"destroy"),g=[r,d];s._options.extraElementsToIgnore&&g.push.apply(g,(0,i.default)(s._options.extraElementsToIgnore)),(0,v.default)(g).takeUntilBy(h).filter(function(e){var t=!1,r={type:e.type,cause:e.cause,cancel:function(){t=!0}};return s.emit("preautoclose",r),!t}).onValue(function(){s.close()}),s._options.manualPosition||(d.style.position="fixed",(0,p.default)(function(){s.closed||(m.default.fromEvents((0,c.default)(s),"_placementOptionsUpdated").toProperty(function(){return null}).takeUntilBy(h).onValue(function(){s._scrollableContainByScreen&&s._scrollableContainByScreen.destroy(),s._scrollableContainByScreen=new _.default(d,r,s._userPlacementOptions)}),(0,b.default)(e.getContentElement(),{childList:!0,attributes:!0,characterData:!0,subtree:!0}).throttle(200).takeUntilBy(h).onValue(function(){return s.reposition()}))}));var y=document.activeElement;return(0,p.default)(function(){s.closed||document.activeElement===y&&d.focus()}),s}return(0,d.default)(t,e),(0,s.default)(t,[{key:"setPlacementOptions",value:function(e){if(this._options.manualPosition)return void console.error("DropdownView.setPlacementOptions() was called on a manually-positioned DropdownView.");this._userPlacementOptions=(0,o.default)({},this._userPlacementOptions,e),this.emit("_placementOptionsUpdated")}},{key:"close",value:function(){this.destroyed||(this.destroyed=this.closed=!0,this._scrollableContainByScreen&&this._scrollableContainByScreen.destroy(),this.emit("destroy"),this._didInsertContainerEl&&this._dropdownViewDriver.getContainerElement().remove(),this._dropdownViewDriver.destroy())}},{key:"reposition",value:function(){this._scrollableContainByScreen&&this._scrollableContainByScreen.reposition()}}]),t}(h.default);r.default=g},{"../../lib/ScrollableContainByScreen":798,"../../lib/dom/make-mutation-observer-chunked-stream":815,"../../lib/dom/outsideClicksAndEscape":818,"../../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/objectSpread":49,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,"@babel/runtime-corejs2/helpers/toConsumableArray":57,asap:77,kefir:301}],894:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=n(e("kefir")),f=(n(e("kefir-bus")),e("ud")),p=n(e("../lib/safe-event-emitter")),h=n(e("../views/compose-view")),m=function(e){function t(e){var r;return(0,i.default)(this,t),r=(0,a.default)(this,(0,s.default)(t).call(this)),(0,c.default)((0,l.default)(r),"destroyed",!1),(0,c.default)((0,l.default)(r),"_driver",void 0),r._driver=e,r._driver.getSlideAnimationDone().onValue(function(){r.emit("slideAnimationDone")}),r._driver.getClosingStream().onValue(function(){r.emit("closing")}),r._driver.getClosedStream().onValue(function(){r.destroyed=!0,r.emit("destroy")}),r._driver.getPreAutoCloseStream().onValue(function(e){r.emit("preautoclose",e)}),document.dispatchEvent(new CustomEvent("inboxSDKcloseDrawers",{bubbles:!1,cancelable:!1,detail:null})),d.default.fromEvents(document,"inboxSDKcloseDrawers").takeUntilBy(d.default.fromEvents((0,l.default)(r),"closing")).onValue(function(){r.close()}),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"close",value:function(){this._driver.close()}},{key:"associateComposeView",value:function(e,t){if(!(e instanceof h.default))throw new Error("argument was not a ComposeView");this._driver.associateComposeView(e,t)}},{key:"disassociateComposeView",value:function(){this._driver.disassociateComposeView()}}]),t}(p.default),b=(0,f.defn)(t,m);r.default=b},{"../lib/safe-event-emitter":850,"../views/compose-view":876,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301,"kefir-bus":298,ud:597}],895:[function(e,t,r){"use strict";function n(e){g&&g.modalView===e?(g=null,w.length>0?w.pop().show():v&&v.destroy()):w.indexOf(e)>-1&&w.splice(w.indexOf(e),1)}function i(e,t){g?(y.emit(g.modalView),w.push(g.modalView),g.modalViewDriver.getModalContainerElement().remove()):v||(v=e._driver.createBackdrop(502),v.getStopper().onValue(function(){v=null,w.slice().forEach(function(e){e.close()}),g&&g.modalView.close()})),g={modalView:e,modalViewDriver:t}}var o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),u=o(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),c=o(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=o(e("@babel/runtime-corejs2/helpers/inherits")),f=o(e("@babel/runtime-corejs2/helpers/defineProperty")),p=o(e("kefir")),h=o(e("kefir-bus")),m=e("ud"),b=o(e("../lib/safe-event-emitter")),_=function(e){function t(e){var r;return(0,a.default)(this,t),r=(0,l.default)(this,(0,u.default)(t).call(this)),(0,f.default)((0,c.default)(r),"destroyed",!1),(0,f.default)((0,c.default)(r),"_driver",void 0),(0,f.default)((0,c.default)(r),"_modalViewDriver",void 0),r._driver=e.driver,r._modalViewDriver=e.modalViewDriver,e.modalViewDriver.getEventStream().filter(function(e){return"closeClick"===e.eventName}).onValue(function(){r.close()}),e.modalViewDriver.getEventStream().onEnd(function(){r._modalViewDriver=null,r.destroyed=!0,n((0,c.default)(r)),r.emit("destroy")}),r}return(0,d.default)(t,e),(0,s.default)(t,[{key:"show",value:function(){var e=this,t=this._modalViewDriver;if(!t)throw new Error("Modal can not be shown after being hidden");var r=p.default.merge([p.default.fromEvents(this,"destroy"),y.filter(function(t){return t===e})]);document.body.appendChild(t.getModalContainerElement()),t.getModalContainerElement().focus(),p.default.fromEvents(document.body,"keydown").filter(function(e){return 27===e.keyCode}).takeUntilBy(r).onValue(function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e.close()}),i(this,t)}},{key:"setTitle",value:function(e){if(!this._modalViewDriver)throw new Error("Modal can not be shown after being hidden");this._modalViewDriver.setTitle(e)}},{key:"close",value:function(){this._modalViewDriver&&this._modalViewDriver.destroy()}},{key:"addButton",value:function(e){throw new Error("not implemented")}}]),t}(b.default),v=null,g=null,y=(0,h.default)(),w=[],k=(0,m.defn)(t,_);r.default=k},{"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52,kefir:301,"kefir-bus":298,ud:597}],896:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/helpers/defineProperty")),d=n(e("@babel/runtime-corejs2/core-js/weak-map")),f=n(e("../../common/get-or-fail")),p=n(e("../lib/safe-event-emitter")),h=new d.default,m=function(e){function t(e){var r;(0,i.default)(this,t),r=(0,a.default)(this,(0,s.default)(t).call(this)),(0,c.default)((0,l.default)(r),"destroyed",!1);var n={driver:e.moleViewDriver};return h.set((0,l.default)(r),n),n.driver.getEventStream().onValue(function(e){r.emit(e.eventName,e.detail)}),n.driver.getEventStream().onEnd(function(){r.destroyed=!0,r.emit("destroy")}),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"close",value:function(){(0,f.default)(h,this).driver.destroy()}},{key:"setTitle",value:function(e){(0,f.default)(h,this).driver.setTitle(e)}},{key:"setMinimized",value:function(e){(0,f.default)(h,this).driver.setMinimized(e)}},{key:"getMinimized",value:function(){return(0,f.default)(h,this).driver.getMinimized()}}]),t}(p.default);r.default=m},{"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/defineProperty":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}],897:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime-corejs2/helpers/classCallCheck")),o=n(e("@babel/runtime-corejs2/helpers/createClass")),a=n(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),l=n(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),u=n(e("@babel/runtime-corejs2/helpers/inherits")),c=n(e("@babel/runtime-corejs2/core-js/weak-map")),d=n(e("../../common/get-or-fail")),f=n(e("../lib/safe-event-emitter")),p=new c.default,h=function(e){function t(e){var r;(0,i.default)(this,t),r=(0,a.default)(this,(0,s.default)(t).call(this));var n={driver:e.topMessageBarViewDriver};return p.set((0,l.default)(r),n),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"remove",value:function(){(0,d.default)(p,this).driver.remove()}}]),t}(f.default);r.default=h},{"../../common/get-or-fail":611,"../lib/safe-event-emitter":850,"@babel/runtime-corejs2/core-js/object/define-property":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":34,"@babel/runtime-corejs2/helpers/classCallCheck":36,"@babel/runtime-corejs2/helpers/createClass":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":41,"@babel/runtime-corejs2/helpers/inherits":42,"@babel/runtime-corejs2/helpers/interopRequireDefault":43,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":52}]},{},[857]);
//# sourceMappingURL=platform-implementation.js.map
